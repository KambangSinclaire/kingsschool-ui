var i3=Object.defineProperty,a3=Object.defineProperties,l3=Object.getOwnPropertyDescriptors,em=Object.getOwnPropertySymbols,Uk=Object.prototype.hasOwnProperty,Wk=Object.prototype.propertyIsEnumerable,Vk=(De,Oe,Je)=>Oe in De?i3(De,Oe,{enumerable:!0,configurable:!0,writable:!0,value:Je}):De[Oe]=Je,wt=(De,Oe)=>{for(var Je in Oe||(Oe={}))Uk.call(Oe,Je)&&Vk(De,Je,Oe[Je]);if(em)for(var Je of em(Oe))Wk.call(Oe,Je)&&Vk(De,Je,Oe[Je]);return De},he=(De,Oe)=>a3(De,l3(Oe)),jk=(De,Oe)=>{var Je={};for(var ts in De)Uk.call(De,ts)&&Oe.indexOf(ts)<0&&(Je[ts]=De[ts]);if(null!=De&&em)for(var ts of em(De))Oe.indexOf(ts)<0&&Wk.call(De,ts)&&(Je[ts]=De[ts]);return Je};!function(){"use strict";var De=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},lo=function(t){return{eq:t}},ln=lo(function(t,e){return t===e}),Bu=ln,Lu=function(t){return lo(function(e,n){if(e.length!==n.length)return!1;for(var s=e.length,r=0;r<s;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},$n=function(t){return lo(function(e,n){var s=Object.keys(e),r=Object.keys(n);if(!function(t,e){return function(t,e){return lo(function(n,s){return t.eq(e(n),e(s))})}(Lu(t),function(n){return function(t,e){return Array.prototype.slice.call(t).sort(e)}(n,e)})}(Bu).eq(s,r))return!1;for(var a=s.length,f=0;f<a;f++){var m=s[f];if(!t.eq(e[m],n[m]))return!1}return!0})},ui=lo(function(t,e){if(t===e)return!0;var n=De(t);return n===De(e)&&(function(t){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(t)}(n)?t===e:"array"===n?Lu(ui).eq(t,e):"object"===n&&$n(ui).eq(t,e))});const nm=Object.getPrototypeOf,Iu=(t,e,n)=>{var s;return!!n(t,e.prototype)||(null===(s=t.constructor)||void 0===s?void 0:s.name)===e.name},Ml=t=>e=>(t=>{const e=typeof t;return null===t?"null":"object"===e&&Array.isArray(t)?"array":"object"===e&&Iu(t,String,(n,s)=>s.isPrototypeOf(n))?"string":e})(e)===t,Bl=t=>e=>typeof e===t,Fu=t=>e=>t===e,co=(t,e)=>tn(t)&&Iu(t,e,(n,s)=>nm(n)===s),At=Ml("string"),tn=Ml("object"),pr=t=>co(t,Object),Fe=Ml("array"),br=Fu(null),fi=Bl("boolean"),_n=Fu(void 0),An=t=>null==t,Mt=t=>!An(t),oe=Bl("function"),Ts=Bl("number"),yr=(t,e)=>{if(Fe(t)){for(let n=0,s=t.length;n<s;++n)if(!e(t[n]))return!1;return!0}return!1},Ft=()=>{},zs=(t,e)=>(...n)=>t(e.apply(null,n)),ya=(t,e)=>n=>t(e(n)),st=t=>()=>t,fn=t=>t,$u=(t,e)=>t===e;function ut(t,...e){return(...n)=>{const s=e.concat(n);return t.apply(null,s)}}const Ll=t=>e=>!t(e),sm=t=>()=>{throw new Error(t)},Ca=t=>t(),Cr=t=>{t()},xe=st(!1),Ne=st(!0);class S{constructor(e,n){this.tag=e,this.value=n}static some(e){return new S(!0,e)}static none(){return S.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?S.some(e(this.value)):S.none()}bind(e){return this.tag?e(this.value):S.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:S.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(null!=e?e:"Called getOrDie on None")}static from(e){return Mt(e)?S.some(e):S.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}S.singletonNone=new S(!1);const xr=Array.prototype.slice,zu=Array.prototype.indexOf,Hu=Array.prototype.push,Vu=(t,e)=>zu.call(t,e),ke=(t,e)=>Vu(t,e)>-1,Me=(t,e)=>{for(let n=0,s=t.length;n<s;n++)if(e(t[n],n))return!0;return!1},Kt=(t,e)=>{const n=t.length,s=new Array(n);for(let r=0;r<n;r++)s[r]=e(t[r],r);return s},Z=(t,e)=>{for(let n=0,s=t.length;n<s;n++)e(t[n],n)},us=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},vr=(t,e)=>{const n=[],s=[];for(let r=0,a=t.length;r<a;r++){const f=t[r];(e(f,r)?n:s).push(f)}return{pass:n,fail:s}},dt=(t,e)=>{const n=[];for(let s=0,r=t.length;s<r;s++){const a=t[s];e(a,s)&&n.push(a)}return n},me=(t,e,n)=>(us(t,(s,r)=>{n=e(n,s,r)}),n),It=(t,e,n)=>(Z(t,(s,r)=>{n=e(n,s,r)}),n),Be=(t,e,n)=>{for(let s=0,r=t.length;s<r;s++){const a=t[s];if(e(a,s))return S.some(a);if(n(a,s))break}return S.none()},ue=(t,e)=>Be(t,e,xe),Vt=(t,e)=>{for(let n=0,s=t.length;n<s;n++)if(e(t[n],n))return S.some(n);return S.none()},Il=t=>{const e=[];for(let n=0,s=t.length;n<s;++n){if(!Fe(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Hu.apply(e,t[n])}return e},fs=(t,e)=>Il(Kt(t,e)),fe=(t,e)=>{for(let n=0,s=t.length;n<s;++n)if(!0!==e(t[n],n))return!1;return!0},ae=t=>{const e=xr.call(t,0);return e.reverse(),e},_r=(t,e)=>dt(t,n=>!ke(e,n)),Uo=(t,e)=>{const n={};for(let s=0,r=t.length;s<r;s++){const a=t[s];n[String(a)]=e(a,s)}return n},Sr=(t,e)=>{const n=xr.call(t,0);return n.sort(e),n},va=(t,e)=>e>=0&&e<t.length?S.some(t[e]):S.none(),Ke=t=>va(t,0),es=t=>va(t,t.length-1),dn=oe(Array.from)?Array.from:t=>xr.call(t),wr=(t,e)=>{for(let n=0;n<t.length;n++){const s=e(t[n],n);if(s.isSome())return s}return S.none()},ds=Object.keys,Uu=Object.hasOwnProperty,ie=(t,e)=>{const n=ds(t);for(let s=0,r=n.length;s<r;s++){const a=n[s];e(t[a],a)}},uo=(t,e)=>zn(t,(n,s)=>({k:s,v:e(n,s)})),zn=(t,e)=>{const n={};return ie(t,(s,r)=>{const a=e(s,r);n[a.k]=a.v}),n},hs=t=>(e,n)=>{t[n]=e},_a=(t,e,n,s)=>(ie(t,(a,f)=>{(e(a,f)?n:s)(a,f)}),{}),ms=(t,e)=>{const n={};return _a(t,e,hs(n),Ft),n},di=(t,e)=>{const n=[];return ie(t,(s,r)=>{n.push(e(s,r))}),n},kr=t=>di(t,fn),ce=(t,e)=>$t(t,e)?S.from(t[e]):S.none(),$t=(t,e)=>Uu.call(t,e),Qt=(t,e)=>$t(t,e)&&null!=t[e],be=t=>{const e={};return Z(t,n=>{e[n]={}}),ds(e)},Sa=Array.isArray,Er=(t,e,n)=>{let s,r;if(!t)return!1;if(n=n||t,void 0!==t.length){for(s=0,r=t.length;s<r;s++)if(!1===e.call(n,t[s],s,t))return!1}else for(s in t)if($t(t,s)&&!1===e.call(n,t[s],s,t))return!1;return!0},Ae=(t,e)=>{const n=[];return Er(t,(s,r)=>{n.push(e(s,r,t))}),n},gs=(t,e)=>{const n=[];return Er(t,(s,r)=>{(!e||e(s,r,t))&&n.push(s)}),n},wa=(t,e)=>{if(t)for(let n=0,s=t.length;n<s;n++)if(t[n]===e)return n;return-1},hn=(t,e,n,s)=>{let r=_n(n)?t[0]:n;for(let a=0;a<t.length;a++)r=e.call(s,r,t[a],a);return r},ns=(t,e,n)=>{let s,r;for(s=0,r=t.length;s<r;s++)if(e.call(n,t[s],s,t))return s;return-1},Rs=t=>t[t.length-1],fo=t=>{let n,e=!1;return(...s)=>(e||(e=!0,n=t.apply(null,s)),n)},Hn=()=>Rr(0,0),Rr=(t,e)=>({major:t,minor:e}),Wo={nu:Rr,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Hn():((t,e)=>{const n=((t,e)=>{for(let n=0;n<t.length;n++){const s=t[n];if(s.test(e))return s}})(t,e);if(!n)return{major:0,minor:0};const s=r=>Number(e.replace(n,"$"+r));return Rr(s(1),s(2))})(t,n)},unknown:Hn},mi=(t,e)=>{const n=String(e).toLowerCase();return ue(t,s=>s.search(n))},Ue=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Te=(t,e)=>-1!==t.indexOf(e),Vn=(t,e)=>Ue(t,e,0),Dr=(t,e)=>Ue(t,e,t.length-e.length),ka=t=>e=>e.replace(t,""),Un=ka(/^\s+|\s+$/g),zl=ka(/^\s+/g),Nr=ka(/\s+$/g),mn=t=>t.length>0,ho=t=>!mn(t),Yu=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?S.none():S.some(n)},Ea=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,gn=t=>e=>Te(e,t),rm=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Te(t,"edge/")&&Te(t,"chrome")&&Te(t,"safari")&&Te(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ea],search:t=>Te(t,"chrome")&&!Te(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Te(t,"msie")||Te(t,"trident")},{name:"Opera",versionRegexes:[Ea,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:gn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:gn("firefox")},{name:"Safari",versionRegexes:[Ea,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Te(t,"safari")||Te(t,"mobile/"))&&Te(t,"applewebkit")}],im=[{name:"Windows",search:gn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Te(t,"iphone")||Te(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:gn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:gn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:gn("linux"),versionRegexes:[]},{name:"Solaris",search:gn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:gn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:gn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Or={browsers:st(rm),oses:st(im)},ps="Chromium",Ul="Firefox",Aa=t=>{const e=t.current,s=r=>()=>e===r;return{current:e,version:t.version,isEdge:s("Edge"),isChromium:s(ps),isIE:s("IE"),isOpera:s("Opera"),isFirefox:s(Ul),isSafari:s("Safari")}},Ta_unknown=()=>Aa({current:void 0,version:Wo.unknown()}),Ta_nu=Aa,bi=(st("Edge"),st(ps),st("IE"),st("Opera"),st(Ul),st("Safari"),"Windows"),Ci="Android",mo="Solaris",Xu="FreeBSD",Qu="ChromeOS",Zu=t=>{const e=t.current,s=r=>()=>e===r;return{current:e,version:t.version,isWindows:s(bi),isiOS:s("iOS"),isAndroid:s(Ci),isMacOS:s("macOS"),isLinux:s("Linux"),isSolaris:s(mo),isFreeBSD:s(Xu),isChromeOS:s(Qu)}},Ra_unknown=()=>Zu({current:void 0,version:Wo.unknown()}),Ra_nu=Zu,Ju=(st(bi),st("iOS"),st(Ci),st("Linux"),st("macOS"),st(mo),st(Xu),st(Qu),t=>window.matchMedia(t).matches);let Gl=fo(()=>((t,e,n)=>{const s=Or.browsers(),r=Or.oses(),a=e.bind(g=>((t,e)=>wr(e.brands,n=>{const s=n.brand.toLowerCase();return ue(t,r=>{var a;return s===(null===(a=r.brand)||void 0===a?void 0:a.toLowerCase())}).map(r=>({current:r.name,version:Wo.nu(parseInt(n.version,10),0)}))}))(s,g)).orThunk(()=>((t,e)=>mi(t,e).map(n=>{const s=Wo.detect(n.versionRegexes,e);return{current:n.name,version:s}}))(s,t)).fold(Ta_unknown,Ta_nu),f=((t,e)=>mi(t,e).map(n=>{const s=Wo.detect(n.versionRegexes,e);return{current:n.name,version:s}}))(r,t).fold(Ra_unknown,Ra_nu),m=((t,e,n,s)=>{const r=t.isiOS()&&!0===/ipad/i.test(n),a=t.isiOS()&&!r,f=t.isiOS()||t.isAndroid(),m=f||s("(pointer:coarse)"),g=r||!a&&f&&s("(min-device-width:768px)"),y=a||f&&!g,x=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),_=!y&&!g&&!x;return{isiPad:st(r),isiPhone:st(a),isTablet:st(g),isPhone:st(y),isTouch:st(m),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:st(x),isDesktop:st(_)}})(f,a,t,n);return{browser:a,os:f,deviceType:m}})(navigator.userAgent,S.from(navigator.userAgentData),Ju));const ss=()=>Gl(),lm=navigator.userAgent,Xl=ss(),os=Xl.browser,Ps=Xl.os,Hs=Xl.deviceType,cm=-1!==lm.indexOf("Windows Phone"),le={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:os.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!os.isIE(),windowsPhone:cm,browser:{current:os.current,version:os.version,isChromium:os.isChromium,isEdge:os.isEdge,isFirefox:os.isFirefox,isIE:os.isIE,isOpera:os.isOpera,isSafari:os.isSafari},os:{current:Ps.current,version:Ps.version,isAndroid:Ps.isAndroid,isChromeOS:Ps.isChromeOS,isFreeBSD:Ps.isFreeBSD,isiOS:Ps.isiOS,isLinux:Ps.isLinux,isMacOS:Ps.isMacOS,isSolaris:Ps.isSolaris,isWindows:Ps.isWindows},deviceType:{isDesktop:Hs.isDesktop,isiPad:Hs.isiPad,isiPhone:Hs.isiPhone,isPhone:Hs.isPhone,isTablet:Hs.isTablet,isTouch:Hs.isTouch,isWebView:Hs.isWebView}},Ql=/^\s*|\s*$/g,Zl=t=>null==t?"":(""+t).replace(Ql,""),Jl=(t,e)=>e?!("array"!==e||!Sa(t))||typeof t===e:void 0!==t,ef=function(t,e,n,s){s=s||this,t&&(n&&(t=t[n]),Er(t,(r,a)=>{if(!1===e.call(s,r,a,n))return!1;ef(r,e,n,s)}))},W={trim:Zl,isArray:Sa,is:Jl,toArray:t=>{if(Sa(t))return t;{const e=[];for(let n=0,s=t.length;n<s;n++)e[n]=t[n];return e}},makeMap:(t,e,n)=>{let s;for(e=e||",","string"==typeof(t=t||[])&&(t=t.split(e)),n=n||{},s=t.length;s--;)n[t[s]]={};return n},each:Er,map:Ae,grep:gs,inArray:wa,hasOwn:$t,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const s=e[n];for(const r in s)if($t(s,r)){const a=s[r];void 0!==a&&(t[r]=a)}}return t},walk:ef,resolve:(t,e)=>{let n,s;for(e=e||window,n=0,s=(t=t.split(".")).length;n<s&&(e=e[t[n]]);n++);return e},explode:(t,e)=>!t||Jl(t,"array")?t:Ae(t.split(e||","),Zl),_addCacheSuffix:t=>{const e=le.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Re=(t,e,n=$u)=>t.exists(s=>n(s,e)),pn=(t,e,n)=>t.isSome()&&e.isSome()?S.some(n(t.getOrDie(),e.getOrDie())):S.none(),Pa=(t,e)=>t?S.some(e):S.none();"undefined"!=typeof window||Function("return this;")();const Ce=t=>t.dom.nodeName.toLowerCase(),of=t=>t.dom.nodeType,vi=t=>e=>of(e)===t,rs=vi(1),Wn=vi(3),dm=vi(9),_i=vi(11),nc=(t,e,n)=>{if(!(At(n)||fi(n)||Ts(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},de=(t,e,n)=>{nc(t.dom,e,n)},jn=(t,e)=>{const n=t.dom;ie(e,(s,r)=>{nc(n,r,s)})},Ye=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},Fr=(t,e)=>S.from(Ye(t,e)),Na=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},Rn=(t,e)=>{t.dom.removeAttribute(e)},lf=t=>It(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),sc=(t,e)=>{const n=Ye(t,e);return void 0===n||""===n?[]:n.split(" ")},Si=t=>void 0!==t.dom.classList,uf=t=>sc(t,"class"),Oa=(t,e)=>((t,e,n)=>{const r=sc(t,e).concat([n]);return de(t,e,r.join(" ")),!0})(t,"class",e),oc=(t,e)=>((t,e,n)=>{const s=dt(sc(t,e),r=>r!==n);return s.length>0?de(t,e,s.join(" ")):Rn(t,e),!1})(t,"class",e),wi=(t,e)=>{Si(t)?t.dom.classList.add(e):Oa(t,e)},rc=t=>{0===(Si(t)?t.dom.classList:uf(t)).length&&Rn(t,"class")},ic=(t,e)=>{Si(t)?t.dom.classList.remove(e):oc(t,e),rc(t)},ac=(t,e)=>Si(t)&&t.dom.classList.contains(e),Ds=t=>void 0!==t.style&&oe(t.style.getPropertyValue),ki=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},D_fromHtml=(t,e)=>{const s=(e||document).createElement("div");if(s.innerHTML=t,!s.hasChildNodes()||s.childNodes.length>1){const r="HTML does not have a single root node";throw console.error(r,t),new Error(r)}return ki(s.childNodes[0])},D_fromTag=(t,e)=>{const s=(e||document).createElement(t);return ki(s)},D_fromText=(t,e)=>{const s=(e||document).createTextNode(t);return ki(s)},D_fromDom=ki,D_fromPoint=(t,e,n)=>S.from(t.dom.elementFromPoint(e,n)).map(ki),hf=(t,e)=>{const n=[],s=a=>(n.push(a),e(a));let r=e(t);do{r=r.bind(s)}while(r.isSome());return n},Ns=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const s=n;if(void 0!==s.matches)return s.matches(e);if(void 0!==s.msMatchesSelector)return s.msMatchesSelector(e);if(void 0!==s.webkitMatchesSelector)return s.webkitMatchesSelector(e);if(void 0!==s.mozMatchesSelector)return s.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Ei=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,ee=(t,e)=>t.dom===e.dom,bn=(t,e)=>{const n=t.dom,s=e.dom;return n!==s&&n.contains(s)},lc=t=>D_fromDom(t.dom.ownerDocument),Us=t=>dm(t)?t:lc(t),bf=t=>D_fromDom(Us(t).dom.defaultView),cn=t=>S.from(t.dom.parentNode).map(D_fromDom),Ws=t=>S.from(t.dom.previousSibling).map(D_fromDom),qo=t=>S.from(t.dom.nextSibling).map(D_fromDom),cc=t=>ae(hf(t,Ws)),uc=t=>hf(t,qo),en=t=>Kt(t.dom.childNodes,D_fromDom),$r=(t,e)=>S.from(t.dom.childNodes[e]).map(D_fromDom),Ma=t=>$r(t,0),fc=t=>$r(t,t.dom.childNodes.length-1),yf=t=>t.dom.childNodes.length,dc=t=>_i(t)&&Mt(t.dom.host),xf=oe(Element.prototype.attachShadow)&&oe(Node.prototype.getRootNode),vf=st(xf),Ko=xf?t=>D_fromDom(t.dom.getRootNode()):Us,hc=t=>dc(t)?t:(t=>{const e=t.dom.head;if(null==e)throw new Error("Head is not available yet");return D_fromDom(e)})(Us(t)),_f=t=>D_fromDom(t.dom.host),Ai=t=>{if(vf()&&Mt(t.target)){const e=D_fromDom(t.target);if(rs(e)&&xm(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return Ke(n)}}return S.from(t.target)},xm=t=>Mt(t.dom.shadowRoot),Yo=t=>{const e=Wn(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(t=>{const e=Ko(t);return dc(e)?S.some(e):S.none()})(D_fromDom(e)).fold(()=>n.body.contains(e),ya(Yo,_f))},Sf=(t,e,n)=>{if(!At(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);Ds(t)&&t.style.setProperty(e,n)},kf=(t,e,n)=>{Sf(t.dom,e,n)},Ba=(t,e)=>{const n=t.dom;ie(e,(s,r)=>{Sf(n,r,s)})},Os=(t,e)=>{const n=t.dom,r=window.getComputedStyle(n).getPropertyValue(e);return""!==r||Yo(t)?r:Ti(n,e)},Ti=(t,e)=>Ds(t)?t.style.getPropertyValue(e):"",La=(t,e)=>{const s=Ti(t.dom,e);return S.from(s).filter(r=>r.length>0)},Ef=t=>{const e={},n=t.dom;if(Ds(n))for(let s=0;s<n.style.length;s++){const r=n.style.item(s);e[r]=n.style[r]}return e},zr=(t,e)=>{((t,e)=>{Ds(t)&&t.style.removeProperty(e)})(t.dom,e),Re(Fr(t,"style").map(Un),"")&&Rn(t,"style")},qn=(t,e)=>{cn(t).each(s=>{s.dom.insertBefore(e.dom,t.dom)})},go=(t,e)=>{qo(t).fold(()=>{cn(t).each(r=>{He(r,e)})},s=>{qn(s,e)})},Tf=(t,e)=>{Ma(t).fold(()=>{He(t,e)},s=>{t.dom.insertBefore(e.dom,s.dom)})},He=(t,e)=>{t.dom.appendChild(e.dom)},po=(t,e)=>{Z(e,n=>{He(t,n)})},Hr=t=>{t.dom.textContent="",Z(en(t),e=>{Pe(e)})},Pe=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},js=t=>{const e=en(t);e.length>0&&((t,e)=>{Z(e,(n,s)=>{go(0===s?t:e[s-1],n)})})(t,e),Pe(t)},Pf=t=>t.dom.innerHTML,pc=(t,e)=>{const s=lc(t).dom,r=D_fromDom(s.createDocumentFragment()),a=((t,e)=>{const s=(e||document).createElement("div");return s.innerHTML=t,en(D_fromDom(s))})(e,s);po(r,a),Hr(t),He(t,r)},Em=(t,e,n,s)=>((t,e,n,s,r)=>{const a=((t,e)=>n=>{t(n)&&e((t=>{const e=D_fromDom(Ai(t).getOr(t.target)),n=()=>t.stopPropagation(),s=()=>t.preventDefault(),r=zs(s,n);return((t,e,n,s,r,a,f)=>({target:t,x:e,y:n,stop:s,prevent:r,kill:a,raw:f}))(e,t.clientX,t.clientY,n,s,r,t)})(n))})(n,s);return t.dom.addEventListener(e,a,false),{unbind:ut(Am,t,e,a,false)}})(t,e,n,s),Am=(t,e,n,s)=>{t.dom.removeEventListener(e,n,s)},yc=(t,e)=>({left:t,top:e,translate:(s,r)=>yc(t+s,e+r)}),Go=yc,Ri=(t,e)=>void 0!==t?t:void 0!==e?e:0,Cc=t=>{const e=t.dom,s=e.ownerDocument.body;return s===e?Go(s.offsetLeft,s.offsetTop):Yo(t)?(t=>{const e=t.getBoundingClientRect();return Go(e.left,e.top)})(e):Go(0,0)},xc=t=>{const e=void 0!==t?t.dom:document;return Go(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},vc=(t,e,n)=>{const r=(void 0!==n?n.dom:document).defaultView;r&&r.scrollTo(t,e)},_c=(t,e)=>{ss().browser.isSafari()&&oe(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Nf=(t,e,n,s)=>({x:t,y:e,width:n,height:s,right:t+n,bottom:e+s}),Of=t=>{const e=void 0===t?window:t,s=xc(D_fromDom(e.document));return(t=>{const e=void 0===t?window:t;return ss().browser.isFirefox()?S.none():S.from(e.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return Nf(s.left,s.top,r.clientWidth,r.clientHeight)},r=>Nf(Math.max(r.pageLeft,s.left),Math.max(r.pageTop,s.top),r.width,r.height))},bs=t=>e=>!!e&&e.nodeType===t,Vr=t=>!!t&&!Object.getPrototypeOf(t),vt=bs(1),is=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return ke(e,s)}return!1}},Pn=(t,e)=>{const n=e.toLowerCase().split(" ");return s=>{if(vt(s))for(let r=0;r<n.length;r++){const a=s.ownerDocument.defaultView.getComputedStyle(s,null);if((a?a.getPropertyValue(t):null)===n[r])return!0}return!1}},Kn=t=>e=>vt(e)&&e.hasAttribute(t),Xo=t=>vt(t)&&t.hasAttribute("data-mce-bogus"),Di=t=>vt(t)&&"TABLE"===t.tagName,Bf=t=>e=>!(!vt(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),wc=is(["textarea","input"]),rt=bs(3),Pm=bs(4),Ia=bs(7),Lf=bs(8),kc=bs(9),Fa=bs(11),Le=is(["br"]),If=is(["img"]),qs=Bf("true"),ge=Bf("false"),Ni=is(["td","th"]),Ms=is(["video","audio","object","embed"]),Dm=ss().browser,Ff=t=>ue(t,rs),Ks=(t,e)=>t.children&&ke(t.children,e);var $f=(t,e,n,s,r)=>t(n,s)?S.some(n):oe(r)&&r(n)?S.none():e(n,s,r);const Ur=(t,e,n)=>{let s=t.dom;const r=oe(n)?n:xe;for(;s.parentNode;){s=s.parentNode;const a=D_fromDom(s);if(e(a))return S.some(a);if(r(a))break}return S.none()},za=(t,e,n)=>$f((r,a)=>a(r),Ur,t,e,n),Oi=(t,e,n)=>Ur(t,s=>Ns(s,e),n),Mi=(t,e)=>((t,e)=>{const n=void 0===e?document:e.dom;return Ei(n)?S.none():S.from(n.querySelector(t)).map(D_fromDom)})(e,t),Qo=(t,e,n)=>$f((r,a)=>Ns(r,a),Oi,t,e,n),zf=(t,e={})=>{let n=0;const s={},r=D_fromDom(t),a=Us(r),f=e.maxLoadTime||5e3,_=A=>new Promise((R,N)=>{let L;const q=W._addCacheSuffix(A),H=(A=>ce(s,A).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})))(q);s[q]=H,H.count++;const V=(ht,lt)=>{Z(ht,Cr),H.status=lt,H.passed=[],H.failed=[],L&&(L.onload=null,L.onerror=null,L=null)},ot=()=>V(H.passed,2),Y=()=>V(H.failed,3),J=()=>{var ht,lt;ht=()=>{const ht=t.styleSheets;let lt=ht.length;for(;lt--;){const Yt=ht[lt].ownerNode;if(Yt&&Yt.id===L.id)return ot(),!0}return!1},lt=J,ht()||(Date.now()-St<f?setTimeout(lt):Y())};if(R&&H.passed.push(R),N&&H.failed.push(N),1===H.status)return;if(2===H.status)return void ot();if(3===H.status)return void Y();H.status=1;const et=D_fromTag("link",a.dom);jn(et,{rel:"stylesheet",type:"text/css",id:H.id});const St=Date.now();e.contentCssCors&&de(et,"crossOrigin","anonymous"),e.referrerPolicy&&de(et,"referrerpolicy",e.referrerPolicy),L=et.dom,L.onload=J,L.onerror=Y,(A=>{He(hc(r),A)})(et),de(et,"href",q)}),k=A=>{const R=W._addCacheSuffix(A);ce(s,R).each(N=>{0==--N.count&&(delete s[R],(A=>{const R=hc(r);Mi(R,"#"+A).each(Pe)})(N.id))})};return{load:_,loadAll:A=>Promise.allSettled(Kt(A,N=>_(N).then(st(N)))).then(N=>{const L=vr(N,q=>"fulfilled"===q.status);return L.fail.length>0?Promise.reject(Kt(L.fail,q=>q.reason)):Kt(L.pass,q=>q.value)}),unload:k,unloadAll:A=>{Z(A,R=>{k(R)})},_setReferrerPolicy:A=>{e.referrerPolicy=A}}},Vf=(()=>{const t=new WeakMap;return{forElement:(n,s)=>{const a=Ko(n).dom;return S.from(t.get(a)).getOrThunk(()=>{const f=zf(a,s);return t.set(a,f),f})}}})();class We{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",e),this.node}findSibling(e,n,s,r){let a,f;if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){if(a=e[s],a)return a;for(f=e.parentNode;f&&f!==this.rootNode;f=f.parentNode)if(a=f[s],a)return a}}}findPreviousNode(e,n,s,r){let a,f,m;if(e){if(a=e[s],this.rootNode&&a===this.rootNode)return;if(a){if(!r)for(m=a[n];m;m=m[n])if(!m[n])return m;return a}if(f=e.parentNode,f&&f!==this.rootNode)return f}}}const ys=t=>{let e;return n=>(e=e||Uo(t,Ne),$t(e,Ce(n)))},Bi=ys(["h1","h2","h3","h4","h5","h6"]),Ls=ys(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Ac=t=>rs(t)&&!Ls(t),Wr=t=>rs(t)&&"br"===Ce(t),Yf=ys(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Tc=ys(["ul","ol","dl"]),jr=ys(["li","dd","dt"]),Gf=ys(["thead","tbody","tfoot"]),Li=ys(["td","th"]),Ha=ys(["pre","script","textarea","style"]),Ge="\xa0",Qf=t=>"\ufeff"===t,Zt="\ufeff",Ii=Qf,Sn=t=>t.replace(/\uFEFF/g,""),Zo=vt,yo=rt,Jo=t=>(yo(t)&&(t=t.parentNode),Zo(t)&&t.hasAttribute("data-mce-caret")),qr=t=>yo(t)&&Ii(t.data),Yn=t=>Jo(t)||qr(t),Zf=t=>t.firstChild!==t.lastChild||!Le(t.firstChild),Rc=t=>{const e=t.container();return!!rt(e)&&(e.data.charAt(t.offset())===Zt||t.isAtStart()&&qr(e.previousSibling))},Va=t=>{const e=t.container();return!!rt(e)&&(e.data.charAt(t.offset()-1)===Zt||t.isAtEnd()&&qr(e.nextSibling))},Ua=t=>yo(t)&&t.data[0]===Zt,Wa=t=>yo(t)&&t.data[t.data.length-1]===Zt,ja=t=>t&&t.hasAttribute("data-mce-caret")?((t=>{const e=t.getElementsByTagName("br"),n=e[e.length-1];Xo(n)&&n.parentNode.removeChild(n)})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,td=t=>Jo(t.startContainer),Dc=qs,Hm=ge,qa=Le,Ka=rt,Vm=is(["script","style","textarea"]),tr=is(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Fi=is(["table"]),Um=Yn,Cs=t=>!Um(t)&&(Ka(t)?!Vm(t.parentNode):tr(t)||qa(t)||Fi(t)||$i(t)),$i=t=>!1===(t=>vt(t)&&"true"===t.getAttribute("unselectable"))(t)&&Hm(t),Nc=(t,e)=>Cs(t)&&((t,e)=>{for(t=t.parentNode;t&&t!==e;t=t.parentNode){if($i(t))return!1;if(Dc(t))return!0}return!0})(t,e),Wm=/^[ \t\r\n]*$/,er=t=>Wm.test(t),Qa=t=>"\n"===t||"\r"===t,nd=(t,e=4,n=!0,s=!0)=>{const r=((t,e)=>e<=0?"":new Array(e+1).join(" "))(0,e),a=t.replace(/\t/g,r);return It(a,(m,g)=>(t=>-1!==" \f\t\v".indexOf(t))(g)||g===Ge?m.pcIsSpace||""===m.str&&n||m.str.length===a.length-1&&s||((t,e)=>e<t.length&&e>=0&&Qa(t[e]))(a,m.str.length+1)?{pcIsSpace:!1,str:m.str+Ge}:{pcIsSpace:!0,str:m.str+" "}:{pcIsSpace:Qa(g),str:m.str+g},{pcIsSpace:!1,str:""}).str},Ja=(t,e)=>Cs(t)&&!1===((t,e)=>rt(t)&&er(t.data)&&!1===((t,e)=>{const n=D_fromDom(e);return((t,e,n)=>Oi(t,"pre,code",n).isSome())(D_fromDom(t),0,ut(ee,n))})(t,e))(t,e)||(t=>vt(t)&&"A"===t.nodeName&&!t.hasAttribute("href")&&(t.hasAttribute("name")||t.hasAttribute("id")))(t)||Km(t),Km=Kn("data-mce-bookmark"),od=Kn("data-mce-bogus"),Ym=("data-mce-bogus","all",n=>vt(n)&&"all"===n.getAttribute("data-mce-bogus")),$e=(t,e=!0)=>((t,e)=>{let n=0;if(Ja(t,t))return!1;{let s=t.firstChild;if(!s)return!0;const r=new We(s,t);do{if(e){if(Ym(s)){s=r.next(!0);continue}if(od(s)){s=r.next();continue}}if(Le(s))n++,s=r.next();else{if(Ja(s,t))return!1;s=r.next()}}while(s);return n<=1}})(t.dom,e),rd=(t,e)=>Mt(t)&&(Ja(t,e)||Ac(D_fromDom(t))),id=t=>(t=>"span"===t.nodeName.toLowerCase())(t)&&"bookmark"===t.getAttribute("data-mce-type"),Yr=(t,e,n)=>{const s=n||e;if(vt(e)&&id(e))return e;const r=e.childNodes;for(let a=r.length-1;a>=0;a--)Yr(t,r[a],s);if(vt(e)){const a=e.childNodes;1===a.length&&id(a[0])&&e.parentNode.insertBefore(a[0],e)}return!(t=>Fa(t)||kc(t))(e)&&!Ja(e,s)&&!(t=>!!vt(t)&&t.childNodes.length>0)(e)&&!((t,e)=>rt(t)&&t.data.length>0&&((t,e)=>{const n=new We(t,e).prev(!1),s=new We(t,e).next(!1),r=_n(n)||rd(n,e),a=_n(s)||rd(s,e);return r&&a})(t,e))(e,s)&&t.remove(e),e},ld=W.makeMap,xs=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,tl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jm=/[<>&\"\']/g,tg=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Oc={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},nr={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},eg={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},zi=(t,e)=>{let n,s,r;const a={};if(t){for(t=t.split(","),e=e||10,n=0;n<t.length;n+=2)s=String.fromCharCode(parseInt(t[n],e)),nr[s]||(r="&"+t[n+1]+";",a[s]=r,a[r]=s);return a}},Hi=zi("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),cd=(t,e)=>t.replace(e?xs:tl,n=>nr[n]||n),Bc=(t,e)=>t.replace(e?xs:tl,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":nr[n]||"&#"+n.charCodeAt(0)+";"),el=(t,e,n)=>(n=n||Hi,t.replace(e?xs:tl,s=>nr[s]||n[s]||s)),xo={encodeRaw:cd,encodeAllRaw:t=>(""+t).replace(Jm,e=>nr[e]||e),encodeNumeric:Bc,encodeNamed:el,getEncodeFunc:(t,e)=>{const n=zi(e)||Hi,a=ld(t.replace(/\+/g,","));return a.named&&a.numeric?(f,m)=>f.replace(m?xs:tl,g=>void 0!==nr[g]?nr[g]:void 0!==n[g]?n[g]:g.length>1?"&#"+(1024*(g.charCodeAt(0)-55296)+(g.charCodeAt(1)-56320)+65536)+";":"&#"+g.charCodeAt(0)+";"):a.named?e?(f,m)=>el(f,m,n):el:a.numeric?Bc:cd},decode:t=>t.replace(tg,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Oc[n]||String.fromCharCode(n):eg[e]||Hi[e]||(t=>{const e=D_fromTag("div").dom;return e.innerHTML=t,e.textContent||e.innerText||t})(e))},vo={},sg={},Gr=W.makeMap,nn=W.each,Lc=W.extend,ud=W.explode,Ic=W.inArray,Xe=(t,e)=>(t=W.trim(t))?t.split(e||" "):[],Fc=(t,e)=>{let n;return t&&(n={},"string"==typeof t&&(t={"*":t}),nn(t,(s,r)=>{n[r]=n[r.toUpperCase()]="map"===e?Gr(s,/[, ]/):ud(s,/[, ]/)})),n},_o=t=>{var e;const n={},s={};let r=[];const a={},f={},m=(Q,Ct,Rt)=>{let Pt=t[Q];return Pt?Pt=Gr(Pt,/[, ]/,Gr(Pt.toUpperCase(),/[, ]/)):(Pt=vo[Q],Pt||(Pt=Gr(Ct," ",Gr(Ct.toUpperCase()," ")),Pt=Lc(Pt,Rt),vo[Q]=Pt)),Pt},g=null!==(e=(t=t||{}).schema)&&void 0!==e?e:"html5",y=(t=>{const e={};let n,s,r,a,f,m;const g=(x,_="",E="")=>{const k=Xe(E),P=Xe(x);let A=P.length;for(;A--;){const R=Xe([n,_].join(" "));e[P[A]]={attributes:Uo(R,()=>({})),attributesOrder:R,children:Uo(k,st(sg))}}},y=(x,_)=>{const E=Xe(x),k=Xe(_);let P=E.length;for(;P--;){const A=e[E[P]];for(let R=0,N=k.length;R<N;R++)A.attributes[k[R]]={},A.attributesOrder.push(k[R])}};return vo[t]?vo[t]:(n="id accesskey class dir lang style tabindex title role",s="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",r="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(n+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",s+=" article aside details dialog figure main header footer hgroup section nav",r+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==t&&(n+=" xml:lang",m="acronym applet basefont big font strike tt",r=[r,m].join(" "),nn(Xe(m),x=>{g(x,"",r)}),f="center dir isindex noframes",s=[s,f].join(" "),a=[s,r].join(" "),nn(Xe(f),x=>{g(x,"",a)})),a=a||[s,r].join(" "),g("html","manifest","head body"),g("head","","base command link meta noscript script style title"),g("title hr noscript br"),g("base","href target"),g("link","href rel media hreflang type sizes hreflang"),g("meta","name http-equiv content charset"),g("style","media type scoped"),g("script","src async defer type charset"),g("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",a),g("address dt dd div caption","",a),g("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",r),g("blockquote","cite",a),g("ol","reversed start type","li"),g("ul","","li"),g("li","value",a),g("dl","","dt dd"),g("a","href target rel media hreflang type",r),g("q","cite",r),g("ins del","cite datetime",a),g("img","src sizes srcset alt usemap ismap width height"),g("iframe","src name width height",a),g("embed","src type width height"),g("object","data type typemustmatch name usemap form width height",[a,"param"].join(" ")),g("param","name value"),g("map","name",[a,"area"].join(" ")),g("area","alt coords shape href target rel media hreflang type"),g("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),g("colgroup","span","col"),g("col","span"),g("tbody thead tfoot","","tr"),g("tr","","td th"),g("td","colspan rowspan headers",a),g("th","colspan rowspan headers scope abbr",a),g("form","accept-charset action autocomplete enctype method name novalidate target",a),g("fieldset","disabled form name",[a,"legend"].join(" ")),g("label","form for",r),g("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),g("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?a:r),g("select","disabled form multiple name required size","option optgroup"),g("optgroup","disabled label","option"),g("option","disabled label selected value"),g("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),g("menu","type label",[a,"li"].join(" ")),g("noscript","",a),"html4"!==t&&(g("wbr"),g("ruby","",[r,"rt rp"].join(" ")),g("figcaption","",a),g("mark rt rp summary bdi","",r),g("canvas","width height",a),g("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[a,"track source"].join(" ")),g("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[a,"track source"].join(" ")),g("picture","","img source"),g("source","src srcset type media sizes"),g("track","kind src srclang label default"),g("datalist","",[r,"option"].join(" ")),g("article section nav aside main header footer","",a),g("hgroup","","h1 h2 h3 h4 h5 h6"),g("figure","",[a,"figcaption"].join(" ")),g("time","datetime",r),g("dialog","open",a),g("command","type label icon disabled checked radiogroup command"),g("output","for form name",r),g("progress","value max",r),g("meter","value min max low high optimum",r),g("details","open",[a,"summary"].join(" ")),g("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==t&&(y("script","language xml:space"),y("style","xml:space"),y("object","declare classid code codebase codetype archive standby align border hspace vspace"),y("embed","align name hspace vspace"),y("param","valuetype type"),y("a","charset name rev shape coords"),y("br","clear"),y("applet","codebase archive code object alt name width height align hspace vspace"),y("img","name longdesc align border hspace vspace"),y("iframe","longdesc frameborder marginwidth marginheight scrolling align"),y("font basefont","size color face"),y("input","usemap align"),y("select"),y("textarea"),y("h1 h2 h3 h4 h5 h6 div p legend caption","align"),y("ul","type compact"),y("li","type"),y("ol dl menu dir","compact"),y("pre","width xml:space"),y("hr","align noshade size width"),y("isindex","prompt"),y("table","summary width frame rules cellspacing cellpadding align bgcolor"),y("col","width align char charoff valign"),y("colgroup","width align char charoff valign"),y("thead","align char charoff valign"),y("tr","align char charoff valign bgcolor"),y("th","axis align char charoff valign nowrap bgcolor width height"),y("form","accept"),y("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),y("tfoot","align char charoff valign"),y("tbody","align char charoff valign"),y("area","nohref"),y("body","background bgcolor text link vlink alink")),"html4"!==t&&(y("input button select textarea","autofocus"),y("input textarea","placeholder"),y("a","download"),y("link script img","crossorigin"),y("img","loading"),y("iframe","sandbox seamless allowfullscreen loading")),"html4"!==t&&Z([e.video,e.audio],x=>{delete x.children.audio,delete x.children.video}),nn(Xe("a form meter progress dfn"),x=>{e[x]&&delete e[x].children[x]}),delete e.caption.children.table,delete e.script,vo[t]=e,e)})(g);!1===t.verify_html&&(t.valid_elements="*[*]");const x=Fc(t.valid_styles),_=Fc(t.invalid_styles,"map"),E=Fc(t.valid_classes,"map"),k=m("whitespace_elements","pre script noscript style textarea video audio iframe object code"),P=m("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),A=m("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),R=m("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),N="td th iframe video audio object script code",L=m("non_empty_elements",N+" pre",A),q=m("move_caret_before_on_enter_elements",N+" table",A),H=m("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),V=m("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",H),ot=m("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp");nn("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),Q=>{f[Q]=new RegExp("</"+Q+"[^>]*>","gi")});const Y=Q=>new RegExp("^"+Q.replace(/([?+*])/g,".$1")+"$"),X=Q=>{let Ct,Rt,Pt,Gt,Wt,Ht,Se,Cn,xn,qe,Ze,vn,ze,Ln,li,Ho,Vo,oo;const ga=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,ci=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,Es=/[*?+]/;if(Q){const ro=Xe(Q,",");for(n["@"]&&(Ho=n["@"].attributes,Vo=n["@"].attributesOrder),Ct=0,Rt=ro.length;Ct<Rt;Ct++)if(Wt=ga.exec(ro[Ct]),Wt){if(Ln=Wt[1],xn=Wt[2],li=Wt[3],Cn=Wt[5],vn={},ze=[],Ht={attributes:vn,attributesOrder:ze},"#"===Ln&&(Ht.paddEmpty=!0),"-"===Ln&&(Ht.removeEmpty=!0),"!"===Wt[4]&&(Ht.removeEmptyAttrs=!0),Ho&&(ie(Ho,(pa,io)=>{vn[io]=pa}),ze.push.apply(ze,Vo)),Cn)for(Cn=Xe(Cn,"|"),Pt=0,Gt=Cn.length;Pt<Gt;Pt++)if(Wt=ci.exec(Cn[Pt]),Wt){if(Se={},Ze=Wt[1],qe=Wt[2].replace(/[\\:]:/g,":"),Ln=Wt[3],oo=Wt[4],"!"===Ze&&(Ht.attributesRequired=Ht.attributesRequired||[],Ht.attributesRequired.push(qe),Se.required=!0),"-"===Ze){delete vn[qe],ze.splice(Ic(ze,qe),1);continue}Ln&&("="===Ln&&(Ht.attributesDefault=Ht.attributesDefault||[],Ht.attributesDefault.push({name:qe,value:oo}),Se.defaultValue=oo),"~"===Ln&&(Ht.attributesForced=Ht.attributesForced||[],Ht.attributesForced.push({name:qe,value:oo}),Se.forcedValue=oo),"<"===Ln&&(Se.validValues=Gr(oo,"?"))),Es.test(qe)?(Ht.attributePatterns=Ht.attributePatterns||[],Se.pattern=Y(qe),Ht.attributePatterns.push(Se)):(vn[qe]||ze.push(qe),vn[qe]=Se)}!Ho&&"@"===xn&&(Ho=vn,Vo=ze),li&&(Ht.outputName=xn,n[li]=Ht),Es.test(xn)?(Ht.pattern=Y(xn),r.push(Ht)):n[xn]=Ht}}},J=Q=>{r=[],Z(ds(n),Ct=>{delete n[Ct]}),X(Q),nn(y,(Ct,Rt)=>{s[Rt]=Ct.children})},et=Q=>{const Ct=/^(~)?(.+)$/;Q&&(vo.text_block_elements=vo.block_elements=null,nn(Xe(Q,","),Rt=>{const Pt=Ct.exec(Rt),Gt="~"===Pt[1],Wt=Gt?"span":"div",Ht=Pt[2];if(s[Ht]=s[Wt],a[Ht]=Wt,Gt||(V[Ht.toUpperCase()]={},V[Ht]={}),!n[Ht]){let Se=n[Wt];Se=Lc({},Se),delete Se.removeEmptyAttrs,delete Se.removeEmpty,n[Ht]=Se}nn(s,(Se,Cn)=>{Se[Wt]&&(s[Cn]=Se=Lc({},s[Cn]),Se[Ht]=Se[Wt])})}))},St=Q=>{const Ct=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;vo[g]=null,Q&&nn(Xe(Q,","),Rt=>{const Pt=Ct.exec(Rt);let Gt,Wt;Pt&&(Wt=Pt[1],Gt=Wt?s[Pt[2]]:s[Pt[2]]={"#comment":{}},Gt=s[Pt[2]],nn(Xe(Pt[3],"|"),Ht=>{"-"===Wt?delete Gt[Ht]:Gt[Ht]={}}))})},ht=Q=>{let Rt,Ct=n[Q];if(Ct)return Ct;for(Rt=r.length;Rt--;)if(Ct=r[Rt],Ct.pattern.test(Q))return Ct};t.valid_elements?J(t.valid_elements):(nn(y,(Q,Ct)=>{n[Ct]={attributes:Q.attributes,attributesOrder:Q.attributesOrder},s[Ct]=Q.children}),nn(Xe("strong/b em/i"),Q=>{const Ct=Xe(Q,"/");n[Ct[1]].outputName=Ct[0]}),nn(Xe("ol ul sub sup blockquote span font a table tbody strong em b i"),Q=>{n[Q]&&(n[Q].removeEmpty=!0)}),nn(Xe("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),Q=>{n[Q].paddEmpty=!0}),nn(Xe("span"),Q=>{n[Q].removeEmptyAttrs=!0})),et(t.custom_elements),St(t.valid_children),X(t.extended_valid_elements),St("+ol[ul|ol],+ul[ul|ol]"),nn({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(Q,Ct)=>{n[Ct]&&(n[Ct].parentsRequired=Xe(Q))}),t.invalid_elements&&nn(ud(t.invalid_elements),Q=>{n[Q]&&delete n[Q]}),ht("span")||X("span[!data-mce-type|*]");const lt=st(x),Xt=st(_),Yt=st(E),ye=st(R),an=st(V),tt=st(H),bt=st(ot),Ut=st(Object.seal(A)),Bt=st(P),pt=st(L),mt=st(q),Et=st(k),Lt=st(Object.seal(f)),ma=st(a);return{type:g,children:s,elements:n,getValidStyles:lt,getValidClasses:Yt,getBlockElements:an,getInvalidStyles:Xt,getVoidElements:Ut,getTextBlockElements:tt,getTextInlineElements:bt,getBoolAttrs:ye,getElementRule:ht,getSelfClosingElements:Bt,getNonEmptyElements:pt,getMoveCaretBeforeOnEnterElements:mt,getWhitespaceElements:Et,getSpecialElements:Lt,isValidChild:(Q,Ct)=>{const Rt=s[Q.toLowerCase()];return!(!Rt||!Rt[Ct.toLowerCase()])},isValid:(Q,Ct)=>{let Rt,Pt;const Gt=ht(Q);if(Gt){if(!Ct)return!0;if(Gt.attributes[Ct])return!0;if(Rt=Gt.attributePatterns,Rt)for(Pt=Rt.length;Pt--;)if(Rt[Pt].pattern.test(Ct))return!0}return!1},getCustomElements:ma,addValidElements:X,setValidElements:J,addCustomElements:et,addValidChildren:St}},$c=(t,e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/;let a;const f={};let m,g;t=t||{},e&&(m=e.getValidStyles(),g=e.getInvalidStyles());const x="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(a=0;a<x.length;a++)f[x[a]]="\ufeff"+a,f["\ufeff"+a]=x[a];const _={parse:E=>{const k={};let P,A,R,N;const L=t.url_converter,q=t.url_converter_scope||_,H=(ht,lt,Xt)=>{const Yt=k[ht+"-top"+lt];if(!Yt)return;const ye=k[ht+"-right"+lt];if(!ye)return;const an=k[ht+"-bottom"+lt];if(!an)return;const tt=k[ht+"-left"+lt];if(!tt)return;const bt=[Yt,ye,an,tt];for(a=bt.length-1;a--&&bt[a]===bt[a+1];);a>-1&&Xt||(k[ht+lt]=-1===a?bt[0]:bt.join(" "),delete k[ht+"-top"+lt],delete k[ht+"-right"+lt],delete k[ht+"-bottom"+lt],delete k[ht+"-left"+lt])},V=ht=>{let Xt,lt=k[ht];if(lt){for(lt=lt.split(" "),Xt=lt.length;Xt--;)if(lt[Xt]!==lt[0])return!1;return k[ht]=lt[0],!0}},Y=ht=>(N=!0,f[ht]),X=(ht,lt)=>(N&&(ht=ht.replace(/\uFEFF[0-9]/g,Xt=>f[Xt])),lt||(ht=ht.replace(/\\([\'\";:])/g,"$1")),ht),J=ht=>String.fromCharCode(parseInt(ht.slice(1),16)),et=ht=>ht.replace(/\\[0-9a-f]+/gi,J),St=(ht,lt,Xt,Yt,ye,an)=>{if(ye=ye||an)return"'"+(ye=X(ye)).replace(/\'/g,"\\'")+"'";if(lt=X(lt||Xt||Yt),!t.allow_script_urls){const tt=lt.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(tt)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(tt))return""}return L&&(lt=L.call(q,lt,"style")),"url('"+lt.replace(/\'/g,"\\'")+"')"};if(E){for(E=(E=E.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,Y).replace(/\"[^\"]+\"|\'[^\']+\'/g,ht=>ht.replace(/[;:]/g,Y));P=s.exec(E);)if(s.lastIndex=P.index+P[0].length,A=P[1].replace(r,"").toLowerCase(),R=P[2].replace(r,""),A&&R){if(A=et(A),R=et(R),-1!==A.indexOf("\ufeff")||-1!==A.indexOf('"')||!t.allow_script_urls&&("behavior"===A||/expression\s*\(|\/\*|\*\//.test(R)))continue;"font-weight"===A&&"700"===R?R="bold":("color"===A||"background-color"===A)&&(R=R.toLowerCase()),R=R.replace(n,St),k[A]=N?X(R,!0):R}H("border","",!0),H("border","-width"),H("border","-color"),H("border","-style"),H("padding",""),H("margin",""),"border",Xt="border-style",Yt="border-color",!V(lt="border-width")||!V(Xt)||!V(Yt)||(k.border=k[lt]+" "+k[Xt]+" "+k[Yt],delete k[lt],delete k[Xt],delete k[Yt]),"medium none"===k.border&&delete k.border,"none"===k["border-image"]&&delete k["border-image"]}var lt,Xt,Yt;return k},serialize:(E,k)=>{let P="";const A=N=>{let L;const q=m[N];if(q)for(let H=0,V=q.length;H<V;H++)L=E[N=q[H]],L&&(P+=(P.length>0?" ":"")+N+": "+L+";")};return k&&m?(A("*"),A(k)):ie(E,(N,L)=>{N&&(!g||((N,L)=>{let q=g["*"];return!(q&&q[N]||(q=g[L],q&&q[N]))})(L,k))&&(P+=(P.length>0?" ":"")+L+": "+N+";")}),P}};return _},rg={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},nl=(t,e)=>{const n=null!=e?e:{};for(const s in t)$t(rg,s)||(n[s]=t[s]);return Mt(n.composedPath)&&(n.composedPath=()=>t.composedPath()),n},sl=(t,e,n,s)=>{var r;const a=nl(e,s);return a.type=t,An(a.target)&&(a.target=null!==(r=a.srcElement)&&void 0!==r?r:n),(t=>An(t.preventDefault)||(t=>t instanceof Event||oe(t.initEvent))(t))(e)&&(a.preventDefault=()=>{a.defaultPrevented=!0,a.isDefaultPrevented=Ne,oe(e.preventDefault)&&e.preventDefault()},a.stopPropagation=()=>{a.cancelBubble=!0,a.isPropagationStopped=Ne,oe(e.stopPropagation)&&e.stopPropagation()},a.stopImmediatePropagation=()=>{a.isImmediatePropagationStopped=Ne,a.stopPropagation()},(t=>t.isDefaultPrevented===Ne||t.isDefaultPrevented===xe)(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?Ne:xe,a.isPropagationStopped=!0===a.cancelBubble?Ne:xe,a.isImmediatePropagationStopped=xe)),a},lg=/^(?:mouse|contextmenu)|click/,ol=(t,e,n,s)=>{t.addEventListener?t.addEventListener(e,n,s||!1):t.attachEvent&&t.attachEvent("on"+e,n)},Vi=(t,e,n,s)=>{t.removeEventListener?t.removeEventListener(e,n,s||!1):t.detachEvent&&t.detachEvent("on"+e,n)},So=(t,e)=>{const n=sl(t.type,t,document,e);if((t=>Mt(t)&&lg.test(t.type))(t)&&_n(t.pageX)&&!_n(t.clientX)){const s=n.target.ownerDocument||document,r=s.documentElement,a=s.body,f=n;f.pageX=t.clientX+(r&&r.scrollLeft||a&&a.scrollLeft||0)-(r&&r.clientLeft||a&&a.clientLeft||0),f.pageY=t.clientY+(r&&r.scrollTop||a&&a.scrollTop||0)-(r&&r.clientTop||a&&a.clientTop||0)}return n},ug=(t,e,n)=>{const s=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const f=()=>{Vi(t,"DOMContentLoaded",f),Vi(t,"load",f),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===s.readyState||"interactive"===s.readyState&&s.body?f():ol(t,"DOMContentLoaded",f),n.domLoaded||ol(t,"load",f)};class wo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,s,r){const a=this;let f,m,g,y,x,_,E;const k=window,P=R=>{a.executeHandlers(So(R||k.event),f)};if(!e||3===e.nodeType||8===e.nodeType)return;e[a.expando]?f=e[a.expando]:(f=a.count++,e[a.expando]=f,a.events[f]={}),r=r||e;const A=n.split(" ");for(g=A.length;g--;)y=A[g],_=P,x=E=!1,"DOMContentLoaded"===y&&(y="ready"),a.domLoaded&&"ready"===y&&"complete"===e.readyState?s.call(r,So({type:y})):(a.hasMouseEnterLeave||(x=a.mouseEnterLeave[y],x&&(_=R=>{const N=R.currentTarget;let L=R.relatedTarget;if(L&&N.contains)L=N.contains(L);else for(;L&&L!==N;)L=L.parentNode;L||((R=So(R||k.event)).type="mouseout"===R.type?"mouseleave":"mouseenter",R.target=N,a.executeHandlers(R,f))})),!a.hasFocusIn&&("focusin"===y||"focusout"===y)&&(E=!0,x="focusin"===y?"focus":"blur",_=R=>{(R=So(R||k.event)).type="focus"===R.type?"focusin":"focusout",a.executeHandlers(R,f)}),m=a.events[f][y],m?"ready"===y&&a.domLoaded?s(So({type:y})):m.push({func:s,scope:r}):(a.events[f][y]=m=[{func:s,scope:r}],m.fakeName=x,m.capture=E,m.nativeHandler=_,"ready"===y?ug(e,_,a):ol(e,x||y,_,E)));return e=m=null,s}unbind(e,n,s){let r,a,f,m,g;if(!e||3===e.nodeType||8===e.nodeType)return this;const y=e[this.expando];if(y){if(g=this.events[y],n){const x=n.split(" ");for(a=x.length;a--;)if(m=x[a],r=g[m],r){if(s)for(f=r.length;f--;)if(r[f].func===s){const _=r.nativeHandler,E=r.fakeName,k=r.capture;r=r.slice(0,f).concat(r.slice(f+1)),r.nativeHandler=_,r.fakeName=E,r.capture=k,g[m]=r}(!s||0===r.length)&&(delete g[m],Vi(e,r.fakeName||m,r.nativeHandler,r.capture))}}else ie(g,(x,_)=>{Vi(e,x.fakeName||_,x.nativeHandler,x.capture)}),g={};for(m in g)if($t(g,m))return this;delete this.events[y];try{delete e[this.expando]}catch(x){e[this.expando]=null}}return this}fire(e,n,s){return this.dispatch(e,n,s)}dispatch(e,n,s){let r;if(!e||3===e.nodeType||8===e.nodeType)return this;const a=So({type:n,target:e},s);do{r=e[this.expando],r&&this.executeHandlers(a,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!a.isPropagationStopped());return this}clean(e){let n,s;if(!e||3===e.nodeType||8===e.nodeType)return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(this.unbind(e),s=e.getElementsByTagName("*"),n=s.length;n--;)(e=s[n])[this.expando]&&this.unbind(e);return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const s=this.events[n],r=s&&s[e.type];if(r)for(let a=0,f=r.length;a<f;a++){const m=r[a];if(m&&!1===m.func.call(m.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}wo.Event=new wo;const zc=W.each,hd=W.grep,Hc="data-mce-style",Ui=(t,e,n)=>{An(n)||""===n?Rn(t,e):de(t,e,n)},Xr=(t,e)=>{let s,r,n=0;if(t)for(s=t.nodeType,t=t.previousSibling;t;t=t.previousSibling)r=t.nodeType,(!e||3!==r||r!==s&&t.nodeValue.length)&&(n++,s=r);return n},rl=W.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),md=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),se=(t,e={})=>{const n={},s=window,r={};let a=0;const g=Vf.forElement(D_fromDom(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),y=[],x=e.schema?e.schema:_o({}),_=$c({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),E=e.ownEvents?new wo:wo.Event,k=x.getBlockElements(),A=B=>B&&t&&At(B)?t.getElementById(B):B,R=B=>{const $=A(B);return Mt($)?D_fromDom($):null},N=(B,$,G)=>{let K;const xt=R(B);if(Mt(xt)&&rs(xt)){const qt=Jh[$];K=qt&&qt.get?qt.get(xt.dom,$):Ye(xt,$)}return Mt(K)?K:null!=G?G:""},L=B=>{const $=A(B);return An($)?[]:$.attributes},q=(B,$,G)=>{Ut(B,K=>{if(vt(K)){const xt=D_fromDom(K);""===G&&(G=null);const qt=Ye(xt,$),jt=Jh[$];jt&&jt.set?jt.set(xt.dom,G,$):Ui(xt,$,G),qt!==G&&e.onSetAttrib&&e.onSetAttrib({attrElm:xt,attrName:$,attrValue:G})}})},V=()=>e.root_element||t.body,Y=(B,$)=>((t,e,n)=>{let s=0,r=0;const a=t.ownerDocument;if(n=n||t,e){if(n===t&&e.getBoundingClientRect&&"static"===Os(D_fromDom(t),"position")){const m=e.getBoundingClientRect();return s=m.left+(a.documentElement.scrollLeft||t.scrollLeft)-a.documentElement.clientLeft,r=m.top+(a.documentElement.scrollTop||t.scrollTop)-a.documentElement.clientTop,{x:s,y:r}}let f=e;for(;f&&f!==n&&f.nodeType&&!Ks(f,n);)s+=f.offsetLeft||0,r+=f.offsetTop||0,f=f.offsetParent;for(f=e.parentNode;f&&f!==n&&f.nodeType&&!Ks(f,n);)s-=f.scrollLeft||0,r-=f.scrollTop||0,f=f.parentNode;r+=(t=>Dm.isFirefox()&&"table"===Ce(t)?Ff(en(t)).filter(e=>"caption"===Ce(e)).bind(e=>Ff(uc(e)).map(n=>n.dom.offsetTop<=e.dom.offsetTop?-e.dom.offsetHeight:0)).getOr(0):0)(D_fromDom(e))}return{x:s,y:r}})(t.body,A(B),$),X=(B,$,G)=>{const K=(qt,jt)=>At(qt)?qt:Ts(qt)?$t(rl,jt)?qt+"":qt+"px":uo(qt,K),xt=(qt,jt,Jn)=>{const ao=md(jt);An(Jn)||""===Jn?zr(qt,ao):kf(qt,ao,K(Jn,ao))};Ut(B,qt=>{const jt=D_fromDom(qt);At($)?xt(jt,$,G):ie($,(Jn,ao)=>{xt(jt,ao,Jn)}),e.update_styles&&((t,e)=>{const n=Ye(e,"style"),s=t.serialize(t.parse(n),Ce(e));Ui(e,Hc,s)})(_,jt)})},et=(B,$,G)=>{const K=A(B);if(!An(K)&&vt(K))return G?Os(D_fromDom(K),md($)):("float"===($=$.replace(/-(\D)/g,(xt,qt)=>qt.toUpperCase()))&&($="cssFloat"),K.style?K.style[$]:void 0)},St=B=>{let $,G;const K=A(B);return $=et(K,"width"),G=et(K,"height"),-1===$.indexOf("px")&&($=0),-1===G.indexOf("px")&&(G=0),{w:parseInt($,10)||K.offsetWidth||K.clientWidth,h:parseInt(G,10)||K.offsetHeight||K.clientHeight}},lt=(B,$)=>{if(!B)return!1;const G=Fe(B)?B:[B];return Me(G,K=>Ns(D_fromDom(K),$))},Xt=(B,$,G,K)=>{const xt=[];let qt,jt=A(B);for(K=void 0===K,G=G||("BODY"!==V().nodeName?V().parentNode:null),At($)&&(qt=$,$="*"===$?vt:Jn=>lt(Jn,qt));jt&&!(jt===G||An(jt.nodeType)||kc(jt)||Fa(jt));){if(!$||$(jt)){if(!K)return[jt];xt.push(jt)}jt=jt.parentNode}return K?xt:null},ye=(B,$,G)=>{let K=$;if(B)for(At($)&&(K=xt=>lt(xt,$)),B=B[G];B;B=B[G])if(oe(K)&&K(B))return B;return null},Ut=function(B,$,G){const K=null!=G?G:this,xt=At(B)?A(B):B;if(!xt)return!1;if(Fe(xt)&&(xt.length||0===xt.length)){const qt=[];return zc(xt,(jt,Jn)=>{jt&&qt.push($.call(K,At(jt)?A(jt):jt,Jn))}),qt}return $.call(K,xt)},Bt=(B,$)=>{Ut(B,G=>{ie($,(K,xt)=>{q(G,xt,K)})})},pt=(B,$)=>{Ut(B,G=>{const K=D_fromDom(G);pc(K,$)})},mt=(B,$,G,K,xt)=>Ut(B,qt=>{const jt=At($)?t.createElement($):$;return Mt(G)&&Bt(jt,G),K&&(!At(K)&&K.nodeType?jt.appendChild(K):At(K)&&pt(jt,K)),xt?jt:qt.appendChild(jt)}),Et=(B,$,G)=>mt(t.createElement(B),B,$,G,!0),_e=xo.encodeAllRaw,Q=(B,$)=>Ut(B,G=>{const K=D_fromDom(G);return $&&Z(en(K),xt=>{Wn(xt)&&0===xt.dom.length?Pe(xt):qn(K,xt)}),Pe(K),K.dom}),Ht=(B,$,G)=>{Ut(B,K=>{if(vt(K)){const xt=D_fromDom(K),qt=$.split(" ");Z(qt,jt=>{Mt(G)?(G?wi:ic)(xt,jt):((t,e)=>{const n=Si(t)?t.dom.classList.toggle(e):((t,e)=>ke(uf(t),e)?oc(t,e):Oa(t,e))(t,e);rc(t)})(xt,jt)})}})},Vo=(B,$,G)=>Ut($,K=>(Fe(K)&&(B=B.cloneNode(!0)),G&&zc(hd(K.childNodes),xt=>{B.appendChild(xt)}),K.parentNode.replaceChild(B,K))),ci=B=>{if(vt(B)){const $="a"===B.nodeName.toLowerCase()&&!N(B,"href")&&N(B,"id");if(N(B,"name")||N(B,"data-mce-bookmark")||$)return!0}return!1},ro=()=>t.createRange(),io=(B,$,G,K)=>{if(Fe(B)){let xt=B.length;const qt=[];for(;xt--;)qt[xt]=io(B[xt],$,G,K);return qt}return e.collect&&(B===t||B===s)&&y.push([B,$,G,K]),E.bind(B,$,G,K||mr)},Qh=(B,$,G)=>{if(Fe(B)){let K=B.length;const xt=[];for(;K--;)xt[K]=Qh(B[K],$,G);return xt}if(y.length>0&&(B===t||B===s)){let K=y.length;for(;K--;){const xt=y[K];B===xt[0]&&(!$||$===xt[1])&&(!G||G===xt[2])&&E.unbind(xt[0],xt[1],xt[2])}}return E.unbind(B,$,G)},hr=B=>{if(B&&vt(B)){const $=B.getAttribute("data-mce-contenteditable");return $&&"inherit"!==$?$:"inherit"!==B.contentEditable?B.contentEditable:null}return null},mr={doc:t,settings:e,win:s,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:g,boundEvents:y,styles:_,schema:x,events:E,isBlock:B=>At(B)?$t(k,B):vt(B)&&$t(k,B.nodeName),root:null,clone:(B,$)=>B.cloneNode($),getRoot:V,getViewPort:B=>{const $=Of(B);return{x:$.x,y:$.y,w:$.width,h:$.height}},getRect:B=>{const $=A(B),G=Y($),K=St($);return{x:G.x,y:G.y,w:K.w,h:K.h}},getSize:St,getParent:(B,$,G)=>{const K=Xt(B,$,G,!1);return K&&K.length>0?K[0]:null},getParents:Xt,get:A,getNext:(B,$)=>ye(B,$,"nextSibling"),getPrev:(B,$)=>ye(B,$,"previousSibling"),select:(B,$)=>{var G,K;const xt=null!==(K=null!==(G=A($))&&void 0!==G?G:e.root_element)&&void 0!==K?K:t;return dn(xt.querySelectorAll(B))},is:lt,add:mt,create:Et,createHTML:(B,$,G="")=>{let xt,K="";for(xt in K+="<"+B,$)Qt($,xt)&&(K+=" "+xt+'="'+_e($[xt])+'"');return ho(G)&&$t(x.getVoidElements(),B)?K+" />":K+">"+G+"</"+B+">"},createFragment:B=>{let $;const G=t.createElement("div"),K=t.createDocumentFragment();for(K.appendChild(G),B&&(G.innerHTML=B);$=G.firstChild;)K.appendChild($);return K.removeChild(G),K},remove:Q,setStyle:X,getStyle:et,setStyles:(B,$)=>{X(B,$)},removeAllAttribs:B=>Ut(B,$=>{const G=$.attributes;for(let K=G.length-1;K>=0;K--)$.removeAttributeNode(G.item(K))}),setAttrib:q,setAttribs:Bt,getAttrib:N,getPos:Y,parseStyle:B=>_.parse(B),serializeStyle:(B,$)=>_.serialize(B,$),addStyle:B=>{let $,G;if(mr!==se.DOM&&t===document){if(n[B])return;n[B]=!0}G=t.getElementById("mceDefaultStyles"),G||(G=t.createElement("style"),G.id="mceDefaultStyles",G.type="text/css",$=t.getElementsByTagName("head")[0],$.firstChild?$.insertBefore(G,$.firstChild):$.appendChild(G)),G.styleSheet?G.styleSheet.cssText+=B:G.appendChild(t.createTextNode(B))},loadCSS:B=>{B||(B=""),Z(B.split(","),$=>{r[$]=!0,g.load($).catch(Ft)})},addClass:(B,$)=>{Ht(B,$,!0)},removeClass:(B,$)=>{Ht(B,$,!1)},hasClass:(B,$)=>{const G=R(B),K=$.split(" ");return fe(K,xt=>ac(G,xt))},toggleClass:Ht,show:B=>{Ut(B,$=>zr(D_fromDom($),"display"))},hide:B=>{Ut(B,$=>kf(D_fromDom($),"display","none"))},isHidden:B=>{const $=R(B);return Re(La($,"display"),"none")},uniqueId:B=>(B||"mce_")+a++,setHTML:pt,getOuterHTML:B=>{const $=R(B);return vt($.dom)?$.dom.outerHTML:(t=>{const e=D_fromTag("div"),n=D_fromDom(t.dom.cloneNode(!0));return He(e,n),Pf(e)})($)},setOuterHTML:(B,$)=>{Ut(B,G=>{vt(G)&&(G.outerHTML=$)})},decode:xo.decode,encode:_e,insertAfter:(B,$)=>{const G=A($);return Ut(B,K=>{const xt=G.parentNode,qt=G.nextSibling;return qt?xt.insertBefore(K,qt):xt.appendChild(K),K})},replace:Vo,rename:(B,$)=>{let G;return B.nodeName!==$.toUpperCase()&&(G=Et($),zc(L(B),K=>{q(G,K.nodeName,N(B,K.nodeName))}),Vo(G,B,!0)),G||B},findCommonAncestor:(B,$)=>{let K,G=B;for(;G;){for(K=$;K&&G!==K;)K=K.parentNode;if(G===K)break;G=G.parentNode}return!G&&B.ownerDocument?B.ownerDocument.documentElement:G},run:Ut,getAttribs:L,isEmpty:(B,$)=>{let G,K,xt=0;if(ci(B))return!1;if(B=B.firstChild){const qt=new We(B,B.parentNode),jt=x?x.getWhitespaceElements():{};$=$||(x?x.getNonEmptyElements():null);do{if(G=B.nodeType,vt(B)){const Jn=B.getAttribute("data-mce-bogus");if(Jn){B=qt.next("all"===Jn);continue}if(K=B.nodeName.toLowerCase(),$&&$[K]){if("br"===K){xt++,B=qt.next();continue}return!1}if(ci(B))return!1}if(8===G||3===G&&!er(B.nodeValue)||3===G&&B.parentNode&&jt[B.parentNode.nodeName]&&er(B.nodeValue))return!1;B=qt.next()}while(B)}return xt<=1},createRng:ro,nodeIndex:Xr,split:(B,$,G)=>{let xt,qt,jt,K=ro();if(B&&$)return K.setStart(B.parentNode,Xr(B)),K.setEnd($.parentNode,Xr($)),xt=K.extractContents(),K=ro(),K.setStart($.parentNode,Xr($)+1),K.setEnd(B.parentNode,Xr(B)+1),qt=K.extractContents(),jt=B.parentNode,jt.insertBefore(Yr(mr,xt),B),jt.insertBefore(G||$,B),jt.insertBefore(Yr(mr,qt),B),Q(B),G||$},bind:io,unbind:Qh,fire:(B,$,G)=>E.dispatch(B,$,G),dispatch:(B,$,G)=>E.dispatch(B,$,G),getContentEditable:hr,getContentEditableParent:B=>{const $=V();let G=null;for(;B&&B!==$&&(G=hr(B),null===G);B=B.parentNode);return G},destroy:()=>{if(y.length>0){let B=y.length;for(;B--;){const $=y[B];E.unbind($[0],$[1],$[2])}}ie(r,(B,$)=>{g.unload($),delete r[$]})},isChildOf:(B,$)=>B===$||$.contains(B),dumpRng:B=>"startContainer: "+B.startContainer.nodeName+", startOffset: "+B.startOffset+", endContainer: "+B.endContainer.nodeName+", endOffset: "+B.endOffset},Jh=((t,e,n)=>{const s=e.keep_values,a={style:{set:(f,m)=>{const g=D_fromDom(f);tn(m)?Ba(g,m):(s&&Ui(g,Hc,m),Rn(g,"style"),At(m)&&Ba(g,t.parse(m)))},get:f=>{const m=D_fromDom(f),g=Ye(m,Hc)||Ye(m,"style");return t.serialize(t.parse(g),Ce(m))}}};return s&&(a.href=a.src={set:(f,m,g)=>{const y=D_fromDom(f);oe(e.url_converter)&&Mt(m)&&(m=e.url_converter.call(e.url_converter_scope||n(),m,g,f[0])),Ui(y,"data-mce-"+g,m),Ui(y,g,m)},get:(f,m)=>{const g=D_fromDom(f);return Ye(g,"data-mce-"+m)||Ye(g,m)}}),a})(_,e,st(mr));return mr};se.DOM=se(document),se.nodeIndex=Xr;const Is=se.DOM;class Gs{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,s)=>{const r=Is;let a;const f=()=>{r.remove(y),a&&(a.onerror=a.onload=a=null)},y=r.uniqueId();a=document.createElement("script"),a.id=y,a.type="text/javascript",a.src=W._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(a,"referrerpolicy",this.settings.referrerPolicy),a.onload=()=>{f(),n()},a.onerror=()=>{f(),s("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(a)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((r,a)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:r,reject:a})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,s=(g,y)=>{ce(n.scriptLoadedCallbacks,y).each(x=>{Z(x,_=>_[g](y))}),delete n.scriptLoadedCallbacks[y]},r=g=>{const y=dt(g,x=>"rejected"===x.status);return y.length>0?Promise.reject(fs(y,({reason:x})=>Fe(x)?x:[x])):Promise.resolve()},a=g=>Promise.allSettled(Kt(g,y=>2===n.states[y]?(s("resolve",y),Promise.resolve()):3===n.states[y]?(s("reject",y),Promise.reject(y)):(n.states[y]=1,n.loadScript(y).then(()=>{n.states[y]=2,s("resolve",y);const x=n.queue;if(x.length>0)return n.queue=[],a(x).then(r)},()=>(n.states[y]=3,s("reject",y),Promise.reject(y)))))),f=g=>(n.loading=!0,a(g).then(y=>{n.loading=!1;const x=n.queueLoadedCallbacks.shift();return S.from(x).each(Cr),r(y)})),m=be(e);return n.loading?new Promise((g,y)=>{n.queueLoadedCallbacks.push(()=>f(m).then(g,y))}):f(m)}}Gs.ScriptLoader=new Gs;const Ve=t=>{let e=t;return{get:()=>e,set:r=>{e=r}}},ji={},il=Ve("en"),qi=()=>ce(ji,il.get()),vs={getData:()=>uo(ji,t=>wt({},t)),setCode:t=>{t&&il.set(t)},getCode:()=>il.get(),add:(t,e)=>{let n=ji[t];n||(ji[t]=n={}),ie(e,(s,r)=>{n[r.toLowerCase()]=s})},translate:t=>{const e=qi().getOr({}),n=f=>oe(f)?Object.prototype.toString.call(f):s(f)?"":""+f,s=f=>""===f||null==f,r=f=>{const m=n(f);return ce(e,m.toLowerCase()).map(n).getOr(m)},a=f=>f.replace(/{context:\w+}$/,"");if(s(t))return"";if((t=>tn(t)&&$t(t,"raw"))(t))return n(t.raw);if((t=>Fe(t)&&t.length>1)(t)){const f=t.slice(1);return a(r(t[0]).replace(/\{([0-9]+)\}/g,(g,y)=>$t(f,y)?n(f[y]):g))}return a(r(t))},isRtl:()=>qi().bind(t=>ce(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>$t(ji,t)},un=()=>{const t=[],e={},n={},s=[],r=(A,R)=>{const N=dt(s,L=>L.name===A&&L.state===R);Z(N,L=>L.resolve())},a=A=>$t(e,A),g=(A,R)=>{const N=vs.getCode();!N||R&&-1===(","+(R||"")+",").indexOf(","+N+",")||Gs.ScriptLoader.add(e[A]+"/langs/"+N+".js")},P=(A,R="added")=>"added"===R&&(A=>$t(n,A))(A)||"loaded"===R&&a(A)?Promise.resolve():new Promise(N=>{s.push({name:A,state:R,resolve:N})});return{items:t,urls:e,lookup:n,get:A=>{if(n[A])return n[A].instance},requireLangPack:(A,R)=>{!1!==un.languageLoad&&(a(A)?g(A,R):P(A,"loaded").then(()=>g(A,R)))},add:(A,R)=>(t.push(R),n[A]={instance:R},r(A,"added"),R),remove:A=>{delete e[A],delete n[A]},createUrl:(A,R)=>At(R)?At(A)?{prefix:"",resource:R,suffix:""}:{prefix:A.prefix,resource:R,suffix:A.suffix}:R,load:(A,R)=>{if(e[A])return Promise.resolve();let N=At(R)?R:R.prefix+R.resource+R.suffix;0!==N.indexOf("/")&&-1===N.indexOf("://")&&(N=un.baseURL+"/"+N),e[A]=N.substring(0,N.lastIndexOf("/"));const L=()=>(r(A,"loaded"),Promise.resolve());return n[A]?L():Gs.ScriptLoader.add(N).then(L)},waitFor:P}};un.languageLoad=!0,un.baseURL="",un.PluginManager=un(),un.ThemeManager=un(),un.ModelManager=un();const ko=()=>{const t=(t=>{const e=Ve(S.none()),n=()=>e.get().each(t);return{clear:()=>{n(),e.set(S.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:m=>{n(),e.set(S.some(m))}}})(Ft);return he(wt({},t),{on:n=>t.get().each(n)})},Ki=(t,e)=>{let n=null;return{cancel:()=>{br(n)||(clearTimeout(n),n=null)},throttle:(...a)=>{br(n)&&(n=setTimeout(()=>{n=null,t.apply(null,a)},e))}}},Qr=(t,e)=>{let n=null;const s=()=>{br(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...a)=>{s(),n=setTimeout(()=>{n=null,t.apply(null,a)},e)}}},ll=(t,e)=>{let n=[];return Z(en(t),s=>{e(s)&&(n=n.concat([s])),n=n.concat(ll(s,e))}),n},yn=(t,e)=>((t,e)=>{const n=void 0===e?document:e.dom;return Ei(n)?[]:Kt(n.querySelectorAll(t),D_fromDom)})(e,t),Uc=st("mce-annotation"),sr=st("data-mce-annotation"),Zr=st("data-mce-annotation-uid"),Wc=st("data-mce-annotation-active"),jc=(t,e)=>{const n=t.selection.getRng(),s=D_fromDom(n.startContainer),r=D_fromDom(t.getBody()),a=e.fold(()=>"."+Uc(),y=>`[${sr()}="${y}"]`),f=$r(s,n.startOffset).getOr(s),m=Qo(f,a,y=>ee(y,r)),g=(y,x)=>Na(y,x)?S.some(Ye(y,x)):S.none();return m.bind(y=>g(y,`${Zr()}`).bind(x=>g(y,`${sr()}`).map(_=>{const E=yd(t,x);return{uid:x,name:_,elements:E}})))},yd=(t,e)=>{const n=D_fromDom(t.getBody());return yn(n,`[${Zr()}="${e}"]`)},Cd=(t,e)=>{const n=D_fromDom(t.getBody()),s=yn(n,`[${sr()}="${e}"]`),r={};return Z(s,a=>{const f=Ye(a,Zr()),m=ce(r,f).getOr([]);r[f]=m.concat([a])}),r};let xd=0;const qc=t=>{const n=(new Date).getTime(),s=Math.floor(1e9*Math.random());return xd++,t+"_"+s+xd+String(n)},vd=(t,e)=>D_fromDom(t.dom.cloneNode(e)),Fs=t=>vd(t,!1),Yi=t=>vd(t,!0),Kc=(t,e,n=xe)=>{const s=new We(t,e),r=a=>{let f;do{f=s[a]()}while(f&&!rt(f)&&!n(f));return S.from(f).filter(rt)};return{current:()=>S.from(s.current()).filter(rt),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Eo=(t,e)=>{const n=e||(f=>t.isBlock(f)||Le(f)||ge(f)),s=(f,m,g,y)=>{if(rt(f)){const x=y(f,m,f.data);if(-1!==x)return S.some({container:f,offset:x})}return g().bind(x=>s(x.container,x.offset,g,y))};return{backwards:(f,m,g,y)=>{const x=Kc(f,y,n);return s(f,m,()=>x.prev().map(_=>({container:_,offset:_.length})),g).getOrNull()},forwards:(f,m,g,y)=>{const x=Kc(f,y,n);return s(f,m,()=>x.next().map(_=>({container:_,offset:0})),g).getOrNull()}}},Jr=Math.round,or=t=>t?{left:Jr(t.left),top:Jr(t.top),bottom:Jr(t.bottom),right:Jr(t.right),width:Jr(t.width),height:Jr(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Yc=(t,e)=>(t=or(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),Gc=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Xs=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&Gc(e.top-t.bottom,t,e)},Ao=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&Gc(e.bottom-t.top,t,e),l=(t,e,n)=>{const s=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-s)*(e-s)+(n-r)*(n-r))},c=t=>{const e=t.startContainer,n=t.startOffset;return e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},u=(t,e)=>{if(vt(t)&&t.hasChildNodes()){const n=t.childNodes,s=((t,e,n)=>Math.min(Math.max(t,0),n))(e,0,n.length-1);return n[s]}return t},h=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),p=t=>"string"==typeof t&&t.charCodeAt(0)>=768&&h.test(t),v=vt,w=Cs,T=Pn("display","block table"),O=Pn("float","left right"),M=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(v,w,Ll(O)),I=Ll(Pn("white-space","pre pre-line pre-wrap")),U=rt,j=Le,nt=se.nodeIndex,ct=(t,e)=>{if(!(e<0&&vt(t)&&t.hasChildNodes()))return u(t,e)},at=t=>"createRange"in t?t.createRange():se.DOM.createRng(),it=t=>t&&/[\r\n\t ]/.test(t),kt=t=>!!t.setStart&&!!t.setEnd,_t=t=>{const e=t.startContainer,n=t.startOffset;if(it(t.toString())&&I(e.parentNode)&&rt(e)){const s=e.data;if(it(s[n-1])||it(s[n+1]))return!0}return!1},pe=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,ne=t=>{let e;const n=t.getClientRects();return e=or(n.length>0?n[0]:t.getBoundingClientRect()),!kt(t)&&j(t)&&pe(e)?(t=>{const e=t.ownerDocument,n=at(e),s=e.createTextNode(Ge),r=t.parentNode;r.insertBefore(s,t),n.setStart(s,0),n.setEnd(s,1);const a=or(n.getBoundingClientRect());return r.removeChild(s),a})(t):pe(e)&&kt(t)?(t=>{const n=t.endContainer,s=t.startOffset,r=t.endOffset;if(t.startContainer===n&&rt(n)&&0===s&&1===r){const a=t.cloneRange();return a.setEndAfter(n),ne(a)}return null})(t):e},Jt=(t,e)=>{const n=Yc(t,e);return n.width=1,n.right=n.left+1,n},F=(t,e,n)=>{const f=()=>(n||(n=(t=>{const e=[],n=f=>{0!==f.height&&(e.length>0&&((t,e)=>t.left===e.left&&t.top===e.top&&t.bottom===e.bottom&&t.right===e.right)(f,e[e.length-1])||e.push(f))},s=(f,m)=>{const g=at(f.ownerDocument);if(m<f.data.length){if(p(f.data[m]))return e;if(p(f.data[m-1])&&(g.setStart(f,m),g.setEnd(f,m+1),!_t(g)))return n(Jt(ne(g),!1)),e}m>0&&(g.setStart(f,m-1),g.setEnd(f,m),_t(g)||n(Jt(ne(g),!1))),m<f.data.length&&(g.setStart(f,m),g.setEnd(f,m+1),_t(g)||n(Jt(ne(g),!0)))},r=t.container(),a=t.offset();if(U(r))return s(r,a),e;if(v(r))if(t.isAtEnd()){const f=ct(r,a);U(f)&&s(f,f.data.length),M(f)&&!j(f)&&n(Jt(ne(f),!1))}else{const f=ct(r,a);if(U(f)&&s(f,0),M(f)&&t.isAtEnd())return n(Jt(ne(f),!1)),e;const m=ct(t.container(),t.offset()-1);M(m)&&!j(m)&&(T(m)||T(f)||!M(f))&&n(Jt(ne(m),!1)),M(f)&&n(Jt(ne(f),!0))}return e})(F(t,e))),n);return{container:st(t),offset:st(e),toRange:()=>{const x=at(t.ownerDocument);return x.setStart(t,e),x.setEnd(t,e),x},getClientRects:f,isVisible:()=>f().length>0,isAtStart:()=>(U(t),0===e),isAtEnd:()=>U(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:x=>x&&t===x.container()&&e===x.offset(),getNode:x=>ct(t,x?e-1:e)}};F.fromRangeStart=t=>F(t.startContainer,t.startOffset),F.fromRangeEnd=t=>F(t.endContainer,t.endOffset),F.after=t=>F(t.parentNode,nt(t)+1),F.before=t=>F(t.parentNode,nt(t)),F.isAbove=(t,e)=>pn(Ke(e.getClientRects()),es(t.getClientRects()),Xs).getOr(!1),F.isBelow=(t,e)=>pn(es(e.getClientRects()),Ke(t.getClientRects()),Ao).getOr(!1),F.isAtStart=t=>!!t&&t.isAtStart(),F.isAtEnd=t=>!!t&&t.isAtEnd(),F.isTextPosition=t=>!!t&&rt(t.container()),F.isElementPosition=t=>!1===F.isTextPosition(t);const te=(t,e)=>{rt(e)&&0===e.data.length&&t.remove(e)},Qs=(t,e,n)=>{Fa(n)?((t,e,n)=>{const s=S.from(n.firstChild),r=S.from(n.lastChild);e.insertNode(n),s.each(a=>te(t,a.previousSibling)),r.each(a=>te(t,a.nextSibling))})(t,e,n):((t,e,n)=>{e.insertNode(n),te(t,n.previousSibling),te(t,n.nextSibling)})(t,e,n)},wn=rt,Xi=Xo,rr=se.nodeIndex,ti=t=>{const e=t.parentNode;return Xi(e)?ti(e):e},ir=t=>t?hn(t.childNodes,(e,n)=>(Xi(n)&&"BR"!==n.nodeName?e=e.concat(ir(n)):e.push(n),e),[]):[],cl=t=>e=>t===e,Dy=t=>{let e;return e=wn(t)?"text()":t.nodeName.toLowerCase(),e+"["+(t=>{let e,n;e=ir(ti(t)),n=ns(e,cl(t),t),e=e.slice(0,n+1);const s=hn(e,(r,a,f)=>(wn(a)&&wn(e[f-1])&&r++,r),0);return e=gs(e,is([t.nodeName])),n=ns(e,cl(t),t),n-s})(t)+"]"},Ny=(t,e)=>{let n,s,a,f,m,r=[];return n=e.container(),s=e.offset(),wn(n)?a=((t,e)=>{for(;(t=t.previousSibling)&&wn(t);)e+=t.data.length;return e})(n,s):(f=n.childNodes,s>=f.length?(a="after",s=f.length-1):a="before",n=f[s]),r.push(Dy(n)),m=((t,e,n)=>{const s=[];for(e=e.parentNode;e!==t;e=e.parentNode)s.push(e);return s})(t,n),m=gs(m,Ll(Xo)),r=r.concat(Ae(m,g=>Dy(g))),r.reverse().join("/")+","+a},Oy=(t,e)=>{let n;if(!e)return null;const s=e.split(","),r=s[0].split("/");n=s.length>1?s[1]:"before";const a=hn(r,(f,m)=>{const g=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(m);return g?("text()"===g[1]&&(g[1]="#text"),((t,e,n)=>{let s=ir(t);return s=gs(s,(r,a)=>!wn(r)||!wn(s[a-1])),s=gs(s,is([e])),s[n]})(f,g[1],parseInt(g[2],10))):null},t);return a?wn(a)?((t,e)=>{let r,n=t,s=0;for(;wn(n);){if(r=n.data.length,e>=s&&e<=s+r){t=n,e-=s;break}if(!wn(n.nextSibling)){t=n,e=r;break}s+=r,n=n.nextSibling}return wn(t)&&e>t.data.length&&(e=t.data.length),F(t,e)})(a,parseInt(n,10)):(n="after"===n?rr(a)+1:rr(a),F(a.parentNode,n)):null},Sd=ge,My=(t,e,n,s,r)=>{let a=s[r?"startContainer":"endContainer"],f=s[r?"startOffset":"endOffset"];const m=[];let g,y=0;const x=t.getRoot();for(rt(a)?m.push(n?((t,e,n)=>{let s,r;for(r=t(e.data.slice(0,n)).length,s=e.previousSibling;s&&rt(s);s=s.previousSibling)r+=t(s.data).length;return r})(e,a,f):f):(g=a.childNodes,f>=g.length&&g.length&&(y=1,f=Math.max(0,g.length-1)),m.push(t.nodeIndex(g[f],n)+y));a&&a!==x;a=a.parentNode)m.push(t.nodeIndex(a,n));return m},wg=(t,e,n)=>{let s=0;return W.each(t.select(e),r=>{if("all"!==r.getAttribute("data-mce-bogus")){if(r===n)return!1;s++}}),s},By=(t,e)=>{let n,s,r;const a=e?"start":"end";n=t[a+"Container"],s=t[a+"Offset"],vt(n)&&"TR"===n.nodeName&&(r=n.childNodes,n=r[Math.min(e?s:s-1,r.length-1)],n&&(s=e?0:n.childNodes.length,t["set"+(e?"Start":"End")](n,s)))},Ly=t=>(By(t,!0),By(t,!1),t),Iy=(t,e)=>{let n;return vt(t)&&(t=u(t,e),Sd(t))?t:Yn(t)&&(rt(t)&&Jo(t)&&(t=t.parentNode),n=t.previousSibling,Sd(n)||(n=t.nextSibling,Sd(n)))?n:void 0},Fy=(t,e,n)=>{const s=n.getNode();let r=s?s.nodeName:null;const a=n.getRng();if(Sd(s)||"IMG"===r)return{name:r,index:wg(n.dom,r,s)};const f=(t=>Iy(t.startContainer,t.startOffset)||Iy(t.endContainer,t.endOffset))(a);return f?(r=f.tagName,{name:r,index:wg(n.dom,r,f)}):((t,e,n,s)=>{const r=e.dom,a={};return a.start=My(r,t,n,s,!0),e.isCollapsed()||(a.end=My(r,t,n,s,!1)),td(s)&&(a.isFakeCaret=!0),a})(t,n,e,a)},$y=(t,e,n)=>{const s={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",s,"&#xFEFF;"):t.create("span",s)},zy=(t,e)=>{const n=t.dom;let s=t.getRng();const r=n.uniqueId(),a=t.isCollapsed(),f=t.getNode(),m=f.nodeName;if("IMG"===m)return{name:m,index:wg(n,m,f)};const g=Ly(s.cloneRange());if(!a){g.collapse(!1);const x=$y(n,r+"_end",e);Qs(n,g,x)}s=Ly(s),s.collapse(!0);const y=$y(n,r+"_start",e);return Qs(n,s,y),t.moveToBookmark({id:r,keep:!0}),{id:r}},Hy=ut(Fy,fn,!0),Vy=t=>{const e=a=>a(t),n=st(t),s=()=>r,r={tag:!0,inner:t,fold:(a,f)=>f(t),isValue:Ne,isError:xe,map:a=>Nn.value(a(t)),mapError:s,bind:e,exists:e,forall:e,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:a=>{a(t)},toOptional:()=>S.some(t)};return r},Uy=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(s,r)=>s(t),isValue:xe,isError:Ne,map:e,mapError:s=>Nn.error(s(t)),bind:e,exists:xe,forall:Ne,getOr:fn,or:fn,getOrThunk:Ca,orThunk:Ca,getOrDie:sm(String(t)),each:Ft,toOptional:S.none};return n},Nn={value:Vy,error:Uy,fromOption:(t,e)=>t.fold(()=>Uy(e),Vy)},To_generate=t=>{if(!Fe(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return Z(t,(s,r)=>{const a=ds(s);if(1!==a.length)throw new Error("one and only one name per case");const f=a[0],m=s[f];if(void 0!==n[f])throw new Error("duplicate key detected:"+f);if("cata"===f)throw new Error("cannot have a case named cata (sorry)");if(!Fe(m))throw new Error("case arguments must be an array");e.push(f),n[f]=(...g)=>{const y=g.length;if(y!==m.length)throw new Error("Wrong number of arguments to case "+f+". Expected "+m.length+" ("+m+"), got "+y);return{fold:(..._)=>{if(_.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+_.length);return _[r].apply(null,g)},match:_=>{const E=ds(_);if(e.length!==E.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+E.join(","));if(!fe(e,P=>ke(E,P)))throw new Error("Not all branches were specified when using match. Specified: "+E.join(", ")+"\nRequired: "+e.join(", "));return _[f].apply(null,g)},log:_=>{console.log(_,{constructors:e,constructor:f,params:g})}}}}),n};To_generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const sE=t=>"inline-command"===t.type||"inline-format"===t.type,oE=t=>"block-command"===t.type||"block-format"===t.type,iE=t=>{const e=s=>Nn.error({message:s,pattern:t}),n=(s,r,a)=>{if(void 0!==t.format){let f;if(Fe(t.format)){if(!fe(t.format,At))return e(s+" pattern has non-string items in the `format` array");f=t.format}else{if(!At(t.format))return e(s+" pattern has non-string `format` parameter");f=[t.format]}return Nn.value(r(f))}return void 0!==t.cmd?At(t.cmd)?Nn.value(a(t.cmd,t.value)):e(s+" pattern has non-string `cmd` parameter"):e(s+" pattern is missing both `format` and `cmd` parameters")};if(!tn(t))return e("Raw pattern is not an object");if(!At(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!At(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let s=t.start,r=t.end;return 0===r.length&&(r=s,s=""),n("Inline",a=>({type:"inline-format",start:s,end:r,format:a}),(a,f)=>({type:"inline-command",start:s,end:r,cmd:a,value:f}))}return void 0!==t.replacement?At(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):Nn.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",s=>({type:"block-format",start:t.start,format:s[0]}),(s,r)=>({type:"block-command",start:t.start,cmd:s,value:r}))},aE=t=>(t=>Sr(t,(e,n)=>e.start.length===n.start.length?0:e.start.length>n.start.length?-1:1))(dt(t,oE)),Wy=t=>dt(t,sE),cE=t=>{const e=(t=>{const e=[],n=[];return Z(t,s=>{s.fold(r=>{e.push(r)},r=>{n.push(r)})}),{errors:e,values:n}})(Kt(t,iE));return Z(e.errors,n=>console.error(n.message,n.pattern)),e.values},kg=ss().deviceType,uE=kg.isTouch(),fE=se.DOM,jy=t=>co(t,RegExp),gt=t=>e=>e.options.get(t),Eg=t=>At(t)||tn(t),qy=(t,e="")=>n=>{const s=At(n);if(s){if(-1!==n.indexOf("=")){const r=(t=>{const e=t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(",");return It(e,(n,s)=>{const r=s.split("="),a=r[0],f=r.length>1?r[1]:a;return n[Un(a)]=Un(f),n},{})})(n);return{value:ce(r,t.id).getOr(e),valid:s}}return{value:n,valid:s}}return{valid:!1,message:"Must be a string."}},mE=gt("iframe_attrs"),gE=gt("doctype"),Ky=gt("document_base_url"),pE=gt("body_id"),bE=gt("body_class"),Yy=gt("content_security_policy"),yE=gt("br_in_pre"),Gn=gt("forced_root_block"),Qi=gt("forced_root_block_attrs"),CE=gt("br_newline_selector"),xE=gt("no_newline_selector"),vE=gt("keep_styles"),_E=gt("end_container_on_empty_block"),Gy=gt("automatic_uploads"),Xy=gt("images_reuse_filename"),SE=gt("images_replace_blob_uris"),Qy=gt("icons"),wE=gt("icons_url"),kE=gt("images_upload_url"),EE=gt("images_upload_base_path"),AE=gt("images_upload_credentials"),TE=gt("images_upload_handler"),RE=gt("content_css_cors"),Ag=gt("referrer_policy"),Zy=gt("language"),PE=gt("language_url"),Jy=gt("indent_use_margin"),DE=gt("indentation"),NE=gt("content_css"),OE=gt("content_style"),tC=gt("font_css"),ME=gt("directionality"),BE=gt("inline_boundaries_selector"),eC=gt("object_resizing"),LE=gt("resize_img_proportional"),IE=gt("placeholder"),nC=gt("event_root"),FE=gt("service_message"),ul=gt("theme"),$E=gt("theme_url"),Tg=gt("model"),zE=gt("model_url"),Zc=gt("inline_boundaries"),HE=gt("formats"),VE=gt("preview_styles"),UE=gt("format_empty_lines"),WE=gt("custom_ui_selector"),Rg=gt("inline"),jE=gt("hidden_input"),qE=gt("submit_patch"),KE=gt("add_form_submit_trigger"),YE=gt("add_unload_trigger"),GE=gt("custom_undo_redo_levels"),XE=gt("disable_nodechange"),sC=gt("readonly"),QE=gt("content_css_cors"),wd=gt("plugins"),ZE=gt("external_plugins"),JE=gt("block_unsupported_drop"),t1=gt("visual"),e1=gt("visual_table_class"),oC=gt("visual_anchor_class"),n1=gt("iframe_aria_text"),s1=gt("setup"),o1=gt("init_instance_callback"),r1=gt("urlconverter_callback"),i1=gt("auto_focus"),a1=gt("browser_spellcheck"),l1=gt("protect"),c1=gt("paste_block_drop"),kd=gt("paste_data_images"),u1=gt("paste_preprocess"),f1=gt("paste_postprocess"),d1=gt("paste_webkit_styles"),h1=gt("paste_remove_styles_if_webkit"),m1=gt("paste_merge_formats"),g1=gt("smart_paste"),p1=gt("paste_as_text"),b1=gt("paste_tab_spaces"),y1=gt("allow_html_data_urls"),rC=gt("text_patterns"),iC=gt("noneditable_class"),C1=gt("editable_class"),x1=gt("noneditable_regexp"),aC=t=>W.explode(t.options.get("images_file_types")),w1=gt("table_tab_navigation"),k1=vt,lC=rt,cC=t=>{const e=t.parentNode;e&&e.removeChild(t)},uC=t=>{const e=Sn(t);return{count:t.length-e.length,text:e}},fC=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(Zt));)t.deleteData(e,1)},dC=(t,e)=>(Zi(t),e),P1=(t,e)=>F.isTextPosition(e)?((t,e)=>lC(t)&&e.container()===t?((t,e)=>{const n=uC(t.data.substr(0,e.offset())),s=uC(t.data.substr(e.offset()));return(n.text+s.text).length>0?(fC(t),F(t,e.offset()-n.count)):e})(t,e):dC(t,e))(t,e):((t,e)=>e.container()===t.parentNode?((t,e)=>{const n=e.container(),s=((t,e)=>{const n=Vu(t,e);return-1===n?S.none():S.some(n)})(dn(n.childNodes),t).map(r=>r<e.offset()?F(n,e.offset()-1):e).getOr(e);return Zi(t),s})(t,e):dC(t,e))(t,e),Zi=t=>{k1(t)&&Yn(t)&&(Zf(t)?t.removeAttribute("data-mce-caret"):cC(t)),lC(t)&&(fC(t),0===t.data.length&&cC(t))},D1=ge,N1=Ms,O1=Ni,hC=(t,e,n)=>{const s=Yc(e.getBoundingClientRect(),n);let r,a;if("BODY"===t.tagName){const m=t.ownerDocument.documentElement;r=t.scrollLeft||m.scrollLeft,a=t.scrollTop||m.scrollTop}else{const m=t.getBoundingClientRect();r=t.scrollLeft-m.left,a=t.scrollTop-m.top}s.left+=r,s.right+=r,s.top+=a,s.bottom+=a,s.width=1;let f=e.offsetWidth-e.clientWidth;return f>0&&(n&&(f*=-1),s.left+=f,s.right+=f),s},L1=(t,e,n,s)=>{const r=ko();let a,f;const m=Gn(t),g=t.dom,x=()=>{(t=>{const e=yn(D_fromDom(t),"*[contentEditable=false],video,audio,embed,object");for(let n=0;n<e.length;n++){const s=e[n].dom;let r=s.previousSibling;if(Wa(r)){const a=r.data;1===a.length?r.parentNode.removeChild(r):r.deleteData(a.length-1,1)}r=s.nextSibling,Ua(r)&&(1===r.data.length?r.parentNode.removeChild(r):r.deleteData(0,1))}})(e),f&&(Zi(f),f=null),r.on(A=>{g.remove(A.caret),r.clear()}),a&&(clearInterval(a),a=void 0)};return{show:(A,R)=>{let N;if(x(),O1(R))return null;if(!n(R))return f=((t,e)=>{const s=t.ownerDocument.createTextNode(Zt),r=t.parentNode;if(e){const a=t.previousSibling;if(yo(a)){if(Yn(a))return a;if(Wa(a))return a.splitText(a.data.length-1)}r.insertBefore(s,t)}else{const a=t.nextSibling;if(yo(a)){if(Yn(a))return a;if(Ua(a))return a.splitText(1),a}t.nextSibling?r.insertBefore(s,t.nextSibling):r.appendChild(s)}return s})(R,A),N=R.ownerDocument.createRange(),Jc(f.nextSibling)?(N.setStart(f,0),N.setEnd(f,0)):(N.setStart(f,1),N.setEnd(f,1)),N;{f=((t,e,n)=>{const r=e.ownerDocument.createElement(t);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild((()=>{const t=document.createElement("br");return t.setAttribute("data-mce-bogus","1"),t})());const a=e.parentNode;return n?a.insertBefore(r,e):e.nextSibling?a.insertBefore(r,e.nextSibling):a.appendChild(r),r})(m,R,A);const L=hC(e,R,A);g.setStyle(f,"top",L.top);const q=g.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});g.setStyles(q,wt({},L)),g.add(e,q),r.set({caret:q,element:R,before:A}),A&&g.addClass(q,"mce-visual-caret-before"),a=setInterval(()=>{r.on(A=>{s()?g.toggleClass(A.caret,"mce-visual-caret-hidden"):g.addClass(A.caret,"mce-visual-caret-hidden")})},500),N=R.ownerDocument.createRange(),N.setStart(f,0),N.setEnd(f,0)}return N},hide:x,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(A=>{const R=hC(e,A.element,A.before);g.setStyles(A.caret,wt({},R))})},destroy:()=>clearInterval(a)}},mC=()=>le.browser.isFirefox(),Jc=t=>D1(t)||N1(t),tu=t=>Jc(t)||Di(t)&&mC(),I1=qs,Pg=ge,F1=Ms,$1=Pn("display","block table table-cell table-caption list-item"),gC=Yn,pC=Jo,bC=vt,z1=Cs,fl=t=>t>0,Ji=t=>t<0,Ed=(t,e)=>{let n;for(;n=t(e);)if(!pC(n))return n;return null},eu=(t,e,n,s,r)=>{const a=new We(t,s),f=Pg(t)||pC(t);if(Ji(e)){if(f&&n(t=Ed(a.prev.bind(a),!0)))return t;for(;t=Ed(a.prev.bind(a),r);)if(n(t))return t}if(fl(e)){if(f&&n(t=Ed(a.next.bind(a),!0)))return t;for(;t=Ed(a.next.bind(a),r);)if(n(t))return t}return null},ei=(t,e)=>{for(;t&&t!==e;){if($1(t))return t;t=t.parentNode}return null},Ro=(t,e,n)=>ei(t.container(),n)===ei(e.container(),n),Dg=(t,e)=>{if(!e)return null;const n=e.container(),s=e.offset();return bC(n)?n.childNodes[s+t]:null},yC=(t,e)=>{const n=e.ownerDocument.createRange();return t?(n.setStartBefore(e),n.setEndBefore(e)):(n.setStartAfter(e),n.setEndAfter(e)),n},V1=(t,e,n)=>ei(e,t)===ei(n,t),CC=(t,e,n)=>{const s=t?"previousSibling":"nextSibling";for(;n&&n!==e;){let r=n[s];if(gC(r)&&(r=r[s]),Pg(r)||F1(r)){if(V1(e,r,n))return r;break}if(z1(r))break;n=n.parentNode}return null},nu=ut(yC,!0),su=ut(yC,!1),Ng=(t,e,n)=>{let s;const r=ut(CC,!0,e),a=ut(CC,!1,e);let f=n.startContainer;const m=n.startOffset;if(Jo(f)){bC(f)||(f=f.parentNode);const g=f.getAttribute("data-mce-caret");if("before"===g&&(s=f.nextSibling,tu(s)))return nu(s);if("after"===g&&(s=f.previousSibling,tu(s)))return su(s)}if(!n.collapsed)return n;if(rt(f)){if(gC(f)){if(1===t){if(s=a(f),s)return nu(s);if(s=r(f),s)return su(s)}if(-1===t){if(s=r(f),s)return su(s);if(s=a(f),s)return nu(s)}return n}if(Wa(f)&&m>=f.data.length-1)return 1===t&&(s=a(f),s)?nu(s):n;if(Ua(f)&&m<=1)return-1===t&&(s=r(f),s)?su(s):n;if(m===f.data.length)return s=a(f),s?nu(s):n;if(0===m)return s=r(f),s?su(s):n}return n},xC=(t,e)=>S.from(Dg(t?0:-1,e)).filter(Pg),ou=(t,e,n)=>{const s=Ng(t,e,n);return-1===t?F.fromRangeStart(s):F.fromRangeEnd(s)},Ad=t=>S.from(t.getNode()).map(D_fromDom),Og=(t,e)=>{for(;e=t(e);)if(e.isVisible())return e;return e},Td=(t,e)=>{const n=Ro(t,e);return!(n||!Le(t.getNode()))||n};var sn;!function(t){t[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards"}(sn||(sn={}));const W1=ge,Po=rt,vC=vt,Mg=Le,dl=Cs,_C=t=>tr(t)||(t=>!!$i(t)&&!0!==It(dn(t.getElementsByTagName("*")),(e,n)=>e||Dc(n),!1))(t),Rd=Nc,SC=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,wC=(t,e)=>{if(fl(t)){if(dl(e.previousSibling)&&!Po(e.previousSibling))return F.before(e);if(Po(e))return F(e,0)}if(Ji(t)){if(dl(e.nextSibling)&&!Po(e.nextSibling))return F.after(e);if(Po(e))return F(e,e.data.length)}return Ji(t)?Mg(e)?F.before(e):F.after(e):F.before(e)},Bg=(t,e,n)=>{let s,r,a,f;if(!vC(n)||!e)return null;if(e.isEqual(F.after(n))&&n.lastChild){if(f=F.after(n.lastChild),Ji(t)&&dl(n.lastChild)&&vC(n.lastChild))return Mg(n.lastChild)?F.before(n.lastChild):f}else f=e;const m=f.container();let g=f.offset();if(Po(m)){if(Ji(t)&&g>0)return F(m,--g);if(fl(t)&&g<m.length)return F(m,++g);s=m}else{if(Ji(t)&&g>0&&(r=SC(m,g-1),dl(r)))return!_C(r)&&(a=eu(r,t,Rd,r),a)?Po(a)?F(a,a.data.length):F.after(a):Po(r)?F(r,r.data.length):F.before(r);if(fl(t)&&g<m.childNodes.length&&(r=SC(m,g),dl(r)))return Mg(r)?((t,e)=>{const n=e.nextSibling;return n&&dl(n)?Po(n)?F(n,0):F.before(n):Bg(sn.Forwards,F.after(e),t)})(n,r):!_C(r)&&(a=eu(r,t,Rd,r),a)?Po(a)?F(a,0):F.before(a):Po(r)?F(r,0):F.after(r);s=r||f.getNode()}if((fl(t)&&f.isAtEnd()||Ji(t)&&f.isAtStart())&&(s=eu(s,t,Ne,n,!0),Rd(s,n)))return wC(t,s);r=eu(s,t,Rd,n);const y=Rs(dt(((t,e)=>{const n=[];for(;t&&t!==e;)n.push(t),t=t.parentNode;return n})(m,n),W1));return!y||r&&y.contains(r)?r?wC(t,r):null:(f=fl(t)?F.after(y):F.before(y),f)},Do=t=>({next:e=>Bg(sn.Forwards,e,t),prev:e=>Bg(sn.Backwards,e,t)}),kC=t=>F.isTextPosition(t)?0===t.offset():Cs(t.getNode()),EC=t=>{if(F.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Cs(t.getNode(!0))},AC=(t,e)=>!F.isTextPosition(t)&&!F.isTextPosition(e)&&t.getNode()===e.getNode(!0),_s=(t,e,n)=>{const s=Do(e);return S.from(t?s.next(n):s.prev(n))},Pd=(t,e,n)=>_s(t,e,n).bind(s=>Ro(n,s,e)&&((t,e,n)=>t?!AC(e,n)&&!(t=>!F.isTextPosition(t)&&Le(t.getNode()))(e)&&EC(e)&&kC(n):!AC(n,e)&&kC(e)&&EC(n))(t,n,s)?_s(t,e,s):S.some(s)),TC=(t,e,n,s)=>Pd(t,e,n).bind(r=>s(r)?TC(t,e,r,s):S.some(r)),hl=(t,e)=>{const n=t?e.firstChild:e.lastChild;return rt(n)?S.some(F(n,t?0:n.data.length)):n?Cs(n)?S.some(t?F.before(n):(t=>Le(t)?F.before(t):F.after(t))(n)):((t,e,n)=>{const s=t?F.before(n):F.after(n);return _s(t,e,s)})(t,e,n):S.none()},Zs=ut(_s,!0),No=ut(_s,!1),On=ut(hl,!0),Oo=ut(hl,!1),RC="_mce_caret",Mo=t=>vt(t)&&t.id===RC,ta=(t,e)=>{for(;e&&e!==t;){if(e.id===RC)return e;e=e.parentNode}return null},PC=t=>W.isArray(t.start),DC=(t,e)=>(vt(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),oA=(t,e)=>Oo(t).fold(xe,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),NC=(t,e,n)=>!(!(t=>!1===t.hasChildNodes())(e)||!ta(t,e)||(((t,e)=>{const n=t.ownerDocument.createTextNode(Zt);t.appendChild(n),e.setStart(n,0),e.setEnd(n,0)})(e,n),0)),OC=(t,e,n,s)=>{const r=n[e?"start":"end"];let a,f,m,g;const y=t.getRoot();if(r){for(m=r[0],f=y,a=r.length-1;a>=1;a--){if(g=f.childNodes,NC(y,f,s))return!0;if(r[a]>g.length-1)return!!NC(y,f,s)||oA(f,s);f=g[r[a]]}3===f.nodeType&&(m=Math.min(r[0],f.nodeValue.length)),1===f.nodeType&&(m=Math.min(r[0],f.childNodes.length)),e?s.setStart(f,m):s.setEnd(f,m)}return!0},Lg=t=>rt(t)&&t.data.length>0,MC=(t,e,n)=>{let r,a,f,m,s=t.get(n.id+"_"+e);const g=n.keep;let y,x;if(s){if(r=s.parentNode,"start"===e?(g?s.hasChildNodes()?(r=s.firstChild,a=1):Lg(s.nextSibling)?(r=s.nextSibling,a=0):Lg(s.previousSibling)?(r=s.previousSibling,a=s.previousSibling.data.length):(r=s.parentNode,a=t.nodeIndex(s)+1):a=t.nodeIndex(s),y=r,x=a):(g?s.hasChildNodes()?(r=s.firstChild,a=1):Lg(s.previousSibling)?(r=s.previousSibling,a=s.previousSibling.data.length):(r=s.parentNode,a=t.nodeIndex(s)):a=t.nodeIndex(s),y=r,x=a),!g){for(m=s.previousSibling,f=s.nextSibling,W.each(W.grep(s.childNodes),_=>{rt(_)&&(_.nodeValue=_.nodeValue.replace(/\uFEFF/g,""))});s=t.get(n.id+"_"+e);)t.remove(s,!0);m&&f&&m.nodeType===f.nodeType&&rt(m)&&!le.browser.isOpera()&&(a=m.nodeValue.length,m.appendData(f.nodeValue),t.remove(f),y=m,x=a)}return S.some(F(y,x))}return S.none()},cA=(t,e,n)=>((t,e,n)=>2===e?Fy(Sn,n,t):3===e?(t=>{const e=t.getRng();return{start:Ny(t.dom.getRoot(),F.fromRangeStart(e)),end:Ny(t.dom.getRoot(),F.fromRangeEnd(e))}})(t):e?(t=>({rng:t.getRng()}))(t):zy(t,!1))(t,e,n),uA=(t,e)=>{((t,e)=>{const n=t.dom;if(e){if(PC(e))return((t,e)=>{const n=t.createRng();return OC(t,!0,e,n)&&OC(t,!1,e,n)?S.some(n):S.none()})(n,e);if((t=>At(t.start))(e))return S.some(((t,e)=>{let n;const s=t.createRng();return n=Oy(t.getRoot(),e.start),s.setStart(n.container(),n.offset()),n=Oy(t.getRoot(),e.end),s.setEnd(n.container(),n.offset()),s})(n,e));if((t=>$t(t,"id"))(e))return((t,e)=>{const n=MC(t,"start",e),s=MC(t,"end",e);return pn(n,s.or(n),(r,a)=>{const f=t.createRng();return f.setStart(DC(t,r.container()),r.offset()),f.setEnd(DC(t,a.container()),a.offset()),f})})(n,e);if((t=>$t(t,"name"))(e))return((t,e)=>S.from(t.select(e.name)[e.index]).map(n=>{const s=t.createRng();return s.selectNode(n),s}))(n,e);if((t=>$t(t,"rng"))(e))return S.some(e.rng)}return S.none()})(t,e).each(n=>{t.setRng(n)})},Ss=t=>vt(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Dd=e=>"\xa0"===e,ru=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Ig=t=>!ru(t)&&!Dd(t)&&!Qf(t),Fg=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},dA=t=>(t=>({value:t}))(Fg(t.red)+Fg(t.green)+Fg(t.blue)),hA=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,mA=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,BC=(t,e,n,s)=>({red:t,green:e,blue:n,alpha:s}),LC=(t,e,n,s)=>{const r=parseInt(t,10),a=parseInt(e,10),f=parseInt(n,10),m=parseFloat(s);return BC(r,a,f,m)},Nd=t=>(t=>{if("transparent"===t)return S.some(BC(0,0,0,0));const e=hA.exec(t);if(null!==e)return S.some(LC(e[1],e[2],e[3],"1"));const n=mA.exec(t);return null!==n?S.some(LC(n[1],n[2],n[3],n[4])):S.none()})(t).map(dA).map(e=>"#"+e.value).getOr(t),Od=t=>!!t.nodeType,IC=(t,e,n)=>{const s=n.startOffset;let r=n.startContainer;if((r!==n.endContainer||!(t=>t&&/^(IMG)$/.test(t.nodeName))(r.childNodes[s]))&&vt(r)){const a=r.childNodes;let f;s<a.length?(r=a[s],f=new We(r,t.getParent(r,t.isBlock))):(r=a[a.length-1],f=new We(r,t.getParent(r,t.isBlock)),f.next(!0));for(let m=f.current();m;m=f.next())if(rt(m)&&!zg(m))return n.setStart(m,0),void e.setRng(n)}},FC=(t,e,n)=>{if(t){const s=e?"nextSibling":"previousSibling";for(t=n?t:t[s];t;t=t[s])if(vt(t)||!zg(t))return t}},$g=(t,e)=>(Od(e)&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]),ml=(t,e,n)=>t.schema.isValidChild(e,n),zg=(t,e=!1)=>{if(Mt(t)&&rt(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return er(n)}return!1},ar=(t,e)=>(oe(t)?t=t(e):Mt(e)&&(t=t.replace(/%(\w+)/g,(n,s)=>e[s]||n)),t),Hg=(t,e)=>(e=""+((e=e||"").nodeName||e),(t=""+((t=t||"").nodeName||t)).toLowerCase()===e.toLowerCase()),Vg=(t,e)=>(("color"===e||"backgroundColor"===e)&&(t=Nd(t)),"fontWeight"===e&&700===t&&(t="bold"),"fontFamily"===e&&(t=t.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+t),Md=(t,e,n)=>Vg(t.getStyle(e,n),n),$C=(t,e)=>{let n;return t.getParent(e,s=>(n=t.getStyle(s,"text-decoration"),n&&"none"!==n)),n},Bd=(t,e,n)=>t.getParents(e,n,t.getRoot()),Bo=t=>Qt(t,"block"),as=t=>Qt(t,"selector"),on=t=>Qt(t,"inline"),Ug=t=>as(t)&&!1!==t.expand&&!on(t),gl=Ss,zC=Bd,HC=zg,vA=$g,_A=t=>Le(t)&&t.getAttribute("data-mce-bogus")&&!t.nextSibling,VC=(t,e)=>{let n=e;for(;n;){if(vt(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},UC=(t,e,n,s)=>{const r=e.data;for(let a=n;t?a>=0:a<r.length;t?a--:a++)if(s(r.charAt(a)))return t?a+1:a;return-1},SA=(t,e,n)=>UC(t,e,n,s=>Dd(s)||ru(s)),wA=(t,e,n)=>UC(t,e,n,Ig),WC=(t,e,n,s,r,a)=>{let f;const m=t.getParent(n,t.isBlock)||e,g=(x,_,E)=>{const k=Eo(t);return S.from((r?k.backwards:k.forwards)(x,_,(A,R)=>gl(A.parentNode)?-1:(f=A,E(r,A,R)),m))};return g(n,s,SA).bind(x=>a?g(x.container,x.offset+(r?-1:0),wA):S.some(x)).orThunk(()=>f?S.some({container:f,offset:r?0:f.length}):S.none())},jC=(t,e,n,s,r)=>{rt(s)&&ho(s.data)&&s[r]&&(s=s[r]);const a=zC(t,s);for(let f=0;f<a.length;f++)for(let m=0;m<e.length;m++){const g=e[m];if((!Mt(g.collapsed)||g.collapsed===n.collapsed)&&as(g)&&t.is(a[f],g.selector))return a[f]}return s},qC=(t,e,n,s)=>{let r=n;const a=t.dom,f=a.getRoot(),m=e[0];if(Bo(m)&&(r=m.wrapper?null:a.getParent(n,m.block,f)),!r){const g=a.getParent(n,"LI,TD,TH");r=a.getParent(rt(n)?n.parentNode:n,y=>y!==f&&vA(t,y),g)}if(r&&Bo(m)&&m.wrapper&&(r=zC(a,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r[s]&&!a.isBlock(r[s])&&(r=r[s],!Hg(r,"br")););return r||n},KC=(t,e,n,s)=>{const r=n.parentNode;return!Mt(n[s])&&(!(r!==e&&!An(r)&&!t.isBlock(r))||KC(t,e,r,s))},Ld=(t,e,n,s,r)=>{let a=n;const f=r?"previousSibling":"nextSibling",m=t.getRoot();if(rt(n)&&!HC(n)&&(r?s>0:s<n.data.length))return n;for(;;){if(!e[0].block_expand&&t.isBlock(a))return a;for(let g=a[f];g;g=g[f]){const y=rt(g)&&!KC(t,m,g,f);if(!gl(g)&&!_A(g)&&!HC(g,y))return a}if(a===m||a.parentNode===m){n=a;break}a=a.parentNode}return n},YC=t=>gl(t.parentNode)||gl(t),pl=(t,e,n,s=!1)=>{let{startContainer:r,startOffset:a,endContainer:f,endOffset:m}=e;const g=t.dom,y=n[0];return vt(r)&&r.hasChildNodes()&&(r=u(r,a),rt(r)&&(a=0)),vt(f)&&f.hasChildNodes()&&(f=u(f,e.collapsed?m:m-1),rt(f)&&(m=f.nodeValue.length)),r=VC(g,r),f=VC(g,f),YC(r)&&(r=gl(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,rt(r)&&(a=e.collapsed?r.length:0)),YC(f)&&(f=gl(f)?f:f.parentNode,f=e.collapsed?f.nextSibling||f:f.previousSibling||f,rt(f)&&(m=e.collapsed?0:f.length)),e.collapsed&&(WC(g,t.getBody(),r,a,!0,s).each(({container:E,offset:k})=>{r=E,a=k}),WC(g,t.getBody(),f,m,!1,s).each(({container:E,offset:k})=>{f=E,m=k})),(on(y)||y.block_expand)&&((!on(y)||!rt(r)||0===a)&&(r=Ld(g,n,r,a,!0)),(!on(y)||!rt(f)||m===f.nodeValue.length)&&(f=Ld(g,n,f,m,!1))),Ug(y)&&(r=jC(g,n,e,r,"previousSibling"),f=jC(g,n,e,f,"nextSibling")),(Bo(y)||as(y))&&(r=qC(t,n,r,"previousSibling"),f=qC(t,n,f,"nextSibling"),Bo(y)&&(g.isBlock(r)||(r=Ld(g,n,r,a,!0)),g.isBlock(f)||(f=Ld(g,n,f,m,!1)))),vt(r)&&(a=g.nodeIndex(r),r=r.parentNode),vt(f)&&(m=g.nodeIndex(f)+1,f=f.parentNode),{startContainer:r,startOffset:a,endContainer:f,endOffset:m}},iu=(t,e,n)=>{const s=e.startOffset,r=u(e.startContainer,s),a=e.endOffset,f=u(e.endContainer,a-1),m=A=>{const R=A[0];rt(R)&&R===r&&s>=R.data.length&&A.splice(0,1);const N=A[A.length-1];return 0===a&&A.length>0&&N===f&&rt(N)&&A.splice(A.length-1,1),A},g=(A,R,N)=>{const L=[];for(;A&&A!==N;A=A[R])L.push(A);return L},y=(A,R)=>t.getParent(A,N=>N.parentNode===R,R),x=(A,R,N)=>{const L=N?"nextSibling":"previousSibling";for(let q=A,H=q.parentNode;q&&q!==R;q=H){H=q.parentNode;const V=g(q===A?q:q[L],L);V.length&&(N||V.reverse(),n(m(V)))}};if(r===f)return n(m([r]));const _=t.findCommonAncestor(r,f);if(t.isChildOf(r,f))return x(r,_,!0);if(t.isChildOf(f,r))return x(f,_);const E=y(r,_)||r,k=y(f,_)||f;x(r,E,!0);const P=g(E===r?E:E.nextSibling,"nextSibling",k===f?k.nextSibling:k);P.length&&n(m(P)),x(f,k)},Wg=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},GC=(t,e)=>{const n=(t=>yn(t,"td[data-mce-selected],th[data-mce-selected]"))(e);return n.length>0?n:(t=>dt((t=>fs(t,e=>{const n=c(e);return n?[D_fromDom(n)]:[]}))(t),Li))(t)},bl=t=>GC(Wg(t.selection.getSel()),D_fromDom(t.getBody())),au=(t,e)=>Oi(t,"table",e),XC=t=>Ma(t).fold(st([t]),e=>[t].concat(XC(e))),jg=t=>fc(t).fold(st([t]),e=>"br"===Ce(e)?Ws(e).map(n=>[t].concat(jg(n))).getOr([]):[t].concat(jg(e))),qg=(t,e)=>pn((t=>{const e=t.startContainer,n=t.startOffset;return rt(e)?0===n?S.some(D_fromDom(e)):S.none():S.from(e.childNodes[n]).map(D_fromDom)})(e),(t=>{const e=t.endContainer,n=t.endOffset;return rt(e)?n===e.data.length?S.some(D_fromDom(e)):S.none():S.from(e.childNodes[n-1]).map(D_fromDom)})(e),(n,s)=>{const r=ue(XC(t),ut(ee,n)),a=ue(jg(t),ut(ee,s));return r.isSome()&&a.isSome()}).getOr(!1),Kg=(t,e,n,s)=>{const r=n,a=new We(n,r),f=ms(t.schema.getMoveCaretBeforeOnEnterElements(),(m,g)=>!ke(["td","th","table"],g.toLowerCase()));do{if(rt(n)&&0!==W.trim(n.nodeValue).length)return void(s?e.setStart(n,0):e.setEnd(n,n.nodeValue.length));if(f[n.nodeName])return void(s?e.setStartBefore(n):"BR"===n.nodeName?e.setEndBefore(n):e.setEndAfter(n))}while(n=s?a.next():a.prev());"BODY"===r.nodeName&&(s?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},Id=t=>{const e=t.selection.getSel();return e&&e.rangeCount>0},Yg=(t,e)=>{const n=bl(t);n.length>0?Z(n,s=>{const r=s.dom,a=t.dom.createRng();a.setStartBefore(r),a.setEndAfter(r),e(a,!0)}):e(t.selection.getRng(),!1)},Gg=(t,e,n)=>{const s=zy(t,e);n(s),t.moveToBookmark(s)},QC=((t,e)=>{const s=a=>t(a)?S.from(a.dom.nodeValue):S.none();return{get:a=>{if(!t(a))throw new Error("Can only get text value of a text node");return s(a).getOr("")},getOption:s,set:(a,f)=>{if(!t(a))throw new Error("Can only set raw text value of a text node");a.dom.nodeValue=f}}})(Wn),Xg=t=>QC.get(t),ZC=t=>QC.getOption(t),JC=(t,a,s,r)=>{var f=a,{uid:e=qc("mce-annotation")}=f,n=jk(f,["uid"]);const m=D_fromTag("span",t);wi(m,Uc()),de(m,`${Zr()}`,e),de(m,`${sr()}`,s);const{attributes:g={},classes:y=[]}=r(e,n);return jn(m,g),((t,e)=>{Z(e,n=>{wi(t,n)})})(m,y),m},MA=(t,e,n,s,r)=>{const a=[],f=JC(t.getDoc(),r,n,s),m=ko(),g=()=>{m.clear()},x=k=>{Z(k,_)},_=k=>{switch(((t,e,n,s)=>cn(e).fold(()=>"skipping",r=>"br"===s||(t=>Wn(t)&&Xg(t)===Zt)(e)?"valid":(t=>rs(t)&&ac(t,Uc()))(e)?"existing":Mo(e.dom)?"caret":ml(t,n,s)&&ml(t,Ce(r),n)?"valid":"invalid-child"))(t,k,"span",Ce(k))){case"invalid-child":{g();const A=en(k);x(A),g();break}case"valid":{const A=m.get().getOrThunk(()=>{const k=Fs(f);return a.push(k),m.set(k),k});((t,e)=>{qn(t,e),He(e,t)})(k,A);break}}};return iu(t.dom,e,k=>{g(),(k=>{const P=Kt(k,D_fromDom);x(P)})(k)}),a},tx=t=>{const e=(()=>{const t={};return{register:(r,a)=>{t[r]={name:r,settings:a}},lookup:r=>ce(t,r).map(a=>a.settings),getNames:()=>ds(t)}})();((t,e)=>{t.serializer.addTempAttr(Wc()),t.serializer.addNodeFilter("span",s=>{Z(s,r=>{(s=>S.from(s.attr(sr())).bind(e.lookup))(r).each(a=>{!1===a.persistent&&r.unwrap()})})})})(t,e);const n=((t,e)=>{const n=Ve({}),s=()=>({listeners:[],previous:ko()}),r=(_,E)=>{a(_,k=>(E(k),k))},a=(_,E)=>{const k=n.get(),A=E(ce(k,_).getOrThunk(s));k[_]=A,n.set(k)},g=(_,E)=>{Z(yd(t,_),k=>{E?de(k,Wc(),"true"):Rn(k,Wc())})},y=Qr(()=>{const _=Sr(e.getNames());Z(_,E=>{a(E,k=>{const P=k.previous.get();return jc(t,S.some(E)).fold(()=>{P.each(A=>{(_=>{r(_,E=>{Z(E.listeners,k=>k(!1,_))})})(E),k.previous.clear(),g(A,!1)})},({uid:A,name:R,elements:N})=>{Re(P,A)||(P.each(L=>g(L,!1)),((_,E,k)=>{r(_,P=>{Z(P.listeners,A=>A(!0,_,{uid:E,nodes:Kt(k,R=>R.dom)}))})})(R,A,N),k.previous.set(A),g(A,!0))}),{previous:k.previous,listeners:k.listeners}})})},30);return t.on("remove",()=>{y.cancel()}),t.on("NodeChange",()=>{y.throttle()}),{addListener:(_,E)=>{a(_,k=>({previous:k.previous,listeners:k.listeners.concat([E])}))}}})(t,e);return{register:(s,r)=>{e.register(s,r)},annotate:(s,r)=>{e.lookup(s).each(a=>{((t,e,n,s)=>{t.undoManager.transact(()=>{const r=t.selection,a=r.getRng(),f=bl(t).length>0;if(a.collapsed&&!f&&((t,e)=>{const n=pl(t,e,[{inline:"span"}]);e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),t.selection.setRng(e)})(t,a),r.getRng().collapsed&&!f){const m=JC(t.getDoc(),s,e,n.decorate);pc(m,Ge),r.getRng().insertNode(m.dom),r.select(m.dom)}else Gg(r,!1,()=>{Yg(t,m=>{MA(t,m,e,n.decorate,s)})})})})(t,s,a,r)})},annotationChanged:(s,r)=>{n.addListener(s,r)},remove:s=>{const r=t.selection.getBookmark();jc(t,S.some(s)).each(({elements:a})=>{Z(a,js)}),t.selection.moveToBookmark(r)},removeAll:s=>{const r=t.selection.getBookmark();ie(Cd(t,s),(a,f)=>Z(a,js)),t.selection.moveToBookmark(r)},getAll:s=>{const r=Cd(t,s);return uo(r,a=>Kt(a,f=>f.dom))}}},lu=t=>({getBookmark:ut(cA,t),moveToBookmark:ut(uA,t)});lu.isBookmarkNode=Ss;const ex=(t,e,n)=>!n.collapsed&&Me(n.getClientRects(),s=>((t,e,n)=>e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom)(s,t,e)),nx=(t,e,n)=>t.dispatch(e,n),sx=(t,e,n,s)=>t.dispatch("FormatApply",{format:e,node:n,vars:s}),Qg=(t,e,n,s)=>t.dispatch("FormatRemove",{format:e,node:n,vars:s}),ox=(t,e)=>t.dispatch("SetContent",e),rx=(t,e)=>t.dispatch("GetContent",e),ix=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),yt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||yt.metaKeyPressed(t),metaKeyPressed:t=>le.os.isMacOS()||le.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},ax=(t,e)=>{const n="data-mce-selected",s=e.dom,r=W.each;let a,f,m,g,y,x,_,P,A,R,N,L,q;const H=e.getDoc(),V=document,ot=Math.abs,Y=Math.round,X=e.getBody();let J,et;const St={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ht=Q=>Mt(Q)&&(If(Q)||e.dom.is(Q,"figure.image")),lt=Q=>Ms(Q)||s.hasClass(Q,"mce-preview-object"),Yt=Q=>{const Ct=Q.target;((Q,Ct)=>{if("longpress"===Q.type||0===Q.type.indexOf("touch")){const Rt=Q.touches[0];return ht(Q.target)&&!ex(Rt.clientX,Rt.clientY,Ct)}return ht(Q.target)&&!ex(Q.clientX,Q.clientY,Ct)})(Q,e.selection.getRng())&&!Q.isDefaultPrevented()&&e.selection.select(Ct)},ye=Q=>s.is(Q,"figure.image")?[Q.querySelector("img")]:s.hasClass(Q,"mce-preview-object")&&Mt(Q.firstElementChild)?[Q,Q.firstElementChild]:[Q],an=Q=>{const Ct=eC(e);return!(!Ct||"false"===Q.getAttribute("data-mce-resize")||Q===e.getBody())&&(s.hasClass(Q,"mce-preview-object")?Ns(D_fromDom(Q.firstElementChild),Ct):Ns(D_fromDom(Q),Ct))},bt=(Q,Ct,Rt)=>{if(Mt(Rt)){const Pt=ye(Q);Z(Pt,Gt=>{Gt.style[Ct]||!e.schema.isValid(Gt.nodeName.toLowerCase(),Ct)?s.setStyle(Gt,Ct,Rt):s.setAttrib(Gt,Ct,""+Rt)})}},Ut=(Q,Ct,Rt)=>{bt(Q,"width",Ct),bt(Q,"height",Rt)},Bt=Q=>{let Ct,Rt,Pt,Gt,Wt;Ct=Q.screenX-x,Rt=Q.screenY-_,L=Ct*g[2]+P,q=Rt*g[3]+A,L=L<5?5:L,q=q<5?5:q,Pt=(ht(a)||lt(a))&&!1!==LE(e)?!yt.modifierPressed(Q):yt.modifierPressed(Q),Pt&&(ot(Ct)>ot(Rt)?(q=Y(L*R),L=Y(q/R)):(L=Y(q/R),q=Y(L*R))),Ut(f,L,q),Gt=g.startPos.x+Ct,Wt=g.startPos.y+Rt,Gt=Gt>0?Gt:0,Wt=Wt>0?Wt:0,s.setStyles(m,{left:Gt,top:Wt,display:"block"}),m.innerHTML=L+" &times; "+q,g[2]<0&&f.clientWidth<=L&&s.setStyle(f,"left",void 0+(P-L)),g[3]<0&&f.clientHeight<=q&&s.setStyle(f,"top",void 0+(A-q)),Ct=X.scrollWidth-J,Rt=X.scrollHeight-et,Ct+Rt!==0&&s.setStyles(m,{left:Gt-Ct,top:Wt-Rt}),N||(((t,e,n,s,r)=>{t.dispatch("ObjectResizeStart",{target:e,width:n,height:s,origin:r})})(e,a,P,A,"corner-"+g.name),N=!0)},pt=()=>{const Q=N;N=!1,Q&&(bt(a,"width",L),bt(a,"height",q)),s.unbind(H,"mousemove",Bt),s.unbind(H,"mouseup",pt),V!==H&&(s.unbind(V,"mousemove",Bt),s.unbind(V,"mouseup",pt)),s.remove(f),s.remove(m),s.remove(y),mt(a),Q&&(((t,e,n,s,r)=>{t.dispatch("ObjectResized",{target:e,width:n,height:s,origin:r})})(e,a,L,q,"corner-"+g.name),s.setAttrib(a,"style",s.getAttrib(a,"style"))),e.nodeChanged()},mt=Q=>{_e();const Ct=s.getPos(Q,X),Rt=Ct.x,Pt=Ct.y,Gt=Q.getBoundingClientRect(),Wt=Gt.width||Gt.right-Gt.left,Ht=Gt.height||Gt.bottom-Gt.top;a!==Q&&(Et(),a=Q,L=q=0);const Se=e.dispatch("ObjectSelected",{target:Q}),Cn=s.getAttrib(a,n,"1");an(Q)&&!Se.isDefaultPrevented()?r(St,(xn,qe)=>{let Ze;Ze=s.get("mceResizeHandle"+qe),Ze&&s.remove(Ze),Ze=s.add(X,"div",{id:"mceResizeHandle"+qe,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+qe+"-resize; margin:0; padding:0"}),s.bind(Ze,"mousedown",ze=>{ze.stopImmediatePropagation(),ze.preventDefault(),(ze=>{const Ln=ye(a)[0];x=ze.screenX,_=ze.screenY,P=Ln.clientWidth,A=Ln.clientHeight,R=A/P,g=xn,g.name=qe,g.startPos={x:Wt*xn[0]+Rt,y:Ht*xn[1]+Pt},J=X.scrollWidth,et=X.scrollHeight,y=s.add(X,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),s.setStyles(y,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),f=(Q=>lt(Q)?s.create("img",{src:le.transparentSrc}):Q.cloneNode(!0))(a),s.addClass(f,"mce-clonedresizable"),s.setAttrib(f,"data-mce-bogus","all"),f.contentEditable="false",s.setStyles(f,{left:Rt,top:Pt,margin:0}),Ut(f,Wt,Ht),f.removeAttribute(n),X.appendChild(f),s.bind(H,"mousemove",Bt),s.bind(H,"mouseup",pt),V!==H&&(s.bind(V,"mousemove",Bt),s.bind(V,"mouseup",pt)),m=s.add(X,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},P+" &times; "+A)})(ze)}),xn.elm=Ze,s.setStyles(Ze,{left:Wt*xn[0]+Rt-Ze.offsetWidth/2,top:Ht*xn[1]+Pt-Ze.offsetHeight/2})}):Et(),s.getAttrib(a,n)||a.setAttribute(n,Cn)},Et=()=>{_e(),a&&a.removeAttribute(n),ie(St,(Q,Ct)=>{const Rt=s.get("mceResizeHandle"+Ct);Rt&&(s.unbind(Rt),s.remove(Rt))})},Lt=Q=>{var Ct;let Rt,Pt;const Gt=(Wt,Ht)=>{if(Wt)do{if(Wt===Ht)return!0}while(Wt=Wt.parentNode)};if(!N&&!e.removed){if(r(s.select("img[data-mce-selected],hr[data-mce-selected]"),Wt=>{Wt.removeAttribute(n)}),Pt="mousedown"===Q.type?Q.target:t.getNode(),Pt=null===(Ct=Qo(D_fromDom(Pt),"table,img,figure.image,hr,video,span.mce-preview-object").getOrUndefined())||void 0===Ct?void 0:Ct.dom,Gt(Pt,X)&&(Qe(),Rt=t.getStart(!0),Gt(Rt,Pt)&&Gt(t.getEnd(!0),Pt)))return void mt(Pt);Et()}},_e=()=>{ie(St,Q=>{Q.elm&&(s.unbind(Q.elm),delete Q.elm)})},Qe=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(Q){}};return e.on("init",()=>{Qe();const Q=Ki(Ct=>{e.composing||Lt(Ct)},0);e.on("nodechange ResizeEditor ResizeWindow ResizeContent drop FullscreenStateChanged",Q.throttle),e.on("keyup compositionend",Ct=>{a&&"TABLE"===a.nodeName&&Q.throttle(Ct)}),e.on("hide blur",Et),e.on("contextmenu longpress",Yt,!0)}),e.on("remove",_e),{isResizable:an,showResizeRect:mt,hideResizeRect:Et,updateResizeRect:Lt,destroy:()=>{a=f=y=null}}},lx=(t,e,n)=>{const s=t.document.createRange();return((t,e)=>{e.fold(n=>{t.setStartBefore(n.dom)},(n,s)=>{t.setStart(n.dom,s)},n=>{t.setStartAfter(n.dom)})})(s,e),((t,e)=>{e.fold(n=>{t.setEndBefore(n.dom)},(n,s)=>{t.setEnd(n.dom,s)},n=>{t.setEndAfter(n.dom)})})(s,n),s},Zg=(t,e,n,s,r)=>{const a=t.document.createRange();return a.setStart(e.dom,n),a.setEnd(s.dom,r),a},cu=To_generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cx=(t,e,n)=>e(D_fromDom(n.startContainer),n.startOffset,D_fromDom(n.endContainer),n.endOffset),ux_create=(t,e,n,s)=>({start:t,soffset:e,finish:n,foffset:s}),aT=document.caretPositionFromPoint?(t,e,n)=>{var s,r;return S.from(null===(r=(s=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(s,e,n)).bind(a=>{if(null===a.offsetNode)return S.none();const f=t.dom.createRange();return f.setStart(a.offsetNode,a.offset),f.collapse(),S.some(f)})}:document.caretRangeFromPoint?(t,e,n)=>{var s,r;return S.from(null===(r=(s=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(s,e,n))}:S.none,Jg=To_generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lr={before:Jg.before,on:Jg.on,after:Jg.after,cata:(t,e,n,s)=>t.fold(e,n,s),getStart:t=>t.fold(fn,fn,fn)},Fd=To_generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),yl={domRange:Fd.domRange,relative:Fd.relative,exact:Fd.exact,exactFromRange:t=>Fd.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=(t=>t.match({domRange:e=>D_fromDom(e.startContainer),relative:(e,n)=>lr.getStart(e),exact:(e,n,s,r)=>e}))(t);return bf(e)},range:ux_create},$d=(t,e)=>{const n=Ce(t);return"input"===n?lr.after(t):ke(["br","img"],n)?0===e?lr.before(t):lr.after(t):lr.on(t,e)},vT=(t,e)=>{const n=t.fold(lr.before,$d,lr.after),s=e.fold(lr.before,$d,lr.after);return yl.relative(n,s)},fx=(t,e,n,s)=>{const r=$d(t,e),a=$d(n,s);return yl.relative(r,a)},tp=(t,e)=>{const s=(e||document).createDocumentFragment();return Z(t,r=>{s.appendChild(r.dom)}),D_fromDom(s)},ST=t=>{const e=yl.getWin(t).dom,n=(r,a,f,m)=>Zg(e,r,a,f,m),s=(t=>t.match({domRange:e=>{const n=D_fromDom(e.startContainer),s=D_fromDom(e.endContainer);return fx(n,e.startOffset,s,e.endOffset)},relative:vT,exact:fx}))(t);return((t,e)=>{const n=((t,e)=>e.match({domRange:n=>({ltr:st(n),rtl:S.none}),relative:(n,s)=>({ltr:fo(()=>lx(t,n,s)),rtl:fo(()=>S.some(lx(t,s,n)))}),exact:(n,s,r,a)=>({ltr:fo(()=>Zg(t,n,s,r,a)),rtl:fo(()=>S.some(Zg(t,r,a,n,s)))})}))(t,e);return((t,e)=>{const n=e.ltr();return n.collapsed?e.rtl().filter(r=>!1===r.collapsed).map(r=>cu.rtl(D_fromDom(r.endContainer),r.endOffset,D_fromDom(r.startContainer),r.startOffset)).getOrThunk(()=>cx(0,cu.ltr,n)):cx(0,cu.ltr,n)})(0,n)})(e,s).match({ltr:n,rtl:n})},dx=(t,e,n)=>((t,e,n)=>((t,e,n)=>{const s=D_fromDom(t.document);return aT(s,e,n).map(r=>ux_create(D_fromDom(r.startContainer),r.startOffset,D_fromDom(r.endContainer),r.endOffset))})(t,e,n))(n.defaultView,t,e).map(s=>{const r=n.createRange();return r.setStart(s.start.dom,s.soffset),r.setEnd(s.finish.dom,s.foffset),r}).getOrUndefined(),ep=(t,e)=>t&&e&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,hx=(t,e,n)=>null!==((t,e,n)=>{for(;t&&t!==e;){if(n(t))return t;t=t.parentNode}return null})(t,e,n),ET=(t,e,n)=>hx(t,e,s=>s.nodeName===n),np=t=>t&&"TABLE"===t.nodeName,AT=t=>t&&/^(TD|TH|CAPTION)$/.test(t.nodeName),TT=(t,e)=>Yn(t)&&!1===hx(t,e,Mo),mx=(t,e,n)=>{const s=new We(e,t.getParent(e.parentNode,t.isBlock)||t.getRoot());for(;e=s[n?"prev":"next"]();)if(Le(e))return!0},sp=(t,e,n,s,r)=>{let a;const f=t.getRoot();let m;const g=t.schema.getNonEmptyElements(),y=t.getParent(r.parentNode,t.isBlock)||f;if(s&&Le(r)&&e&&t.isEmpty(y))return S.some(F(r.parentNode,t.nodeIndex(r)));const x=new We(r,y);for(;m=x[s?"prev":"next"]();){if("false"===t.getContentEditableParent(m)||TT(m,f))return S.none();if(rt(m)&&m.nodeValue.length>0)return!1===ET(m,f,"A")?S.some(F(m,s?m.nodeValue.length:0)):S.none();if(t.isBlock(m)||g[m.nodeName.toLowerCase()])return S.none();a=m}return n&&a?S.some(F(a,0)):S.none()},gx=(t,e,n,s)=>{let r,a;const f=t.getRoot();let m,g,y=!1;r=s[(n?"start":"end")+"Container"],a=s[(n?"start":"end")+"Offset"];const x=vt(r)&&a===r.childNodes.length,_=t.schema.getNonEmptyElements();if(g=n,Yn(r))return S.none();if(vt(r)&&a>r.childNodes.length-1&&(g=!1),kc(r)&&(r=f,a=0),r===f){if(g&&(m=r.childNodes[a>0?a-1:0],m&&(Yn(m)||_[m.nodeName]||np(m))))return S.none();if(r.hasChildNodes()){if(a=Math.min(!g&&a>0?a-1:a,r.childNodes.length-1),r=r.childNodes[a],a=rt(r)&&x?r.data.length:0,!e&&r===f.lastChild&&np(r)||((t,e)=>{for(;e&&e!==t;){if(ge(e))return!0;e=e.parentNode}return!1})(f,r)||Yn(r))return S.none();if(r.hasChildNodes()&&!1===np(r)){m=r;const E=new We(r,f);do{if(ge(m)||Yn(m)){y=!1;break}if(rt(m)&&m.nodeValue.length>0){a=g?0:m.nodeValue.length,r=m,y=!0;break}if(_[m.nodeName.toLowerCase()]&&!AT(m)){a=t.nodeIndex(m),r=m.parentNode,g||a++,y=!0;break}}while(m=g?E.next():E.prev())}}}return e&&(rt(r)&&0===a&&sp(t,x,e,!0,r).each(E=>{r=E.container(),a=E.offset(),y=!0}),vt(r)&&(m=r.childNodes[a],m||(m=r.childNodes[a-1]),m&&Le(m)&&!((t,e)=>t.previousSibling&&"A"===t.previousSibling.nodeName)(m)&&!mx(t,m,!1)&&!mx(t,m,!0)&&sp(t,x,e,!0,m).each(E=>{r=E.container(),a=E.offset(),y=!0}))),g&&!e&&rt(r)&&a===r.nodeValue.length&&sp(t,x,e,!1,r).each(E=>{r=E.container(),a=E.offset(),y=!0}),y?S.some(F(r,a)):S.none()},zd=(t,e)=>{const n=e.collapsed,s=e.cloneRange(),r=F.fromRangeStart(e);return gx(t,n,!0,s).each(a=>{(!n||!F.isAbove(r,a))&&s.setStart(a.container(),a.offset())}),n||gx(t,n,!1,s).each(a=>{s.setEnd(a.container(),a.offset())}),n&&s.collapse(!0),ep(e,s)?S.none():S.some(s)},Hd=(t,e)=>t.splitText(e),Vd=t=>{let e=t.startContainer,n=t.startOffset,s=t.endContainer,r=t.endOffset;return e===s&&rt(e)?n>0&&n<e.nodeValue.length&&(s=Hd(e,n),e=s.previousSibling,r>n?(r-=n,e=s=Hd(s,r).previousSibling,r=s.nodeValue.length,n=0):r=0):(rt(e)&&n>0&&n<e.nodeValue.length&&(e=Hd(e,n),n=0),rt(s)&&r>0&&r<s.nodeValue.length&&(s=Hd(s,r).previousSibling,r=s.nodeValue.length)),{startContainer:e,startOffset:n,endContainer:s,endOffset:r}},Cl=t=>({walk:(r,a)=>iu(t,r,a),split:Vd,normalize:r=>zd(t,r).fold(xe,a=>(r.setStart(a.startContainer,a.startOffset),r.setEnd(a.endContainer,a.endOffset),!0))});Cl.compareRanges=ep,Cl.getCaretRangeFromPoint=dx,Cl.getSelectedNode=c,Cl.getNode=u;const DT=((t,e)=>{const s=m=>{const g=(t=>{const e=t.dom;return Yo(t)?e.getBoundingClientRect().height:e.offsetHeight})(m);if(g<=0||null===g){const y=Os(m,t);return parseFloat(y)||0}return g},a=(m,g)=>It(g,(y,x)=>{const _=Os(m,x),E=void 0===_?0:parseInt(_,10);return isNaN(E)?y:y+E},0);return{set:(m,g)=>{if(!Ts(g)&&!g.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+g);const y=m.dom;Ds(y)&&(y.style[t]=g+"px")},get:s,getOuter:s,aggregate:a,max:(m,g,y)=>{const x=a(m,y);return g>x?g-x:0}}})("height"),px=()=>D_fromDom(document),bx=(t,e)=>t.view(e).fold(st([]),s=>{const r=t.owner(s),a=bx(t,r);return[s].concat(a)});var MT=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?S.none():S.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(D_fromDom)},owner:t=>Us(t)});const op=t=>"textarea"===Ce(t),yx=(t,e)=>{const n=(t=>{const e=t.dom.ownerDocument,n=e.body,s=e.defaultView,r=e.documentElement;if(n===t.dom)return Go(n.offsetLeft,n.offsetTop);const a=Ri(null==s?void 0:s.pageYOffset,r.scrollTop),f=Ri(null==s?void 0:s.pageXOffset,r.scrollLeft),m=Ri(r.clientTop,n.clientTop),g=Ri(r.clientLeft,n.clientLeft);return Cc(t).translate(f-g,a-m)})(t),s=(t=>DT.get(t))(t);return{element:t,bottom:n.top+s,height:s,pos:n,cleanup:e}},Cx=(t,e,n,s)=>{VT(t,(r,a)=>HT(t,e,n,s),n)},xx=(t,e,n,s,r)=>{const a={elm:s.element.dom,alignToTop:r};((t,e)=>t.dispatch("ScrollIntoView",e).isDefaultPrevented())(t,a)||(n(e,xc(e).top,s,r),((t,e)=>{t.dispatch("AfterScrollIntoView",e)})(t,a))},HT=(t,e,n,s)=>{D_fromDom(t.getBody());const a=D_fromDom(t.getDoc()),f=((t,e)=>{const n=((t,e)=>{const n=en(t);if(0===n.length||op(t))return{element:t,offset:e};if(e<n.length&&!op(n[e]))return{element:n[e],offset:0};{const s=n[n.length-1];return op(s)?{element:t,offset:e}:"img"===Ce(s)?{element:s,offset:1}:Wn(s)?{element:s,offset:Xg(s).length}:{element:s,offset:en(s).length}}})(t,e),s=D_fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return qn(n.element,s),yx(s,()=>Pe(s))})(D_fromDom(n.startContainer),n.startOffset);xx(t,a,e,f,s),f.cleanup()},vx=(t,e,n,s)=>{const r=D_fromDom(t.getDoc());xx(t,r,n,(t=>yx(D_fromDom(t),Ft))(e),s)},VT=(t,e,n)=>{const s=n.startContainer,r=n.startOffset,a=n.endContainer,f=n.endOffset;e(D_fromDom(s),D_fromDom(a));const m=t.dom.createRng();m.setStart(s,r),m.setEnd(a,f),t.selection.setRng(n)},rp=(t,e,n,s)=>{const r=t.pos;vc(r.left,n?r.top:r.top-e+t.height,s)},_x=(t,e,n,s,r)=>{const a=n+e,f=s.pos.top,m=s.bottom,g=m-f>=n;f<e?rp(s,n,!1!==r,t):f>a?rp(s,n,g?!1!==r:!0===r,t):m>a&&!g&&rp(s,n,!0===r,t)},Sx=(t,e,n,s)=>{_x(t,e,t.dom.defaultView.innerHeight,n,s)},wx=(t,e,n,s)=>{_x(t,e,t.dom.defaultView.innerHeight,n,s);const a=(t=>{const e=px(),n=xc(e),s=((t,e)=>{const n=e.owner(t);return bx(e,n)})(t,MT),r=Cc(t),a=me(s,(f,m)=>{const g=Cc(m);return{left:f.left+g.left,top:f.top+g.top}},{left:0,top:0});return Go(a.left+r.left+n.left,a.top+r.top+n.top)})(n.element),f=Of(window);a.top<f.y?_c(n.element,!1!==s):a.top>f.bottom&&_c(n.element,!0===s)},UT=(t,e,n)=>Cx(t,Sx,e,n),WT=(t,e,n)=>vx(t,e,Sx,n),jT=(t,e,n)=>Cx(t,wx,e,n),qT=(t,e,n)=>vx(t,e,wx,n),KT=(t,e,n)=>{(t.inline?WT:qT)(t,e,n)},uu=(t,e,n)=>{(t.inline?UT:jT)(t,e,n)},kx=t=>t.dom.focus(),Ex=t=>{const e=Ko(t).dom;return t.dom===e.activeElement},ip=(t=px())=>S.from(t.dom.activeElement).map(D_fromDom),Ax=(t,e)=>{const n=Wn(e)?Xg(e).length:en(e).length+1;return t>n?n:t<0?0:t},GT=t=>yl.range(t.start,Ax(t.soffset,t.start),t.finish,Ax(t.foffset,t.finish)),Tx=(t,e)=>!Vr(e.dom)&&(bn(t,e)||ee(t,e)),Rx=t=>e=>Tx(t,e.start)&&Tx(t,e.finish),QT=t=>yl.range(D_fromDom(t.startContainer),t.startOffset,D_fromDom(t.endContainer),t.endOffset),eR=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),S.some(e)}catch(n){return S.none()}},ap=t=>{const e=(t=>t.inline)(t)?(t=>(t=>{const e=t.getSelection();return(e&&0!==e.rangeCount?S.from(e.getRangeAt(0)):S.none()).map(QT)})(bf(t).dom).filter(Rx(t)))(D_fromDom(t.getBody())):S.none();t.bookmark=e.isSome()?e:t.bookmark},lp=t=>(t.bookmark?t.bookmark:S.none()).bind(n=>((t,e)=>S.from(e).filter(Rx(t)).map(GT))(D_fromDom(t.getBody()),n)).bind(eR),Px={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},ws={setEditorTimeout:(t,e,n)=>((t,e)=>(Ts(e)||(e=0),setTimeout(t,e)))(()=>{t.removed||e()},n),setEditorInterval:(t,e,n)=>{const s=((t,e)=>(Ts(e)||(e=0),setInterval(t,e)))(()=>{t.removed?clearInterval(s):e()},n);return s}};let fu;const cp=se.DOM,Ud=(t,e)=>{const n=WE(t);return null!==cp.getParent(e,r=>(t=>Px.isEditorUIElement(t))(r)||!!n&&t.dom.is(r,n))},hR=(t,e)=>{const n=e.editor;(t=>{const e=Ki(()=>{ap(t)},0);t.on("init",()=>{t.inline&&((t,e)=>{const n=()=>{e.throttle()};se.DOM.bind(document,"mouseup",n),t.on("remove",()=>{se.DOM.unbind(document,"mouseup",n)})})(t,e),((t,e)=>{((t,e)=>{t.on("mouseup touchend",n=>{e.throttle()})})(t,e),t.on("keyup NodeChange AfterSetSelectionRange",n=>{(t=>"nodechange"===t.type&&t.selectionChange)(n)||ap(t)})})(t,e)}),t.on("remove",()=>{e.cancel()})})(n),n.on("focusin",()=>{const s=t.focusedEditor;s!==n&&(s&&s.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:s}),n.focus(!0))}),n.on("focusout",()=>{ws.setEditorTimeout(n,()=>{const s=t.focusedEditor;!Ud(n,(t=>{try{const e=Ko(D_fromDom(t.getElement()));return ip(e).fold(()=>document.body,n=>n.dom)}catch(e){return document.body}})(n))&&s===n&&(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),fu||(fu=s=>{const r=t.activeEditor;r&&Ai(s).each(a=>{a.ownerDocument===document&&a!==document.body&&!Ud(r,a)&&t.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})},cp.bind(document,"focusin",fu))},mR=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),t.activeEditor||(cp.unbind(document,"focusin",fu),fu=null)},Dx=(t,e)=>{((t,e)=>(t=>t.collapsed?S.from(u(t.startContainer,t.startOffset)).map(D_fromDom):S.none())(e).bind(n=>Gf(n)?S.some(n):!1===bn(t,n)?S.some(t):S.none()))(D_fromDom(t.getBody()),e).bind(n=>On(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},up=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},ea=t=>t.inline?(t=>{const e=t.getBody();return e&&(t=>Ex(t)||(t=>ip(Ko(t)).filter(e=>t.dom.contains(e.dom)))(t).isSome())(D_fromDom(e))})(t):(t=>t.iframeElement&&Ex(D_fromDom(t.iframeElement)))(t),fp=t=>t.editorManager.setActive(t),Nx=(t,e,n,s,r)=>{const f=n?e.startOffset:e.endOffset;return S.from(n?e.startContainer:e.endContainer).map(D_fromDom).map(m=>s&&e.collapsed?m:$r(m,r(m,f)).getOr(m)).bind(m=>rs(m)?S.some(m):cn(m).filter(rs)).map(m=>m.dom).getOr(t)},Ox=(t,e,n)=>Nx(t,e,!0,n,(s,r)=>Math.min(yf(s),r)),Mx=(t,e,n)=>Nx(t,e,!1,n,(s,r)=>r>0?r-1:r),Bx=(t,e)=>{const n=t;for(;t&&rt(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},dp=(t,e)=>Kt(e,n=>{const s=t.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),DR=["img","br"],Lx=t=>(t=>ZC(t).filter(e=>0!==e.trim().length||e.indexOf(Ge)>-1).isSome())(t)||ke(DR,Ce(t)),Ix="[data-mce-autocompleter]",BR=(t,e)=>{if(Fx(D_fromDom(t.getBody())).isNone()){const n=D_fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());He(n,D_fromDom(e.extractContents())),e.insertNode(n.dom),cn(n).each(s=>s.dom.normalize()),(t=>((t,e)=>{const n=s=>{const r=en(s);for(let a=r.length-1;a>=0;a--){const f=r[a];if(e(f))return S.some(f);const m=n(f);if(m.isSome())return m}return S.none()};return n(t)})(t,Lx))(n).map(s=>{t.selection.setCursorLocation(s.dom,(t=>"img"===Ce(t)?1:ZC(t).fold(()=>en(t).length,e=>e.length))(s))})}},Fx=t=>Mi(t,Ix),FR={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Wd=(t,e,n)=>{const s=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[s])return t[s];if(t!==e){let a=t[r];if(a)return a;for(let f=t.parent;f&&f!==e;f=f.parent)if(a=f[r],a)return a}},$R=t=>{if(!er(t.value))return!1;const e=t.parent;return!(e&&("span"!==e.name||e.attr("style"))&&/^[ ]+$/.test(t.value))},$x=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Mn{constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}static create(e,n){const s=new Mn(e,FR[e]||1);return n&&ie(n,(r,a)=>{s.attr(a,r)}),s}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const s=this;let r;if("string"!=typeof e)return null!=e&&ie(e,(a,f)=>{s.attr(f,a)}),s;if(r=s.attributes){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let a=r.length;for(;a--;)if(r[a].name===e)return r.splice(a,1),s}return s}if(e in r.map){let a=r.length;for(;a--;)if(r[a].name===e){r[a].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,s}return r.map[e]}}clone(){const e=this,n=new Mn(e.name,e.type);let s;if(s=e.attributes){const r=[];r.map={};for(let a=0,f=s.length;a<f;a++){const m=s[a];"id"!==m.name&&(r[r.length]={name:m.name,value:m.value},r.map[m.name]=m.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent.insert(e,n),e.append(n),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const s=n.next;e.insert(n,e,!0),n=s}e.remove()}remove(){const e=this,n=e.parent,s=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=s,s&&(s.prev=null)):r.next=s,n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):s.prev=r,e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const s=n.lastChild;return s?(s.next=e,e.prev=s,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,s){e.parent&&e.remove();const r=n.parent||this;return s?(n===r.firstChild?r.firstChild=e:n.prev.next=e,e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next.prev=e,e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,s=[];for(let r=n.firstChild;r;r=Wd(r,n))r.name===e&&s.push(r);return s}children(){const n=[];for(let s=this.firstChild;s;s=s.next)n.push(s);return n}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Wd(r,e))n.push(r);let s=n.length;for(;s--;){const r=n[s];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},s){const r=this;let a=r.firstChild;if($x(r))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||$x(a))return!1}if(8===a.type||3===a.type&&!$R(a)||3===a.type&&a.parent&&n[a.parent.name]&&er(a.value)||s&&s(a))return!1}while(a=Wd(a,r));return!0}walk(e){return Wd(this,null,e)}}const zx=(t,e,n=0)=>{const s=t.toLowerCase();if(-1!==s.indexOf("[if ",n)&&((t,e)=>/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(t.substr(e)))(s,n)){const r=s.indexOf("[endif]",n);return s.indexOf(">",r)}if(e){const r=s.indexOf(">",n);return-1!==r?r:s.length}{const r=/--!?>/g;r.lastIndex=n;const a=r.exec(t);return a?a.index+a[0].length:s.length}},HR=(t,e,n)=>{const s=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,a=t.getVoidElements();let f=1,m=n;for(;0!==f;)for(s.lastIndex=m;;){const g=s.exec(e);if(null===g)return m;if("!"===g[1]){m=Vn(g[2],"--")?zx(e,!1,g.index+3):zx(e,!0,g.index+1);break}{r.lastIndex=s.lastIndex;const y=r.exec(e);if(br(y)||y.index!==s.lastIndex)continue;"/"===g[1]?f-=1:$t(a,g[2])||(f+=1),m=s.lastIndex+y[0].length;break}}return m},Hx=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,s=t.schema;let r=((t,e)=>{const n=new RegExp(["\\s?("+t.join("|")+')="[^"]+"'].join("|"),"gi");return e.replace(n,"")})(t.getTempAttrs(),e);const a=s.getVoidElements();let f;for(;f=n.exec(r);){const m=n.lastIndex,g=f[0].length;let y;y=a[f[1]]?m:HR(s,r,m),r=r.substring(0,m-g)+r.substring(y),n.lastIndex=m-g}return Sn(r)},UR=Hx,KR=W.each,Vx=t=>({compare:(n,s)=>{if(n.nodeName!==s.nodeName)return!1;const r=f=>{const m={};return KR(t.getAttribs(f),g=>{const y=g.nodeName.toLowerCase();0!==y.indexOf("_")&&"style"!==y&&0!==y.indexOf("data-")&&(m[y]=t.getAttrib(f,y))}),m},a=(f,m)=>{let g,y;for(y in f)if($t(f,y)){if(g=m[y],void 0===g||f[y]!==g)return!1;delete m[y]}for(y in m)if($t(m,y))return!1;return!0};return!(!a(r(n),r(s))||!a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(s,"style")))||Ss(n)||Ss(s))}}),Ux=W.makeMap,Wx=t=>{const e=[],n=(t=t||{}).indent,s=Ux(t.indent_before||""),r=Ux(t.indent_after||""),a=xo.getEncodeFunc(t.entity_encoding||"raw",t.entities),f="xhtml"!==t.element_format;return{start:(m,g,y)=>{let x,_,E,k;if(n&&s[m]&&e.length>0&&(k=e[e.length-1],k.length>0&&"\n"!==k&&e.push("\n")),e.push("<",m),g)for(x=0,_=g.length;x<_;x++)E=g[x],e.push(" ",E.name,'="',a(E.value,!0),'"');e[e.length]=!y||f?">":" />",y&&n&&r[m]&&e.length>0&&(k=e[e.length-1],k.length>0&&"\n"!==k&&e.push("\n"))},end:m=>{let g;e.push("</",m,">"),n&&r[m]&&e.length>0&&(g=e[e.length-1],g.length>0&&"\n"!==g&&e.push("\n"))},text:(m,g)=>{m.length>0&&(e[e.length]=g?m:a(m))},cdata:m=>{e.push("<![CDATA[",m,"]]>")},comment:m=>{e.push("\x3c!--",m,"--\x3e")},pi:(m,g)=>{g?e.push("<?",m," ",a(g),"?>"):e.push("<?",m,"?>"),n&&e.push("\n")},doctype:m=>{e.push("<!DOCTYPE",m,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},ni=(t,e=_o())=>{const n=Wx(t);return(t=t||{}).validate=!("validate"in t)||t.validate,{serialize:r=>{const a=t.validate,f={3:g=>{n.text(g.value,g.raw)},8:g=>{n.comment(g.value)},7:g=>{n.pi(g.name,g.value)},10:g=>{n.doctype(g.value)},4:g=>{n.cdata(g.value)},11:g=>{if(g=g.firstChild)do{m(g)}while(g=g.next)}};n.reset();const m=g=>{const y=f[g.type];if(y)y(g);else{const x=g.name,_=x in e.getVoidElements();let E=g.attributes;if(a&&E&&E.length>1){const k=[];k.map={};const P=e.getElementRule(g.name);if(P){for(let A=0,R=P.attributesOrder.length;A<R;A++){const N=P.attributesOrder[A];if(N in E.map){const L=E.map[N];k.map[N]=L,k.push({name:N,value:L})}}for(let A=0,R=E.length;A<R;A++){const N=E[A].name;if(!(N in k.map)){const L=E.map[N];k.map[N]=L,k.push({name:N,value:L})}}E=k}}if(n.start(x,E,_),!_){let k=g.firstChild;if(k){("pre"===x||"textarea"===x)&&3===k.type&&"\n"===k.value[0]&&n.text("\n",!0);do{m(k)}while(k=k.next)}n.end(x)}}};return 1!==r.type||t.inner?3===r.type?f[3](r):f[11](r):m(r),n.getContent()}}},jx=new Set;Z(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],e=>{jx.add(e)});const qx=["font","text-decoration","text-emphasis"],hp=(t,e)=>ds(t.parseStyle(t.getAttrib(e,"style"))),QR=(t,e,n)=>{const s=hp(t,e),r=hp(t,n),a=f=>{var m,g;const y=null!==(m=t.getStyle(e,f))&&void 0!==m?m:"",x=null!==(g=t.getStyle(n,f))&&void 0!==g?g:"";return mn(y)&&mn(x)&&y!==x};return Me(s,f=>{const m=g=>Me(g,y=>y===f);if(!m(r)&&m(qx)){const g=(t=>dt(t,e=>Me(qx,n=>Vn(e,n))))(r);return Me(g,a)}return a(f)})},Kx=(t,e,n)=>S.from(n.container()).filter(rt).exists(s=>{const r=t?0:-1;return e(s.data.charAt(n.offset()+r))}),mp=ut(Kx,!0,ru),gp=ut(Kx,!1,ru),ZR=t=>{const e=t.container();return rt(e)&&(0===e.data.length||Ii(e.data)&&lu.isBookmarkNode(e.parentNode))},si=(t,e)=>n=>S.from(Dg(t?0:-1,n)).filter(e).isSome(),Yx=t=>If(t)&&"block"===Os(D_fromDom(t),"display"),Gx=t=>ge(t)&&!(t=>vt(t)&&"all"===t.getAttribute("data-mce-bogus"))(t),JR=si(!0,Yx),tP=si(!1,Yx),du=si(!0,Ms),hu=si(!1,Ms),Xx=si(!0,Di),Qx=si(!1,Di),na=si(!0,Gx),sa=si(!1,Gx),oa=t=>{Hr(t),He(t,D_fromHtml('<br data-mce-bogus="1">'))},sP=t=>{fc(t).each(e=>{Ws(e).each(n=>{Ls(t)&&Wr(e)&&Ls(n)&&Pe(e)})})},Zx=(t,e)=>((t,e,n)=>bn(e,t)?(t=>t.slice(0,-1))(((t,e)=>{const n=oe(e)?e:xe;let s=t.dom;const r=[];for(;null!=s.parentNode;){const a=s.parentNode,f=D_fromDom(a);if(r.push(f),!0===n(f))break;s=a}return r})(t,s=>n(s)||ee(s,e))):[])(t,e,xe),cr=(t,e)=>[t].concat(Zx(t,e)),pp=(t,e,n)=>TC(t,e,n,ZR),Jx=(t,e)=>ue(cr(D_fromDom(e.container()),t),Ls),t0=(t,e,n)=>pp(t,e.dom,n).forall(s=>Jx(e,n).fold(()=>!1===Ro(s,n,e.dom),r=>!1===Ro(s,n,e.dom)&&bn(r,D_fromDom(s.container())))),e0=(t,e,n)=>Jx(e,n).fold(()=>pp(t,e.dom,n).forall(s=>!1===Ro(s,n,e.dom)),s=>pp(t,s.dom,n).isNone()),bp=ut(e0,!1),n0=ut(e0,!0),iP=ut(t0,!1),aP=ut(t0,!0),lP=t=>Ad(t).exists(Wr),jd=(t,e,n)=>{const s=dt(cr(D_fromDom(n.container()),e),Ls),r=Ke(s).getOr(e);return _s(t,r.dom,n).filter(lP)},yp=(t,e)=>Ad(e).exists(Wr)||jd(!0,t,e).isSome(),Cp=(t,e)=>(t=>S.from(t.getNode(!0)).map(D_fromDom))(e).exists(Wr)||jd(!1,t,e).isSome(),cP=ut(jd,!1),uP=ut(jd,!0),s0=t=>F.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),o0=(t,e)=>{const n=dt(cr(D_fromDom(e.container()),t),Ls);return Ke(n).getOr(t)},r0=(t,e)=>s0(e)?gp(e):gp(e)||No(o0(t,e).dom,e).exists(gp),i0=(t,e)=>s0(e)?mp(e):mp(e)||Zs(o0(t,e).dom,e).exists(mp),xp=t=>Ad(t).bind(e=>za(e,rs)).exists(e=>(t=>ke(["pre","pre-wrap"],t))(Os(e,"white-space"))),qd=(t,e)=>!xp(e)&&(bp(t,e)||iP(t,e)||Cp(t,e)||r0(t,e)),Kd=(t,e)=>!xp(e)&&(n0(t,e)||aP(t,e)||yp(t,e)||i0(t,e)),a0=(t,e)=>qd(t,e)||Kd(t,(t=>{const e=t.container(),n=t.offset();return rt(e)&&n<e.data.length?F(e,n+1):t})(e)),l0=(t,e)=>Dd(t.charAt(e)),bP=t=>{const e=t.container();return rt(e)&&Te(e.data,Ge)},_P=(t,e)=>S.some(e).filter(bP).bind(n=>{const s=n.container();return((t,e)=>{const n=e.data,s=F(e,0);return!(!l0(n,0)||a0(t,s)||(e.data=" "+n.slice(1),0))})(t,s)||(t=>{const e=t.data,n=(t=>{const e=t.split("");return Kt(e,(n,s)=>Dd(n)&&s>0&&s<e.length-1&&Ig(e[s-1])&&Ig(e[s+1])?" ":n).join("")})(e);return n!==e&&(t.data=n,!0)})(s)||((t,e)=>{const n=e.data,s=F(e,n.length-1);return!(!l0(n,n.length-1)||a0(t,s)||(e.data=n.slice(0,-1)+" ",0))})(t,s)?S.some(n):S.none()}),c0=(t,e,n)=>{if(0===n)return;const s=D_fromDom(t),r=Ur(s,Ls).getOr(s),a=t.data.slice(e,e+n),f=e+n>=t.data.length&&Kd(r,F(t,t.data.length)),m=0===e&&qd(r,F(t,0));t.replaceData(e,n,nd(a,4,m,f))},Yd=(t,e)=>{const n=t.data.slice(e),s=n.length-zl(n).length;c0(t,e,s)},vp=(t,e)=>{const n=t.data.slice(0,e),s=n.length-Nr(n).length;c0(t,e-s,s)},_p=(t,e,n,s=!0)=>{const r=Nr(t.data).length,a=s?t:e,f=s?e:t;return s?a.appendData(f.data):a.insertData(0,f.data),Pe(D_fromDom(f)),n&&Yd(a,r),a},kP=(t,e)=>((t,e)=>{const n=t.container(),s=t.offset();return!1===F.isTextPosition(t)&&n===e.parentNode&&s>F.before(e).offset()})(e,t)?F(e.container(),e.offset()-1):e,u0=t=>Cs(t.previousSibling)?S.some((t=>rt(t)?F(t,t.data.length):F.after(t))(t.previousSibling)):t.previousSibling?Oo(t.previousSibling):S.none(),f0=t=>Cs(t.nextSibling)?S.some((t=>rt(t)?F(t,0):F.before(t))(t.nextSibling)):t.nextSibling?On(t.nextSibling):S.none(),OP=(t,e,n)=>((t,e,n)=>t?((t,e)=>f0(e).orThunk(()=>u0(e)).orThunk(()=>((t,e)=>Zs(t,F.after(e)).fold(()=>No(t,F.before(e)),S.some))(t,e)))(e,n):((t,e)=>u0(e).orThunk(()=>f0(e)).orThunk(()=>((t,e)=>{const n=F.before(e.previousSibling?e.previousSibling:e.parentNode);return No(t,n).fold(()=>Zs(t,F.after(e)),S.some)})(t,e)))(e,n))(t,e,n).map(ut(kP,n)),d0=(t,e,n)=>{n.fold(()=>{t.focus()},s=>{t.selection.setRng(s.toRange(),e)})},BP=(t,e)=>e&&$t(t.schema.getBlockElements(),Ce(e)),LP=t=>{if($e(t)){const e=D_fromHtml('<br data-mce-bogus="1">');return Hr(t),He(t,e),S.some(F.before(e.dom))}return S.none()},ra=(t,e,n,s=!0)=>{const r=OP(e,t.getBody(),n.dom),a=Ur(n,ut(BP,t),(t=>e=>e.dom===t)(t.getBody())),f=((t,e,n)=>{const s=Ws(t).filter(Wn),r=qo(t).filter(Wn);return Pe(t),((t,e,n,s)=>t.isSome()&&e.isSome()&&n.isSome()?S.some(s(t.getOrDie(),e.getOrDie(),n.getOrDie())):S.none())(s,r,e,(a,f,m)=>{const g=a.dom,y=f.dom,x=g.data.length;return _p(g,y,n),m.container()===y?F(g,x):m}).orThunk(()=>(n&&(s.each(a=>vp(a.dom,a.dom.length)),r.each(a=>Yd(a.dom,0))),e))})(n,r,((t,e)=>$t(t.schema.getTextInlineElements(),Ce(e)))(t,n));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind(LP).fold(()=>{s&&d0(t,e,f)},m=>{s&&d0(t,e,S.some(m))})},Sp=t=>yn(t,"td,th"),wp=(t,e)=>({start:t,end:e}),mu=To_generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Gd=(t,e)=>Qo(D_fromDom(t),"td,th",e),h0=t=>!ee(t.start,t.end),m0=(t,e)=>au(t.start,e).bind(n=>au(t.end,e).bind(s=>Pa(ee(n,s),n))),kp=t=>e=>m0(e,t).map(n=>((t,e,n)=>({rng:t,table:e,cells:n}))(e,n,Sp(n))),g0=(t,e,n,s)=>{if(n.collapsed||!t.forall(h0))return S.none();if(e.isSameTable){const r=t.bind(kp(s));return S.some({start:r,end:r})}{const r=Gd(n.startContainer,s),a=Gd(n.endContainer,s),f=r.bind((t=>e=>au(e,t).bind(n=>es(Sp(n)).map(s=>wp(e,s))))(s)).bind(kp(s)),m=a.bind((t=>e=>au(e,t).bind(n=>Ke(Sp(n)).map(s=>wp(s,e))))(s)).bind(kp(s));return S.some({start:f,end:m})}},p0=(t,e)=>Vt(t,n=>ee(n,e)),Ep=t=>pn(p0(t.cells,t.rng.start),p0(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),b0=(t,e)=>{const{startTable:n,endTable:s}=e,r=t.cloneRange();return n.each(a=>r.setStartAfter(a.dom)),s.each(a=>r.setEndBefore(a.dom)),r},GP=(t,e)=>{const n=(t=>e=>ee(t,e))(t),s=((t,e)=>{const n=Gd(t.startContainer,e),s=Gd(t.endContainer,e);return pn(n,s,wp)})(e,n),r=((t,e)=>{const n=y=>au(D_fromDom(y),e),s=n(t.startContainer),r=n(t.endContainer),a=s.isSome(),f=r.isSome(),m=pn(s,r,ee).getOr(!1);return{startTable:s,endTable:r,isStartInTable:a,isEndInTable:f,isSameTable:m,isMultiTable:!m&&a&&f}})(e,n);return((t,e,n)=>t.exists(s=>((t,e)=>!h0(t)&&m0(t,e).exists(n=>{const s=n.dom.rows;return 1===s.length&&1===s[0].cells.length}))(s,n)&&qg(s.start,e)))(s,e,n)?s.map(a=>mu.singleCellTable(e,a.start)):r.isMultiTable?((t,e,n,s)=>g0(t,e,n,s).bind(({start:r,end:a})=>{const f=r.bind(Ep).getOr([]),m=a.bind(Ep).getOr([]);if(f.length>0&&m.length>0){const g=b0(n,e);return S.some(mu.multiTable(f,m,g))}return S.none()}))(s,r,e,n):((t,e,n,s)=>g0(t,e,n,s).bind(({start:r,end:a})=>r.or(a)).bind(r=>{const{isSameTable:a}=e,f=Ep(r).getOr([]);if(a&&r.cells.length===f.length)return S.some(mu.fullTable(r.table));if(f.length>0){if(a)return S.some(mu.partialTable(f,S.none()));{const m=b0(n,e);return S.some(mu.partialTable(f,S.some(he(wt({},e),{rng:m}))))}}return S.none()}))(s,r,e,n)},y0=t=>((t=>8===of(t)||"#comment"===Ce(t))(t)?Ws(t):fc(t)).bind(y0).orThunk(()=>S.some(t)),C0=t=>Z(t,e=>{Rn(e,"contenteditable"),oa(e)}),Ap=(t,e,n,s)=>{const r=n.cloneRange();s?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Tp(t,r,e,!1).each(a=>a())},x0=t=>{const e=bl(t),n=D_fromDom(t.selection.getNode());Ni(n.dom)&&$e(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&Me(e,s=>ee(s,n))&&de(n,"data-mce-selected","1")},v0=(t,e,n)=>S.some(()=>{const s=t.selection.getRng(),r=n.bind(({rng:a,isStartInTable:f})=>{const m=((t,e)=>S.from(t.dom.getParent(e,t.dom.isBlock)).map(D_fromDom))(t,f?a.endContainer:a.startContainer);a.deleteContents(),((t,e,n)=>{n.each(s=>{e?Pe(s):(oa(s),t.selection.setCursorLocation(s.dom,0))})})(t,f,m.filter($e));const g=f?e[0]:e[e.length-1];return Ap(t,g,s,f),$e(g)?S.none():S.some(f?e.slice(1):e.slice(0,-1))}).getOr(e);C0(r),x0(t)}),ZP=(t,e,n,s)=>S.some(()=>{const r=t.selection.getRng(),a=e[0],f=n[n.length-1];Ap(t,a,r,!0),Ap(t,f,r,!1);const m=$e(a)?e:e.slice(1),g=$e(f)?n:n.slice(0,-1);C0(m.concat(g)),s.deleteContents(),x0(t)}),Tp=(t,e,n,s=!0)=>S.some(()=>{e.deleteContents();const r=y0(n).getOr(n),a=D_fromDom(t.dom.getParent(r.dom,t.dom.isBlock));if($e(a)&&(oa(a),s&&t.selection.setCursorLocation(a.dom,0)),!ee(n,a)){const f=Re(cn(a),n)?[]:(t=>cn(t).map(en).map(n=>dt(n,s=>!ee(t,s))).getOr([]))(a);Z(f.concat(en(n)),m=>{!ee(m,a)&&!bn(m,a)&&$e(m)&&Pe(m)})}}),JP=(t,e)=>S.some(()=>ra(t,!1,e)),_0=(t,e)=>ue(cr(e,t),Li),Rp=(t,e)=>ue(cr(e,t),e=>rs(e)&&"caption"===Ce(e)),Xd=(t,e)=>S.some(()=>{oa(e),t.selection.setCursorLocation(e.dom,0)}),S0=(t,e)=>t?Xx(e):Qx(e),dD=(t,e,n)=>{const s=D_fromDom(t.getBody());return Rp(s,n).fold(()=>((t,e,n,s)=>{const r=F.fromRangeStart(t.selection.getRng());return _0(n,s).bind(a=>$e(a)?Xd(t,a):((t,e,n,s,r)=>Pd(n,t.getBody(),r).bind(a=>_0(e,D_fromDom(a.getNode())).bind(f=>ee(f,s)?S.none():S.some(Ft))))(t,n,e,a,r))})(t,e,s,n).orThunk(()=>Pa(((t,e)=>{const n=F.fromRangeStart(t.selection.getRng());return S0(e,n)||_s(e,t.getBody(),n).exists(s=>S0(e,s))})(t,e),Ft)),r=>((t,e,n,s)=>{const r=F.fromRangeStart(t.selection.getRng());return $e(s)?Xd(t,s):((t,e,n,s,r)=>Pd(n,t.getBody(),r).fold(()=>S.some(Ft),a=>((t,e,n,s)=>On(t.dom).bind(r=>Oo(t.dom).map(a=>e?n.isEqual(r)&&s.isEqual(a):n.isEqual(a)&&s.isEqual(r))).getOr(!0))(s,n,r,a)?((t,e)=>Xd(t,e))(t,s):((t,e,n)=>Rp(t,D_fromDom(n.getNode())).fold(()=>S.some(Ft),s=>Pa(!ee(s,e),Ft)))(e,s,a)))(t,n,e,s,r)})(t,e,s,r))},Pp=(t,e)=>{const n=D_fromDom(t.selection.getStart(!0)),s=bl(t);return t.selection.isCollapsed()&&0===s.length?dD(t,e,n):((t,e,n)=>{const s=D_fromDom(t.getBody()),r=t.selection.getRng();return 0!==n.length?v0(t,n,S.none()):((t,e,n,s)=>Rp(e,s).fold(()=>((t,e,n)=>GP(e,n).bind(s=>s.fold(ut(Tp,t),ut(JP,t),ut(v0,t),ut(ZP,t))))(t,e,n),r=>((t,e)=>Xd(t,e))(t,r)))(t,s,r,e)})(t,n,s)},gu=(t,e)=>{for(;e&&e!==t;){if(qs(e)||ge(e))return e;e=e.parentNode}return null},Dp=(t,e)=>{e(t),t.firstChild&&Dp(t.firstChild,e),t.next&&Dp(t.next,e)},w0=(t,e,n,s)=>{const r=n.name;for(let a=0,f=t.length;a<f;a++){const m=t[a];if(m.name===r){const g=s.nodes[r];g?g.nodes.push(n):s.nodes[r]={filter:m,nodes:[n]}}}if(n.attributes)for(let a=0,f=e.length;a<f;a++){const m=e[a],g=m.name;if(g in n.attributes.map){const y=s.attributes[g];y?y.nodes.push(n):s.attributes[g]={filter:m,nodes:[n]}}}},k0=(t,e)=>{const n=s=>{ie(s,r=>{const a=dt(r.nodes,f=>Mt(f.parent));Z(r.filter.callbacks,f=>{f(a,r.filter.name,e)})})};n(t.nodes),n(t.attributes)},E0=(t,e,n,s={})=>{const r=((t,e,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&Dp(n.firstChild,r=>{w0(t,e,r,s)}),s})(t,e,n);k0(r,s)},A0=(t,e,n,s)=>{e.insert&&n[s.name]?s.empty().append(new Mn("br",1)):s.empty().append(new Mn("#text",3)).value=Ge},T0=(t,e)=>t&&t.firstChild&&t.firstChild===t.lastChild&&t.firstChild.name===e,Qd=(t,e,n,s)=>s.isEmpty(e,n,r=>((t,e)=>{const n=t.getElementRule(e.name);return n&&n.paddEmpty})(t,r)),Np=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const s=t.children();for(const r of s)e.isValidChild(n.name,r.name)||Np(r,e,n);t.unwrap()}},Op=(t,e,n=Ft)=>{const s=e.getTextBlockElements(),r=e.getNonEmptyElements(),a=e.getWhitespaceElements(),f=W.makeMap("tr,td,th,tbody,thead,tfoot,table"),m=new Set;for(let g=0;g<t.length;g++){const y=t[g];let x,_,E;if(!y.parent||m.has(y))continue;if(s[y.name]&&"li"===y.parent.name){let P=y.next;for(;P&&s[P.name];)P.name="li",m.add(P),y.parent.insert(P,y.parent),P=P.next;y.unwrap();continue}const k=[y];for(x=y.parent;x&&!e.isValidChild(x.name,y.name)&&!f[x.name];x=x.parent)k.push(x);if(x&&k.length>1)if(e.isValidChild(x.name,y.name)){k.reverse(),_=k[0].clone(),n(_);let P=_;for(let A=0;A<k.length-1;A++){e.isValidChild(P.name,k[A].name)?(E=k[A].clone(),n(E),P.append(E)):E=P;for(let R=k[A].firstChild;R&&R!==k[A+1];){const N=R.next;E.append(R),R=N}P=E}Qd(e,r,a,_)?x.insert(y,k[0],!0):(x.insert(_,k[0],!0),x.insert(y,_)),x=k[0],(Qd(e,r,a,x)||T0(x,"br"))&&x.empty().remove()}else Np(y,e);else if(y.parent){if("li"===y.name){let P=y.prev;if(P&&("ul"===P.name||"ol"===P.name)){P.append(y);continue}if(P=y.next,P&&("ul"===P.name||"ol"===P.name)){P.insert(y,P.firstChild,!0);continue}const A=new Mn("ul",1);n(A),y.wrap(A);continue}if(e.isValidChild(y.parent.name,"div")&&e.isValidChild("div",y.name)){const P=new Mn("div",1);n(P),y.wrap(P)}else Np(y,e)}}},Mp=t=>t.collapsed?t:(t=>{const e=F.fromRangeStart(t),n=F.fromRangeEnd(t),s=t.commonAncestorContainer;return _s(!1,s,n).map(r=>!Ro(e,n,s)&&Ro(e,r,s)?((t,e,n,s)=>{const r=document.createRange();return r.setStart(t,e),r.setEnd(n,s),r})(e.container(),e.offset(),r.container(),r.offset()):t).getOr(t)})(t),SD=(t,e)=>{let n=e.firstChild,s=e.lastChild;return n&&"meta"===n.name&&(n=n.next),s&&"mce_marker"===s.attr("id")&&(s=s.prev),((t,e)=>{const n=t.getNonEmptyElements();return e&&(e.isEmpty(n)||((t,e)=>t.getBlockElements()[e.name]&&(t=>t.firstChild&&t.firstChild===t.lastChild)(e)&&(t=>"br"===t.name||t.value===Ge)(e.firstChild))(t,e))})(t,s)&&(s=s.prev),!(!n||n!==s||"ul"!==n.name&&"ol"!==n.name)},PD=t=>t.length>0&&(t=>!t.firstChild||(t=>t&&t.firstChild&&t.firstChild===t.lastChild&&(t=>t.data===Ge||Le(t))(t.firstChild))(t))(t[t.length-1])?t.slice(0,-1):t,Bp=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},R0=(t,e)=>{const n=F.after(t),r=Do(e).prev(n);return r?r.toRange():null},ID=(t,e,n,s)=>{const r=((t,e,n)=>{const s=e.serialize(n);return(t=>{const e=t.firstChild,n=t.lastChild;return e&&"META"===e.nodeName&&e.parentNode.removeChild(e),n&&"mce_marker"===n.id&&n.parentNode.removeChild(n),t})(t.createFragment(s))})(e,t,s),a=Bp(e,n.startContainer),f=PD((t=>dt(t.childNodes,e=>"LI"===e.nodeName))(r.firstChild)),y=e.getRoot(),x=_=>{const E=F.fromRangeStart(n),k=Do(e.getRoot()),P=1===_?k.prev(E):k.next(E);return!P||Bp(e,P.getNode())!==a};return x(1)?((t,e,n)=>{const s=t.parentNode;return W.each(e,r=>{s.insertBefore(r,t)}),((t,e)=>{const n=F.before(t),r=Do(e).next(n);return r?r.toRange():null})(t,n)})(a,f,y):x(2)?((t,e,n,s)=>(s.insertAfter(e.reverse(),t),R0(e[0],n)))(a,f,y,e):((t,e,n,s)=>{const r=((t,e)=>{const n=e.cloneRange(),s=e.cloneRange();return n.setStartBefore(t),s.setEndAfter(t),[n.cloneContents(),s.cloneContents()]})(t,s),a=t.parentNode;return a.insertBefore(r[0],t),W.each(e,f=>{a.insertBefore(f,t)}),a.insertBefore(r[1],t),a.removeChild(t),R0(e[e.length-1],n)})(a,f,y,n)},Lp=Ni,YD=(t,e,n)=>{let s,r,a;const f=t.selection,m=t.dom,g=t.parser,y=n.merge,x=ni({validate:!0},t.schema),_='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,_),r=f.getRng();const E=r.startContainer||(r.parentElement?r.parentElement():null),k=t.getBody();E===k&&f.isCollapsed()&&m.isBlock(k.firstChild)&&((t,e)=>e&&!t.schema.getVoidElements()[e.nodeName])(t,k.firstChild)&&m.isEmpty(k.firstChild)&&(r=m.createRng(),r.setStart(k.firstChild,0),r.setEnd(k.firstChild,0),f.setRng(r)),f.isCollapsed()||(t=>{const e=t.dom,n=Mp(t.selection.getRng());t.selection.setRng(n);const s=e.getParent(n.startContainer,Lp);((t,e,n)=>null!==n&&n===t.getParent(e.endContainer,Lp)&&qg(D_fromDom(n),e))(e,n,s)?Tp(t,n,D_fromDom(s)):t.getDoc().execCommand("Delete",!1,null)})(t),s=f.getNode();const P={context:s.nodeName.toLowerCase(),data:n.data,insert:!0},A=g.parse(e,P);if(!0===n.paste&&SD(t.schema,A)&&((t,e)=>!!Bp(t,e))(m,s))return r=ID(x,m,f.getRng(),A),f.setRng(r),e;if((t=>{let e=t;for(;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")})(A),a=A.lastChild,"mce_marker"===a.attr("id")){const R=a;for(a=a.prev;a;a=a.walk(!0))if(3===a.type||!m.isBlock(a.name)){t.schema.isValidChild(a.parent.name,"span")&&a.parent.insert(R,a,"br"===a.name);break}}if(t._selectionOverrides.showBlockCaretContainer(s),P.invalid){t.selection.setContent(_),s=f.getNode();const R=t.getBody();for(9===s.nodeType?s=a=R:a=s;a!==R;)s=a,a=a.parentNode;e=s===R?R.innerHTML:m.getOuterHTML(s);const N=g.parse(e);for(let V=N;V;V=V.walk())if("mce_marker"===V.attr("id")){V.replace(A);break}const L=A.children(),q=A.parent.name;A.unwrap();const H=dt(L,V=>!t.schema.isValidChild(q,V.name));Op(H,t.schema),E0(g.getNodeFilters(),g.getAttributeFilters(),N),e=x.serialize(N),s===R?m.setHTML(R,e):m.setOuterHTML(s,e)}else e=x.serialize(A),((t,e,n)=>{if("all"===n.getAttribute("data-mce-bogus"))n.parentNode.insertBefore(t.dom.createFragment(e),n);else{const s=n.firstChild,r=n.lastChild;!s||s===r&&"BR"===s.nodeName?t.dom.setHTML(n,e):t.selection.setContent(e,{no_events:!0})}})(t,e,s);return((t,e)=>{const n=t.schema.getTextInlineElements(),s=t.dom;if(e){const r=t.getBody(),a=Vx(s);W.each(s.select("*[data-mce-fragment]"),f=>{if(Mt(n[f.nodeName.toLowerCase()])&&((t,e)=>fe(hp(t,e),n=>!(t=>jx.has(t))(n)))(s,f))for(let g=f.parentNode;Mt(g)&&g!==r&&!QR(s,f,g);g=g.parentNode)if(a.compare(g,f)){s.remove(f,!0);break}})}})(t,y),((t,e)=>{let n;const s=t.dom,r=t.selection;if(!e)return;r.scrollIntoView(e);const a=gu(t.getBody(),e);if("false"===s.getContentEditable(a))return s.remove(e),void r.select(a);let f=s.createRng();const m=e.previousSibling;if(rt(m)){f.setStart(m,m.nodeValue.length);const x=e.nextSibling;rt(x)&&(m.appendData(x.data),x.parentNode.removeChild(x))}else f.setStartBefore(e),f.setEndBefore(e);const y=s.getParent(e,s.isBlock);s.remove(e),y&&s.isEmpty(y)&&(Hr(D_fromDom(y)),f.setStart(y,0),f.setEnd(y,0),Lp(y)||(t=>!!t.getAttribute("data-mce-fragment"))(y)||!(n=(x=>{let _=F.fromRangeStart(x);if(_=Do(t.getBody()).next(_),_)return _.toRange()})(f))?s.add(y,s.create("br",{"data-mce-bogus":"1"})):(f=n,s.remove(y))),r.setRng(f)})(t,m.get("mce_marker")),(t=>{W.each(t.getElementsByTagName("*"),e=>{e.removeAttribute("data-mce-fragment")})})(t.getBody()),((t,e)=>{S.from(t.getParent(e,"td,th")).map(D_fromDom).each(sP)})(m,f.getStart()),e},Zd=t=>t instanceof Mn,Ip=(t,e,n)=>{t.dom.setHTML(t.getBody(),e),!0!==n&&(t=>{ea(t)&&On(t.getBody()).each(e=>{const n=e.getNode(),s=Di(n)?On(n).getOr(e):e;t.selection.setRng(s.toRange())})})(t)},JD=(t,e)=>((t,e)=>{const n=t.dom;return n.parentNode?((t,e)=>ue(t.dom.childNodes,r=>e(D_fromDom(r))).map(D_fromDom))(D_fromDom(n.parentNode),s=>!ee(t,s)&&e(s)):S.none()})(t,e).isSome(),P0=t=>oe(t)?t:xe,Fp=(t,e,n)=>{const s=e(t),r=P0(n);return s.orThunk(()=>r(t)?S.none():((t,e,n)=>{let s=t.dom;const r=P0(n);for(;s.parentNode;){s=s.parentNode;const a=D_fromDom(s),f=e(a);if(f.isSome())return f;if(r(a))break}return S.none()})(t,e,r))},$p=Hg,D0=(t,e,n)=>{const s=t.formatter.get(n);if(s)for(let r=0;r<s.length;r++){const a=s[r];if(as(a)&&!1===a.inherit&&t.dom.is(e,a.selector))return!0}return!1},zp=(t,e,n,s,r)=>{const a=t.dom.getRoot();return e!==a&&(e=t.dom.getParent(e,f=>!!D0(t,f,n)||f.parentNode===a||!!Lo(t,f,n,s,!0)),!!Lo(t,e,n,s,r))},Jd=(t,e,n)=>!!(on(n)&&$p(e,n.inline)||Bo(n)&&$p(e,n.block))||!!as(n)&&vt(e)&&t.is(e,n.selector),N0=(t,e,n,s,r,a)=>{const f=n[s];if(oe(n.onmatch))return n.onmatch(e,n,s);if(f)if(_n(f.length)){for(const m in f)if($t(f,m)){const g="attributes"===s?t.getAttrib(e,m):Md(t,e,m),y=ar(f[m],a),x=An(g)||ho(g);if(x&&An(y))continue;if(r&&x&&!n.exact||(!r||n.exact)&&!$p(g,Vg(y,m)))return!1}}else for(let m=0;m<f.length;m++)if("attributes"===s?t.getAttrib(e,f[m]):Md(t,e,f[m]))return!0;return!0},Lo=(t,e,n,s,r)=>{const a=t.formatter.get(n),f=t.dom;if(a&&e)for(let m=0;m<a.length;m++){const g=a[m];if(Jd(t.dom,e,g)&&N0(f,e,g,"attributes",r,s)&&N0(f,e,g,"styles",r,s)){const y=g.classes;if(y)for(let x=0;x<y.length;x++)if(!t.dom.hasClass(e,ar(y[x],s)))return;return g}}},Hp=(t,e,n,s,r)=>{if(s)return zp(t,s,e,n,r);if(s=t.selection.getNode(),zp(t,s,e,n,r))return!0;const a=t.selection.getStart();return!(a===s||!zp(t,a,e,n,r))},O0="_mce_caret",M0=t=>(t=>{const e=[];for(;t;){if(3===t.nodeType&&"\ufeff"!==t.nodeValue||t.childNodes.length>1)return[];1===t.nodeType&&e.push(t),t=t.firstChild}return e})(t).length>0,B0=t=>{if(t){const e=new We(t,t);for(t=e.current();t;t=e.next())if(rt(t))return t}return null},Vp=t=>{const e=D_fromTag("span");return jn(e,{id:O0,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&He(e,D_fromText("\ufeff")),e},Up=(t,e,n=!0)=>{const s=t.dom,r=t.selection;if(M0(e))ra(t,!1,D_fromDom(e),n);else{const a=r.getRng(),f=s.getParent(e,s.isBlock),m=a.startContainer,g=a.startOffset,y=a.endContainer,x=a.endOffset,_=(t=>{const e=B0(t);return e&&"\ufeff"===e.nodeValue.charAt(0)&&e.deleteData(0,1),e})(e);s.remove(e,!0),m===_&&g>0&&a.setStart(_,g-1),y===_&&x>0&&a.setEnd(_,x-1),f&&s.isEmpty(f)&&oa(D_fromDom(f)),r.setRng(a)}},Wp=(t,e,n=!0)=>{const s=t.dom,r=t.selection;if(e)Up(t,e,n);else if(!(e=ta(t.getBody(),r.getStart())))for(;e=s.get(O0);)Up(t,e,!1)},L0=(t,e)=>(t.appendChild(e),e),I0=(t,e)=>{const n=me(t,(s,r)=>L0(s,r.cloneNode(!1)),e);return L0(n,n.ownerDocument.createTextNode("\ufeff"))},fN=(t,e,n,s)=>{const r=t.dom,a=t.selection;let f,m,g;const y=[],x=a.getRng(),_=x.startContainer;for(m=_,3===_.nodeType&&(x.startOffset!==_.nodeValue.length&&(f=!0),m=m.parentNode);m;){if(Lo(t,m,e,n,s)){g=m;break}m.nextSibling&&(f=!0),y.push(m),m=m.parentNode}if(g)if(f){const k=a.getBookmark();x.collapse(!0);let P=pl(t,x,t.formatter.get(e),!0);P=Vd(P),t.formatter.remove(e,n,P,s),a.moveToBookmark(k)}else{const k=ta(t.getBody(),g),P=Vp(!1).dom;((t,e,n)=>{const s=t.dom,r=s.getParent(n,ut($g,t));r&&s.isEmpty(r)?n.parentNode.replaceChild(e,n):((t=>{const e=yn(t,"br"),n=dt((t=>{const e=[];let n=t.dom;for(;n;)e.push(D_fromDom(n)),n=n.lastChild;return e})(t).slice(-1),Wr);e.length===n.length&&Z(n,Pe)})(D_fromDom(n)),s.isEmpty(n)?n.parentNode.replaceChild(e,n):s.insertAfter(e,n))})(t,P,null!==k?k:g);const A=((t,e,n,s,r,a)=>{const f=t.formatter,m=t.dom,g=dt(ds(f.get()),_=>_!==s&&!Te(_,"removeformat")),y=((t,e,n)=>It(n,(s,r)=>{const a=((t,e)=>Me(t.formatter.get(e),s=>{const r=a=>a.length>1&&"%"===a.charAt(0);return Me(["styles","attributes"],a=>ce(s,a).exists(f=>{const m=Fe(f)?f:kr(f);return Me(m,r)}))}))(t,r);return t.formatter.matchNode(e,r,{},a)?s.concat([r]):s},[]))(t,n,g);if(dt(y,_=>!((t,e,n)=>{const s=["inline","block","selector","attributes","styles","classes"],r=a=>ms(a,(f,m)=>Me(s,g=>g===m));return Me(t.formatter.get(e),a=>{const f=r(a);return Me(t.formatter.get(n),m=>{const g=r(m);return((t,e,n=ui)=>$n(n).eq(t,e))(f,g)})})})(t,_,s)).length>0){const _=n.cloneNode(!1);return m.add(e,_),f.remove(s,r,_,a),m.remove(_),S.some(_)}return S.none()})(t,P,g,e,n,s),R=I0(y.concat(A.toArray()),P);Up(t,k,!1),a.setCursorLocation(R,1),r.isEmpty(g)&&r.remove(g)}},gN=(t,e)=>{const n=t.schema.getTextInlineElements();return $t(n,Ce(e))&&!Mo(e.dom)&&!Xo(e.dom)},th={},F0=gs,$0=Er;((t,e)=>{th[t]||(th[t]=[]),th[t].push(t=>{const e=t.selection.getRng();let n;const a=is(["pre"]);e.collapsed||(n=t.selection.getSelectedBlocks(),$0(F0(F0(n,a),f=>a(f.previousSibling)&&-1!==wa(n,f.previousSibling)),f=>{((f,m)=>{const g=D_fromDom(m),y=Us(g).dom;Pe(g),po(D_fromDom(f),[D_fromTag("br",y),D_fromTag("br",y),...en(g)])})(f.previousSibling,f)}))})})("pre");const jp=W.each,qp=t=>vt(t)&&!Ss(t)&&!Mo(t)&&!Xo(t),z0=(t,e)=>{for(let n=t;n;n=n[e]){if(rt(n)&&mn(n.data))return t;if(vt(n)&&!Ss(n))return n}return t},H0=(t,e,n)=>{const s=Vx(t);if(e&&n&&(e=z0(e,"previousSibling"),n=z0(n,"nextSibling"),s.compare(e,n))){for(let r=e.nextSibling;r&&r!==n;){const a=r;r=r.nextSibling,e.appendChild(a)}return t.remove(n),W.each(W.grep(n.childNodes),r=>{e.appendChild(r)}),e}return n},V0=(t,e,n,s)=>{if(s&&!1!==e.merge_siblings){const r=H0(t,FC(s),s);H0(t,r,FC(r,!0))}},Kp=(t,e,n)=>{jp(t.childNodes,s=>{qp(s)&&(e(s)&&n(s),s.hasChildNodes()&&Kp(s,e,n))})},U0=(t,e)=>n=>!(!n||!Md(t,n,e)),W0=(t,e,n)=>s=>{t.setStyle(s,e,n),""===s.getAttribute("style")&&s.removeAttribute("style"),((t,e)=>{"SPAN"===e.nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)})(t,s)},pu=To_generate([{keep:[]},{rename:["name"]},{removed:[]}]),vN=/^(src|href|style)$/,Yp=W.each,eh=Hg,j0=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),q0=(t,e,n)=>{let s=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(vt(s)){const a=s.childNodes.length-1;!n&&r&&r--,s=s.childNodes[r>a?a:r]}return rt(s)&&n&&r>=s.nodeValue.length&&(s=new We(s,t.getBody()).next()||s),rt(s)&&!n&&0===r&&(s=new We(s,t.getBody()).prev()||s),s},K0=(t,e)=>{const n=e?"firstChild":"lastChild";if((t=>/^(TR|TH|TD)$/.test(t.nodeName))(t)&&t[n]){const s=t[n];return"TR"===t.nodeName&&s[n]||s}return t},Gp=(t,e,n,s)=>{const r=t.create(n,s);return e.parentNode.insertBefore(r,e),r.appendChild(e),r},Y0=(t,e,n,s,r)=>{const a=D_fromDom(e),f=D_fromDom(t.create(s,r)),m=n?uc(a):cc(a);return po(f,m),n?(qn(a,f),Tf(f,a)):(go(a,f),He(f,a)),f.dom},G0=(t,e,n,s,r)=>{let a;const f=t.dom;if(!Jd(f,s,e)&&!((t,e)=>e.links&&"A"===t.nodeName)(s,e))return pu.keep();const m=s;if(on(e)&&"all"===e.remove&&Fe(e.preserve_attributes)){const g=dt(f.getAttribs(m),y=>ke(e.preserve_attributes,y.name.toLowerCase()));if(f.removeAllAttribs(m),Z(g,y=>f.setAttrib(m,y.name,y.value)),g.length>0)return pu.rename("span")}if("all"!==e.remove){Yp(e.styles,(y,x)=>{y=Vg(ar(y,n),x+""),Ts(x)&&(x=y,r=null),(e.remove_similar||!r||eh(Md(f,r,x),y))&&f.setStyle(m,x,""),a=!0}),a&&""===f.getAttrib(m,"style")&&(m.removeAttribute("style"),m.removeAttribute("data-mce-style")),Yp(e.attributes,(y,x)=>{let _;if(y=ar(y,n),Ts(x)&&(x=y,r=null),e.remove_similar||!r||eh(f.getAttrib(r,x),y)){if("class"===x&&(y=f.getAttrib(m,x))&&(_="",Z(y.split(/\s+/),E=>{/mce\-\w+/.test(E)&&(_+=(_?" ":"")+E)}),_))return void f.setAttrib(m,x,_);if(vN.test(x)&&m.removeAttribute("data-mce-"+x),"style"===x&&is(["li"])(m)&&"none"===f.getStyle(m,"list-style-type"))return m.removeAttribute(x),void f.setStyle(m,"list-style-type","none");"class"===x&&m.removeAttribute("className"),m.removeAttribute(x)}}),Yp(e.classes,y=>{y=ar(y,n),(!r||f.hasClass(r,y))&&f.removeClass(m,y)});const g=f.getAttribs(m);for(let y=0;y<g.length;y++){const x=g[y].nodeName;if(0!==x.indexOf("_")&&0!==x.indexOf("data-"))return pu.keep()}}return"none"!==e.remove?(((t,e,n)=>{const s=e.parentNode;let r;const a=t.dom,f=Gn(t);Bo(n)&&s===a.getRoot()&&(!n.list_block||!eh(e,n.list_block))&&Z(dn(e.childNodes),m=>{ml(t,f,m.nodeName.toLowerCase())?r?r.appendChild(m):(r=Gp(a,m,f),a.setAttribs(r,Qi(t))):r=null}),(!(t=>as(t)&&on(t)&&Re(ce(t,"mixed"),!0))(n)||eh(n.inline,e))&&a.remove(e,!0)})(t,m,e),pu.removed()):pu.keep()},vl=(t,e,n,s,r)=>G0(t,e,n,s,r).fold(xe,a=>(t.dom.rename(s,a),!0),Ne),EN=(t,e,n,s)=>G0(t,e,n,s,s).fold(st(s),r=>(t.dom.createFragment().appendChild(s),t.dom.rename(s,r)),st(null)),X0=(t,e,n,s,r)=>{const a=t.formatter.get(e),f=a[0];let m=!0;const g=t.dom,y=t.selection,x=R=>{const N=((t,e,n,s,r)=>{let a;return Z(Bd(t.dom,e.parentNode).reverse(),f=>{if(!a&&"_start"!==f.id&&"_end"!==f.id){const m=Lo(t,f,n,s,r);m&&!1!==m.split&&(a=f)}}),a})(t,R,e,n,r);return((t,e,n,s,r,a,f,m)=>{let g,y,x;const _=t.dom;if(n){const E=n.parentNode;for(let k=s.parentNode;k&&k!==E;k=k.parentNode){g=_.clone(k,!1);for(let P=0;P<e.length&&(g=EN(t,e[P],m,g),null!==g);P++);g&&(y&&g.appendChild(y),x||(x=g),y=g)}(!f.mixed||!_.isBlock(n))&&(s=_.split(n,s)),y&&(r.parentNode.insertBefore(y,r),x.appendChild(r),on(f)&&V0(_,f,0,y))}return s})(t,a,N,R,R,0,f,n)},E=R=>Me(a,N=>vl(t,N,n,R,R)),k=R=>{let N=!0,L=!1;vt(R)&&g.getContentEditable(R)&&(N=m,m="true"===g.getContentEditable(R),L=!0);const q=dn(R.childNodes);if(m&&!L){const ot=E(R)||Me(a,X=>Jd(g,R,X)),Y=R.parentNode;!ot&&Mt(Y)&&Ug(f)&&E(Y)}if(f.deep&&q.length){for(let V=0;V<q.length;V++)k(q[V]);L&&(m=N)}Z(["underline","line-through","overline"],V=>{vt(R)&&t.dom.getStyle(R,"text-decoration")===V&&R.parentNode&&$C(g,R.parentNode)===V&&vl(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:V}},null,R)})},P=R=>{const N=g.get(R?"_start":"_end");let L=N[R?"firstChild":"lastChild"];return(R=>Ss(R)&&vt(R)&&("_start"===R.id||"_end"===R.id))(L)&&(L=L[R?"firstChild":"lastChild"]),rt(L)&&0===L.data.length&&(L=R?N.previousSibling||N.nextSibling:N.nextSibling||N.previousSibling),g.remove(N,!0),L},A=R=>{let N,L,q=pl(t,R,a,R.collapsed);if(f.split){if(q=Vd(q),N=q0(t,q,!0),L=q0(t,q),N!==L){if(N=K0(N,!0),L=K0(L,!1),j0(g,N,L)){const V=S.from(N.firstChild).getOr(N);return x(Y0(g,V,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void P(!0)}if(j0(g,L,N)){const V=S.from(L.lastChild).getOr(L);return x(Y0(g,V,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void P(!1)}N=Gp(g,N,"span",{id:"_start","data-mce-type":"bookmark"}),L=Gp(g,L,"span",{id:"_end","data-mce-type":"bookmark"});const H=g.createRng();H.setStartAfter(N),H.setEndBefore(L),iu(g,H,V=>{Z(V,ot=>{!Ss(ot)&&!Ss(ot.parentNode)&&x(ot)})}),x(N),x(L),N=P(!0),L=P()}else N=L=x(N);q.startContainer=N.parentNode?N.parentNode:N,q.startOffset=g.nodeIndex(N),q.endContainer=L.parentNode?L.parentNode:L,q.endOffset=g.nodeIndex(L)+1}iu(g,q,H=>{Z(H,k)})};if(s){if(Od(s)){const R=g.createRng();R.setStartBefore(s),R.setEndAfter(s),A(R)}else A(s);Qg(t,e,s,n)}else if("false"!==g.getContentEditable(y.getNode()))y.isCollapsed()&&on(f)&&!bl(t).length?fN(t,e,n,r):(Gg(y,!0,()=>{Yg(t,A)}),on(f)&&Hp(t,e,n,y.getStart())&&IC(g,y,y.getRng()),t.nodeChanged()),Qg(t,e,s,n);else{s=y.getNode();for(let R=0;R<a.length&&(!a[R].ceFalseOverride||!vl(t,a[R],n,s,s));R++);Qg(t,e,s,n)}},Q0=W.each,nh=W.each,ON=t=>vt(t)&&!Ss(t)&&!Mo(t)&&!Xo(t),Z0=(t,e,n,s)=>{const r=t.formatter.get(e),a=r[0],f=!s&&t.selection.isCollapsed(),m=t.dom,g=t.selection,y=(k,P=a)=>{if(oe(P.onformat)&&P.onformat(k,P,n,s),nh(P.styles,(A,R)=>{m.setStyle(k,R,ar(A,n))}),P.styles){const A=m.getAttrib(k,"style");A&&m.setAttrib(k,"data-mce-style",A)}nh(P.attributes,(A,R)=>{m.setAttrib(k,R,ar(A,n))}),nh(P.classes,A=>{A=ar(A,n),m.hasClass(k,A)||m.addClass(k,A)})},x=(k,P)=>{let A=!1;return nh(k,R=>!!as(R)&&(Mt(R.collapsed)&&R.collapsed!==f||!m.is(P,R.selector)||Mo(P)?void 0:(y(P,R),A=!0,!1))),A},E=(k,P,A)=>{const R=[];let N=!0;const L=a.inline||a.block,q=(k=>{if(At(k)){const P=m.create(k);return y(P),P}return null})(L);iu(k,P,H=>{let V;const ot=Y=>{let X=!1,J=N;const et=Y.nodeName.toLowerCase(),St=Y.parentNode,ht=St.nodeName.toLowerCase();if(vt(Y)&&k.getContentEditable(Y)&&(J=N,N="true"===k.getContentEditable(Y),X=!0),Le(Y)&&!((t,e,n,s)=>{if(UE(t)&&on(e)){const r=he(wt({},t.schema.getTextBlockElements()),{td:{},th:{},li:{},dt:{},dd:{},figcaption:{},caption:{},details:{},summary:{}}),a=JD(D_fromDom(n),f=>Mo(f.dom));return Qt(r,s)&&$e(D_fromDom(n.parentNode),!1)&&!a}return!1})(t,a,Y,ht))return V=null,void(Bo(a)&&k.remove(Y));if(Bo(a)&&a.wrapper&&Lo(t,Y,e,n))V=null;else{if(N&&!X&&Bo(a)&&!a.wrapper&&$g(t,et)&&ml(t,ht,L)){const lt=k.rename(Y,L);return y(lt),R.push(lt),void(V=null)}if(as(a)){let lt=x(r,Y);if(!lt&&Mt(St)&&Ug(a)&&(lt=x(r,St)),!on(a)||lt)return void(V=null)}!N||X||!ml(t,L,et)||!ml(t,ht,L)||!A&&rt(Y)&&Ii(Y.data)||Mo(Y)||on(a)&&k.isBlock(Y)?(V=null,Z(dn(Y.childNodes),ot),X&&(N=J),V=null):(V||(V=k.clone(q,!1),Y.parentNode.insertBefore(V,Y),R.push(V)),V.appendChild(Y))}};Z(H,ot)}),!0===a.links&&Z(R,H=>{const V=ot=>{"A"===ot.nodeName&&y(ot,a),Z(dn(ot.childNodes),V)};V(H)}),Z(R,H=>{const Y=(X=>{let J=0;return Z(X.childNodes,et=>{!(t=>Mt(t)&&rt(t)&&0===t.length)(et)&&!Ss(et)&&J++}),J})(H);var X;!(R.length>1)&&k.isBlock(H)||0!==Y?(on(a)||Bo(a)&&a.wrapper)&&(!a.exact&&1===Y&&(H=ue((X=H).childNodes,ON).filter(et=>Jd(k,et,a)).map(et=>{const St=k.clone(et,!1);return y(St),k.replace(St,X,!0),k.remove(et,!0),St}).getOr(X)),((t,e,n,s)=>{Q0(e,r=>{on(r)&&Q0(t.dom.select(r.inline,s),a=>{!qp(a)||vl(t,r,n,a,r.exact?a:null)}),((t,e,n)=>{e.clear_child_styles&&jp(t.select(e.links?"*:not(a)":"*",n),r=>{qp(r)&&jp(e.styles,(a,f)=>{t.setStyle(r,f,"")})})})(t.dom,r,s)})})(t,r,n,H),((t,e,n,s,r)=>{Lo(t,r.parentNode,n,s)&&vl(t,e,s,r)||e.merge_with_parents&&t.dom.getParent(r.parentNode,a=>{if(Lo(t,a,n,s))return vl(t,e,s,r),!0})})(t,a,e,n,H),((t,e,n,s)=>{e.styles&&e.styles.backgroundColor&&Kp(s,U0(t,"fontSize"),W0(t,"backgroundColor",ar(e.styles.backgroundColor,n)))})(k,a,n,H),((t,e,n,s)=>{const r=a=>{if(1===a.nodeType&&a.parentNode&&1===a.parentNode.nodeType){const f=$C(t,a.parentNode);t.getStyle(a,"color")&&f?t.setStyle(a,"text-decoration",f):t.getStyle(a,"text-decoration")===f&&t.setStyle(a,"text-decoration",null)}};e.styles&&(e.styles.color||e.styles.textDecoration)&&(W.walk(s,r,"childNodes"),r(s))})(k,a,0,H),((t,e,n,s)=>{on(e)&&("sub"===e.inline||"sup"===e.inline)&&(Kp(s,U0(t,"fontSize"),W0(t,"fontSize","")),t.remove(t.select("sup"===e.inline?"sub":"sup",s),!0))})(k,a,0,H),V0(k,a,0,H)):k.remove(H,!0)})};if("false"!==m.getContentEditable(g.getNode())){if(a){if(s)if(Od(s)){if(!x(r,s)){const k=m.createRng();k.setStartBefore(s),k.setEndAfter(s),E(m,pl(t,k,r),!0)}}else E(m,s,!0);else f&&on(a)&&!bl(t).length?((t,e,n)=>{let s,r;const a=t.selection,f=a.getRng();let m=f.startOffset;const y=f.startContainer.nodeValue;s=ta(t.getBody(),a.getStart()),s&&(r=B0(s));const x=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(y&&m>0&&m<y.length&&x.test(y.charAt(m))&&x.test(y.charAt(m-1))){const _=a.getBookmark();f.collapse(!0);let E=pl(t,f,t.formatter.get(e));E=Vd(E),t.formatter.apply(e,n,E),a.moveToBookmark(_)}else(!s||"\ufeff"!==r.nodeValue)&&(s=((t,e)=>t.importNode(e,!0))(t.getDoc(),Vp(!0).dom),r=s.firstChild,f.insertNode(s),m=1),t.formatter.apply(e,n,s),a.setCursorLocation(r,m)})(t,e,n):(g.setRng(Mp(g.getRng())),Gg(g,!0,()=>{Yg(t,(k,P)=>{const A=P?k:pl(t,k,r);E(m,A,!1)})}),IC(m,g,g.getRng()),t.nodeChanged());((t,e)=>{$0(th[t],n=>{n(e)})})(e,t)}sx(t,e,s,n)}else{s=g.getNode();for(let k=0,P=r.length;k<P;k++){const A=r[k];if(A.ceFalseOverride&&as(A)&&m.is(s,A.selector)){y(s,A);break}}sx(t,e,s,n)}},J0=t=>$t(t,"vars"),tv=t=>t.selection.getStart(),ev=(t,e,n,s,r)=>Be(e,m=>{const g=t.formatter.matchNode(m,n,null!=r?r:{},s);return!_n(g)},m=>!!D0(t,m,n)||!s&&Mt(t.formatter.matchNode(m,n,r,!0))),nv=(t,e)=>{const n=null!=e?e:tv(t);return dt(Bd(t.dom,n),s=>vt(s)&&!Xo(s))},sv=(t,e,n)=>{const s=nv(t,e);ie(n,(r,a)=>{const f=m=>{const g=ev(t,s,a,m.similar,J0(m)?m.vars:void 0),y=g.isSome();if(m.state.get()!==y){m.state.set(y);const x=g.getOr(e);J0(m)?m.callback(y,{node:x,format:a,parents:s}):Z(m.callbacks,_=>_(y,{node:x,format:a,parents:s}))}};Z([r.withSimilar,r.withoutSimilar],f),Z(r.withVars,f)})};var HN=Object.hasOwnProperty,ov=Object.setPrototypeOf,VN=Object.isFrozen,UN=Object.getPrototypeOf,WN=Object.getOwnPropertyDescriptor,Xn=Object.freeze,Io=Object.seal,jN=Object.create,rv="undefined"!=typeof Reflect&&Reflect,sh=rv.apply,Xp=rv.construct;sh||(sh=function(e,n,s){return e.apply(n,s)}),Xn||(Xn=function(e){return e}),Io||(Io=function(e){return e}),Xp||(Xp=function(e,n){return new(Function.prototype.bind.apply(e,[null].concat(function zN(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}(n))))});var qN=Js(Array.prototype.forEach),KN=Js(Array.prototype.pop),bu=Js(Array.prototype.push),oh=Js(String.prototype.toLowerCase),YN=Js(String.prototype.match),oi=Js(String.prototype.replace),GN=Js(String.prototype.indexOf),XN=Js(String.prototype.trim),Qn=Js(RegExp.prototype.test),Qp=function QN(t){return function(){for(var e=arguments.length,n=Array(e),s=0;s<e;s++)n[s]=arguments[s];return Xp(t,n)}}(TypeError);function Js(t){return function(e){for(var n=arguments.length,s=Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return sh(t,e,s)}}function re(t,e){ov&&ov(t,null);for(var n=e.length;n--;){var s=e[n];if("string"==typeof s){var r=oh(s);r!==s&&(VN(e)||(e[n]=r),s=r)}t[s]=!0}return t}function ia(t){var e=jN(null),n=void 0;for(n in t)sh(HN,t,[n])&&(e[n]=t[n]);return e}function rh(t,e){for(;null!==t;){var n=WN(t,e);if(n){if(n.get)return Js(n.get);if("function"==typeof n.value)return Js(n.value)}t=UN(t)}return function s(r){return console.warn("fallback value for",r),null}}var iv=Xn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Zp=Xn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Jp=Xn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ZN=Xn(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),tb=Xn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),JN=Xn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),av=Xn(["#text"]),lv=Xn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),eb=Xn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),cv=Xn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ih=Xn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tO=Io(/\{\{[\s\S]*|[\s\S]*\}\}/gm),eO=Io(/<%[\s\S]*|[\s\S]*%>/gm),nO=Io(/^data-[\-\w.\u00B7-\uFFFF]/),sO=Io(/^aria-[\-\w]+$/),oO=Io(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),rO=Io(/^(?:\w+script|data):/i),iO=Io(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),aO=Io(/^html$/i),yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Fo(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var lO=function(){return"undefined"==typeof window?null:window},cO=function(e,n){if("object"!==(void 0===e?"undefined":yu(e))||"function"!=typeof e.createPolicy)return null;var s=null,r="data-tt-policy-suffix";n.currentScript&&n.currentScript.hasAttribute(r)&&(s=n.currentScript.getAttribute(r));var a="dompurify"+(s?"#"+s:"");try{return e.createPolicy(a,{createHTML:function(m){return m}})}catch(f){return console.warn("TrustedTypes policy "+a+" could not be created."),null}},uO=function uv(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lO(),e=function(z){return uv(z)};if(e.version="2.3.6",e.removed=[],!t||!t.document||9!==t.document.nodeType)return e.isSupported=!1,e;var n=t.document,s=t.document,r=t.DocumentFragment,a=t.HTMLTemplateElement,f=t.Node,m=t.Element,g=t.NodeFilter,y=t.NamedNodeMap,x=void 0===y?t.NamedNodeMap||t.MozNamedAttrMap:y,_=t.HTMLFormElement,E=t.DOMParser,k=t.trustedTypes,P=m.prototype,A=rh(P,"cloneNode"),R=rh(P,"nextSibling"),N=rh(P,"childNodes"),L=rh(P,"parentNode");if("function"==typeof a){var q=s.createElement("template");q.content&&q.content.ownerDocument&&(s=q.content.ownerDocument)}var H=cO(k,n),V=H?H.createHTML(""):"",ot=s,Y=ot.implementation,X=ot.createNodeIterator,J=ot.createDocumentFragment,et=ot.getElementsByTagName,St=n.importNode,ht={};try{ht=ia(s).documentMode?s.documentMode:{}}catch(Nt){}var lt={};e.isSupported="function"==typeof L&&Y&&void 0!==Y.createHTMLDocument&&9!==ht;var Xt=tO,Yt=eO,ye=nO,an=sO,tt=rO,bt=iO,Ut=oO,Bt=null,pt=re({},[].concat(Fo(iv),Fo(Zp),Fo(Jp),Fo(tb),Fo(av))),mt=null,Et=re({},[].concat(Fo(lv),Fo(eb),Fo(cv),Fo(ih))),Lt=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),_e=null,Qe=null,ma=!0,Q=!0,Ct=!1,Rt=!1,Pt=!1,Gt=!1,Wt=!1,Ht=!1,Se=!1,Cn=!1,xn=!0,qe=!0,Ze=!1,vn={},ze=null,Ln=re({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),li=null,Ho=re({},["audio","video","img","source","image","track"]),Vo=null,oo=re({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ga="http://www.w3.org/1998/Math/MathML",ci="http://www.w3.org/2000/svg",Es="http://www.w3.org/1999/xhtml",ro=Es,pa=!1,io=void 0,Qh=["application/xhtml+xml","text/html"],Sy="text/html",dr=void 0,hr=null,Lk=s.createElement("form"),wy=function(z){return z instanceof RegExp||z instanceof Function},Zh=function(z){hr&&hr===z||((!z||"object"!==(void 0===z?"undefined":yu(z)))&&(z={}),z=ia(z),Bt="ALLOWED_TAGS"in z?re({},z.ALLOWED_TAGS):pt,mt="ALLOWED_ATTR"in z?re({},z.ALLOWED_ATTR):Et,Vo="ADD_URI_SAFE_ATTR"in z?re(ia(oo),z.ADD_URI_SAFE_ATTR):oo,li="ADD_DATA_URI_TAGS"in z?re(ia(Ho),z.ADD_DATA_URI_TAGS):Ho,ze="FORBID_CONTENTS"in z?re({},z.FORBID_CONTENTS):Ln,_e="FORBID_TAGS"in z?re({},z.FORBID_TAGS):{},Qe="FORBID_ATTR"in z?re({},z.FORBID_ATTR):{},vn="USE_PROFILES"in z&&z.USE_PROFILES,ma=!1!==z.ALLOW_ARIA_ATTR,Q=!1!==z.ALLOW_DATA_ATTR,Ct=z.ALLOW_UNKNOWN_PROTOCOLS||!1,Rt=z.SAFE_FOR_TEMPLATES||!1,Pt=z.WHOLE_DOCUMENT||!1,Ht=z.RETURN_DOM||!1,Se=z.RETURN_DOM_FRAGMENT||!1,Cn=z.RETURN_TRUSTED_TYPE||!1,Wt=z.FORCE_BODY||!1,xn=!1!==z.SANITIZE_DOM,qe=!1!==z.KEEP_CONTENT,Ze=z.IN_PLACE||!1,Ut=z.ALLOWED_URI_REGEXP||Ut,ro=z.NAMESPACE||Es,z.CUSTOM_ELEMENT_HANDLING&&wy(z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Lt.tagNameCheck=z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),z.CUSTOM_ELEMENT_HANDLING&&wy(z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Lt.attributeNameCheck=z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),z.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Lt.allowCustomizedBuiltInElements=z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),io=io=-1===Qh.indexOf(z.PARSER_MEDIA_TYPE)?Sy:z.PARSER_MEDIA_TYPE,dr="application/xhtml+xml"===io?function(ft){return ft}:oh,Rt&&(Q=!1),Se&&(Ht=!0),vn&&(Bt=re({},[].concat(Fo(av))),mt=[],!0===vn.html&&(re(Bt,iv),re(mt,lv)),!0===vn.svg&&(re(Bt,Zp),re(mt,eb),re(mt,ih)),!0===vn.svgFilters&&(re(Bt,Jp),re(mt,eb),re(mt,ih)),!0===vn.mathMl&&(re(Bt,tb),re(mt,cv),re(mt,ih))),z.ADD_TAGS&&(Bt===pt&&(Bt=ia(Bt)),re(Bt,z.ADD_TAGS)),z.ADD_ATTR&&(mt===Et&&(mt=ia(mt)),re(mt,z.ADD_ATTR)),z.ADD_URI_SAFE_ATTR&&re(Vo,z.ADD_URI_SAFE_ATTR),z.FORBID_CONTENTS&&(ze===Ln&&(ze=ia(ze)),re(ze,z.FORBID_CONTENTS)),qe&&(Bt["#text"]=!0),Pt&&re(Bt,["html","head","body"]),Bt.table&&(re(Bt,["tbody"]),delete _e.tbody),Xn&&Xn(z),hr=z)},ky=re({},["mi","mo","mn","ms","mtext"]),mr=re({},["foreignobject","desc","title","annotation-xml"]),Jh=re({},["title","style","font","a","script"]),B=re({},Zp);re(B,Jp),re(B,ZN);var $=re({},tb);re($,JN);var G=function(z){var ft=L(z);(!ft||!ft.tagName)&&(ft={namespaceURI:Es,tagName:"template"});var Tt=oh(z.tagName),we=oh(ft.tagName);return z.namespaceURI===ci?ft.namespaceURI===Es?"svg"===Tt:ft.namespaceURI===ga?"svg"===Tt&&("annotation-xml"===we||ky[we]):Boolean(B[Tt]):z.namespaceURI===ga?ft.namespaceURI===Es?"math"===Tt:ft.namespaceURI===ci?"math"===Tt&&mr[we]:Boolean($[Tt]):z.namespaceURI===Es&&!(ft.namespaceURI===ci&&!mr[we]||ft.namespaceURI===ga&&!ky[we])&&!$[Tt]&&(Jh[Tt]||!B[Tt])},K=function(z){bu(e.removed,{element:z});try{z.parentNode.removeChild(z)}catch(ft){try{z.outerHTML=V}catch(Tt){z.remove()}}},xt=function(z,ft){try{bu(e.removed,{attribute:ft.getAttributeNode(z),from:ft})}catch(Tt){bu(e.removed,{attribute:null,from:ft})}if(ft.removeAttribute(z),"is"===z&&!mt[z])if(Ht||Se)try{K(ft)}catch(Tt){}else try{ft.setAttribute(z,"")}catch(Tt){}},qt=function(z){var ft=void 0,Tt=void 0;if(Wt)z="<remove></remove>"+z;else{var we=YN(z,/^[\r\n\t ]+/);Tt=we&&we[0]}"application/xhtml+xml"===io&&(z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+z+"</body></html>");var cs=H?H.createHTML(z):z;if(ro===Es)try{ft=(new E).parseFromString(cs,io)}catch(En){}if(!ft||!ft.documentElement){ft=Y.createDocument(ro,"template",null);try{ft.documentElement.innerHTML=pa?"":cs}catch(En){}}var In=ft.body||ft.documentElement;return z&&Tt&&In.insertBefore(s.createTextNode(Tt),In.childNodes[0]||null),ro===Es?et.call(ft,Pt?"html":"body")[0]:Pt?ft.documentElement:In},jt=function(z){return X.call(z.ownerDocument||z,z,g.SHOW_ELEMENT|g.SHOW_COMMENT|g.SHOW_TEXT,null,!1)},Jn=function(z){return z instanceof _&&("string"!=typeof z.nodeName||"string"!=typeof z.textContent||"function"!=typeof z.removeChild||!(z.attributes instanceof x)||"function"!=typeof z.removeAttribute||"function"!=typeof z.setAttribute||"string"!=typeof z.namespaceURI||"function"!=typeof z.insertBefore)},ao=function(z){return"object"===(void 0===f?"undefined":yu(f))?z instanceof f:z&&"object"===(void 0===z?"undefined":yu(z))&&"number"==typeof z.nodeType&&"string"==typeof z.nodeName},gr=function(z,ft,Tt){!lt[z]||qN(lt[z],function(we){we.call(e,ft,Tt,hr)})},Ik=function(z){var ft=void 0;if(gr("beforeSanitizeElements",z,null),Jn(z)||Qn(/[\u0080-\uFFFF]/,z.nodeName))return K(z),!0;var Tt=dr(z.nodeName);if(gr("uponSanitizeElement",z,{tagName:Tt,allowedTags:Bt}),z.hasChildNodes()&&!ao(z.firstElementChild)&&(!ao(z.content)||!ao(z.content.firstElementChild))&&Qn(/<[/\w]/g,z.innerHTML)&&Qn(/<[/\w]/g,z.textContent)||"select"===Tt&&Qn(/<template/i,z.innerHTML))return K(z),!0;if(!Bt[Tt]||_e[Tt]){if(!_e[Tt]&&$k(Tt)&&(Lt.tagNameCheck instanceof RegExp&&Qn(Lt.tagNameCheck,Tt)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(Tt)))return!1;if(qe&&!ze[Tt]){var we=L(z)||z.parentNode,cs=N(z)||z.childNodes;if(cs&&we)for(var En=cs.length-1;En>=0;--En)we.insertBefore(A(cs[En],!0),R(z))}return K(z),!0}return z instanceof m&&!G(z)||("noscript"===Tt||"noembed"===Tt)&&Qn(/<\/no(script|embed)/i,z.innerHTML)?(K(z),!0):(Rt&&3===z.nodeType&&(ft=oi(ft=z.textContent,Xt," "),ft=oi(ft,Yt," "),z.textContent!==ft&&(bu(e.removed,{element:z.cloneNode()}),z.textContent=ft)),gr("afterSanitizeElements",z,null),!1)},Fk=function(z,ft,Tt){if(xn&&("id"===ft||"name"===ft)&&(Tt in s||Tt in Lk))return!1;if((!Q||Qe[ft]||!Qn(ye,ft))&&(!ma||!Qn(an,ft)))if(!mt[ft]||Qe[ft]){if(!($k(z)&&(Lt.tagNameCheck instanceof RegExp&&Qn(Lt.tagNameCheck,z)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(z))&&(Lt.attributeNameCheck instanceof RegExp&&Qn(Lt.attributeNameCheck,ft)||Lt.attributeNameCheck instanceof Function&&Lt.attributeNameCheck(ft))||"is"===ft&&Lt.allowCustomizedBuiltInElements&&(Lt.tagNameCheck instanceof RegExp&&Qn(Lt.tagNameCheck,Tt)||Lt.tagNameCheck instanceof Function&&Lt.tagNameCheck(Tt))))return!1}else if(!Vo[ft]&&!Qn(Ut,oi(Tt,bt,""))&&("src"!==ft&&"xlink:href"!==ft&&"href"!==ft||"script"===z||0!==GN(Tt,"data:")||!li[z])&&(!Ct||Qn(tt,oi(Tt,bt,"")))&&Tt)return!1;return!0},$k=function(z){return z.indexOf("-")>0},zk=function(z){var ft=void 0,Tt=void 0,we=void 0,cs=void 0;gr("beforeSanitizeAttributes",z,null);var In=z.attributes;if(In){var En={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:mt};for(cs=In.length;cs--;){var Fn=(ft=In[cs]).name,Hk=ft.namespaceURI;Tt=XN(ft.value),we=dr(Fn);var o3=Tt;if(En.attrName=we,En.attrValue=Tt,En.keepAttr=!0,En.forceKeepAttr=void 0,gr("uponSanitizeAttribute",z,En),Tt=En.attrValue,!En.forceKeepAttr){if(!En.keepAttr){xt(Fn,z);continue}if(Qn(/\/>/i,Tt)){xt(Fn,z);continue}Rt&&(Tt=oi(Tt,Xt," "),Tt=oi(Tt,Yt," "));var r3=dr(z.nodeName);if(!Fk(r3,we,Tt)){xt(Fn,z);continue}if(Tt!==o3)try{Hk?z.setAttributeNS(Hk,Fn,Tt):z.setAttribute(Fn,Tt)}catch(A3){xt(Fn,z)}}}gr("afterSanitizeAttributes",z,null)}},s3=function Nt(z){var ft=void 0,Tt=jt(z);for(gr("beforeSanitizeShadowDOM",z,null);ft=Tt.nextNode();)gr("uponSanitizeShadowNode",ft,null),!Ik(ft)&&(ft.content instanceof r&&Nt(ft.content),zk(ft));gr("afterSanitizeShadowDOM",z,null)};return e.sanitize=function(Nt,z){var ft=void 0,Tt=void 0,we=void 0,cs=void 0,In=void 0;if((pa=!Nt)&&(Nt="\x3c!--\x3e"),"string"!=typeof Nt&&!ao(Nt)){if("function"!=typeof Nt.toString)throw Qp("toString is not a function");if("string"!=typeof(Nt=Nt.toString()))throw Qp("dirty is not a string, aborting")}if(!e.isSupported){if("object"===yu(t.toStaticHTML)||"function"==typeof t.toStaticHTML){if("string"==typeof Nt)return t.toStaticHTML(Nt);if(ao(Nt))return t.toStaticHTML(Nt.outerHTML)}return Nt}if(Gt||Zh(z),e.removed=[],"string"==typeof Nt&&(Ze=!1),Ze){if(Nt.nodeName){var En=dr(Nt.nodeName);if(!Bt[En]||_e[En])throw Qp("root node is forbidden and cannot be sanitized in-place")}}else if(Nt instanceof f)1===(Tt=(ft=qt("\x3c!----\x3e")).ownerDocument.importNode(Nt,!0)).nodeType&&"BODY"===Tt.nodeName||"HTML"===Tt.nodeName?ft=Tt:ft.appendChild(Tt);else{if(!Ht&&!Rt&&!Pt&&-1===Nt.indexOf("<"))return H&&Cn?H.createHTML(Nt):Nt;if(!(ft=qt(Nt)))return Ht?null:Cn?V:""}ft&&Wt&&K(ft.firstChild);for(var tm=jt(Ze?Nt:ft);we=tm.nextNode();)3===we.nodeType&&we===cs||Ik(we)||(we.content instanceof r&&s3(we.content),zk(we),cs=we);if(cs=null,Ze)return Nt;if(Ht){if(Se)for(In=J.call(ft.ownerDocument);ft.firstChild;)In.appendChild(ft.firstChild);else In=ft;return mt.shadowroot&&(In=St.call(n,In,!0)),In}var Fn=Pt?ft.outerHTML:ft.innerHTML;return Pt&&Bt["!doctype"]&&ft.ownerDocument&&ft.ownerDocument.doctype&&ft.ownerDocument.doctype.name&&Qn(aO,ft.ownerDocument.doctype.name)&&(Fn="<!DOCTYPE "+ft.ownerDocument.doctype.name+">\n"+Fn),Rt&&(Fn=oi(Fn,Xt," "),Fn=oi(Fn,Yt," ")),H&&Cn?H.createHTML(Fn):Fn},e.setConfig=function(Nt){Zh(Nt),Gt=!0},e.clearConfig=function(){hr=null,Gt=!1},e.isValidAttribute=function(Nt,z,ft){hr||Zh({});var Tt=dr(Nt),we=dr(z);return Fk(Tt,we,ft)},e.addHook=function(Nt,z){"function"==typeof z&&(lt[Nt]=lt[Nt]||[],bu(lt[Nt],z))},e.removeHook=function(Nt){lt[Nt]&&KN(lt[Nt])},e.removeHooks=function(Nt){lt[Nt]&&(lt[Nt]=[])},e.removeAllHooks=function(){lt={}},e}();const mO=(t,e,n)=>{const s=$c();e.convert_fonts_to_spans&&((t,e,n)=>{t.addNodeFilter("font",s=>{Z(s,r=>{const a=e.parse(r.attr("style")),f=r.attr("color"),m=r.attr("face"),g=r.attr("size");f&&(a.color=f),m&&(a["font-family"]=m),g&&(a["font-size"]=n[parseInt(r.attr("size"),10)-1]),r.name="span",r.attr("style",e.serialize(a)),((t,e)=>{Z(["color","face","size"],n=>{t.attr(n,null)})})(r)})})})(t,s,W.explode(e.font_size_legacy_values)),((t,e,n)=>{t.addNodeFilter("strike",s=>{const r="html4"!==e.type;Z(s,a=>{if(r)a.name="s";else{const f=n.parse(a.attr("style"));f["text-decoration"]="line-through",a.name="span",a.attr("style",n.serialize(f))}})})})(t,n,s)},ah=t=>{let e;const n=decodeURIComponent(t).split(","),s=/data:([^;]+)/.exec(n[0]);return s&&(e=s[1]),{type:e,data:n[1]}},fv=(t,e)=>{let n;try{n=atob(e)}catch(r){return S.none()}const s=new Uint8Array(n.length);for(let r=0;r<s.length;r++)s[r]=n.charCodeAt(r);return S.some(new Blob([s],{type:t}))},dv=t=>0===t.indexOf("blob:")?(t=>new Promise((e,n)=>{const s=()=>{n("Cannot convert "+t+" to Blob. Resource might not exist or is inaccessible.")};try{const r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="blob",r.onload=()=>{200===r.status?e(r.response):s()},r.onerror=s,r.send()}catch(r){s()}}))(t):0===t.indexOf("data:")?(t=>new Promise(e=>{const{type:n,data:s}=ah(t);fv(n,s).fold(()=>e(new Blob([])),e)}))(t):null,hv=t=>new Promise(e=>{const n=new FileReader;n.onloadend=()=>{e(n.result)},n.readAsDataURL(t)});let yO=0;const nb=t=>(t||"blobid")+yO++,mv=W.each,AO=W.trim,TO="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),RO={ftp:21,http:80,https:443,mailto:25},PO=["img","video"],gv=(t,e,n)=>{const s=(t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}})(e);return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(s)||!t.allow_html_data_urls&&(/^data:image\//i.test(s)?((t,e)=>Mt(t)?!t:!Mt(e)||!ke(PO,e))(t.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)))};class to{constructor(e,n){e=AO(e),this.settings=n||{};const s=this.settings.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const a=0===e.indexOf("//");if(0===e.indexOf("/")&&!a&&(e=(s&&s.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const m=this.settings.base_uri?this.settings.base_uri.path:new to(document.location.href).directory;if(this.settings.base_uri&&""==this.settings.base_uri.protocol)e="//mce_host"+r.toAbsPath(m,e);else{const g=/([^#?]*)([#?]?.*)/.exec(e);e=(s&&s.protocol||"http")+"://mce_host"+r.toAbsPath(m,g[1])+g[2]}}e=e.replace(/@@/g,"(mce_at)");const f=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);mv(TO,(m,g)=>{let y=f[g];y&&(y=y.replace(/\(mce_at\)/g,"@@")),r[m]=y}),s&&(r.protocol||(r.protocol=s.protocol),r.userInfo||(r.userInfo=s.userInfo),!r.port&&"mce_host"===r.host&&(r.port=s.port),(!r.host||"mce_host"===r.host)&&(r.host=s.host),r.source=""),a&&(r.protocol="")}static parseDataUri(e){let n;const s=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(s[0]);return r&&(n=r[1]),{type:n,data:s[1]}}static isDomSafe(e,n,s={}){if(s.allow_script_urls)return!0;{const r=xo.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!gv(s,r,n)}}static getDocumentBaseUrl(e){let n;return n=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?e.href:e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);this.path=n[0],this.directory=n[1],this.file=n[2],this.source="",this.getURI()}toRelative(e){let n;if("./"===e)return e;const s=new to(e,{base_uri:this});if("mce_host"!==s.host&&this.host!==s.host&&s.host||this.port!==s.port||this.protocol!==s.protocol&&""!==s.protocol)return s.getURI();const r=this.getURI(),a=s.getURI();return r===a||"/"===r.charAt(r.length-1)&&r.substr(0,r.length-1)===a?r:(n=this.toRelPath(this.path,s.path),s.query&&(n+="?"+s.query),s.anchor&&(n+="#"+s.anchor),n)}toAbsolute(e,n){const s=new to(e,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=RO[this.protocol];if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let a,f,s=0,r="";const m=e.substring(0,e.lastIndexOf("/")).split("/"),g=n.split("/");if(m.length>=g.length)for(a=0,f=m.length;a<f;a++)if(a>=g.length||m[a]!==g[a]){s=a+1;break}if(m.length<g.length)for(a=0,f=g.length;a<f;a++)if(a>=m.length||m[a]!==g[a]){s=a+1;break}if(1===s)return n;for(a=0,f=m.length-(s-1);a<f;a++)r+="../";for(a=s-1,f=g.length;a<f;a++)r+=a!==s-1?"/"+g[a]:g[a];return r}toAbsPath(e,n){let s,f,r=0,a=[];const m=/\/$/.test(n)?"/":"";let g=e.split("/");const y=n.split("/");for(mv(g,x=>{x&&a.push(x)}),g=a,s=y.length-1,a=[];s>=0;s--)if(0!==y[s].length&&"."!==y[s]){if(".."===y[s]){r++;continue}if(r>0){r--;continue}a.push(y[s])}return s=g.length-r,f=s<=0?ae(a).join("/"):g.slice(0,s).join("/")+"/"+ae(a).join("/"),0!==f.indexOf("/")&&(f="/"+f),m&&f.lastIndexOf("/")!==f.length-1&&(f+=m),f}getURI(e=!1){let n;return(!this.source||e)&&(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const pv=W.makeMap,bv=W.each,yv=W.explode,Cv=W.extend,OO={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]},MO=W.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),sb="data-mce-type",xv=(t,e,n)=>{const s=t.name,r=s in n&&"title"!==s&&"textarea"!==s,a=e.childNodes;for(let f=0,m=a.length;f<m;f++){const g=a[f],y=new Mn(g.nodeName.toLowerCase(),g.nodeType);if(vt(g)){const x=g.attributes;for(let _=0,E=x.length;_<E;_++){const k=x[_];y.attr(k.name,k.value)}}else rt(g)?(y.value=g.data,r&&(y.raw=!0)):(Lf(g)||Pm(g)||Ia(g))&&(y.value=g.data);xv(y,g,n),t.append(y)}},_l=(t={},e=_o())=>{const n={},s=[],r=wt({validate:!0,root_name:"body"},t),a=new DOMParser,f=((t,e)=>{const n=uO(),s=t.validate;let r=0;return n.addHook("uponSanitizeElement",(a,f)=>{var m,g;8===a.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(a.nodeValue)&&(a.nodeValue=" "+a.nodeValue);const y=f.tagName;if(1!==a.nodeType||"body"===y)return;const x=D_fromDom(a),_=Na(x,sb),E=Ye(x,"data-mce-bogus");if(!_&&At(E))return void("all"===E?Pe(x):js(x));const k=e.getElementRule(y.toLowerCase());if(!s||k){if(f.allowedTags[y]=!0,s&&!_){if(Z(null!==(m=k.attributesForced)&&void 0!==m?m:[],P=>{de(x,P.name,"{$uid}"===P.value?"mce_"+r++:P.value)}),Z(null!==(g=k.attributesDefault)&&void 0!==g?g:[],P=>{Na(x,P.name)||de(x,P.name,"{$uid}"===P.value?"mce_"+r++:P.value)}),k.attributesRequired&&!Me(k.attributesRequired,P=>Na(x,P)))return void js(x);if(k.removeEmptyAttrs&&(t=>{const e=t.dom.attributes;return null==e||0===e.length})(x))return void js(x);k.outputName&&k.outputName!==y.toLowerCase()&&((t,e)=>{const n=((t,e)=>{const n=D_fromTag(e),s=lf(t);return jn(n,s),n})(t,e);go(t,n);const s=en(t);po(n,s),Pe(t)})(x,k.outputName)}}else js(x)}),n.addHook("uponSanitizeAttribute",(a,f)=>{const m=a.tagName.toLowerCase(),{attrName:g,attrValue:y}=f;f.keepAttr=!s||e.isValid(m,g)||Vn(g,"data-")||Vn(g,"aria-"),g in MO&&gv(t,y,m)&&(f.keepAttr=!1),f.keepAttr?(f.allowedAttributes[g]=!0,g in e.getBoolAttrs()&&(f.attrValue=g),t.allow_svg_data_urls&&Vn(y,"data:image/svg+xml")&&(f.forceKeepAttr=!0)):a.hasAttribute(sb)&&("id"===g||"class"===g||"style"===g)&&(f.forceKeepAttr=!0)}),n})(r,e),y=()=>{const R=[];for(const N in n)$t(n,N)&&R.push({name:N,callbacks:n[N]});return R},A={schema:e,addAttributeFilter:(R,N)=>{bv(yv(R),L=>{let q;for(q=0;q<s.length;q++)if(s[q].name===L)return void s[q].callbacks.push(N);s.push({name:L,callbacks:[N]})})},getAttributeFilters:()=>[].concat(s),addNodeFilter:(R,N)=>{bv(yv(R),L=>{let q=n[L];q||(n[L]=q=[]),q.push(N)})},getNodeFilters:y,parse:(R,N={})=>{var L;const q=r.validate,H=null!==(L=N.context)&&void 0!==L?L:r.root_name,V=((R,N,L="html")=>{const q="xhtml"===L?"application/xhtml+xml":"text/html",H=$t(e.getSpecialElements(),N.toLowerCase()),V=H?`<${N}>${R}</${N}>`:R,Y=a.parseFromString("xhtml"===L?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${V}</body></html>`:`<body>${V}</body>`,q).body;return f.sanitize(Y,((t,e)=>{const n=wt({},OO);return n.PARSER_MEDIA_TYPE=e,t.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:t.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(r,q)),f.removed=[],H?Y.firstChild:Y})(R,H,N.format),ot=new Mn(H,11);xv(ot,V,e.getSpecialElements());const[Y,X]=((t,e,n,s)=>{const r=n.validate,a=e.getNonEmptyElements(),f=e.getWhitespaceElements(),m=Cv(pv("script,style,head,html,body,title,meta,param"),e.getBlockElements()),g=/[ \t\r\n]+/g,y=/^[ \t\r\n]+/,x=/[ \t\r\n]+$/,_=A=>{for(A=A.parent;Mt(A);){if(A.name in f)return!0;A=A.parent}return!1},E=(A,R)=>!Mt(R?A.prev:A.next)&&A.parent.name in m&&(A.parent!==t||s.isRootContent);return[A=>{if(3===A.type&&!_(A)){let R=A.value;R=R.replace(g," "),(((t,e)=>t&&(t.name in e||"br"===t.name))(A.prev,m)||E(A,!0))&&(R=R.replace(y,"")),0===R.length?A.remove():A.value=R}},A=>{var R;if(1===A.type){const N=e.getElementRule(A.name);if(r&&N){const L=Qd(e,a,f,A);N.removeEmpty&&L?m[A.name]?A.remove():A.unwrap():N.paddEmpty&&(L||(t=>T0(t,"#text")&&t.firstChild.value===Ge)(A))&&A0(0,s,m,A)}}else if(3===A.type&&!_(A)){let N=A.value;(m[null===(R=A.next)||void 0===R?void 0:R.name]||E(A,!1))&&(N=N.replace(x,"")),0===N.length?A.remove():A.value=N}}]})(ot,e,r,N),J=[],et=q?Yt=>((R,N)=>{const L=R.parent;L&&e.children[R.name]&&!e.isValidChild(L.name,R.name)&&N.push(R)})(Yt,J):Ft,St=y(),ht={nodes:{},attributes:{}},lt=Yt=>w0(St,s,Yt,ht);if(((t,e,n)=>{const s=[];for(let r=t,a=r;Mt(r);a=r,r=r.walk())Z(e,f=>f(r)),An(r.parent)&&r!==t?r=a:s.push(r);for(let r=s.length-1;r>=0;r--){const a=s[r];Z(n,f=>f(a))}})(ot,[Y,lt],[X,et]),J.reverse(),q&&J.length>0)if(N.context){const{pass:Yt,fail:ye}=vr(J,an=>an.parent===ot);Op(ye,e,lt),N.invalid=Yt.length>0}else Op(J,e,lt);const Xt=((t,e)=>{var n;const s=null!==(n=e.forced_root_block)&&void 0!==n?n:t.forced_root_block;return!1===s?"":!0===s?"p":s})(r,N);return Xt&&("body"===ot.name||N.isRootContent)&&((R,N)=>{const L=Cv(pv("script,style,head,html,body,title,meta,param"),e.getBlockElements()),q=/^[ \t\r\n]+/,H=/[ \t\r\n]+$/;let V=R.firstChild,ot=null;const Y=X=>{X&&(V=X.firstChild,V&&3===V.type&&(V.value=V.value.replace(q,"")),V=X.lastChild,V&&3===V.type&&(V.value=V.value.replace(H,"")))};if(e.isValidChild(R.name,N.toLowerCase())){for(;V;){const X=V.next;3===V.type||1===V.type&&"p"!==V.name&&!L[V.name]&&!V.attr(sb)?(ot||(ot=new Mn(N,1),ot.attr(r.forced_root_block_attrs),R.insert(ot,V)),ot.append(V)):(Y(ot),ot=null),V=X}Y(ot)}})(ot,Xt),N.invalid||k0(ht,N),ot}};return((t,e)=>{const n=t.schema;e.remove_trailing_brs&&t.addNodeFilter("br",(s,r,a)=>{const f=W.extend({},n.getBlockElements()),m=n.getNonEmptyElements(),g=n.getWhitespaceElements();f.body=1;for(let y=0,x=s.length;y<x;y++){let _=s[y],E=_.parent;if(f[_.parent.name]&&_===E.lastChild){let k=_.prev;for(;k;){const P=k.name;if("span"!==P||"bookmark"!==k.attr("data-mce-type")){"br"===P&&(_=null);break}k=k.prev}if(_&&(_.remove(),Qd(n,m,g,E))){const P=n.getElementRule(E.name);P&&(P.removeEmpty?E.remove():P.paddEmpty&&A0(0,a,f,E))}}else{let k=_;for(;E&&E.firstChild===k&&E.lastChild===k&&(k=E,!f[E.name]);)E=E.parent;if(k===E){const P=new Mn("#text",3);P.value=Ge,_.replace(P)}}}}),t.addAttributeFilter("href",s=>{let r=s.length;const f=m=>{const g=m?W.trim(m):"";return/\b(noopener)\b/g.test(g)?g:(m=>m.split(" ").filter(y=>y.length>0).concat(["noopener"]).sort().join(" "))(g)};if(!e.allow_unsafe_link_target)for(;r--;){const m=s[r];"a"===m.name&&"_blank"===m.attr("target")&&m.attr("rel",f(m.attr("rel")))}}),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",s=>{let a,f,m,g,r=s.length;for(;r--;)if(g=s[r],"a"===g.name&&g.firstChild&&!g.attr("href")){m=g.parent,a=g.lastChild;do{f=a.prev,m.insert(a,g),a=f}while(a)}}),e.fix_list_elements&&t.addNodeFilter("ul,ol",s=>{let a,f,r=s.length;for(;r--;)if(a=s[r],f=a.parent,"ul"===f.name||"ol"===f.name)if(a.prev&&"li"===a.prev.name)a.prev.append(a);else{const m=new Mn("li",1);m.attr("style","list-style-type: none"),a.wrap(m)}}),e.validate&&n.getValidClasses()&&t.addAttributeFilter("class",s=>{const r=n.getValidClasses();let a=s.length;for(;a--;){const f=s[a],m=f.attr("class").split(" ");let g="";for(let y=0;y<m.length;y++){const x=m[y];let _=!1,E=r["*"];E&&E[x]&&(_=!0),E=r[f.name],!_&&E&&E[x]&&(_=!0),_&&(g&&(g+=" "),g+=x)}g.length||(g=null),f.attr("class",g)}}),((t,e)=>{const{blob_cache:n}=e,s=r=>{const a=r.attr("src");(t=>t.attr("src")===le.transparentSrc||Mt(t.attr("data-mce-placeholder")))(r)||(t=>Mt(t.attr("data-mce-bogus")))(r)||(t=>{const e=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(t);return e?S.some({type:e[1],data:decodeURIComponent(e[2])}):S.none()})(a).bind(({type:f,data:m})=>S.from(n.getByData(m,f)).orThunk(()=>fv(f,m).map(g=>{const y=n.create(nb(),g,m);return n.add(y),y}))).each(f=>{r.attr("src",f.blobUri())})};n&&t.addAttributeFilter("src",r=>Z(r,s))})(t,e)})(A,r),((t,e,n)=>{e.inline_styles&&mO(t,e,n)})(A,r,e),A},vv=(t,e)=>{const n=(t=>Zd(t)?ni({validate:!1}).serialize(t):t)(t),s=e(n);if(s.isDefaultPrevented())return s;if(Zd(t)){if(s.content!==n){const r=_l({validate:!1,forced_root_block:!1}).parse(s.content,{context:t.name});return he(wt({},s),{content:r})}return he(wt({},s),{content:t})}return s},_v=(t,e)=>{if(e.no_events)return Nn.value(e);{const n=((t,e)=>t.dispatch("BeforeGetContent",e))(t,e);return n.isDefaultPrevented()?Nn.error(rx(t,wt({content:""},n)).content):Nn.value(n)}},Sv=(t,e,n)=>n.no_events?e:vv(e,r=>rx(t,he(wt({},n),{content:r}))).content,ob=(t,e)=>{if(e.no_events)return Nn.value(e);{const n=vv(e.content,s=>((t,e)=>t.dispatch("BeforeSetContent",e))(t,he(wt({},e),{content:s})));return n.isDefaultPrevented()?(ox(t,n),Nn.error(void 0)):Nn.value(n)}},rb=(t,e,n)=>{n.no_events||ox(t,he(wt({},n),{content:e}))},ib=(t,e,n)=>({element:t,width:e,rows:n}),wv=(t,e)=>({element:t,cells:e}),HO=(t,e)=>({x:t,y:e}),kv=(t,e)=>{const n=parseInt(Ye(t,e),10);return isNaN(n)?1:n},UO=(t,e,n)=>{const s=t.rows;return!!(s[n]?s[n].cells:[])[e]},Ev=t=>It(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),Av=(t,e)=>{const n=t.rows;for(let s=0;s<n.length;s++){const r=n[s].cells;for(let a=0;a<r.length;a++)if(ee(r[a],e))return S.some(HO(a,s))}return S.none()},Tv=(t,e,n,s,r)=>{const a=[],f=t.rows;for(let m=n;m<=r;m++){const g=f[m].cells,y=e<s?g.slice(e,s+1):g.slice(s,e+1);a.push(wv(f[m].element,y))}return a},GO=t=>((t,e)=>{const n=Fs(t.element),s=D_fromTag("tbody");return po(s,e),He(n,s),n})(t,(t=>Kt(t.rows,e=>{const n=Kt(e.cells,r=>{const a=Yi(r);return Rn(a,"colspan"),Rn(a,"rowspan"),a}),s=Fs(e.element);return po(s,n),s}))(t)),eM=(t,e)=>{const n=D_fromDom(e.commonAncestorContainer),s=cr(n,t),r=dt(s,m=>Ac(m)||Bi(m)),a=((t,e)=>ue(t,n=>"li"===Ce(n)&&qg(n,e)).fold(st([]),n=>(t=>ue(t,e=>"ul"===Ce(e)||"ol"===Ce(e)))(t).map(s=>{const r=D_fromTag(Ce(s)),a=ms(Ef(s),(f,m)=>Vn(m,"list-style"));return Ba(r,a),[D_fromTag("li"),r]}).getOr([])))(s,e),f=r.concat(a.length?a:(t=>jr(t)?cn(t).filter(Tc).fold(st([]),e=>[t,e]):Tc(t)?[t]:[])(n));return Kt(f,Fs)},Rv=()=>tp([]),oM=(t,e)=>((t,e)=>Oi(e,"table",ut(ee,t)))(t,e[0]).bind(n=>{const s=e[0],r=e[e.length-1],a=(t=>{const e=ib(Fs(t),0,[]);return Z(yn(t,"tr"),(n,s)=>{Z(yn(n,"td,th"),(r,a)=>{((t,e,n,s,r)=>{const a=kv(r,"rowspan"),f=kv(r,"colspan"),m=t.rows;for(let g=n;g<n+a;g++){m[g]||(m[g]=wv(Yi(s),[]));for(let y=e;y<e+f;y++)m[g].cells[y]=g===n&&y===e?r:Fs(r)}})(e,((t,e,n)=>{for(;UO(t,e,n);)e++;return e})(e,a,s),s,n,r)})}),ib(e.element,Ev(e.rows),e.rows)})(n);return((t,e,n)=>Av(t,e).bind(s=>Av(t,n).map(r=>((t,e,n)=>{const s=e.x,r=e.y,a=n.x,f=n.y,m=r<f?Tv(t,s,r,a,f):Tv(t,s,f,a,r);return ib(t.element,Ev(m),m)})(t,s,r))))(a,s,r).map(f=>tp([GO(f)]))}).getOrThunk(Rv),iM=(t,e)=>{const n=GC(e,t);return n.length>0?oM(t,n):((t,e)=>e.length>0&&e[0].collapsed?Rv():((t,e)=>((t,e)=>{const n=It(e,(s,r)=>(He(r,s),r),t);return e.length>0?tp([n]):n})(D_fromDom(e.cloneContents()),eM(t,e)))(t,e[0]))(t,e)},lh=(t,e)=>e>=0&&e<t.length&&ru(t.charAt(e)),Pv=t=>Sn(t.innerText),dM=(t,e,n={})=>{const s=((t,e)=>he(wt({},t),{format:e,get:!0,selection:!0,getInner:!0}))(n,e);return _v(t,s).fold(fn,r=>{const a=((t,e)=>{if("text"===e.format)return(t=>S.from(t.selection.getRng()).map(e=>{const n=S.from(t.dom.getParent(e.commonAncestorContainer,t.dom.isBlock)),s=t.getBody(),r=(t=>t.map(e=>e.nodeName).getOr("div").toLowerCase())(n),a=t.dom.add(s,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},e.cloneContents()),f=Pv(a),m=Sn(a.textContent);if(t.dom.remove(a),lh(m,0)||lh(m,m.length-1)){const g=n.getOr(s),y=Pv(g),x=y.indexOf(f);return-1===x?f:(lh(y,x-1)?" ":"")+f+(lh(y,x+f.length)?" ":"")}return f}).getOr(""))(t);{const n=((t,e)=>{const n=t.selection.getRng(),s=t.dom.create("body"),r=t.selection.getSel(),a=dp(t,Wg(r)),f=e.contextual?iM(D_fromDom(t.getBody()),a).dom:n.cloneContents();return f&&s.appendChild(f),t.selection.serializer.serialize(s,e)})(t,e);return"tree"===e.format?n:t.selection.isCollapsed()?"":n}})(t,r);return Sv(t,a,r)})},Ov=t=>vt(t)?t.outerHTML:rt(t)?xo.encodeRaw(t.data,!1):Lf(t)?"\x3c!--"+t.data+"--\x3e":"",CM=(t,e)=>(((t,e)=>{let n=0;Z(t,s=>{0===s[0]?n++:1===s[0]?(((t,e,n)=>{const s=(t=>{let e;const n=document.createElement("div"),s=document.createDocumentFragment();for(t&&(n.innerHTML=t);e=n.firstChild;)s.appendChild(e);return s})(e);if(t.hasChildNodes()&&n<t.childNodes.length){const r=t.childNodes[n];r.parentNode.insertBefore(s,r)}else t.appendChild(s)})(e,s[1],n),n++):2===s[0]&&((t,e)=>{if(t.hasChildNodes()&&e<t.childNodes.length){const n=t.childNodes[e];n.parentNode.removeChild(n)}})(e,n)})})(((t,e)=>{const n=t.length+e.length+2,s=new Array(n),r=new Array(n),f=(x,_,E,k,P)=>{const A=g(x,_,E,k);if(null===A||A.start===_&&A.diag===_-k||A.end===x&&A.diag===x-E){let R=x,N=E;for(;R<_||N<k;)R<_&&N<k&&t[R]===e[N]?(P.push([0,t[R]]),++R,++N):_-x>k-E?(P.push([2,t[R]]),++R):(P.push([1,e[N]]),++N)}else{f(x,A.start,E,A.start-A.diag,P);for(let R=A.start;R<A.end;++R)P.push([0,t[R]]);f(A.end,_,A.end-A.diag,k,P)}},m=(x,_,E,k)=>{let P=x;for(;P-_<k&&P<E&&t[P]===e[P-_];)++P;return((x,_,E)=>({start:x,end:_,diag:E}))(x,P,_)},g=(x,_,E,k)=>{const P=_-x,A=k-E;if(0===P||0===A)return null;const R=P-A,N=A+P,L=(N%2==0?N:N+1)/2;let q,H,V,ot,Y;for(s[1+L]=x,r[1+L]=_+1,q=0;q<=L;++q){for(H=-q;H<=q;H+=2){for(V=H+L,s[V]=H===-q||H!==q&&s[V-1]<s[V+1]?s[V+1]:s[V-1]+1,ot=s[V],Y=ot-x+E-H;ot<_&&Y<k&&t[ot]===e[Y];)s[V]=++ot,++Y;if(R%2!=0&&R-q<=H&&H<=R+q&&r[V-R]<=s[V])return m(r[V-R],H+x-E,_,k)}for(H=R-q;H<=R+q;H+=2){for(V=H+L-R,r[V]=H===R-q||H!==R+q&&r[V+1]<=r[V-1]?r[V+1]-1:r[V-1],ot=r[V]-1,Y=ot-x+E-H;ot>=x&&Y>=E&&t[ot]===e[Y];)r[V]=ot--,Y--;if(R%2==0&&-q<=H&&H<=q&&r[V]<=s[V+R])return m(r[V],H+x-E,_,k)}}},y=[];return f(0,t.length,0,e.length,y),y})(Kt(dn(e.childNodes),Ov),t),e),e),xM=fo(()=>document.implementation.createHTMLDocument("undo")),lb=t=>{const e=(t=>dt(Kt(dn(t.childNodes),Ov),e=>e.length>0))(t.getBody()),n=fs(e,r=>{const a=Hx(t.serializer,r);return a.length>0?[a]:[]}),s=n.join("");return(t=>-1!==t.indexOf("</iframe>"))(s)?(t=>({type:"fragmented",fragments:t,content:"",bookmark:null,beforeBookmark:null}))(n):(t=>({type:"complete",fragments:null,content:t,bookmark:null,beforeBookmark:null}))(s)},cb=(t,e,n)=>{const s=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?CM(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!Mt(s)||!PC(s)||!s.isFakeCaret}),t.selection.moveToBookmark(s)},ub=t=>"fragmented"===t.type?t.fragments.join(""):t.content,Mv=t=>{const e=D_fromTag("body",xM());return pc(e,ub(t)),Z(yn(e,"*[data-mce-bogus]"),js),Pf(e)},ch=(t,e)=>!(!t||!e)&&(!!((t,e)=>ub(t)===ub(e))(t,e)||((t,e)=>Mv(t)===Mv(e))(t,e)),fb=t=>0===t.get(),uh=(t,e,n)=>{fb(n)&&(t.typing=e)},Bv=(t,e)=>{t.typing&&(uh(t,!1,e),t.add())},Lv=t=>({init:{bindEvents:Ft},undoManager:{beforeChange:(e,n)=>((t,e,n)=>{fb(e)&&n.set(Hy(t.selection))})(t,e,n),add:(e,n,s,r,a,f)=>((t,e,n,s,r,a,f)=>{const m=lb(t);if(a=W.extend(a=a||{},m),!1===fb(s)||t.removed)return null;const g=e.data[n.get()];if(t.dispatch("BeforeAddUndo",{level:a,lastLevel:g,originalEvent:f}).isDefaultPrevented()||g&&ch(g,a))return null;e.data[n.get()]&&r.get().each(_=>{e.data[n.get()].beforeBookmark=_});const y=GE(t);if(y&&e.data.length>y){for(let _=0;_<e.data.length-1;_++)e.data[_]=e.data[_+1];e.data.length--,n.set(e.data.length)}a.bookmark=Hy(t.selection),n.get()<e.data.length-1&&(e.data.length=n.get()+1),e.data.push(a),n.set(e.data.length-1);const x={level:a,lastLevel:g,originalEvent:f};return n.get()>0?(t.setDirty(!0),t.dispatch("AddUndo",x),t.dispatch("change",x)):t.dispatch("AddUndo",x),a})(t,e,n,s,r,a,f),undo:(e,n,s)=>((t,e,n,s)=>{let r;return e.typing&&(e.add(),e.typing=!1,uh(e,!1,n)),s.get()>0&&(s.set(s.get()-1),r=e.data[s.get()],cb(t,r,!0),t.setDirty(!0),t.dispatch("Undo",{level:r})),r})(t,e,n,s),redo:(e,n)=>((t,e,n)=>{let s;return e.get()<n.length-1&&(e.set(e.get()+1),s=n[e.get()],cb(t,s,!1),t.setDirty(!0),t.dispatch("Redo",{level:s})),s})(t,e,n),clear:(e,n)=>((t,e,n)=>{e.data=[],n.set(0),e.typing=!1,t.dispatch("ClearUndos")})(t,e,n),reset:e=>(t=>{t.clear(),t.add()})(e),hasUndo:(e,n)=>((t,e,n)=>n.get()>0||e.typing&&e.data[0]&&!ch(lb(t),e.data[0]))(t,e,n),hasRedo:(e,n)=>((t,e)=>e.get()<t.data.length-1&&!t.typing)(e,n),transact:(e,n,s)=>((t,e,n)=>(Bv(t,e),t.beforeChange(),t.ignore(n),t.add()))(e,n,s),ignore:(e,n)=>((t,e)=>{try{t.set(t.get()+1),e()}finally{t.set(t.get()-1)}})(e,n),extra:(e,n,s,r)=>((t,e,n,s,r)=>{if(e.transact(s)){const a=e.data[n.get()].bookmark,f=e.data[n.get()-1];cb(t,f,!0),e.transact(r)&&(e.data[n.get()-1].beforeBookmark=a)}})(t,e,n,s,r)},formatter:{match:(e,n,s,r)=>Hp(t,e,n,s,r),matchAll:(e,n)=>((t,e,n)=>{const s=[],r={},a=t.selection.getStart();return t.dom.getParent(a,f=>{for(let m=0;m<e.length;m++){const g=e[m];!r[g]&&Lo(t,f,g,n)&&(r[g]=!0,s.push(g))}},t.dom.getRoot()),s})(t,e,n),matchNode:(e,n,s,r)=>Lo(t,e,n,s,r),canApply:e=>((t,e)=>{const n=t.formatter.get(e),s=t.dom;if(n){const r=t.selection.getStart(),a=Bd(s,r);for(let f=n.length-1;f>=0;f--){const m=n[f];if(!as(m))return!0;for(let g=a.length-1;g>=0;g--)if(s.is(a[g],m.selector))return!0}}return!1})(t,e),closest:e=>((t,e)=>{const n=r=>ee(r,D_fromDom(t.getBody()));return S.from(t.selection.getStart(!0)).bind(r=>Fp(D_fromDom(r),a=>wr(e,f=>((r,a)=>Lo(t,r.dom,a)?S.some(a):S.none())(a,f)),n)).getOrNull()})(t,e),apply:(e,n,s)=>Z0(t,e,n,s),remove:(e,n,s,r)=>X0(t,e,n,s,r),toggle:(e,n,s)=>((t,e,n,s)=>{const r=t.formatter.get(e);!Hp(t,e,n,s)||"toggle"in r[0]&&!r[0].toggle?Z0(t,e,n,s):X0(t,e,n,s)})(t,e,n,s),formatChanged:(e,n,s,r,a)=>((t,e,n,s,r,a)=>(null===e.get()&&((t,e)=>{t.set({}),e.on("NodeChange",n=>{sv(e,n.element,t.get())}),e.on("FormatApply FormatRemove",n=>{const s=S.from(n.node).map(r=>Od(r)?r:r.startContainer).bind(r=>vt(r)?S.some(r):S.from(r.parentElement)).getOrThunk(()=>tv(e));sv(e,s,t.get())})})(e,t),((t,e,n,s,r,a)=>{const f=e.get();Z(n.split(","),m=>{const g=ce(f,m).getOrThunk(()=>{const x={withSimilar:{state:Ve(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Ve(!1),similar:!1,callbacks:[]},withVars:[]};return f[m]=x,x}),y=()=>{const x=nv(t);return ev(t,x,m,r,a).isSome()};if(_n(a)){const x=r?g.withSimilar:g.withoutSimilar;x.callbacks.push(s),1===x.callbacks.length&&x.state.set(y())}else g.withVars.push({state:Ve(y()),similar:r,vars:a,callback:s})}),e.set(f)})(t,e,n,s,r,a),{unbind:()=>((t,e,n)=>{const s=t.get();Z(e.split(","),r=>ce(s,r).each(a=>{s[r]={withSimilar:he(wt({},a.withSimilar),{callbacks:dt(a.withSimilar.callbacks,f=>f!==n)}),withoutSimilar:he(wt({},a.withoutSimilar),{callbacks:dt(a.withoutSimilar.callbacks,f=>f!==n)}),withVars:dt(a.withVars,f=>f.callback!==n)}})),t.set(s)})(e,n,s)}))(t,e,n,s,r,a)},editor:{getContent:e=>((t,e)=>S.from(t.getBody()).fold(st("tree"===e.format?new Mn("body",11):""),n=>((t,e,n)=>{let s;return s="raw"===e.format?W.trim(UR(t.serializer,n.innerHTML)):"text"===e.format?t.dom.isEmpty(n)?"":Sn(n.innerText||n.textContent):"tree"===e.format?t.serializer.serialize(n,e):((t,e)=>{const n=Gn(t),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return e.replace(s,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!Ha(D_fromDom(n))&&At(s)?W.trim(s):s})(t,e,n)))(t,e),setContent:(e,n)=>((t,e,n)=>S.from(t.getBody()).map(s=>Zd(e)?((t,e,n,s)=>{E0(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);const r=ni({validate:!1},t.schema).serialize(n),a=Ha(D_fromDom(e))?r:W.trim(r);return Ip(t,a,s.no_selection),{content:n,html:a}})(t,s,e,n):((t,e,n,s)=>{if(0===n.length||/^\s+$/.test(n)){const r='<br data-mce-bogus="1">';"TABLE"===e.nodeName?n="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(e.nodeName)&&(n="<li>"+r+"</li>");const a=Gn(t);return t.schema.isValidChild(e.nodeName.toLowerCase(),a.toLowerCase())?(n=r,n=t.dom.createHTML(a,Qi(t),n)):n||(n=r),Ip(t,n,s.no_selection),{content:n,html:n}}{"raw"!==s.format&&(n=ni({validate:!1},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0})));const r=Ha(D_fromDom(e))?n:W.trim(n);return Ip(t,r,s.no_selection),{content:r,html:r}}})(t,s,e,n)).getOr({content:e,html:Zd(n.content)?"":n.content}))(t,e,n),insertContent:(e,n)=>YD(t,e,n),addVisual:e=>((t,e)=>{const n=t.dom,s=Mt(e)?e:t.getBody();_n(t.hasVisual)&&(t.hasVisual=t1(t)),Z(n.select("table,a",s),r=>{switch(r.nodeName){case"TABLE":const a=e1(t),f=n.getAttrib(r,"border");f&&"0"!==f||!t.hasVisual?n.removeClass(r,a):n.addClass(r,a);break;case"A":if(!n.getAttrib(r,"href")){const m=n.getAttrib(r,"name")||r.id,g=oC(t);m&&t.hasVisual?n.addClass(r,g):n.removeClass(r,g)}}}),t.dispatch("VisualAid",{element:e,hasVisual:t.hasVisual})})(t,e)},selection:{getContent:(e,n)=>dM(t,e,n)},autocompleter:{addDecoration:e=>BR(t,e),removeDecoration:()=>((t,e)=>Fx(e).each(n=>{const s=t.selection.getBookmark();js(n),t.selection.moveToBookmark(s)}))(t,D_fromDom(t.getBody()))},raw:{getModel:()=>S.none()}}),ur=t=>$t(t.plugins,"rtc"),db=t=>t.rtcInstance?t.rtcInstance:Lv(t),Ie=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Iv=t=>Ie(t).init.bindEvents(),Fv=t=>0===t.dom.length?(Pe(t),S.none()):S.some(t),$v=(t,e,n,s)=>{t.bind(r=>((s?vp:Yd)(r.dom,s?r.dom.length:0),e.filter(Wn).map(f=>((t,e,n,s)=>{const r=t.dom,a=e.dom,f=s?r.length:a.length;s?(_p(r,a,!1,!s),n.setStart(a,f)):(_p(a,r,!1,!s),n.setEnd(a,f))})(r,f,n,s)))).orThunk(()=>((t,e)=>t.filter(n=>lu.isBookmarkNode(n.dom)).bind(e?qo:Ws))(e,s).or(e).filter(Wn).map(a=>((t,e)=>{cn(t).each(n=>{const s=t.dom;e&&qd(n,F(s,0))?Yd(s,0):!e&&Kd(n,F(s,s.length))&&vp(s,s.length)})})(a,s)))},zv=(t,e,n)=>{if(t&&$t(t,e)){const s=dt(t[e],r=>r!==n);0===s.length?delete t[e]:t[e]=s}},Hv=t=>!(!t||!t.ownerDocument)&&bn(D_fromDom(t.ownerDocument),D_fromDom(t)),Vv=(t,e,n,s)=>{let r,a;const{selectorChangedWithUnbind:f}=((t,e)=>{let n,s;const r=(f,m)=>ue(m,g=>t.is(g,f)),a=f=>t.getParents(f,null,t.getRoot());return{selectorChangedWithUnbind:(f,m)=>(n||(n={},s={},e.on("NodeChange",g=>{const y=g.element,x=a(y),_={};W.each(n,(E,k)=>{r(k,x).each(P=>{s[k]||(Z(E,A=>{A(!0,{node:P,selector:k,parents:x})}),s[k]=E),_[k]=E})}),W.each(s,(E,k)=>{_[k]||(delete s[k],W.each(E,P=>{P(!1,{node:y,selector:k,parents:x})}))})})),n[f]||(n[f]=[]),n[f].push(m),r(f,a(e.selection.getStart())).each(()=>{s[f]=n[f]}),{unbind:()=>{zv(n,f,m),zv(s,f,m)}})}})(t,s),y=(tt,bt)=>((t,e,n={})=>{const s=((t,e)=>he(wt({format:"html"},t),{set:!0,selection:!0,content:e}))(n,e);ob(t,s).each(r=>{const a=((t,e)=>{if("raw"!==e.format){const n=t.selection.getRng(),s=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),r=s?{context:s.nodeName.toLowerCase()}:{},a=t.parser.parse(e.content,wt(wt({forced_root_block:!1},r),e));return ni({validate:!1},t.schema).serialize(a)}return e.content})(t,r),f=t.selection.getRng();((t,e)=>{const n=S.from(e.firstChild).map(D_fromDom),s=S.from(e.lastChild).map(D_fromDom);t.deleteContents(),t.insertNode(e);const r=n.bind(Ws).filter(Wn).bind(Fv),a=s.bind(qo).filter(Wn).bind(Fv);$v(r,n,t,!0),$v(a,s,t,!1),t.collapse(!1)})(f,f.createContextualFragment(a)),t.selection.setRng(f),uu(t,f),rb(t,a,r)})})(s,tt,bt),R=tt=>{const bt=L();bt.collapse(!!tt),q(bt)},N=()=>e.getSelection?e.getSelection():e.document.selection,L=()=>{let tt,bt,Ut;const Bt=(mt,Et,Lt)=>{try{return Et.compareBoundaryPoints(mt,Lt)}catch(_e){return-1}},pt=e.document;if(void 0!==s.bookmark&&!1===ea(s)){const mt=lp(s);if(mt.isSome())return mt.map(Et=>dp(s,[Et])[0]).getOr(pt.createRange())}try{(tt=N())&&!Vr(tt.anchorNode)&&(bt=tt.rangeCount>0?tt.getRangeAt(0):tt.createRange?tt.createRange():pt.createRange(),bt=dp(s,[bt])[0])}catch(mt){}return bt||(bt=pt.createRange()),bt.setStart&&9===bt.startContainer.nodeType&&bt.collapsed&&(Ut=t.getRoot(),bt.setStart(Ut,0),bt.setEnd(Ut,0)),r&&a&&(0===Bt(bt.START_TO_START,bt,r)&&0===Bt(bt.END_TO_END,bt,r)?bt=a:(r=null,a=null)),bt},q=(tt,bt)=>{let Ut;if(!(t=>!!t&&Hv(t.startContainer)&&Hv(t.endContainer))(tt))return;const Bt=N();if(tt=s.dispatch("SetSelectionRange",{range:tt,forward:bt}).range,Bt){a=tt;try{Bt.removeAllRanges(),Bt.addRange(tt)}catch(mt){}!1===bt&&Bt.extend&&(Bt.collapse(tt.endContainer,tt.endOffset),Bt.extend(tt.startContainer,tt.startOffset)),r=Bt.rangeCount>0?Bt.getRangeAt(0):null}!tt.collapsed&&tt.startContainer===tt.endContainer&&Bt.setBaseAndExtent&&tt.endOffset-tt.startOffset<2&&tt.startContainer.hasChildNodes()&&(Ut=tt.startContainer.childNodes[tt.startOffset],Ut&&"IMG"===Ut.tagName&&(Bt.setBaseAndExtent(tt.startContainer,tt.startOffset,tt.endContainer,tt.endOffset),(Bt.anchorNode!==tt.startContainer||Bt.focusNode!==tt.endContainer)&&Bt.setBaseAndExtent(Ut,0,Ut,1))),s.dispatch("AfterSetSelectionRange",{range:tt,forward:bt})},Y=()=>{const tt=N(),bt=null==tt?void 0:tt.anchorNode,Ut=null==tt?void 0:tt.focusNode;if(!tt||!bt||!Ut||Vr(bt)||Vr(Ut))return!0;const Bt=t.createRng();Bt.setStart(bt,tt.anchorOffset),Bt.collapse(!0);const pt=t.createRng();return pt.setStart(Ut,tt.focusOffset),pt.collapse(!0),Bt.compareBoundaryPoints(Bt.START_TO_START,pt)<=0},Yt={bookmarkManager:null,controlSelection:null,dom:t,win:e,serializer:n,editor:s,collapse:R,setCursorLocation:(tt,bt)=>{const Ut=t.createRng();Mt(tt)&&Mt(bt)?(Ut.setStart(tt,bt),Ut.setEnd(tt,bt),q(Ut),R(!1)):(Kg(t,Ut,s.getBody(),!0),q(Ut))},getContent:tt=>((t,e={})=>((t,e,n)=>Ie(t).selection.getContent(e,n))(t,e.format?e.format:"html",e))(s,tt),setContent:y,getBookmark:(tt,bt)=>ye.getBookmark(tt,bt),moveToBookmark:tt=>ye.moveToBookmark(tt),select:(tt,bt)=>(((t,e,n)=>S.from(e).map(s=>{const r=t.nodeIndex(s),a=t.createRng();return a.setStart(s.parentNode,r),a.setEnd(s.parentNode,r+1),n&&(Kg(t,a,s,!0),Kg(t,a,s,!1)),a}))(t,tt,bt).each(q),tt),isCollapsed:()=>{const tt=L(),bt=N();return!(!tt||tt.item)&&(tt.compareEndPoints?0===tt.compareEndPoints("StartToEnd",tt):!bt||tt.collapsed)},isForward:Y,setNode:tt=>(y(t.getOuterHTML(tt)),tt),getNode:()=>((t,e)=>{let n,s,r;if(!e)return t;s=e.startContainer,r=e.endContainer;const a=e.startOffset,f=e.endOffset;return n=e.commonAncestorContainer,!e.collapsed&&(s===r&&f-a<2&&s.hasChildNodes()&&(n=s.childNodes[a]),3===s.nodeType&&3===r.nodeType&&(s=s.length===a?Bx(s.nextSibling,!0):s.parentNode,r=0===f?Bx(r.previousSibling,!1):r.parentNode,s&&s===r))?s:n&&3===n.nodeType?n.parentNode:n})(s.getBody(),L()),getSel:N,setRng:q,getRng:L,getStart:tt=>Ox(s.getBody(),L(),tt),getEnd:tt=>Mx(s.getBody(),L(),tt),getSelectedBlocks:(tt,bt)=>((t,e,n,s)=>{let r;const a=[],f=t.getRoot();if(n=t.getParent(n||Ox(f,e,e.collapsed),t.isBlock),s=t.getParent(s||Mx(f,e,e.collapsed),t.isBlock),n&&n!==f&&a.push(n),n&&s&&n!==s){r=n;const m=new We(n,f);for(;(r=m.next())&&r!==s;)t.isBlock(r)&&a.push(r)}return s&&n!==s&&s!==f&&a.push(s),a})(t,L(),tt,bt),normalize:()=>{const tt=L();if(!(t=>Wg(t).length>1)(N())&&Id(s)){const Ut=zd(t,tt);return Ut.each(Bt=>{q(Bt,Y())}),Ut.getOr(tt)}return tt},selectorChanged:(tt,bt)=>(f(tt,bt),Yt),selectorChangedWithUnbind:f,getScrollContainer:()=>{let tt,bt=t.getRoot();for(;bt&&"BODY"!==bt.nodeName;){if(bt.scrollHeight>bt.clientHeight){tt=bt;break}bt=bt.parentNode}return tt},scrollIntoView:(tt,bt)=>{Mt(tt)?KT(s,tt,bt):uu(s,L(),bt)},placeCaretAt:(tt,bt)=>q(dx(tt,bt,s.getDoc())),getBoundingClientRect:()=>{const tt=L();return tt.collapsed?F.fromRangeStart(tt).getClientRects()[0]:tt.getBoundingClientRect()},destroy:()=>{e=r=a=null,an.destroy()}},ye=lu(Yt),an=ax(Yt,s);return Yt.bookmarkManager=ye,Yt.controlSelection=an,Yt},DB=(t,e,n)=>{-1===W.inArray(e,n)&&(t.addAttributeFilter(n,(s,r)=>{let a=s.length;for(;a--;)s[a].attr(r,null)}),e.push(n))},IB=(t,e)=>{const n=["data-mce-selected"],s=e&&e.dom?e.dom:se.DOM,r=e&&e.schema?e.schema:_o(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;const a=_l(t,r);return((t,e,n)=>{t.addAttributeFilter("data-mce-tabindex",(s,r)=>{let a=s.length;for(;a--;){const f=s[a];f.attr("tabindex",f.attr("data-mce-tabindex")),f.attr(r,null)}}),t.addAttributeFilter("src,href,style",(s,r)=>{const a="data-mce-"+r,f=e.url_converter,m=e.url_converter_scope;let g=s.length;for(;g--;){const y=s[g];let x=y.attr(a);void 0!==x?(y.attr(r,x.length>0?x:null),y.attr(a,null)):(x=y.attr(r),"style"===r?x=n.serializeStyle(n.parseStyle(x),y.name):f&&(x=f.call(m,x,r,y.name)),y.attr(r,x.length>0?x:null))}}),t.addAttributeFilter("class",s=>{let r=s.length;for(;r--;){const a=s[r];let f=a.attr("class");f&&(f=a.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),a.attr("class",f.length>0?f:null))}}),t.addAttributeFilter("data-mce-type",(s,r,a)=>{let f=s.length;for(;f--;){const m=s[f];"bookmark"===m.attr("data-mce-type")&&!a.cleanup&&(S.from(m.firstChild).exists(y=>!Ii(y.value))?m.unwrap():m.remove())}}),t.addNodeFilter("noscript",s=>{let r=s.length;for(;r--;){const a=s[r].firstChild;a&&(a.value=xo.decode(a.value))}}),t.addNodeFilter("script,style",(s,r)=>{const a=m=>m.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let f=s.length;for(;f--;){const m=s[f],g=m.firstChild?m.firstChild.value:"";if("script"===r){const y=m.attr("type");y&&m.attr("type","mce-no/type"===y?null:y.replace(/^mce\-/,"")),"xhtml"===e.element_format&&g.length>0&&(m.firstChild.value="// <![CDATA[\n"+a(g)+"\n// ]]>")}else"xhtml"===e.element_format&&g.length>0&&(m.firstChild.value="\x3c!--\n"+a(g)+"\n--\x3e")}}),t.addNodeFilter("#comment",s=>{let r=s.length;for(;r--;){const a=s[r];e.preserve_cdata&&0===a.value.indexOf("[CDATA[")?(a.name="#cdata",a.type=4,a.value=n.decode(a.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===a.value.indexOf("mce:protected ")&&(a.name="#text",a.type=3,a.raw=!0,a.value=unescape(a.value).substr(14))}}),t.addNodeFilter("xml:namespace,input",(s,r)=>{let a=s.length;for(;a--;){const f=s[a];7===f.type?f.remove():1===f.type&&"input"===r&&!f.attr("type")&&f.attr("type","text")}}),t.addAttributeFilter("data-mce-type",s=>{Z(s,r=>{"format-caret"===r.attr("data-mce-type")&&(r.isEmpty(t.schema.getNonEmptyElements())?r.remove():r.unwrap())})}),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",(s,r)=>{let a=s.length;for(;a--;)s[a].attr(r,null)})})(a,t,s),{schema:r,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(m,g={})=>{const y=wt({format:"html"},g),x=((t,e,n)=>((t,e)=>t&&t.hasEventListeners("PreProcess")&&!e.no_events)(t,n)?((t,e,n)=>{let s;const r=t.dom;let a=e.cloneNode(!0);const f=document.implementation;if(f.createHTMLDocument){const m=f.createHTMLDocument("");W.each("BODY"===a.nodeName?a.childNodes:[a],g=>{m.body.appendChild(m.importNode(g,!0))}),a="BODY"!==a.nodeName?m.body.firstChild:m.body,s=r.doc,r.doc=m}return((t,e)=>{t.dispatch("PreProcess",e)})(t,he(wt({},n),{node:a})),s&&(r.doc=s),a})(t,e,n):e)(e,m,y),_=((t,e,n)=>{const s=Sn(n.getInner?e.innerHTML:t.getOuterHTML(e));return n.selection||Ha(D_fromDom(e))?s:W.trim(s)})(s,x,y),E=((t,e,n)=>{const s=n.selection?wt({forced_root_block:!1},n):n,r=t.parse(e,s);return(t=>{const e=s=>s&&"br"===s.name,n=t.lastChild;if(e(n)){const s=n.prev;e(s)&&(n.remove(),s.remove())}})(r),r})(a,_,y);return"tree"===y.format?E:((t,e,n,s,r)=>{const a=((t,e,n)=>ni(t,e).serialize(n))(e,n,s);return((t,e,n)=>!e.no_events&&t?((t,e)=>t.dispatch("PostProcess",e))(t,he(wt({},e),{content:n})).content:n)(t,r,a)})(e,t,r,E,y)},addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:ut(DB,a,n),getTempAttrs:st(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters}},Uv=(t,e)=>{const n=IB(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters}},hb=(t,e,n={})=>{const s=((t,e)=>he(wt({format:"html"},t),{set:!0,content:e}))(n,e);return ob(t,s).map(r=>{const a=((t,e,n)=>db(t).editor.setContent(e,n))(t,r.content,r);return rb(t,a.html,r),a.content}).getOr(e)},UB="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),WB="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),fh=se.DOM,dh=t=>S.from(t).each(e=>e.destroy()),hh=(()=>{const t={};return{add:(r,a)=>{t[r]=a},get:r=>t[r]?t[r]:{icons:{}},has:r=>$t(t,r)}})(),Sl=un.ModelManager,Wv=(t,e)=>e.dom[t],jv=(t,e)=>parseInt(Os(e,t),10),tL=ut(Wv,"clientWidth"),eL=ut(Wv,"clientHeight"),nL=ut(jv,"margin-top"),sL=ut(jv,"margin-left"),qv=t=>{const e=[],n=()=>{const E=t.theme;return E&&E.getNotificationManagerImpl?E.getNotificationManagerImpl():(()=>{const t=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,getArgs:t}})()},s=()=>S.from(e[0]),a=()=>{Z(e,E=>{E.reposition()})},m=E=>{Vt(e,k=>k===E).each(k=>{e.splice(k,1)})},g=(E,k=!0)=>{if(!t.removed&&(t=>(t=>S.from(t).map(D_fromDom))(t.inline?t.getBody():t.getContentAreaContainer()).map(Yo).getOr(!1))(t))return k&&t.dispatch("BeforeOpenNotification",{notification:E}),ue(e,P=>((E,k)=>!(E.type!==k.type||E.text!==k.text||E.progressBar||E.timeout||k.progressBar||k.timeout))(n().getArgs(P),E)).getOrThunk(()=>{t.editorManager.setActive(t);const P=n().open(E,()=>{m(P),a(),s().fold(()=>t.focus(),A=>kx(D_fromDom(A.getEl())))});return(E=>{e.push(E)})(P),a(),t.dispatch("OpenNotification",{notification:wt({},P)}),P})},x=st(e);return(E=t).on("SkinLoaded",()=>{const k=FE(E);k&&g({text:k,type:"warning",timeout:0},!1),a()}),E.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(a)}),E.on("remove",()=>{Z(e.slice(),k=>{n().close(k)})}),{open:g,close:()=>{s().each(E=>{n().close(E),m(E),a()})},getNotifications:x};var E},wl=un.PluginManager,aa=un.ThemeManager,Kv=t=>{let e=[];const n=()=>{const A=t.theme;return A&&A.getWindowManagerImpl?A.getWindowManagerImpl():(()=>{const t=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t,getParams:t,setParams:t}})()},s=(A,R)=>(...N)=>R?R.apply(A,N):void 0,m=A=>{(A=>{t.dispatch("CloseWindow",{dialog:A})})(A),e=dt(e,R=>R!==A),0===e.length&&t.focus()},y=A=>{t.editorManager.setActive(t),ap(t),t.ui.show();const R=A();return(A=>{e.push(A),(A=>{t.dispatch("OpenWindow",{dialog:A})})(A)})(R),R};return t.on("remove",()=>{Z(e,A=>{n().close(A)})}),{open:(A,R)=>y(()=>n().open(A,R,m)),openUrl:A=>y(()=>n().openUrl(A,m)),alert:(A,R,N)=>{const L=n();L.alert(A,s(N||L,R))},confirm:(A,R,N)=>{const L=n();L.confirm(A,s(N||L,R))},close:()=>{S.from(e[e.length-1]).each(A=>{n().close(A),m(A)})}}},Yv=(t,e)=>{t.notificationManager.open({type:"error",text:e})},mh=(t,e)=>{t._skinLoaded?Yv(t,e):t.on("SkinLoaded",()=>{Yv(t,e)})},Cu=(t,e,n)=>{nx(t,e,{message:n}),console.error(n)},xu=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,gh=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Gv=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",r=`content${t.editorManager.suffix}.css`,a=!0===t.inline;return Kt(e,f=>(t=>/^[a-z0-9\-]+$/i.test(t))(f)&&!a?`${n}/${f}/${r}`:t.documentBaseURI.toAbsolute(f))},SL=Ne,Xv=()=>{let n={};const s=(E,k)=>({status:E,resultUri:k}),r=E=>E in n;return{hasBlobUri:r,getResultUri:E=>{const k=n[E];return k?k.resultUri:null},isPending:E=>!!r(E)&&1===n[E].status,isUploaded:E=>!!r(E)&&2===n[E].status,markPending:E=>{n[E]=s(1,null)},markUploaded:(E,k)=>{n[E]=s(2,k)},removeFailed:E=>{delete n[E]},destroy:()=>{n={}}}};let kL=0;const RL=(t,e)=>{const n={},r=(P,A)=>new Promise((R,N)=>{const L=new XMLHttpRequest;L.open("POST",e.url),L.withCredentials=e.credentials,L.upload.onprogress=H=>{A(H.loaded/H.total*100)},L.onerror=()=>{N("Image upload failed due to a XHR Transport error. Code: "+L.status)},L.onload=()=>{if(L.status<200||L.status>=300)return void N("HTTP Error: "+L.status);const H=JSON.parse(L.responseText);H&&At(H.location)?R(((P,A)=>P?P.replace(/\/$/,"")+"/"+A.replace(/^\//,""):A)(e.basePath,H.location)):N("Invalid JSON: "+L.responseText)};const q=new FormData;q.append("file",P.blob(),P.filename()),L.send(q)}),f=(P,A)=>({url:A,blobInfo:P,status:!0}),m=(P,A)=>({url:"",blobInfo:P,status:!1,error:A}),g=(P,A)=>{W.each(n[P],R=>{R(A)}),delete n[P]};return!1===oe(e.handler)&&(e.handler=r),{upload:(P,A)=>!e.url&&(P=>P===r)(e.handler)?new Promise(P=>{P([])}):((P,A)=>(P=W.grep(P,R=>!t.isUploaded(R.blobUri())),Promise.all(W.map(P,R=>t.isPending(R.blobUri())?(P=>{const A=P.blobUri();return new Promise(R=>{n[A]=n[A]||[],n[A].push(R)})})(R):((P,A,R)=>(t.markPending(P.blobUri()),new Promise(N=>{let L,q;try{const H=()=>{L&&(L.close(),q=Ft)},V=Y=>{H(),t.markUploaded(P.blobUri(),Y),g(P.blobUri(),f(P,Y)),N(f(P,Y))},ot=Y=>{H(),t.removeFailed(P.blobUri()),g(P.blobUri(),m(P,Y)),N(m(P,Y))};q=Y=>{Y<0||Y>100||S.from(L).orThunk(()=>S.from(R).map(Ca)).each(X=>{L=X,X.progressBar.value(Y)})},A(P,q).then(V,Y=>{ot(At(Y)?{message:Y}:Y)})}catch(H){N(m(P,H))}})))(R,e.handler,A)))))(P,A)}},Qv=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Zv=(t,e)=>RL(e,{url:kE(t),basePath:EE(t),credentials:AE(t),handler:TE(t)}),NL=t=>{const e=(()=>{let t=[];const e=_=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[_.toLowerCase()]||"dat"),s=_=>{if(!_.blob||!_.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const E=_.id||(t=>t+kL+++(()=>{const t=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+t()+t()+t()})())("blobid"),k=_.name||E,P=_.blob;return{id:st(E),name:st(k),filename:st(_.filename||k+"."+e(P.type)),blob:st(P),base64:st(_.base64),blobUri:st(_.blobUri||URL.createObjectURL(P)),uri:st(_.uri)}},a=_=>ue(t,_).getOrUndefined(),f=_=>a(E=>E.id()===_);return{create:(_,E,k,P,A)=>{if(At(_))return s({id:_,name:P,filename:A,blob:E,base64:k});if(tn(_))return s(_);throw new Error("Unknown input type")},add:_=>{f(_.id())||t.push(_)},get:f,getByUri:_=>a(E=>E.blobUri()===_),getByData:(_,E)=>a(k=>k.base64()===_&&k.blob().type===E),findFirst:a,removeByUri:_=>{t=dt(t,E=>E.blobUri()!==_||(URL.revokeObjectURL(E.blobUri()),!1))},destroy:()=>{Z(t,_=>{URL.revokeObjectURL(_.blobUri())}),t=[]}}})();let n,s;const r=Xv(),a=[],f=(t=>{const e=Ve(null);return t.on("change AddUndo",s=>{e.set(wt({},s.level))}),{fireIfChanged:()=>{const s=t.undoManager.data;es(s).filter(r=>!ch(e.get(),r)).each(r=>{t.setDirty(!0),t.dispatch("change",{level:r,lastLevel:va(s,s.length-2).getOrNull()})})}}})(t),m=H=>V=>t.selection?H(V):[],g=H=>H+(-1===H.indexOf("?")?"?":"&")+(new Date).getTime(),y=(H,V,ot)=>{let Y=0;do{Y=H.indexOf(V,Y),-1!==Y&&(H=H.substring(0,Y)+ot+H.substr(Y+V.length),Y+=ot.length-V.length+1)}while(-1!==Y);return H},x=(H,V,ot)=>(H=y(H,`src="${V}"`,`src="${ot}"${ot===le.transparentSrc?' data-mce-placeholder="1"':""}`),y(H,'data-mce-src="'+V+'"','data-mce-src="'+ot+'"')),_=(H,V)=>{Z(t.undoManager.data,ot=>{"fragmented"===ot.type?ot.fragments=Kt(ot.fragments,Y=>x(Y,H,V)):ot.content=x(ot.content,H,V)})},k=()=>(n||(n=Zv(t,r)),N().then(m(H=>{const V=Kt(H,ot=>ot.blobInfo);return n.upload(V,Qv(t)).then(m(ot=>{const Y=[],X=Kt(ot,(J,et)=>{const St=H[et].blobInfo,ht=H[et].image;let lt=!1;return J.status&&SE(t)?(e.removeByUri(ht.src),ur(t)||((H,V)=>{const ot=t.convertURL(V,"src");_(H.src,V),jn(D_fromDom(H),{src:Xy(t)?g(V):V,"data-mce-src":ot})})(ht,J.url)):J.error&&(J.error.remove&&(_(ht.getAttribute("src"),le.transparentSrc),Y.push(ht),lt=!0),((t,e)=>{mh(t,vs.translate(["Failed to upload image: {0}",e]))})(t,J.error.message)),{element:ht,status:J.status,uploadUri:J.url,blobInfo:St,removed:lt}});return X.length>0&&f.fireIfChanged(),Y.length>0&&!ur(t)&&t.undoManager.transact(()=>{Z(Y,J=>{t.dom.remove(J),e.removeByUri(J.src)})}),X}))}))),P=()=>Gy(t)?k():Promise.resolve([]),A=H=>fe(a,V=>V(H)),N=()=>(s||(s=((t,e)=>{const n={};return{findAll:(r,a)=>{a||(a=Ne);const f=dt((t=>t?dn(t.getElementsByTagName("img")):[])(r),g=>{const y=g.src;return!(g.hasAttribute("data-mce-bogus")||g.hasAttribute("data-mce-placeholder")||!y||y===le.transparentSrc)&&(0===y.indexOf("blob:")?!t.isUploaded(y)&&a(g):0===y.indexOf("data:")&&a(g))}),m=Kt(f,g=>{if(void 0!==n[g.src])return new Promise(x=>{n[g.src].then(_=>{if("string"==typeof _)return _;x({image:g,blobInfo:_.blobInfo})})});const y=new Promise((x,_)=>{((t,e,n,s)=>{let r,a;if(0===e.src.indexOf("blob:"))return a=t.getByUri(e.src),void(a?n({image:e,blobInfo:a}):dv(e.src).then(g=>{hv(g).then(y=>{r=ah(y).data,a=t.create(nb(),g,r),t.add(a),n({image:e,blobInfo:a})})},g=>{s(g)}));const{data:f,type:m}=ah(e.src);r=f,a=t.getByData(r,m),a?n({image:e,blobInfo:a}):dv(e.src).then(g=>{a=t.create(nb(),g,r),t.add(a),n({image:e,blobInfo:a})},g=>{s(g)})})(e,g,x,_)}).then(x=>(delete n[x.image.src],x)).catch(x=>(delete n[g.src],x));return n[g.src]=y,y});return Promise.all(m)}}})(r,e)),s.findAll(t.getBody(),A).then(m(H=>(H=dt(H,V=>"string"!=typeof V||(mh(t,V),!1)),ur(t)||Z(H,V=>{_(V.image.src,V.blobInfo.blobUri()),V.image.src=V.blobInfo.blobUri(),V.image.removeAttribute("data-mce-src")}),H)))),q=H=>H.replace(/src="(blob:[^"]+)"/g,(V,ot)=>{const Y=r.getResultUri(ot);if(Y)return'src="'+Y+'"';let X=e.getByUri(ot);return X||(X=It(t.editorManager.get(),(J,et)=>J||et.editorUpload&&et.editorUpload.blobCache.getByUri(ot),null)),X?'src="data:'+X.blob().type+";base64,"+X.base64()+'"':V});return t.on("SetContent",()=>{Gy(t)?P():N()}),t.on("RawSaveContent",H=>{H.content=q(H.content)}),t.on("GetContent",H=>{H.source_view||"raw"===H.format||"tree"===H.format||(H.content=q(H.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",H=>{Z(H,V=>{const ot=V.attr("src");if(e.getByUri(ot))return;const Y=r.getResultUri(ot);Y&&V.attr("src",Y)})})}),{blobCache:e,addFilter:H=>{a.push(H)},uploadImages:k,uploadImagesAuto:P,scanForImages:N,destroy:()=>{e.destroy(),r.destroy(),s=n=null}}},Jv={remove_similar:!0,inherit:!1},kl=wt({selector:"td,th"},Jv),ML={tablecellbackgroundcolor:wt({styles:{backgroundColor:"%value"}},kl),tablecellverticalalign:wt({styles:{"vertical-align":"%value"}},kl),tablecellbordercolor:wt({styles:{borderColor:"%value"}},kl),tablecellclass:wt({classes:["%value"]},kl),tableclass:wt({selector:"table",classes:["%value"]},Jv),tablecellborderstyle:wt({styles:{borderStyle:"%value"}},kl),tablecellborderwidth:wt({styles:{borderWidth:"%value"}},kl)},BL=st(ML),ph=W.each,Zn=se.DOM,t_=(t,e)=>{let n,s,r;const a=e&&e.schema||_o({}),m=x=>{s="string"==typeof x?{name:x,classes:[],attrs:{}}:x;const _=Zn.create(s.name);return((x,_)=>{_.classes.length&&Zn.addClass(x,_.classes.join(" ")),Zn.setAttribs(x,_.attrs)})(_,s),_},y=(x,_,E)=>{let k,P;const A=_.length>0&&_[0],R=A&&A.name,N=((x,_)=>{const E="string"!=typeof x?x.nodeName.toLowerCase():x,k=a.getElementRule(E),P=k&&k.parentsRequired;return!(!P||!P.length)&&(_&&-1!==W.inArray(P,_)?_:P[0])})(x,R);if(N)R===N?(P=_[0],_=_.slice(1)):P=N;else if(A)P=_[0],_=_.slice(1);else if(!E)return x;return P&&(k=m(P),k.appendChild(x)),E&&(k||(k=Zn.create("div"),k.appendChild(x)),W.each(E,L=>{const q=m(L);k.insertBefore(q,x)})),y(k,_,P&&P.siblings)};return t&&t.length?(s=t[0],n=m(s),r=Zn.create("div"),r.appendChild(y(n,t.slice(1),s.siblings)),r):""},IL=t=>{let e;const n={classes:[],attrs:{}};return"*"!==(t=n.selector=W.trim(t))&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,r,a,f,m)=>{switch(r){case"#":n.attrs.id=a;break;case".":n.classes.push(a);break;case":":-1!==W.inArray("checked disabled enabled read-only required".split(" "),a)&&(n.attrs[a]=a)}if("["===f){const g=m.match(/([\w\-]+)(?:\=\"([^\"]+))?/);g&&(n.attrs[g[1]]=g[2])}return""})),n.name=e||"div",n},$L=(t,e)=>{let n,s,a,r="",f=VE(t);if(""===f)return"";const m=x=>x.replace(/%(\w+)/g,"");if("string"==typeof e){if(!(e=t.formatter.get(e)))return;e=e[0]}if("preview"in e){const x=ce(e,"preview");if(Re(x,!1))return"";f=x.getOr(f)}n=e.block||e.inline||"span";const g=(t=>t&&"string"==typeof t?(t=(t=t.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),W.map(t.split(/(?:>|\s+(?![^\[\]]+\]))/),e=>{const n=W.map(e.split(/(?:~\+|~|\+)/),IL),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[])(e.selector);g.length?(g[0].name||(g[0].name=n),n=e.selector,s=t_(g,t)):s=t_([n],t);const y=Zn.select(n,s)[0]||s.firstChild;return ph(e.styles,(x,_)=>{const E=m(x);E&&Zn.setStyle(y,_,E)}),ph(e.attributes,(x,_)=>{const E=m(x);E&&Zn.setAttrib(y,_,E)}),ph(e.classes,x=>{const _=m(x);Zn.hasClass(y,_)||Zn.addClass(y,_)}),t.dispatch("PreviewFormats"),Zn.setStyles(s,{position:"absolute",left:-65535}),t.getBody().appendChild(s),a=Zn.getStyle(t.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,ph(f.split(" "),x=>{let _=Zn.getStyle(y,x,!0);if(!("background-color"===x&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(_)&&(_=Zn.getStyle(t.getBody(),x,!0),"#ffffff"===Nd(_).toLowerCase())||"color"===x&&"#000000"===Nd(_).toLowerCase())){if("font-size"===x&&/em|%$/.test(_)){if(0===a)return;_=parseFloat(_)/(/%$/.test(_)?100:1)*a+"px"}"border"===x&&_&&(r+="padding:0 2px;"),r+=x+":"+_+";"}}),t.dispatch("AfterPreviewFormats"),Zn.remove(s),r},e_=t=>{const e=(t=>{const e={},r=(f,m)=>{f&&(At(f)?(Fe(m)||(m=[m]),Z(m,g=>{_n(g.deep)&&(g.deep=!as(g)),_n(g.split)&&(g.split=!as(g)||on(g)),_n(g.remove)&&as(g)&&!on(g)&&(g.remove="none"),as(g)&&on(g)&&(g.mixed=!0,g.block_expand=!0),At(g.classes)&&(g.classes=g.classes.split(/\s+/))}),e[f]=m):ie(f,(g,y)=>{r(y,g)}))};return r((t=>{const e=t.dom,n=t.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:r=>{e.setStyle(r,"float",null)},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:r=>{e.setStyle(r,"float",null)},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const r={inline:"span",styles:{textDecoration:"line-through"},exact:!0},a={inline:"strike",remove:"all",preserve_attributes:["class","style"]},f={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[f,r,a]:[r,f,a]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(r,a,f)=>vt(r)&&r.hasAttribute("href"),onformat:(r,a,f)=>{W.each(f,(m,g)=>{e.setAttrib(r,g,m)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":r=>{var a;return null!==(a=null==r?void 0:r.customValue)&&void 0!==a?a:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return W.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),r=>{s[r]={block:r,remove:"all"}}),s})(t)),r(BL()),r(HE(t)),{get:f=>Mt(f)?e[f]:e,has:f=>$t(e,f),register:r,unregister:f=>(f&&e[f]&&delete e[f],e)}})(t),n=Ve(null);return(t=>{t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(t=>{t.on("mouseup keydown",e=>{((t,e)=>{const n=t.selection,s=t.getBody();Wp(t,null,!1),(8===e||46===e)&&n.isCollapsed()&&"\ufeff"===n.getStart().innerHTML&&Wp(t,ta(s,n.getStart())),(37===e||39===e)&&Wp(t,ta(s,n.getStart()))})(t,e.keyCode)})})(t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(s,r,a)=>{((t,e,n,s)=>{Ie(t).formatter.apply(e,n,s)})(t,s,r,a)},remove:(s,r,a,f)=>{((t,e,n,s,r)=>{Ie(t).formatter.remove(e,n,s,r)})(t,s,r,a,f)},toggle:(s,r,a)=>{((t,e,n,s)=>{Ie(t).formatter.toggle(e,n,s)})(t,s,r,a)},match:(s,r,a,f)=>((t,e,n,s,r)=>Ie(t).formatter.match(e,n,s,r))(t,s,r,a,f),closest:s=>((t,e)=>Ie(t).formatter.closest(e))(t,s),matchAll:(s,r)=>((t,e,n)=>Ie(t).formatter.matchAll(e,n))(t,s,r),matchNode:(s,r,a,f)=>((t,e,n,s,r)=>Ie(t).formatter.matchNode(e,n,s,r))(t,s,r,a,f),canApply:s=>((t,e)=>Ie(t).formatter.canApply(e))(t,s),formatChanged:(s,r,a,f)=>((t,e,n,s,r,a)=>Ie(t).formatter.formatChanged(e,n,s,r,a))(t,n,s,r,a,f),getCssText:ut($L,t)}},n_=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},s_=t=>{const e=ko(),n=Ve(0),s=Ve(0),r={data:[],typing:!1,beforeChange:()=>{((t,e,n)=>{Ie(t).undoManager.beforeChange(e,n)})(t,n,e)},add:(a,f)=>((t,e,n,s,r,a,f)=>Ie(t).undoManager.add(e,n,s,r,a,f))(t,r,s,n,e,a,f),undo:()=>((t,e,n,s)=>Ie(t).undoManager.undo(e,n,s))(t,r,n,s),redo:()=>((t,e,n)=>Ie(t).undoManager.redo(e,n))(t,s,r.data),clear:()=>{((t,e,n)=>{Ie(t).undoManager.clear(e,n)})(t,r,s)},reset:()=>{((t,e)=>{Ie(t).undoManager.reset(e)})(t,r)},hasUndo:()=>((t,e,n)=>Ie(t).undoManager.hasUndo(e,n))(t,r,s),hasRedo:()=>((t,e,n)=>Ie(t).undoManager.hasRedo(e,n))(t,r,s),transact:a=>((t,e,n,s)=>Ie(t).undoManager.transact(e,n,s))(t,r,n,a),ignore:a=>{((t,e,n)=>{Ie(t).undoManager.ignore(e,n)})(t,n,a)},extra:(a,f)=>{((t,e,n,s,r)=>{Ie(t).undoManager.extra(e,n,s,r)})(t,r,s,a,f)}};return ur(t)||((t,e,n)=>{const s=Ve(!1),r=g=>{uh(e,!1,n),e.add({},g)};t.on("init",()=>{e.add()}),t.on("BeforeExecCommand",g=>{n_(g.command)||(Bv(e,n),e.beforeChange())}),t.on("ExecCommand",g=>{n_(g.command)||r(g)}),t.on("ObjectResizeStart cut",()=>{e.beforeChange()}),t.on("SaveContent ObjectResized blur",r),t.on("dragend",r),t.on("keyup",g=>{const y=g.keyCode;g.isDefaultPrevented()||((y>=33&&y<=36||y>=37&&y<=40||45===y||g.ctrlKey)&&(r(),t.nodeChanged()),(46===y||8===y)&&t.nodeChanged(),s.get()&&e.typing&&!1===ch(lb(t),e.data[0])&&(!1===t.isDirty()&&t.setDirty(!0),t.dispatch("TypingUndo"),s.set(!1),t.nodeChanged()))}),t.on("keydown",g=>{const y=g.keyCode;g.isDefaultPrevented()||(y>=33&&y<=36||y>=37&&y<=40||45===y?e.typing&&r(g):(y<16||y>20)&&224!==y&&91!==y&&!e.typing&&!(g.ctrlKey&&!g.altKey||g.metaKey)&&(e.beforeChange(),uh(e,!0,n),e.add({},g),s.set(!0)))}),t.on("mousedown",g=>{e.typing&&r(g)}),t.on("input",g=>{g.inputType&&((g=>"insertReplacementText"===g.inputType)(g)||(g=>"insertText"===g.inputType&&null===g.data)(g)||(g=>"insertFromPaste"===g.inputType||"insertFromDrop"===g.inputType)(g))&&r(g)}),t.on("AddUndo Undo Redo ClearUndos",g=>{g.isDefaultPrevented()||t.nodeChanged()})})(t,r,n),(t=>{t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo")})(t),r},UL=[9,27,yt.HOME,yt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,yt.DOWN,yt.UP,yt.LEFT,yt.RIGHT].concat(le.browser.isFirefox()?[224]:[]),o_="data-mce-placeholder",r_=t=>"keydown"===t.type||"keyup"===t.type,i_=t=>{const e=t.keyCode;return e===yt.BACKSPACE||e===yt.DELETE},YL=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,la=(t,e)=>Ns(D_fromDom(e),BE(t)),ri=(t,e,n)=>{const s=((t,e,n)=>dt(se.DOM.getParents(n.container(),"*",e),t))(t,e,n);return S.from(s[s.length-1])},ks=(t,e)=>{if(!e)return e;const n=e.container(),s=e.offset();return t?qr(n)?rt(n.nextSibling)?F(n.nextSibling,0):F.after(n):Rc(e)?F(n,s+1):e:qr(n)?rt(n.previousSibling)?F(n.previousSibling,n.previousSibling.data.length):F.before(n):Va(e)?F(n,s-1):e},a_=ut(ks,!0),l_=ut(ks,!1),c_=(t,e)=>{const n=s=>s.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},mb=t=>c_(t,"Delete"),nI=t=>Yf(t)||jr(t),bh=(t,e)=>bn(t,e)?za(e,nI,(t=>e=>ee(t,D_fromDom(e.dom.parentNode)))(t)):S.none(),u_=t=>{t.dom.isEmpty(t.getBody())&&(t.setContent(""),(t=>{const e=t.getBody(),n=e.firstChild&&t.dom.isBlock(e.firstChild)?e.firstChild:e;t.selection.setCursorLocation(n,0)})(t))},iI=(t,e)=>({from:t,to:e}),gb=(t,e)=>{const n=D_fromDom(t),s=D_fromDom(e.container());return bh(n,s).map(r=>((t,e)=>({block:t,position:e}))(r,e))},f_=t=>{const e=(t=>{const e=en(t);return Vt(e,Ls).fold(st(e),n=>e.slice(0,n))})(t);return Z(e,Pe),e},d_=(t,e)=>{const n=cr(e,t);return ue(n.reverse(),s=>$e(s)).each(Pe)},gI=(t,e,n,s)=>{if($e(n))return oa(n),On(n.dom);(t=>0===dt(cc(t),e=>!$e(e)).length)(s)&&$e(e)&&qn(s,D_fromTag("br"));const r=No(n.dom,F.before(s.dom));return Z(f_(e),a=>{qn(s,a)}),d_(t,e),r},pI=(t,e,n)=>{if($e(n))return Pe(n),$e(e)&&oa(e),On(e.dom);const s=Oo(n.dom);return Z(f_(e),r=>{He(n,r)}),d_(t,e),s},h_=(t,e)=>{hl(t,e.dom).map(n=>n.getNode()).map(D_fromDom).filter(Wr).each(Pe)},m_=(t,e,n)=>(h_(!0,e),h_(!1,n),((t,e)=>bn(e,t)?((t,e)=>{const n=cr(e,t);return S.from(n[n.length-1])})(e,t):S.none())(e,n).fold(ut(pI,t,e,n),ut(gI,t,e,n))),g_=(t,e,n,s)=>e?m_(t,s,n):m_(t,n,s),pb=(t,e)=>{const n=D_fromDom(t.getBody());return((t,e,n)=>n.collapsed?((t,e,n)=>{const s=gb(t,F.fromRangeStart(n)),r=s.bind(a=>_s(e,t,a.position).bind(f=>gb(t,f).map(m=>((t,e,n)=>Le(n.position.getNode())&&!1===$e(n.block)?hl(!1,n.block.dom).bind(s=>s.isEqual(n.position)?_s(e,t,s).bind(r=>gb(t,r)):S.some(n)).getOr(n):n)(t,e,m))));return pn(s,r,iI).filter(a=>(t=>!1===ee(t.from.block,t.to.block))(a)&&(t=>cn(t.from.block).bind(e=>cn(t.to.block).filter(n=>ee(e,n))).isSome())(a)&&(t=>!1===ge(t.from.block.dom)&&!1===ge(t.to.block.dom))(a))})(t,e,n):S.none())(n.dom,e,t.selection.getRng()).map(r=>()=>{g_(n,e,r.from.block,r.to.block).each(a=>{t.selection.setRng(a.toRange())})})},p_=(t,e)=>{const n=D_fromDom(e),s=ut(ee,t);return Ur(n,Li,s).isSome()},SI=t=>{const e=D_fromDom(t.getBody());return((t,e)=>{const n=No(t.dom,F.fromRangeStart(e)).isNone(),s=Zs(t.dom,F.fromRangeEnd(e)).isNone();return!((t,e)=>p_(t,e.startContainer)||p_(t,e.endContainer))(t,e)&&n&&s})(e,t.selection.getRng())?(t=>S.some(()=>{t.setContent(""),t.selection.setCursorLocation()}))(t):((t,e)=>{const n=e.getRng();return pn(bh(t,D_fromDom(n.startContainer)),bh(t,D_fromDom(n.endContainer)),(s,r)=>!1===ee(s,r)?S.some(()=>{n.deleteContents(),g_(t,!0,s,r).each(a=>{e.setRng(a.toRange())})}):S.none()).getOr(S.none())})(e,t.selection)},bb=(t,e)=>t.selection.isCollapsed()?S.none():SI(t),wI=qs,kI=ge,fr=(t,e,n,s,r)=>S.from(e._selectionOverrides.showCaret(t,n,s,r)),vu=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?S.none():S.some((t=>{const e=t.ownerDocument.createRange();return e.selectNode(t),e})(e)),yb=(t,e,n)=>e.collapsed?((t,e,n)=>{const s=Ng(1,t.getBody(),e),r=F.fromRangeStart(s),a=r.getNode();if(Jc(a))return fr(1,t,a,!r.isAtEnd(),!1);const f=r.getNode(!0);if(Jc(f))return fr(1,t,f,!1,!1);const m=t.dom.getParent(r.getNode(),g=>kI(g)||wI(g));return Jc(m)?fr(1,t,m,!1,n):S.none()})(t,e,n).getOr(e):e,TI=t=>na(t)||du(t),RI=t=>sa(t)||hu(t),b_=(t,e,n,s,r,a)=>{fr(s,t,a.getNode(!r),r,!0).each(f=>{if(e.collapsed){const m=e.cloneRange();r?m.setEnd(f.startContainer,f.startOffset):m.setStart(f.endContainer,f.endOffset),m.deleteContents()}else e.deleteContents();t.selection.setRng(f)}),((t,e)=>{rt(e)&&0===e.data.length&&t.remove(e)})(t.dom,n)},Cb=(t,e)=>((t,e)=>{const n=t.selection.getRng();if(!rt(n.commonAncestorContainer))return S.none();const s=e?sn.Forwards:sn.Backwards,r=Do(t.getBody()),a=ut(Og,e?r.next:r.prev),f=e?TI:RI,m=ou(s,t.getBody(),n),g=ks(e,a(m));if(!g||!Td(m,g))return S.none();if(f(g))return S.some(()=>b_(t,n,m.getNode(),s,e,g));const y=a(g);return y&&f(y)&&Td(g,y)?S.some(()=>b_(t,n,m.getNode(),s,e,y)):S.none()})(t,e),ls=To_generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),C_=(t,e,n)=>_s(e,t,n).bind(s=>(t=>Li(D_fromDom(t))||jr(D_fromDom(t)))(s.getNode())||((t,e,n,s)=>{const r=a=>Ac(D_fromDom(a))&&!Ro(n,s,t);return xC(!e,n).fold(()=>xC(e,s).fold(xe,r),r)})(t,e,n,s)?S.none():e&&ge(s.getNode())||!1===e&&ge(s.getNode(!0))?((t,e,n,s)=>{const r=s.getNode(!1===e);return bh(D_fromDom(t),D_fromDom(n.getNode())).map(a=>$e(a)?ls.remove(a.dom):ls.moveToElement(r)).orThunk(()=>S.some(ls.moveToElement(r)))})(t,e,n,s):e&&sa(n)||!1===e&&na(n)?S.some(ls.moveToPosition(s)):S.none()),x_=(t,e)=>S.from(gu(t.getBody(),e)),VI=(t,e)=>{const n=t.selection.getNode();return x_(t,n).filter(ge).fold(()=>((t,e,n)=>{const s=Ng(e?1:-1,t,n),r=F.fromRangeStart(s),a=D_fromDom(t);return!1===e&&sa(r)?S.some(ls.remove(r.getNode(!0))):e&&na(r)?S.some(ls.remove(r.getNode())):!1===e&&na(r)&&Cp(a,r)?cP(a,r).map(f=>ls.remove(f.getNode())):e&&sa(r)&&yp(a,r)?uP(a,r).map(f=>ls.remove(f.getNode())):((t,e,n)=>((t,e)=>{const n=e.getNode(!1===t),s=t?"after":"before";return vt(n)&&n.getAttribute("data-mce-caret")===s})(e,n)?((t,e)=>t&&ge(e.nextSibling)?S.some(ls.moveToElement(e.nextSibling)):!1===t&&ge(e.previousSibling)?S.some(ls.moveToElement(e.previousSibling)):S.none())(e,n.getNode(!1===e)).fold(()=>C_(t,e,n),S.some):C_(t,e,n).bind(s=>((t,e,n)=>n.fold(s=>S.some(ls.remove(s)),s=>S.some(ls.moveToElement(s)),s=>Ro(e,s,t)?S.none():S.some(ls.moveToPosition(s))))(t,n,s)))(t,e,r)})(t.getBody(),e,t.selection.getRng()).map(s=>()=>s.fold(((t,e)=>n=>(t._selectionOverrides.hideFakeCaret(),ra(t,e,D_fromDom(n)),!0))(t,e),((t,e)=>n=>{const s=e?F.before(n):F.after(n);return t.selection.setRng(s.toRange()),!0})(t,e),(t=>e=>(t.selection.setRng(e.toRange()),!0))(t))),()=>S.some(Ft))},v_=t=>{const e=t.dom,n=t.selection,s=gu(t.getBody(),n.getNode());if(qs(s)&&e.isBlock(s)&&e.isEmpty(s)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(s,""),s.appendChild(r),n.setRng(F.before(r).toRange())}return!0},xb=(t,e)=>t.selection.isCollapsed()?VI(t,e):((t,e)=>{const n=t.selection.getNode();return ge(n)&&!Ni(n)?x_(t,n.parentNode).filter(ge).fold(()=>S.some(()=>{(t=>{Z(yn(t,".mce-offscreen-selection"),Pe)})(D_fromDom(t.getBody())),ra(t,e,D_fromDom(t.selection.getNode())),u_(t)}),()=>S.some(Ft)):S.none()})(t,e),vb=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=F.fromRangeStart(t.selection.getRng());return _s(e,t.getBody(),n).filter(s=>e?JR(s):tP(s)).bind(s=>S.from(Dg(e?0:-1,s))).map(s=>()=>t.selection.select(s))})(t,e):S.none(),El=rt,__=t=>El(t)&&t.data[0]===Zt,S_=t=>El(t)&&t.data[t.data.length-1]===Zt,w_=t=>t.ownerDocument.createTextNode(Zt),yh=(t,e)=>t?(t=>{if(El(t.previousSibling))return S_(t.previousSibling)||t.previousSibling.appendData(Zt),t.previousSibling;if(El(t))return __(t)||t.insertData(0,Zt),t;{const e=w_(t);return t.parentNode.insertBefore(e,t),e}})(e):(t=>{if(El(t.nextSibling))return __(t.nextSibling)||t.nextSibling.insertData(0,Zt),t.nextSibling;if(El(t))return S_(t)||t.appendData(Zt),t;{const e=w_(t);return t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e),e}})(e),YI=ut(yh,!0),GI=ut(yh,!1),k_=(t,e)=>rt(t.container())?yh(e,t.container()):yh(e,t.getNode()),E_=(t,e)=>{const n=e.get();return n&&t.container()===n&&qr(n)},_b=(t,e)=>e.fold(n=>{Zi(t.get());const s=YI(n);return t.set(s),S.some(F(s,s.length-1))},n=>On(n).map(s=>{if(E_(s,t))return F(t.get(),1);{Zi(t.get());const r=k_(s,!0);return t.set(r),F(r,1)}}),n=>Oo(n).map(s=>{if(E_(s,t))return F(t.get(),t.get().length-1);{Zi(t.get());const r=k_(s,!1);return t.set(r),F(r,r.length-1)}}),n=>{Zi(t.get());const s=GI(n);return t.set(s),S.some(F(s,1))}),A_=(t,e)=>{for(let n=0;n<t.length;n++){const s=t[n].apply(null,e);if(s.isSome())return s}return S.none()},kn=To_generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),T_=(t,e)=>ei(e,t)||t,XI=(t,e,n)=>{const s=a_(n),r=T_(e,s.container());return ri(t,r,s).fold(()=>Zs(r,s).bind(ut(ri,t,r)).map(a=>kn.before(a)),S.none)},QI=(t,e)=>null===ta(t,e),R_=(t,e,n)=>ri(t,e,n).filter(ut(QI,e)),ZI=(t,e,n)=>{const s=l_(n);return R_(t,e,s).bind(r=>No(r,s).isNone()?S.some(kn.start(r)):S.none())},JI=(t,e,n)=>{const s=a_(n);return R_(t,e,s).bind(r=>Zs(r,s).isNone()?S.some(kn.end(r)):S.none())},tF=(t,e,n)=>{const s=l_(n),r=T_(e,s.container());return ri(t,r,s).fold(()=>No(r,s).bind(ut(ri,t,r)).map(a=>kn.after(a)),S.none)},P_=t=>!1===(t=>"rtl"===se.DOM.getStyle(t,"direction",!0)||(t=>YL.test(t))(t.textContent))(Sb(t)),$o=(t,e,n)=>A_([XI,ZI,JI,tF],[t,e,n]).filter(P_),Sb=t=>t.fold(fn,fn,fn,fn),D_=t=>t.fold(st("before"),st("start"),st("end"),st("after")),Ch=t=>t.fold(kn.before,kn.before,kn.after,kn.after),wb=t=>t.fold(kn.start,kn.start,kn.end,kn.end),nF=(t,e,n,s,r,a)=>pn(ri(e,n,s),ri(e,n,r),(f,m)=>f!==m&&((t,e,n)=>{const s=ei(e,t),r=ei(n,t);return s&&s===r})(n,f,m)?kn.after(t?f:m):a).getOr(a),sF=(t,e)=>t.fold(Ne,n=>!((t,e)=>D_(t)===D_(e)&&Sb(t)===Sb(e))(n,e)),rF=(t,e)=>t?e.fold(zs(S.some,kn.start),S.none,zs(S.some,kn.after),S.none):e.fold(S.none,zs(S.some,kn.before),S.none,zs(S.some,kn.end)),N_=(t,e,n)=>{const s=t?1:-1;return e.setRng(F(n.container(),n.offset()+s).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var zo;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(zo||(zo={}));const xh=(t,e)=>t===sn.Backwards?ae(e):e,cF=(t,e,n)=>t===sn.Forwards?e.next(n):e.prev(n),uF=(t,e,n,s)=>Le(s.getNode(e===sn.Forwards))?zo.Br:!1===Ro(n,s)?zo.Block:zo.Wrap,O_=(t,e,n,s)=>{const r=Do(n);let a=s;const f=[];for(;a;){const m=cF(e,r,a);if(!m)break;if(Le(m.getNode(!1)))return e===sn.Forwards?{positions:xh(e,f).concat([m]),breakType:zo.Br,breakAt:S.some(m)}:{positions:xh(e,f),breakType:zo.Br,breakAt:S.some(m)};if(m.isVisible()){if(t(a,m)){const g=uF(0,e,a,m);return{positions:xh(e,f),breakType:g,breakAt:S.some(m)}}f.push(m),a=m}else a=m}return{positions:xh(e,f),breakType:zo.Eol,breakAt:S.none()}},M_=(t,e,n,s)=>e(n,s).breakAt.map(r=>{const a=e(n,r).positions;return t===sn.Backwards?a.concat(r):[r].concat(a)}).getOr([]),kb=(t,e)=>It(t,(n,s)=>n.fold(()=>S.some(s),r=>pn(Ke(r.getClientRects()),Ke(s.getClientRects()),(a,f)=>{const m=Math.abs(e-a.left);return Math.abs(e-f.left)<=m?s:r}).or(n)),S.none()),B_=(t,e)=>Ke(e.getClientRects()).bind(n=>kb(t,n.left)),_u=ut(O_,F.isAbove,-1),Su=ut(O_,F.isBelow,1),fF=ut(M_,-1,_u),dF=ut(M_,1,Su),bF=ge,L_=(t,e)=>Math.abs(t.left-e),I_=(t,e)=>Math.abs(t.right-e),F_=(t,e)=>hn(t,(n,s)=>{const r=Math.min(L_(n,e),I_(n,e)),a=Math.min(L_(s,e),I_(s,e));return a===r&&(t=>Qt(t,"node"))(s)&&bF(s.node)||a<r?s:n}),CF=t=>{const e=n=>Kt(n,s=>{const r=or(s);return r.node=t,r});if(vt(t))return e(t.getClientRects());if(rt(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},$_=t=>fs(t,CF);var wu;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(wu||(wu={}));const z_=(t,e,n,s,r,a)=>{let f=0;const m=[],g=_=>{let E=$_([_]);-1===t&&(E=E.reverse());for(let k=0;k<E.length;k++){const P=E[k];if(!n(P,y)){if(m.length>0&&e(P,Rs(m))&&f++,P.line=f,r(P))return!0;m.push(P)}}},y=Rs(a.getClientRects());if(!y)return m;const x=a.getNode();return g(x),((t,e,n,s)=>{for(;s=eu(s,t,Nc,e);)if(n(s))return})(t,s,g,x),m},SF=ut(z_,wu.Up,Xs,Ao),wF=ut(z_,wu.Down,Ao,Xs),H_=t=>e=>((t,e)=>e.line>t)(t,e),Eb=t=>e=>((t,e)=>e.line===t)(t,e),ii=(t,e)=>{t.selection.setRng(e),uu(t,t.selection.getRng())},Ab=(t,e,n)=>S.some(yb(t,e,n)),V_=(t,e,n,s,r,a)=>{const f=e===sn.Forwards,m=Do(t.getBody()),g=ut(Og,f?m.next:m.prev),y=f?s:r;if(!n.collapsed){const P=c(n);if(a(P))return fr(e,t,P,e===sn.Backwards,!1)}const x=ou(e,t.getBody(),n);if(y(x))return vu(t,x.getNode(!f));const _=ks(f,g(x)),E=td(n);if(!_)return E?S.some(n):S.none();if(y(_))return fr(e,t,_.getNode(!f),f,!1);const k=g(_);return k&&y(k)&&Td(_,k)?fr(e,t,k.getNode(!f),f,!1):E?Ab(t,_.toRange(),!1):S.none()},U_=(t,e,n,s,r,a)=>{const f=ou(e,t.getBody(),n),m=Rs(f.getClientRects()),g=e===wu.Down;if(!m)return S.none();const x=(g?wF:SF)(t.getBody(),H_(1),f),_=dt(x,Eb(1)),E=m.left,k=F_(_,E);if(k&&a(k.node)){const A=Math.abs(E-k.left),R=Math.abs(E-k.right);return fr(e,t,k.node,A<R,!1)}let P;if(P=s(f)?f.getNode():r(f)?f.getNode(!0):c(n),P){const A=((t,e,n,s)=>{const r=Do(e);let a,f,m,g;const y=[];let x=0;const _=k=>Rs(k.getClientRects());1===t?(a=r.next,f=Ao,m=Xs,g=F.after(s)):(a=r.prev,f=Xs,m=Ao,g=F.before(s));const E=_(g);do{if(!g.isVisible())continue;const k=_(g);if(m(k,E))continue;y.length>0&&f(k,Rs(y))&&x++;const P=or(k);if(P.position=g,P.line=x,n(P))return y;y.push(P)}while(g=a(g));return y})(e,t.getBody(),H_(1),P);let R=F_(dt(A,Eb(1)),E);if(R||(R=Rs(dt(A,Eb(0))),R))return Ab(t,R.position.toRange(),!1)}return 0===_.length?Tb(t,g).filter(g?r:s).map(A=>yb(t,A.toRange(),!1)):S.none()},Tb=(t,e)=>{const n=t.selection.getRng(),s=e?F.fromRangeEnd(n):F.fromRangeStart(n),r=((t,e)=>Ur(D_fromDom(t),r=>I1(r.dom),r=>r.dom===e).map(r=>r.dom).getOr(e))(s.container(),t.getBody());if(e){const a=Su(r,s);return es(a.positions)}{const a=_u(r,s);return Ke(a.positions)}},W_=(t,e,n)=>Tb(t,e).filter(n).exists(s=>(t.selection.setRng(s.toRange()),!0)),vh=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},j_=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},q_=(t,e,n)=>_b(e,n).map(s=>(vh(t,s),n)),K_=(t,e,n)=>!!Zc(t)&&((t,e,n)=>{const s=t.getBody(),r=F.fromRangeStart(t.selection.getRng());return((t,e,n,s)=>{const r=ks(t,s),a=$o(e,n,r);return $o(e,n,r).bind(ut(rF,t)).orThunk(()=>((t,e,n,s,r)=>{const a=ks(t,r);return _s(t,n,a).map(ut(ks,t)).fold(()=>s.map(Ch),g=>$o(e,n,g).map(ut(nF,t,e,n,a,g)).filter(ut(sF,s))).filter(P_)})(t,e,n,a,s))})(n,ut(la,t),s,r).bind(m=>q_(t,e,m))})(t,e,n).isSome(),Y_=(t,e,n)=>!!Zc(e)&&((t,e)=>{const n=e.selection.getRng(),s=t?F.fromRangeEnd(n):F.fromRangeStart(n);return!!(t=>oe(t.selection.getSel().modify))(e)&&(t&&Rc(s)?N_(!0,e.selection,s):!(t||!Va(s))&&N_(!1,e.selection,s))})(t,e),PF=t=>{const e=Ve(null),n=ut(la,t);return t.on("NodeChange",s=>{Zc(t)&&(((t,e,n)=>{const s=Kt(yn(D_fromDom(e.getRoot()),'*[data-mce-selected="inline-boundary"]'),f=>f.dom),r=dt(s,t),a=dt(n,t);Z(_r(r,a),ut(j_,!1)),Z(_r(a,r),ut(j_,!0))})(n,t.dom,s.parents),((t,e)=>{if(t.selection.isCollapsed()&&!0!==t.composing&&e.get()){const n=F.fromRangeStart(t.selection.getRng());F.isTextPosition(n)&&!1===(t=>Rc(t)||Va(t))(n)&&(vh(t,P1(e.get(),n)),e.set(null))}})(t,e),((t,e,n,s)=>{if(e.selection.isCollapsed()){const r=dt(s,t);Z(r,a=>{const f=F.fromRangeStart(e.selection.getRng());$o(t,e.getBody(),f).bind(m=>q_(e,n,m))})}})(n,t,e,s.parents))}),e},DF=ut(Y_,!0),NF=ut(Y_,!1),_h=(t,e,n)=>{if(Zc(t)){const s=Tb(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?F.fromRangeEnd(r):F.fromRangeStart(r)});return $o(ut(la,t),t.getBody(),s).exists(r=>{const a=Ch(r);return _b(n,a).exists(f=>(vh(t,f),!0))})}return!1},G_=(t,e)=>n=>_b(e,n).map(s=>()=>vh(t,s)),X_=(t,e,n,s)=>{const r=t.getBody(),a=ut(la,t);t.undoManager.ignore(()=>{t.selection.setRng(((t,e)=>{const n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(e.container(),e.offset()),n})(n,s)),mb(t),$o(a,r,F.fromRangeStart(t.selection.getRng())).map(wb).bind(G_(t,e)).each(Cr)}),t.nodeChanged()},Rb=(t,e,n)=>{if(t.selection.isCollapsed()&&Zc(t)){const s=F.fromRangeStart(t.selection.getRng());return((t,e,n,s)=>{const r=((t,e)=>ei(e,t)||t)(t.getBody(),s.container()),a=ut(la,t),f=$o(a,r,s);return f.bind(g=>n?g.fold(st(S.some(wb(g))),S.none,st(S.some(Ch(g))),S.none):g.fold(S.none,st(S.some(Ch(g))),S.none,st(S.some(wb(g))))).map(G_(t,e)).getOrThunk(()=>{const g=Pd(n,r,s),y=g.bind(x=>$o(a,r,x));return pn(f,y,()=>ri(a,r,s).bind(x=>(t=>pn(On(t),Oo(t),(e,n)=>{const s=ks(!0,e),r=ks(!1,n);return Zs(t,s).forall(a=>a.isEqual(r))}).getOr(!0))(x)?S.some(()=>{ra(t,n,D_fromDom(x))}):S.none())).getOrThunk(()=>y.bind(()=>g.map(x=>()=>{n?X_(t,e,s,x):X_(t,e,x,s)})))})})(t,e,n,s)}return S.none()},FF=t=>1===yf(t),zF=(t,e)=>{const n=D_fromDom(t.getBody()),s=D_fromDom(t.selection.getStart()),r=dt(((t,e)=>{const n=cr(e,t);return Vt(n,Ls).fold(st(n),s=>n.slice(0,s))})(n,s),FF);return es(r).bind(a=>{const f=F.fromRangeStart(t.selection.getRng());return((t,e,n)=>pn(On(n),Oo(n),(s,r)=>{const a=ks(!0,s),f=ks(!1,r),m=ks(!1,e);return t?Zs(n,m).exists(g=>g.isEqual(f)&&e.isEqual(a)):No(n,m).exists(g=>g.isEqual(a)&&e.isEqual(f))}).getOr(!0))(e,f,a.dom)&&!(t=>Mo(t.dom)&&M0(t.dom))(a)?S.some(()=>((t,e,n,s)=>{const r=ut(gN,e),a=Kt(dt(s,r),f=>f.dom);if(0===a.length)ra(e,t,n);else{const f=((t,e)=>{const n=Vp(!1),s=I0(e,n.dom);return qn(D_fromDom(t),n),Pe(D_fromDom(t)),F(s,0)})(n.dom,a);e.selection.setRng(f.toRange())}})(e,t,a,r)):S.none()})},Pb=(t,e)=>t.selection.isCollapsed()?zF(t,e):S.none(),Db=(t,e,n)=>S.some(()=>{t._selectionOverrides.hideFakeCaret(),ra(t,e,D_fromDom(n))}),Nb=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=e?du:hu,r=ou(e?sn.Forwards:sn.Backwards,t.getBody(),t.selection.getRng());return n(r)?Db(t,e,r.getNode(!e)):S.from(ks(e,r)).filter(a=>n(a)&&Td(r,a)).map(a=>()=>Db(t,e,a.getNode(!e)))})(t,e):((t,e)=>{const n=t.selection.getNode();return Ms(n)?Db(t,e,n):S.none()})(t,e),Ob=t=>{const e=parseInt(t,10);return isNaN(e)?0:e},Q_=(t,e)=>{const n=t||(t=>"table"===Ce(t))(e)?"margin":"padding";return n+("rtl"===Os(e,"direction")?"-right":"-left")},Z_=t=>{const e=tS(t);return!t.mode.isReadOnly()&&(e.length>1||((t,e)=>fe(e,n=>{const s=Q_(Jy(t),n),r=La(n,s).map(Ob).getOr(0);return"false"!==t.dom.getContentEditable(n.dom)&&r>0}))(t,e))},J_=t=>Tc(t)||jr(t),tS=t=>dt((t=>Kt(t,D_fromDom))(t.selection.getSelectedBlocks()),e=>!J_(e)&&!(t=>cn(t).exists(J_))(e)&&(t=>za(t,e=>qs(e.dom)||ge(e.dom)).exists(e=>qs(e.dom)))(e)),eS=(t,e)=>{const{dom:n}=t,s=DE(t),r=/[a-z%]+$/i.exec(s)[0],a=parseInt(s,10),f=Jy(t);Z(tS(t),m=>{((t,e,n,s,r,a)=>{const f=Q_(n,D_fromDom(a));if("outdent"===e){const m=Math.max(0,Ob(a.style[f])-s);t.setStyle(a,f,m?m+r:"")}else{const m=Ob(a.style[f])+s+r;t.setStyle(a,f,m)}})(n,e,f,a,r,m.dom)})},nS=t=>eS(t,"outdent"),sS=t=>{if(t.selection.isCollapsed()&&Z_(t)){const e=t.dom,n=t.selection.getRng(),s=F.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&bp(D_fromDom(r),s))return S.some(()=>nS(t))}return S.none()},oS=(t,e,n)=>wr([sS,xb,Cb,(s,r)=>Rb(s,e,r),pb,Pp,vb,Nb,bb,Pb],s=>s(t,n)),XF=(t,e)=>{t.addCommand("delete",()=>{((t,e)=>{oS(t,e,!1).fold(()=>{mb(t),u_(t)},Cr)})(t,e)}),t.addCommand("forwardDelete",()=>{((t,e)=>{oS(t,e,!0).fold(()=>(t=>c_(t,"ForwardDelete"))(t),Cr)})(t,e)})},iS=t=>void 0===t.touches||1!==t.touches.length?S.none():S.some(t.touches[0]),Mb=(t,e)=>$t(t,e.nodeName),t$=(t,e)=>!!rt(e)||!!vt(e)&&!Mb(t,e)&&!Ss(e),n$=(t,e)=>{if(rt(e)){if(0===e.nodeValue.length)return!0;if(/^\s+$/.test(e.nodeValue)&&(!e.nextSibling||Mb(t,e.nextSibling)))return!0}return!1},s$=t=>{const e=t.dom,n=t.selection,s=t.schema,r=s.getBlockElements();let a=n.getStart();const f=t.getBody();let m,g,y;const x=Gn(t);if(!a||!vt(a))return;const _=f.nodeName.toLowerCase();if(!s.isValidChild(_,x.toLowerCase())||((t,e,n)=>Me(Zx(D_fromDom(n),D_fromDom(e)),s=>Mb(t,s.dom)))(r,f,a))return;const E=n.getRng(),k=E.startContainer,P=E.startOffset,A=E.endContainer,R=E.endOffset,N=ea(t);for(a=f.firstChild;a;)if(t$(r,a)){if(n$(r,a)){g=a,a=a.nextSibling,e.remove(g);continue}m||(m=e.create(x,Qi(t)),a.parentNode.insertBefore(m,a),y=!0),g=a,a=a.nextSibling,m.appendChild(g)}else m=null,a=a.nextSibling;y&&N&&(E.setStart(k,P),E.setEnd(A,R),n.setRng(E),t.nodeChanged())},aS=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),r$=(t,e,n)=>function(s){const r=arguments,a=r[r.length-2],f=a>0?e.charAt(a-1):"";if('"'===f)return s;if(">"===f){const m=e.lastIndexOf("<",a);if(-1!==m&&-1!==e.substring(m,a).indexOf('contenteditable="false"'))return s}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},lS=(t,e)=>{e.hasAttribute("data-mce-caret")&&(ja(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},c$=(t,e)=>{const n=(t=>Mi(D_fromDom(t.getBody()),"*[data-mce-caret]").map(e=>e.dom).getOrNull())(t);if(n){if("compositionstart"===e.type)return e.preventDefault(),e.stopPropagation(),void lS(t,n);Zf(n)&&(lS(t,n),t.undoManager.add())}},cS=ge,uS=(t,e,n)=>{const s=Do(t.getBody()),r=ut(Og,1===e?s.next:s.prev);if(n.collapsed){const a=t.dom.getParent(n.startContainer,"PRE");if(!a)return;if(!r(F.fromRangeStart(n))){const m=D_fromDom((t=>{const e=t.dom.create(Gn(t));return e.innerHTML='<br data-mce-bogus="1">',e})(t));1===e?go(D_fromDom(a),m):qn(D_fromDom(a),m),t.selection.select(m.dom,!0),t.selection.collapse()}}},fS=(t,e)=>((t,e)=>{const n=e?sn.Forwards:sn.Backwards,s=t.selection.getRng();return((t,e,n)=>V_(e,t,n,na,sa,cS))(n,t,s).orThunk(()=>(uS(t,n,s),S.none()))})(t,e).exists(n=>(ii(t,n),!0)),dS=(t,e)=>((t,e)=>{const n=e?1:-1,s=t.selection.getRng();return((t,e,n)=>U_(e,t,n,a=>na(a)||Xx(a),a=>sa(a)||Qx(a),cS))(n,t,s).orThunk(()=>(uS(t,n,s),S.none()))})(t,e).exists(n=>(ii(t,n),!0)),hS=(t,e)=>W_(t,e,e?sa:na),p$=t=>ke(["figcaption"],Ce(t)),_$=(t,e)=>{const n=D_fromDom(t.getBody()),s=F.fromRangeStart(t.selection.getRng()),r=Gn(t),a=Qi(t);return((t,e)=>{const n=ut(ee,e);return za(D_fromDom(t.container()),Ls,n).filter(p$)})(s,n).exists(()=>{if(((t,e,n)=>e?((t,e)=>Su(t,e).breakAt.isNone())(t.dom,n):((t,e)=>_u(t,e).breakAt.isNone())(t.dom,n))(n,e,s)){const f=((t,e,n,s)=>{const r=D_fromTag(n),a=D_fromTag("br");return jn(r,s),He(r,a),((t,e,n)=>{n?He(t,e):Tf(t,e)})(t,r,e),(t=>{const e=document.createRange();return e.setStartBefore(t.dom),e.setEndBefore(t.dom),e})(a)})(n,e,r,a);return t.selection.setRng(f),!0}return!1})},mS=(t,e)=>!!t.selection.isCollapsed()&&_$(t,e),gS={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},pS=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,zt=(t,...e)=>()=>t.apply(null,e),ku=(t,e)=>ue(((t,e)=>fs((t=>Kt(t,e=>wt(he(wt({},gS),{action:Ft}),e)))(t),n=>pS(n,e)?[n]:[]))(t,e),n=>n.action()),bS=(t,e)=>wr(((t,e)=>fs((t=>Kt(t,e=>wt(he(wt({},gS),{action:()=>S.none()}),e)))(t),n=>pS(n,e)?[n]:[]))(t,e),n=>n.action()),yS=(t,e)=>{const n=e?sn.Forwards:sn.Backwards,s=t.selection.getRng();return V_(t,n,s,du,hu,Ms).exists(r=>(ii(t,r),!0))},CS=(t,e)=>{const n=e?1:-1,s=t.selection.getRng();return U_(t,n,s,du,hu,Ms).exists(r=>(ii(t,r),!0))},xS=(t,e)=>W_(t,e,e?hu:du),vS=To_generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Eu=he(wt({},vS),{none:t=>vS.none(t)}),_S=(t,e,n)=>fs(en(t),s=>Ns(s,e)?n(s)?[s]:[]:_S(s,e,n)),SS=(t,e)=>Qo(t,"table",e),Bb=(t,e,n,s,r=Ne)=>{const a=1===s;if(!a&&n<=0)return Eu.first(t[0]);if(a&&n>=t.length-1)return Eu.last(t[t.length-1]);{const f=n+s,m=t[f];return r(m)?Eu.middle(e,m):Bb(t,e,f,s,r)}},wS=(t,e)=>SS(t,e).bind(n=>{const s=(t=>((t,e)=>_S(t,"th,td",Ne))(t))(n);return Vt(s,a=>ee(t,a)).map(a=>({index:a,all:s}))}),kS=(t,e=!1)=>Yo(t)?t.dom.isContentEditable:(t=>Qo(t,"[contenteditable]"))(t).fold(st(e),n=>"true"===B$(n)),B$=t=>t.dom.contentEditable,ES=(t,e,n,s,r)=>{const a=yn(D_fromDom(n),"td,th,caption").map(m=>m.dom),f=dt(((t,e)=>fs(e,n=>{const s=((t,e)=>({left:t.left-e,top:t.top-e,right:t.right+-2,bottom:t.bottom+-2,width:t.width+e,height:t.height+e}))(or(n.getBoundingClientRect()),-1);return[{x:s.left,y:t(s),cell:n},{x:s.right,y:t(s),cell:n}]}))(t,a),m=>e(m,r));return((t,e,n)=>It(t,(s,r)=>s.fold(()=>S.some(r),a=>{const f=Math.sqrt(Math.abs(a.x-e)+Math.abs(a.y-n)),m=Math.sqrt(Math.abs(r.x-e)+Math.abs(r.y-n));return S.some(m<f?r:a)}),S.none()))(f,s,r).map(m=>m.cell)},U$=ut(ES,t=>t.bottom,(t,e)=>t.y<e),W$=ut(ES,t=>t.top,(t,e)=>t.y>e),AS=(t,e,n)=>{const s=t(e,n);return(t=>t.breakType===zo.Wrap&&0===t.positions.length)(s)||!Le(n.getNode())&&(t=>t.breakType===zo.Br&&1===t.positions.length)(s)?!((t,e,n)=>n.breakAt.exists(s=>t(e,s).breakAt.isSome()))(t,e,s):s.breakAt.isNone()},X$=ut(AS,_u),Q$=ut(AS,Su),J$=(t,e,n,s)=>{const r=t.selection.getRng(),a=e?1:-1;return!(!mC()||!((t,e,n)=>{const s=F.fromRangeStart(e);return hl(!t,n).exists(r=>r.isEqual(s))})(e,r,n)||(fr(a,t,n,!e,!1).each(f=>{ii(t,f)}),0))},RS=(t,e,n)=>{const s=((t,e)=>{const n=e.getNode(t);return vt(n)&&"TABLE"===n.nodeName?S.some(n):S.none()})(!!e,n),r=!1===e;s.fold(()=>ii(t,n.toRange()),a=>hl(r,t.getBody()).filter(f=>f.isEqual(n)).fold(()=>ii(t,n.toRange()),f=>((t,e,n)=>{const s=Gn(e);e.undoManager.transact(()=>{const r=D_fromTag(s);jn(r,Qi(e)),He(r,D_fromTag("br")),t?go(D_fromDom(n),r):qn(D_fromDom(n),r);const a=e.dom.createRng();a.setStart(r.dom,0),a.setEnd(r.dom,0),ii(e,a)})})(e,t,a)))},s2=(t,e,n,s)=>{const r=t.selection.getRng(),a=F.fromRangeStart(r),f=t.getBody();if(!e&&X$(s,a)){const m=((t,e,n)=>((t,e)=>Ke(e.getClientRects()).bind(n=>U$(t,n.left,n.top)).bind(n=>B_((t=>Oo(t).map(e=>_u(t,e).positions.concat(e)).getOr([]))(n),e)))(e,n).orThunk(()=>Ke(n.getClientRects()).bind(s=>kb(fF(t,F.before(e)),s.left))).getOr(F.before(e)))(f,n,a);return RS(t,e,m),!0}if(e&&Q$(s,a)){const m=((t,e,n)=>((t,e)=>es(e.getClientRects()).bind(n=>W$(t,n.left,n.top)).bind(n=>B_((t=>On(t).map(e=>[e].concat(Su(t,e).positions)).getOr([]))(n),e)))(e,n).orThunk(()=>Ke(n.getClientRects()).bind(s=>kb(dF(t,F.after(e)),s.left))).getOr(F.after(e)))(f,n,a);return RS(t,e,m),!0}return!1},PS=(t,e,n)=>S.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(s=>S.from(t.dom.getParent(s,"table")).map(r=>n(t,e,r,s))).getOr(!1),DS=(t,e)=>PS(t,e,J$),NS=(t,e)=>PS(t,e,s2),OS=(t,e,n)=>n.fold(S.none,S.none,(s,r)=>(t=>((t,e)=>{const n=s=>{for(let r=0;r<s.childNodes.length;r++){const a=D_fromDom(s.childNodes[r]);if(e(a))return S.some(a);const f=n(s.childNodes[r]);if(f.isSome())return f}return S.none()};return n(t.dom)})(t,Lx))(r).map(a=>(t=>{const e=yl.exact(t,0,t,0);return ST(e)})(a)),s=>(t.execCommand("mceTableInsertRowAfter"),MS(t,e,s))),MS=(t,e,n)=>OS(t,e,((t,e,n)=>wS(t,void 0).fold(()=>Eu.none(t),r=>Bb(r.all,t,r.index,1,e)))(n,kS)),r2=(t,e,n)=>OS(t,e,((t,e,n)=>wS(t,void 0).fold(()=>Eu.none(),r=>Bb(r.all,t,r.index,-1,e)))(n,kS)),BS=(t,e)=>{const n=["table","li","dl"],s=D_fromDom(t.getBody()),r=m=>{const g=Ce(m);return ee(m,s)||ke(n,g)},a=t.selection.getRng();return((t,e)=>((t,e,n=xe)=>n(e)?S.none():ke(t,Ce(e))?S.some(e):Oi(e,t.join(","),r=>Ns(r,"table")||n(r)))(["td","th"],t,e))(D_fromDom(e?a.endContainer:a.startContainer),r).map(m=>(SS(m,r).each(x=>{t.model.table.clearSelectedCells(x.dom)}),t.selection.collapse(!e),(e?MS:r2)(t,r,m).each(x=>{t.selection.setRng(x)}),!0)).getOr(!1)},eo=(t,e)=>({container:t,offset:e}),Sh=se.DOM,wh=t=>e=>t===e?-1:0,Lb=(t,e,n)=>{if(rt(t)&&e>=0)return S.some(eo(t,e));{const s=Eo(Sh);return S.from(s.backwards(t,e,wh(t),n)).map(r=>eo(r.container,r.container.data.length))}},Ib=(t,e,n)=>{if(!rt(t))return S.none();if(e>=0&&e<=t.textContent.length)return S.some(eo(t,e));{const r=Eo(Sh);return S.from(r.backwards(t,e,wh(t),n)).bind(a=>Ib(a.container,e+a.container.data.length,n))}},LS=(t,e,n)=>{if(!rt(t))return S.none();const s=t.textContent;if(e<=s.length)return S.some(eo(t,e));{const r=Eo(Sh);return S.from(r.forwards(t,e,wh(t),n)).bind(a=>LS(a.container,e-s.length,n))}},Fb=(t,e,n,s,r)=>{const a=Eo(t,(t=>e=>t.isBlock(e)||ke(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e))(t));return S.from(a.backwards(e,n,s,r))},IS=t=>t.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,""),FS=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),$b=(t,e)=>t.substring(e.length),$S=(t,e,n,s=0)=>(t=>Qo(t,Ix))(D_fromDom(e.startContainer)).fold(()=>((t,e,n,s=0)=>{if(!(t=>t.collapsed&&3===t.startContainer.nodeType)(e))return S.none();const a=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return Fb(t,e.startContainer,e.startOffset,(f,m,g)=>((t,e,n)=>{let s;for(s=e-1;s>=0;s--){const r=t.charAt(s);if(FS(r))return S.none();if(r===n)break}return S.some(s)})(g,m,n).getOr(m),a).bind(f=>{const m=e.cloneRange();if(m.setStart(f.container,f.offset),m.setEnd(e.endContainer,e.endOffset),m.collapsed)return S.none();const g=IS(m);return 0!==g.lastIndexOf(n)||$b(g,n).length<s?S.none():S.some({text:$b(g,n),range:m,triggerChar:n})})})(t,e,n,s),r=>{const a=t.createRng();a.selectNode(r.dom);const f=IS(a);return S.some({range:a,text:$b(f,n),triggerChar:n})}),zS=t=>{if((t=>3===t.nodeType)(t))return eo(t,t.data.length);{const e=t.childNodes;return e.length>0?zS(e[e.length-1]):eo(t,e.length)}},HS=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?HS(n[e],0):n.length>0&&(t=>1===t.nodeType)(t)&&n.length===e?zS(n[n.length-1]):eo(t,e)},VS=(t,e,n,s={})=>{const r=e(),f=t.selection.getRng().startContainer.nodeValue,m=dt(r.lookupByChar(n.triggerChar),y=>n.text.length>=y.minChars&&y.matches.getOrThunk(()=>(t=>e=>{const n=HS(e.startContainer,e.startOffset);return!((t,e)=>Fb(t,e.container,e.offset,(n,s)=>0===s?-1:s,t.getRoot()).filter(n=>{const s=n.container.data.charAt(n.offset-1);return!FS(s)}).isSome())(t,n)})(t.dom))(n.range,f,n.text));if(0===m.length)return S.none();const g=Promise.all(Kt(m,y=>y.fetch(n.text,y.maxResults,s).then(_=>({matchText:n.text,items:_,columns:y.columns,onAction:y.onAction,highlightOn:y.highlightOn}))));return S.some({lookupData:g,context:n})};var no;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(no||(no={}));const zb=(t,e,n)=>t.stype===no.Error?e(t.serror):n(t.svalue),rn_svalue=t=>({stype:no.Value,svalue:t}),rn_serror=t=>({stype:no.Error,serror:t}),rn_fold=zb,Hb=t=>tn(t)&&ds(t).length>100?" removed due to size":JSON.stringify(t,null,2),kh=(t,e)=>rn_serror([{path:t,getErrorInfo:e}]),P2=(t,e)=>({extract:(r,a)=>ce(a,t).fold(()=>((t,e)=>kh(t,()=>'Choice schema did not contain choice key: "'+e+'"'))(r,t),m=>((t,e,n,s)=>ce(n,s).fold(()=>((t,e,n)=>kh(t,()=>'The chosen schema: "'+n+'" did not exist in branches: '+Hb(e)))(t,n,s),a=>a.extract(t.concat(["branch: "+s]),e)))(r,a,e,m)),toString:()=>"chooseOn("+t+"). Possible values: "+ds(e)}),jS=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<e.length;s++){const r=e[s];for(const a in r)$t(r,a)&&(n[a]=t(n[a],r[a]))}return n},Eh=jS((t,e)=>pr(t)&&pr(e)?Eh(t,e):e),KS=(jS((t,e)=>e),t=>(t=>({tag:"defaultedThunk",process:t}))(st(t))),I2_consolidateArr=t=>{const e=(t=>{const e=[],n=[];return Z(t,s=>{zb(s,r=>n.push(r),r=>e.push(r))}),{values:e,errors:n}})(t);return e.errors.length>0?(t=>zs(rn_serror,Il)(t))(e.errors):rn_svalue(e.values)},GS=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},Vb=t=>({extract:(s,r)=>((t,e)=>t.stype===no.Error?e(t.serror):t)(t(r),a=>((t,e)=>kh(t,st(e)))(s,a)),toString:st("val")}),z2=Vb(rn_svalue),XS=(t,e,n,s)=>s(ce(t,e).getOrThunk(()=>n(t))),W2=(t,e,n,s,r)=>{const a=m=>r.extract(e.concat([s]),m),f=m=>m.fold(()=>rn_svalue(S.none()),g=>((t,e)=>t.stype===no.Value?{stype:no.Value,svalue:e(t.svalue)}:t)(r.extract(e.concat([s]),g),S.some));switch(t.tag){case"required":return((t,e,n,s)=>ce(e,n).fold(()=>((t,e,n)=>kh(t,()=>'Could not find valid *required* value for "'+e+'" in '+Hb(n)))(t,n,e),s))(e,n,s,a);case"defaultedThunk":return XS(n,s,t.process,a);case"option":return((t,e,n)=>n(ce(t,e)))(n,s,f);case"defaultedOptionThunk":return((t,e,n,s)=>s(ce(t,e).map(a=>!0===a?n(t):a)))(n,s,t.process,f);case"mergeWithThunk":return XS(n,s,st({}),m=>{const g=Eh(t.process(n),m);return a(g)})}},Ub=t=>({extract:(s,r)=>((t,e,n)=>{const s={},r=[];for(const a of n)GS(a,(f,m,g,y)=>{const x=W2(g,t,e,f,y);rn_fold(x,_=>{r.push(..._)},_=>{s[m]=_})},(f,m)=>{s[f]=m(e)});return r.length>0?rn_serror(r):rn_svalue(s)})(s,r,t),toString:()=>"obj{\n"+Kt(t,r=>GS(r,(a,f,m,g)=>a+" -> "+g.toString(),(a,f)=>"state("+a+")")).join("\n")+"}"}),QS=t=>({extract:(s,r)=>{const a=Kt(r,(f,m)=>t.extract(s.concat(["["+m+"]"]),f));return I2_consolidateArr(a)},toString:()=>"array("+t.toString()+")"}),Y2=(t,e,n)=>(t=>zb(t,Nn.error,Nn.value))(((t,e,n)=>((t,e)=>t.stype===no.Error?{stype:no.Error,serror:e(t.serror)}:t)(e.extract([t],n),r=>({input:n,errors:r})))(t,e,n)),ZS=(t,e)=>P2(t,uo(e,Ub)),X2=st(z2),Ah=(t,e)=>Vb(n=>{const s=typeof n;return t(n)?rn_svalue(n):rn_serror(`Expected type: ${e} but got: ${s}`)}),Q2=Ah(Ts,"number"),Th=Ah(At,"string"),Z2=Ah(fi,"boolean"),Wb=Ah(oe,"function"),Au=(t,e,n,s)=>({tag:"field",key:t,newKey:e,presence:n,prop:s}),JS=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),tw=(t,e)=>Au(t,t,{tag:"required",process:{}},e),ew=t=>tw(t,Th),nw=t=>tw(t,Wb),jb=(t,e)=>Au(t,t,{tag:"option",process:{}},e),Rh=t=>jb(t,Th),Al=(t,e,n)=>Au(t,t,KS(e),n),sw=(t,e)=>Al(t,e,Q2),ow=(t,e,n)=>Al(t,e,(t=>(t=>Vb(e=>t(e).fold(rn_serror,rn_svalue)))(e=>ke(t,e)?Nn.value(e):Nn.error(`Unsupported value: "${e}", choose one of "${t.join(", ")}".`)))(n)),qb=(t,e)=>Al(t,e,Z2),Kb=(t,e)=>Al(t,e,Wb),rz=ew("type"),iz=nw("fetch"),Yb=nw("onAction"),az=Kb("onSetup",()=>Ft),lz=Rh("text"),cz=Rh("icon"),uz=Rh("tooltip"),fz=Rh("label"),dz=qb("active",!1),hz=qb("enabled",!0),rw=qb("primary",!1),Tu=t=>((t,e)=>Al("type",e,Th))(0,t),gz=Ub([rz,ew("ch"),sw("minChars",1),((t,e)=>Au(t,t,KS(1),X2()))("columns"),sw("maxResults",10),jb("matches",Wb),iz,Yb,(n=Th,Al("highlightOn",[],QS(n)))]),Gb=[hz,uz,cz,lz,az],iw=[dz].concat(Gb),bz=[Kb("predicate",xe),ow("scope","node",["node","editor"]),ow("position","selection",["node","selection","line"])],yz=Gb.concat([Tu("contextformbutton"),rw,Yb,JS("original",fn)]),Cz=iw.concat([Tu("contextformbutton"),rw,Yb,JS("original",fn)]),xz=Gb.concat([Tu("contextformbutton")]),vz=iw.concat([Tu("contextformtogglebutton")]),_z=ZS("type",{contextformbutton:yz,contextformtogglebutton:Cz});var n;Ub([Tu("contextform"),Kb("initValue",st("")),fz,((t,e)=>Au(t,t,{tag:"required",process:{}},QS(e)))("commands",_z),jb("launch",ZS("type",{contextformbutton:xz,contextformtogglebutton:vz}))].concat(bz));const Sz=t=>{const e=t.ui.registry.getAll().popups,n=uo(e,f=>(t=>Y2("Autocompleter",gz,t))(f).fold(m=>{throw new Error((t=>"Errors: \n"+(t=>{const e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:st("... (only showing first ten failures)")}]):t;return Kt(e,n=>"Failed path: ("+n.path.join(" > ")+")\n"+n.getErrorInfo())})(t.errors).join("\n")+"\n\nInput object: "+Hb(t.input))(m))},fn)),s=be(di(n,f=>f.ch)),r=kr(n);return{dataset:n,triggerChars:s,lookupByChar:f=>dt(r,m=>m.ch===f)}},kz=t=>{const e=ko(),n=Ve(!1),s=e.isSet,r=()=>{s()&&((t=>{Ie(t).autocompleter.removeDecoration()})(t),(t=>{t.dispatch("AutocompleterEnd")})(t),n.set(!1),e.clear())},f=fo(()=>Sz(t)),g=y=>{(y=>e.get().map(x=>$S(t.dom,t.selection.getRng(),x.triggerChar).bind(_=>VS(t,f,_,y))).getOrThunk(()=>((t,e)=>{const n=e(),s=t.selection.getRng();return((t,e,n)=>wr(n.triggerChars,s=>$S(t,e,s)))(t.dom,s,n).bind(r=>VS(t,e,r))})(t,f)))(y).fold(r,x=>{(y=>{s()||(((t,e)=>{Ie(t).autocompleter.addDecoration(e)})(t,y.range),e.set({triggerChar:y.triggerChar,matchLength:y.text.length}))})(x.context),x.lookupData.then(_=>{e.get().map(E=>{const k=x.context;E.triggerChar===k.triggerChar&&(k.text.length-E.matchLength>=10?r():(e.set(he(wt({},E),{matchLength:k.text.length})),n.get()?((t,e)=>{t.dispatch("AutocompleterUpdate",e)})(t,{lookupData:_}):(n.set(!0),((t,e)=>{t.dispatch("AutocompleterStart",e)})(t,{lookupData:_}))))})})})};t.addCommand("mceAutocompleterReload",(y,x)=>{const _=tn(x)?x.fetchOptions:{};g(_)}),t.addCommand("mceAutocompleterClose",r),((t,e)=>{const n=Qr(e.load,50);t.on("keypress compositionend",s=>{27!==s.which&&n.throttle()}),t.on("keydown",s=>{const r=s.which;8===r?n.throttle():27===r&&e.cancelIfNecessary()}),t.on("remove",n.cancel)})(t,{cancelIfNecessary:r,load:g})},aw=t=>(e,n,s={})=>{const r=e.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:Ft,inputType:n},f=nl(new InputEvent(t));return e.dispatch(t,wt(wt(wt({},f),a),s))},Ph=aw("input"),Dh=aw("beforeinput"),Ru=(t,e)=>{let n,s=e;const r=t.dom,a=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const m=(t=>{for(;t;){if(1===t.nodeType||3===t.nodeType&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}})(e.firstChild);m&&/^(UL|OL|DL)$/.test(m.nodeName)&&e.insertBefore(r.doc.createTextNode(Ge),e.firstChild)}const f=r.createRng();if(e.normalize(),e.hasChildNodes()){const m=new We(e,e);for(;n=m.current();){if(rt(n)){f.setStart(n,0),f.setEnd(n,0);break}if(a[n.nodeName.toLowerCase()]){f.setStartBefore(n),f.setEndBefore(n);break}s=n,n=m.next()}n||(f.setStart(s,0),f.setEnd(s,0))}else Le(e)?e.nextSibling&&r.isBlock(e.nextSibling)?(f.setStartBefore(e),f.setEndBefore(e)):(f.setStartAfter(e),f.setEndAfter(e)):(f.setStart(e,0),f.setEnd(e,0));t.selection.setRng(f),uu(t,f)},Xb=t=>S.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),lw=(t,e)=>t&&t.parentNode&&t.parentNode.nodeName===e,cw=t=>t&&/^(OL|UL|LI)$/.test(t.nodeName),Nh=t=>{const e=t.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:t},Oh=(t,e,n)=>{let s=t[n?"firstChild":"lastChild"];for(;s&&!vt(s);)s=s[n?"nextSibling":"previousSibling"];return s===e},Fz=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),Qb=t=>{t.innerHTML='<br data-mce-bogus="1">'},Zb=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,uw=(t,e)=>e&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==t.getContentEditable(e),Jb=(t,e,n)=>!1===rt(e)?n:t?1===n&&e.data.charAt(n-1)===Zt?0:n:n===e.data.length-1&&e.data.charAt(n)===Zt?e.data.length:n,fw=(t,e)=>{const n=t.getRoot();let s,r;for(s=e;s!==n&&"false"!==t.getContentEditable(s);)"true"===t.getContentEditable(s)&&(r=s),s=s.parentNode;return s!==n?r:n},Pu=(t,e)=>{Gn(t).toLowerCase()===e.tagName.toLowerCase()&&((t,e,n)=>{const s=t.dom;S.from(n.style).map(s.parseStyle).each(g=>{const y=Ef(D_fromDom(e)),x=wt(wt({},y),g);s.setStyles(e,x)});const r=S.from(n.class).map(g=>g.split(/\s+/)),a=S.from(e.className).map(g=>dt(g.split(/\s+/),y=>""!==y));pn(r,a,(g,y)=>{const x=dt(y,E=>!ke(g,E)),_=[...g,...x];s.setAttrib(e,"class",_.join(" "))});const f=["style","class"],m=ms(n,(g,y)=>!ke(f,y));s.setAttribs(e,m)})(t,e,Qi(t))},qz=(t,e)=>{let n,s,r,a,f,m,g,y,x;const _=t.dom,E=t.schema,k=E.getNonEmptyElements(),P=t.selection.getRng(),A=Gn(t),R=Y=>{let J,et,St,X=s;const ht=E.getTextInlineElements();if(J=Y||"TABLE"===y||"HR"===y?_.create(Y||A):a.cloneNode(!1),St=J,!1===vE(t))_.setAttrib(J,"style",null),_.setAttrib(J,"class",null);else do{if(ht[X.nodeName]){if(Mo(X)||Ss(X))continue;et=X.cloneNode(!1),_.setAttrib(et,"id",""),J.hasChildNodes()?(et.appendChild(J.firstChild),J.appendChild(et)):(St=et,J.appendChild(et))}}while((X=X.parentNode)&&X!==V);return Pu(t,J),Qb(St),J},N=Y=>{let X,J;const et=Jb(Y,s,r);if(rt(s)&&(Y?et>0:et<s.nodeValue.length))return!1;if(s.parentNode===a&&x&&!Y||Y&&vt(s)&&s===a.firstChild)return!0;if(Zb(s,"TABLE")||Zb(s,"HR"))return x&&!Y||!x&&Y;const St=new We(s,a);for(rt(s)&&(Y&&0===et?St.prev():!Y&&et===s.nodeValue.length&&St.next());X=St.current();){if(vt(X)){if(!X.getAttribute("data-mce-bogus")&&(J=X.nodeName.toLowerCase(),k[J]&&"br"!==J))return!1}else if(rt(X)&&!er(X.nodeValue))return!1;Y?St.prev():St.next()}return!0},L=()=>{f=/^(H[1-6]|PRE|FIGURE)$/.test(y)&&"HGROUP"!==ot?R(A):R(),_E(t)&&uw(_,g)&&_.isEmpty(a)?f=_.split(g,a):_.insertAfter(f,a),Ru(t,f)};zd(_,P).each(Y=>{P.setStart(Y.startContainer,Y.startOffset),P.setEnd(Y.endContainer,Y.endOffset)}),s=P.startContainer,r=P.startOffset;const q=!(!e||!e.shiftKey),H=!(!e||!e.ctrlKey);vt(s)&&s.hasChildNodes()&&(x=r>s.childNodes.length-1,s=s.childNodes[Math.min(r,s.childNodes.length-1)]||s,r=x&&rt(s)?s.nodeValue.length:0);const V=fw(_,s);if(!V)return;q||(s=((t,e,n,s,r)=>{let a,f,m,g,y,x;const _=t.dom,E=fw(_,s);if(f=_.getParent(s,_.isBlock),!f||!uw(_,f)){if(f=f||E,x=f===t.getBody()||(t=>t&&/^(TD|TH|CAPTION)$/.test(t.nodeName))(f)?f.nodeName.toLowerCase():f.parentNode.nodeName.toLowerCase(),!f.hasChildNodes())return a=_.create(e),Pu(t,a),f.appendChild(a),n.setStart(a,0),n.setEnd(a,0),a;for(g=s;g.parentNode!==f;)g=g.parentNode;for(;g&&!_.isBlock(g);)m=g,g=g.previousSibling;if(m&&t.schema.isValidChild(x,e.toLowerCase())){for(a=_.create(e),Pu(t,a),m.parentNode.insertBefore(a,m),g=m;g&&!_.isBlock(g);)y=g.nextSibling,a.appendChild(g),g=y;n.setStart(s,r),n.setEnd(s,r)}}return s})(t,A,P,s,r)),a=_.getParent(s,_.isBlock),g=a?_.getParent(a.parentNode,_.isBlock):null,y=a?a.nodeName.toUpperCase():"";const ot=g?g.nodeName.toUpperCase():"";"LI"===ot&&!H&&(a=g,g=g.parentNode,y=ot),/^(LI|DT|DD)$/.test(y)&&_.isEmpty(a)?((t,e,n,s,r)=>{const a=t.dom,f=t.selection.getRng();if(n===t.getBody())return;(t=>cw(t)&&cw(t.parentNode))(n)&&(r="LI");let m=e(r);if(Oh(n,s,!0)&&Oh(n,s,!1))if(lw(n,"LI")){const g=Nh(n);a.insertAfter(m,g),(t=>{var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.firstChild)===t})(n)?a.remove(g):a.remove(n)}else a.replace(m,n);else if(Oh(n,s,!0))lw(n,"LI")?(a.insertAfter(m,Nh(n)),m.appendChild(a.doc.createTextNode(" ")),m.appendChild(n)):n.parentNode.insertBefore(m,n),a.remove(s);else if(Oh(n,s,!1))a.insertAfter(m,Nh(n)),a.remove(s);else{n=Nh(n);const g=f.cloneRange();g.setStartAfter(s),g.setEndAfter(n);const y=g.extractContents();"LI"===r&&((t,e)=>t.firstChild&&"LI"===t.firstChild.nodeName)(y)?(m=y.firstChild,a.insertAfter(y,n)):(a.insertAfter(y,n),a.insertAfter(m,n)),a.remove(s)}Ru(t,m)})(t,R,g,a,A):a!==t.getBody()&&(Jo(a)?(f=ja(a),_.isEmpty(a)&&Qb(a),Pu(t,f),Ru(t,f)):N()?L():N(!0)?(f=a.parentNode.insertBefore(R(),a),Ru(t,Zb(a,"HR")?f:a)):(n=(t=>{const e=t.cloneRange();return e.setStart(t.startContainer,Jb(!0,t.startContainer,t.startOffset)),e.setEnd(t.endContainer,Jb(!1,t.endContainer,t.endOffset)),e})(P).cloneRange(),n.setEndAfter(a),m=n.extractContents(),(t=>{Z(ll(D_fromDom(t),Wn),e=>{const n=e.dom;n.nodeValue=Sn(n.nodeValue)})})(m),(t=>{do{rt(t)&&(t.nodeValue=t.nodeValue.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)})(m),f=m.firstChild,_.insertAfter(m,a),((t,e,n)=>{let s=n;const r=[];let a;if(s){for(;s=s.firstChild;){if(t.isBlock(s))return;vt(s)&&!e[s.nodeName.toLowerCase()]&&r.push(s)}for(a=r.length;a--;)s=r[a],(!s.hasChildNodes()||s.firstChild===s.lastChild&&""===s.firstChild.nodeValue||Fz(t,s))&&t.remove(s)}})(_,k,f),((t,e)=>{e.normalize();const n=e.lastChild;(!n||/^(left|right)$/gi.test(t.getStyle(n,"float",!0)))&&t.add(e,"br")})(_,a),_.isEmpty(a)&&Qb(a),f.normalize(),_.isEmpty(f)?(_.remove(f),L()):(Pu(t,f),Ru(t,f))),_.setAttrib(f,"id",""),t.dispatch("NewBlock",{newBlock:f}))},dw=(t,e,n)=>{const s=t.dom.createRng();n?(s.setStartBefore(e),s.setEndBefore(e)):(s.setStartAfter(e),s.setEndAfter(e)),t.selection.setRng(s),uu(t,s)},Gz=(t,e)=>{const n=D_fromTag("br");qn(D_fromDom(e),n),t.undoManager.add()},Xz=(t,e)=>{Zz(t.getBody(),e)||go(D_fromDom(e),D_fromTag("br"));const n=D_fromTag("br");go(D_fromDom(e),n),dw(t,n.dom,!1),t.undoManager.add()},Zz=(t,e)=>!!(t=>Le(t.getNode()))(F.after(e))||Zs(t,F.after(e)).map(n=>Le(n.getNode())).getOr(!1),hw=t=>t&&"A"===t.nodeName&&"href"in t,Jz=t=>t.fold(xe,hw,hw,xe),eH=(t,e)=>{e.fold(Ft,ut(Gz,t),ut(Xz,t),Ft)},mw=(t,e)=>{const n=(t=>{const e=ut(la,t),n=F.fromRangeStart(t.selection.getRng());return $o(e,t.getBody(),n).filter(Jz)})(t);n.isSome()?n.each(ut(eH,t)):((t,e)=>{const s=t.dom,r=t.selection.getRng();let a,f;zd(s,r).each(k=>{r.setStart(k.startContainer,k.startOffset),r.setEnd(k.endContainer,k.endOffset)});let m=r.startOffset,g=r.startContainer;if(1===g.nodeType&&g.hasChildNodes()){const k=m>g.childNodes.length-1;g=g.childNodes[Math.min(m,g.childNodes.length-1)]||g,m=k&&3===g.nodeType?g.nodeValue.length:0}let y=s.getParent(g,s.isBlock);const x=y?s.getParent(y.parentNode,s.isBlock):null;"LI"===(x?x.nodeName.toUpperCase():"")&&!(e&&e.ctrlKey)&&(y=x),g&&3===g.nodeType&&m>=g.nodeValue.length&&(((t,e,n)=>{const s=new We(e,n);let r;const a=t.getNonEmptyElements();for(;r=s.next();)if(a[r.nodeName.toLowerCase()]||r.length>0)return!0})(t.schema,g,y)||(a=s.create("br"),r.insertNode(a),r.setStartAfter(a),r.setEndAfter(a),f=!0)),a=s.create("br"),Qs(s,r,a),dw(t,a,f),t.undoManager.add()})(t,e)},gw=(t,e)=>Xb(t).filter(n=>e.length>0&&Ns(D_fromDom(n),e)).isSome(),$s=To_generate([{br:[]},{block:[]},{none:[]}]),oH=(t,e)=>(t=>gw(t,xE(t)))(t),pw=t=>(e,n)=>(t=>Xb(t).filter(e=>jr(D_fromDom(e))).isSome())(e)===t,bw=(t,e)=>(n,s)=>(t=>Xb(t).fold(st(""),e=>e.nodeName.toUpperCase()))(n)===t.toUpperCase()===e,Mh=t=>bw("pre",t),Bh=t=>(e,n)=>yE(e)===t,iH=(t,e)=>(t=>gw(t,CE(t)))(t),Lh=(t,e)=>e,aH=t=>{const e=Gn(t),n=((t,e)=>{const n=t.getRoot();let s,r;for(s=e;s!==n&&"false"!==t.getContentEditable(s);)"true"===t.getContentEditable(s)&&(r=s),s=s.parentNode;return s!==n?r:n})(t.dom,t.selection.getStart());return n&&t.schema.isValidChild(n.nodeName,e)},so=(t,e)=>(n,s)=>It(t,(a,f)=>a&&f(n,s),!0)?S.some(e):S.none(),ty=(t,e)=>{((t,e)=>A_([so([oH],$s.none()),so([bw("summary",!0)],$s.br()),so([Mh(!0),Bh(!1),Lh],$s.br()),so([Mh(!0),Bh(!1)],$s.block()),so([Mh(!0),Bh(!0),Lh],$s.block()),so([Mh(!0),Bh(!0)],$s.br()),so([pw(!0),Lh],$s.br()),so([pw(!0)],$s.block()),so([iH],$s.br()),so([Lh],$s.br()),so([aH],$s.block())],[t,!(!e||!e.shiftKey)]).getOr($s.none()))(t,e).fold(()=>{Mt(e)&&Dh(t,"insertLineBreak").isDefaultPrevented()||(mw(t,e),Mt(e)&&Ph(t,"insertLineBreak"))},()=>{Mt(e)&&Dh(t,"insertParagraph").isDefaultPrevented()||(qz(t,e),Mt(e)&&Ph(t,"insertParagraph"))},Ft)},mH=ss(),yw=t=>t.stopImmediatePropagation(),Cw=t=>t.keyCode===yt.PAGE_UP||t.keyCode===yt.PAGE_DOWN,xw=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",yw,!0):!n&&t.get()&&e.off("NodeChange",yw),t.set(n)},vw=(t,e)=>{const n=e.container(),s=e.offset();return rt(n)?(n.insertData(s,t),S.some(F(n,s+t.length))):Ad(e).map(r=>{const a=D_fromText(t);return e.isAtEnd()?go(r,a):qn(r,a),F(a.dom,t.length)})},bH=ut(vw,Ge),yH=ut(vw," "),xH=(t,e)=>n=>((t,e)=>!xp(e)&&(((t,e)=>((t,e)=>No(t.dom,e).isNone())(t,e)||((t,e)=>Zs(t.dom,e).isNone())(t,e)||bp(t,e)||n0(t,e)||Cp(t,e)||yp(t,e))(t,e)||r0(t,e)||i0(t,e)))(t,n)?bH(e):yH(e),_H=t=>{const e=F.fromRangeStart(t.selection.getRng()),n=D_fromDom(t.getBody());if(t.selection.isCollapsed()){const s=ut(la,t),r=F.fromRangeStart(t.selection.getRng());return $o(s,t.getBody(),r).bind((t=>e=>e.fold(n=>No(t.dom,F.before(n)),n=>On(n),n=>Oo(n),n=>Zs(t.dom,F.after(n))))(n)).map(a=>()=>xH(n,e)(a).each((t=>e=>(t.selection.setRng(e.toRange()),t.nodeChanged(),!0))(t)))}return S.none()},kH=t=>w1(t)?[{keyCode:yt.TAB,action:zt(BS,t,!0)},{keyCode:yt.TAB,shiftKey:!0,action:zt(BS,t,!1)}]:[],TH=t=>{if(t.addShortcut("Meta+P","","mcePrint"),kz(t),ur(t))return Ve(null);{const e=PF(t);return(t=>{t.on("keyup compositionstart",ut(c$,t))})(t),((t,e)=>{t.on("keydown",n=>{!1===n.isDefaultPrevented()&&((t,e,n)=>{const s=ss().os;ku([{keyCode:yt.RIGHT,action:zt(fS,t,!0)},{keyCode:yt.LEFT,action:zt(fS,t,!1)},{keyCode:yt.UP,action:zt(dS,t,!1)},{keyCode:yt.DOWN,action:zt(dS,t,!0)},{keyCode:yt.RIGHT,action:zt(DS,t,!0)},{keyCode:yt.LEFT,action:zt(DS,t,!1)},{keyCode:yt.UP,action:zt(NS,t,!1)},{keyCode:yt.DOWN,action:zt(NS,t,!0)},{keyCode:yt.RIGHT,action:zt(yS,t,!0)},{keyCode:yt.LEFT,action:zt(yS,t,!1)},{keyCode:yt.UP,action:zt(CS,t,!1)},{keyCode:yt.DOWN,action:zt(CS,t,!0)},{keyCode:yt.RIGHT,action:zt(K_,t,e,!0)},{keyCode:yt.LEFT,action:zt(K_,t,e,!1)},{keyCode:yt.RIGHT,ctrlKey:!s.isMacOS(),altKey:s.isMacOS(),action:zt(DF,t,e)},{keyCode:yt.LEFT,ctrlKey:!s.isMacOS(),altKey:s.isMacOS(),action:zt(NF,t,e)},{keyCode:yt.UP,action:zt(mS,t,!1)},{keyCode:yt.DOWN,action:zt(mS,t,!0)}],n).each(r=>{n.preventDefault()})})(t,e,n)})})(t,e),((t,e)=>{t.on("keydown",n=>{!1===n.isDefaultPrevented()&&((t,e,n)=>{const s=n.keyCode===yt.BACKSPACE?"deleteContentBackward":"deleteContentForward";bS([{keyCode:yt.BACKSPACE,action:zt(sS,t)},{keyCode:yt.BACKSPACE,action:zt(xb,t,!1)},{keyCode:yt.DELETE,action:zt(xb,t,!0)},{keyCode:yt.BACKSPACE,action:zt(Cb,t,!1)},{keyCode:yt.DELETE,action:zt(Cb,t,!0)},{keyCode:yt.BACKSPACE,action:zt(Rb,t,e,!1)},{keyCode:yt.DELETE,action:zt(Rb,t,e,!0)},{keyCode:yt.BACKSPACE,action:zt(Pp,t,!1)},{keyCode:yt.DELETE,action:zt(Pp,t,!0)},{keyCode:yt.BACKSPACE,action:zt(vb,t,!1)},{keyCode:yt.DELETE,action:zt(vb,t,!0)},{keyCode:yt.BACKSPACE,action:zt(Nb,t,!1)},{keyCode:yt.DELETE,action:zt(Nb,t,!0)},{keyCode:yt.BACKSPACE,action:zt(bb,t,!1)},{keyCode:yt.DELETE,action:zt(bb,t,!0)},{keyCode:yt.BACKSPACE,action:zt(pb,t,!1)},{keyCode:yt.DELETE,action:zt(pb,t,!0)},{keyCode:yt.BACKSPACE,action:zt(Pb,t,!1)},{keyCode:yt.DELETE,action:zt(Pb,t,!0)}],n).each(r=>{n.preventDefault(),Dh(t,s).isDefaultPrevented()||(r(),Ph(t,s))})})(t,e,n)}),t.on("keyup",n=>{!1===n.isDefaultPrevented()&&((t,e)=>{ku([{keyCode:yt.BACKSPACE,action:zt(v_,t)},{keyCode:yt.DELETE,action:zt(v_,t)}],e)})(t,n)})})(t,e),(t=>{t.on("keydown",e=>{e.keyCode===yt.ENTER&&((t,e)=>{e.isDefaultPrevented()||(e.preventDefault(),(t=>{t.typing&&(t.typing=!1,t.add())})(t.undoManager),t.undoManager.transact(()=>{!1===t.selection.isCollapsed()&&mb(t),ty(t,e)}))})(t,e)})})(t),(t=>{t.on("keydown",e=>{!1===e.isDefaultPrevented()&&((t,e)=>{bS([{keyCode:yt.SPACEBAR,action:zt(_H,t)}],e).each(n=>{e.preventDefault(),Dh(t,"insertText",{data:" "}).isDefaultPrevented()||(n(),Ph(t,"insertText",{data:" "}))})})(t,e)})})(t),(t=>{t.on("input",e=>{!1===e.isComposing&&(t=>{const e=D_fromDom(t.getBody());t.selection.isCollapsed()&&_P(e,F.fromRangeStart(t.selection.getRng())).each(n=>{t.selection.setRng(n.toRange())})})(t)})})(t),(t=>{t.on("keydown",e=>{!1===e.isDefaultPrevented()&&((t,e)=>{ku([...kH(t)],e).each(n=>{e.preventDefault()})})(t,e)})})(t),((t,e)=>{t.on("keydown",n=>{!1===n.isDefaultPrevented()&&((t,e,n)=>{ku([{keyCode:yt.END,action:zt(hS,t,!0)},{keyCode:yt.HOME,action:zt(hS,t,!1)},{keyCode:yt.END,action:zt(xS,t,!0)},{keyCode:yt.HOME,action:zt(xS,t,!1)},{keyCode:yt.END,action:zt(_h,t,!0,e)},{keyCode:yt.HOME,action:zt(_h,t,!1,e)}],n).each(s=>{n.preventDefault()})})(t,e,n)})})(t,e),((t,e)=>{if(mH.os.isMacOS())return;const n=Ve(!1);t.on("keydown",s=>{Cw(s)&&xw(n,t,!0)}),t.on("keyup",s=>{!1===s.isDefaultPrevented()&&((t,e,n)=>{ku([{keyCode:yt.PAGE_UP,action:zt(_h,t,!1,e)},{keyCode:yt.PAGE_DOWN,action:zt(_h,t,!0,e)}],n)})(t,e,s),Cw(s)&&n.get()&&(xw(n,t,!1),t.nodeChanged())})})(t,e),e}};class RH{constructor(e){let n;this.lastPath=[],this.editor=e;const s=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const a=e.selection.getRng(),f={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset};("nodechange"===r.type||!ep(f,n))&&e.dispatch("SelectionChange"),n=f}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);!r||Id(e)&&!s.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&Id(e)&&("IMG"===e.selection.getNode().nodeName?ws.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e){const n=this.editor.selection;let s,r,a;this.editor.initialized&&n&&!XE(this.editor)&&!this.editor.mode.isReadOnly()&&(a=this.editor.getBody(),s=n.getStart(!0)||a,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,a))&&(s=a),r=[],this.editor.dom.getParent(s,f=>{if(f===a)return!0;r.push(f)}),(e=e||{}).element=s,e.parents=r,this.editor.dispatch("NodeChange",e))}isSameElementPath(e){let n;const s=this.editor,r=ae(s.dom.getParents(e,Ne,s.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const _w="x-tinymce/html",Ih=st(_w),ey="\x3c!-- "+_w+" --\x3e",PH=t=>ey+t,Sw=t=>-1!==t.indexOf(ey),ww="%MCEPASTEBIN%",ny=t=>t.dom.get("mcepastebin"),IH=t=>t&&"mcepastebin"===t.id,kw=t=>t===ww,Ew=(t,e)=>(W.each(e,n=>{t=co(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),Aw=t=>Ew(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,r)=>s||r?Ge:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Tw=(t,e)=>({content:t,cancelled:e}),sy=(t,e)=>(t.insertContent(e,{merge:m1(t),paste:!0}),!0),oy=t=>/^https?:\/\/[\w\?\-\/+=.&%@~#]+$/i.test(t),XH=(t,e,n)=>!(t.selection.isCollapsed()||!oy(e))&&((t,e,n)=>(t.undoManager.extra(()=>{n(t,e)},()=>{t.execCommand("mceInsertLink",!1,e)}),!0))(t,e,n),QH=(t,e,n)=>!!((t,e)=>oy(e)&&Me(aC(t),n=>Dr(e.toLowerCase(),`.${n.toLowerCase()}`)))(t,e)&&((t,e,n)=>(t.undoManager.extra(()=>{n(t,e)},()=>{t.insertContent('<img src="'+e+'">')}),!0))(t,e,n),tV=(t=>{let e=0;return()=>"mceclip"+e++})(),Rw=(t,e,n,s)=>{const r=((t,e,n)=>((t,e,n)=>{const s=((t,e,n)=>t.dispatch("PastePreProcess",{content:e,internal:n}))(t,e,n),r=((t,e)=>{const n=_l({},t.schema);n.addNodeFilter("meta",r=>{W.each(r,a=>{a.remove()})});const s=n.parse(e,{forced_root_block:!1,isRootContent:!0});return ni({validate:!0},t.schema).serialize(s)})(t,s.content);return t.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?((t,e,n)=>{const s=t.dom.create("div",{style:"display:none"},e),r=((t,e,n)=>t.dispatch("PastePostProcess",{node:e,internal:n}))(t,s,n);return Tw(r.node.innerHTML,r.isDefaultPrevented())})(t,r,n):Tw(r,s.isDefaultPrevented())})(t,e,n))(t,e,n);!1===r.cancelled&&((t,e,n)=>{n||!g1(t)?sy(t,e):((t,e)=>{W.each([XH,QH,sy],n=>!0!==n(t,e,sy))})(t,e)})(t,r.content,s)},Fh=(t,e,n)=>{const s=n||Sw(e);Rw(t,(t=>t.replace(ey,""))(e),s,!1)},ry=(t,e)=>{const n=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((t,e,n)=>{const s=t.split(/\n\n/),r=((t,e)=>{let n="<"+t;const s=di(e,(r,a)=>a+'="'+xo.encodeAllRaw(r)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"})(e,n),a="</"+e+">",f=Kt(s,g=>g.split(/\n/).join("<br />"));return 1===f.length?f[0]:Kt(f,g=>r+g+a).join("")})(nd(n,b1(t)),Gn(t),Qi(t));Rw(t,r,!1,!0)},Pw=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const s=t.types[n];try{e[s]=t.getData(s)}catch(r){e[s]=""}}return e},Tl=(t,e)=>e in t&&t[e].length>0,Dw=t=>Tl(t,"text/html")||Tl(t,"text/plain"),Nw=(t,e,n)=>{const s=(t=>"paste"===t.type)(e)?e.clipboardData:e.dataTransfer;if(kd(t)&&s){const r=((t,e)=>{const n=e.items?fs(dn(e.items),r=>"file"===r.kind?[r.getAsFile()]:[]):[],s=e.files?dn(e.files):[];return dt(n.length>0?n:s,(t=>{const e=aC(t);return n=>Vn(n.type,"image/")&&Me(e,s=>(t=>{const e=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return W.hasOwn(n,e)?"image/"+n[e]:"image/"+e})(s)===n.type)})(t))})(t,s);if(r.length>0)return e.preventDefault(),(t=>Promise.all(Kt(t,e=>hv(e).then(n=>({file:e,uri:n})))))(r).then(a=>{n&&t.selection.setRng(n),Z(a,f=>{((t,e)=>{const{data:n,type:s}=ah(e.uri),r=e.file,a=t.editorUpload.blobCache,f=a.getByData(n,s),m=null!=f?f:((t,e,n,s)=>{const r=tV(),a=Xy(t)&&Mt(n.name),f=a?((t,e)=>{const n=e.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Mt(n)?t.dom.encode(n[1]):null})(t,n.name):r,g=e.create(r,n,s,f,a?n.name:void 0);return e.add(g),g})(t,a,r,n);Fh(t,`<img src="${m.blobUri()}">`,!1)})(t,f)})}),!0}return!1},Ow=(t,e,n,s)=>{let r=Aw(n);const a=Tl(e,Ih())||Sw(n),f=!a&&(t=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(t))(r),m=oy(r);(kw(r)||!r.length||f&&!m)&&(s=!0),(s||m)&&(r=Tl(e,"text/plain")&&f?e["text/plain"]:(t=>{const e=_o(),n=_l({},e);let s="";const r=e.getVoidElements(),a=W.makeMap("script noscript style textarea video audio iframe object"," "),f=e.getBlockElements(),m=g=>{const y=g.name,x=g;if("br"!==y){if("wbr"!==y){if(r[y]&&(s+=" "),a[y])return void(s+=" ");if(3===g.type&&(s+=g.value),!(g.name in e.getVoidElements())&&(g=g.firstChild))do{m(g)}while(g=g.next);f[y]&&x.next&&(s+="\n","p"===y&&(s+="\n"))}}else s+="\n"};return t=Ew(t,[/<!\[[^\]]+\]>/g]),m(n.parse(t)),s})(r)),!kw(r)&&(s?ry(t,r):Fh(t,r,a))},dV=(t,e,n)=>{((t,e,n)=>{let s;t.on("keydown",a=>{(t=>yt.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)(a)&&!a.isDefaultPrevented()&&(s=a.shiftKey&&86===a.keyCode)}),t.on("paste",a=>{if(a.isDefaultPrevented()||(t=>{var e,n;return le.os.isAndroid()&&0===(null===(n=null===(e=t.clipboardData)||void 0===e?void 0:e.items)||void 0===n?void 0:n.length)})(a))return;const f="text"===n.get()||s;s=!1;const m=Pw(a.clipboardData);!Dw(m)&&Nw(t,a,e.getLastRng()||t.selection.getRng())||(Tl(m,"text/html")?(a.preventDefault(),Ow(t,m,m["text/html"],f)):(e.create(),ws.setEditorTimeout(t,()=>{const g=e.getHtml();e.remove(),Ow(t,m,g,f)},0)))})})(t,e,n),(t=>{const e=r=>Vn(r,"webkit-fake-url"),n=r=>Vn(r,"data:");t.parser.addNodeFilter("img",(r,a,f)=>{if(!kd(t)&&(r=>{var a;return!0===(null===(a=r.data)||void 0===a?void 0:a.paste)})(f))for(const m of r){const g=m.attr("src");At(g)&&!m.attr("data-mce-object")&&g!==le.transparentSrc&&(e(g)||!y1(t)&&n(g))&&m.remove()}})})(t)},Mw=(t,e,n,s)=>{((t,e,n)=>{try{return t.clearData(),t.setData("text/html",e),t.setData("text/plain",n),t.setData(Ih(),e),!0}catch(s){return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),s()):n(e.html,s)},Bw=t=>(e,n)=>{const{dom:s,selection:r}=t,a=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),f=s.create("div",{contenteditable:"true"},e);s.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(f),s.add(t.getBody(),a);const m=r.getRng();f.focus();const g=s.createRng();g.selectNodeContents(f),r.setRng(g),ws.setEditorTimeout(t,()=>{r.setRng(m),s.remove(a),n()},0)},Lw=t=>({html:PH(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),Iw=t=>!t.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(t),Fw=(t,e)=>{var n,s;return Cl.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(s=e.clientY)&&void 0!==s?s:0,t.getDoc())},$w=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},kV=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,zw=t=>W.trim(t).replace(kV,Nd).toLowerCase(),EV=(t,e,n)=>{const s=d1(t);if(n||"all"===s||!h1(t))return e;const r=s?s.split(/[, ]/):[];if(r&&"none"!==s){const a=t.dom,f=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(m,g,y,x)=>{const _=a.parseStyle(a.decode(y)),E={};for(let P=0;P<r.length;P++){const A=_[r[P]];let R=A,N=a.getStyle(f,r[P],!0);/color/.test(r[P])&&(R=zw(R),N=zw(N)),N!==R&&(E[r[P]]=A)}const k=a.serializeStyle(E,"span");return k?g+' style="'+k+'"'+x:g+x})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(a,f,m,g)=>f+' style="'+m+'"'+g)},TV=t=>{const e=Ve(!1),n=Ve(p1(t)?"text":"html"),s=(t=>{const e=Ve(null);return{create:()=>((t,e)=>{const{dom:n,selection:s}=t,r=t.getBody();e.set(s.getRng());const a=n.add(t.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ww);le.browser.isFirefox()&&n.setStyle(a,"left","rtl"===n.getStyle(r,"direction",!0)?65535:-65535),n.bind(a,"beforedeactivate focusin focusout",f=>{f.stopPropagation()}),a.focus(),s.select(a,!0)})(t,e),remove:()=>((t,e)=>{const n=t.dom;if(ny(t)){let s;const r=e.get();for(;s=ny(t);)n.remove(s),n.unbind(s);r&&t.selection.setRng(r)}e.set(null)})(t,e),getEl:()=>ny(t),getHtml:()=>(t=>{const e=t.dom,n=(f,m)=>{f.appendChild(m),e.remove(m,!0)},[s,...r]=dt(t.getBody().childNodes,IH);Z(r,f=>{n(s,f)});const a=e.select("div[id=mcepastebin]",s);for(let f=a.length-1;f>=0;f--){const m=e.create("div");s.insertBefore(m,a[f]),n(m,a[f])}return s?s.innerHTML:""})(t),getLastRng:e.get}})(t);(t=>{(le.browser.isChromium()||le.browser.isSafari())&&((t,e)=>{t.on("PastePreProcess",n=>{n.content=e(t,n.content,n.internal)})})(t,EV)})(t),((t,e)=>{t.addCommand("mceTogglePlainTextPaste",()=>{((t,e)=>{"text"===e.get()?(e.set("html"),ix(t,!1)):(e.set("text"),ix(t,!0)),t.focus()})(t,e)}),t.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&Fh(t,s.html,s.internal),s.text&&ry(t,s.text)})})(t,n),(t=>{const e=r=>a=>{r(t,a)},n=u1(t);oe(n)&&t.on("PastePreProcess",e(n));const s=f1(t);oe(s)&&t.on("PastePostProcess",e(s))})(t),t.on("PreInit",()=>{(t=>{t.on("cut",(t=>e=>{!e.isDefaultPrevented()&&Iw(t)&&Mw(e,Lw(t),Bw(t),()=>{if(le.browser.isChromium()||le.browser.isFirefox()){const n=t.selection.getRng();ws.setEditorTimeout(t,()=>{t.selection.setRng(n),t.execCommand("Delete")},0)}else t.execCommand("Delete")})})(t)),t.on("copy",(t=>e=>{!e.isDefaultPrevented()&&Iw(t)&&Mw(e,Lw(t),Bw(t),Ft)})(t))})(t),((t,e)=>{c1(t)&&t.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),kd(t)||t.on("drop",n=>{const s=n.dataTransfer;s&&(t=>Me(t.files,e=>/^image\//.test(e.type)))(s)&&n.preventDefault()}),t.on("drop",n=>{if(n.isDefaultPrevented()||e.get())return;const s=Fw(t,n);if(An(s))return;const r=Pw(n.dataTransfer),a=Tl(r,Ih());if((!Dw(r)||(t=>{const e=t["text/plain"];return!!e&&0===e.indexOf("file://")})(r))&&Nw(t,n,s))return;const f=r[Ih()],m=f||r["text/html"]||r["text/plain"];m&&(n.preventDefault(),ws.setEditorTimeout(t,()=>{t.undoManager.transact(()=>{f&&t.execCommand("Delete"),$w(t,s);const g=Aw(m);r["text/html"]?Fh(t,g,a):ry(t,g)})}))}),t.on("dragstart",n=>{e.set(!0)}),t.on("dragover dragend",n=>{kd(t)&&!1===e.get()&&(n.preventDefault(),$w(t,Fw(t,n))),"dragend"===n.type&&e.set(!1)})})(t,e),dV(t,s,n)})},Hw=t=>vt(t)&&Yf(D_fromDom(t));var Du;!function(t){t.Before="before",t.After="after"}(Du||(Du={}));const MV=(t,e)=>Math.abs(t.left-e),BV=(t,e)=>Math.abs(t.right-e),$V=(t,e)=>{const n=dt(t,s=>((t,e)=>t>=e.top&&t<=e.bottom)(e,s));return(t=>It(t,(e,n)=>e.fold(()=>S.some(n),s=>{const r=Math.min(n.left,s.left),a=Math.min(n.top,s.top),f=Math.max(n.right,s.right),m=Math.max(n.bottom,s.bottom);return S.some({top:a,right:f,bottom:m,left:r,width:f-r,height:m-a})}),S.none()))(n).fold(()=>[[],t],s=>{const{pass:r,fail:a}=vr(t,f=>((t,e)=>{const n=((t,e)=>Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)))(t,e)/Math.min(t.height,e.height);return((t,e)=>t.top<e.bottom&&t.bottom>e.top)(t,e)&&n>.5})(f,s));return[r,a]})},HV=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),iy=(t,e,n)=>{const s=x=>Cs(x.node)?S.some(x):vt(x.node)?iy(dn(x.node.childNodes),e,n):S.none(),a=(x,_)=>{const E=Sr(x,(k,P)=>_(k,e,n)-_(P,e,n));return((x,_)=>{if(x.length>=2){const E=s(x[0]).getOr(x[0]),k=s(x[1]).getOr(x[1]);if(Math.abs(_(E,e,n)-_(k,e,n))<2){if(rt(E.node))return S.some(E);if(rt(k.node))return S.some(k)}}return S.none()})(E,_).orThunk(()=>wr(E,s))},[f,m]=$V($_(t),n),{pass:g,fail:y}=vr(m,x=>x.top<n);return a(f,HV).orThunk(()=>a(y,l)).orThunk(()=>a(g,l))},WV=(t,e,n)=>((t,e,n)=>{const s=D_fromDom(t),r=Us(s),f=D_fromPoint(r,e,n).filter(m=>bn(s,m)).getOr(s);return((t,e,n,s)=>{const r=(a,f)=>f.fold(()=>iy(dn(a.dom.childNodes),n,s),m=>{const g=dt(dn(a.dom.childNodes),y=>y!==m.dom);return iy(g,n,s)}).orThunk(()=>(ee(a,t)?S.none():(t=>S.from(t.dom.parentElement).map(D_fromDom))(a)).bind(g=>r(g,S.some(a))));return r(e,S.none())})(s,f,e,n)})(t,e,n).filter(s=>tu(s.node)).map(s=>((t,e)=>({node:t.node,position:MV(t,e)<BV(t,e)?Du.Before:Du.After}))(s,e)),Vw=t=>{const e=t.getBoundingClientRect(),n=t.ownerDocument,s=n.documentElement,r=n.defaultView;return{top:e.top+r.pageYOffset-s.clientTop,left:e.left+r.pageXOffset-s.clientLeft}},ay=ge,QV=qs,eU=(t,e,n,s)=>{const r=t.dom,a=e.cloneNode(!0);r.setStyles(a,{width:n,height:s}),r.setAttrib(a,"data-mce-selected",null);const f=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(f,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),r.setStyles(a,{margin:0,boxSizing:"border-box"}),f.appendChild(a),f},Uw=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},Ww=t=>{t.on(e=>{Uw(e.ghost)}),t.clear()},fU=t=>{const e=ko(),n=se.DOM,s=document,r=((t,e)=>n=>{if((t=>0===t.button)(n)){const s=ue(e.dom.getParents(n.target),((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(ay,QV)).getOr(null);if(((t,e)=>ay(e)&&e!==t)(e.getBody(),s)){const r=e.dom.getPos(s),a=e.getBody(),f=e.getDoc().documentElement;t.set({element:s,dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(e.inline?a.scrollWidth:f.offsetWidth)-2,maxY:(e.inline?a.scrollHeight:f.offsetHeight)-2,relX:n.pageX-r.x,relY:n.pageY-r.y,width:s.offsetWidth,height:s.offsetHeight,ghost:eU(e,s,s.offsetWidth,s.offsetHeight)})}}})(e,t),a=((t,e)=>{const n=Ki((s,r)=>{e._selectionOverrides.hideFakeCaret(),e.selection.placeCaretAt(s,r)},0);return e.on("remove",n.cancel),s=>t.on(r=>{const a=Math.max(Math.abs(s.screenX-r.screenX),Math.abs(s.screenY-r.screenY));if(!r.dragging&&a>10){if(e.dispatch("dragstart",{target:r.element}).isDefaultPrevented())return;r.dragging=!0,e.focus()}if(r.dragging){const f=((t,e)=>({pageX:e.pageX-t.relX,pageY:e.pageY+5}))(r,((t,e)=>((t,e,n)=>({pageX:n.left-t.left+e.left,pageY:n.top-t.top+e.top}))((t=>t.inline?Vw(t.getBody()):{left:0,top:0})(t),(t=>{const e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}})(t),((t,e)=>{if(e.target.ownerDocument!==t.getDoc()){const n=Vw(t.getContentAreaContainer()),s=(t=>{const e=t.getBody(),n=t.getDoc().documentElement;return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop}})(t);return{left:e.pageX-n.left+s.left,top:e.pageY-n.top+s.top}}return{left:e.pageX,top:e.pageY}})(t,e)))(e,s));((t,e)=>{t.parentNode!==e&&e.appendChild(t)})(r.ghost,e.getBody()),((t,e,n,s,r,a)=>{let f=0,m=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>r&&(f=e.pageX+n-r),e.pageY+s>a&&(m=e.pageY+s-a),t.style.width=n-f+"px",t.style.height=s-m+"px"})(r.ghost,f,r.width,r.height,r.maxX,r.maxY),n.throttle(s.clientX,s.clientY)}})})(e,t),f=((t,e)=>n=>{t.on(s=>{if(s.dragging){if(((t,e,n)=>e!==n&&!t.dom.isChildOf(e,n)&&!ay(e))(e,(t=>{const n=t.getSel().getRangeAt(0).startContainer;return 3===n.nodeType?n.parentNode:n})(e.selection),s.element)){const r=(t=>{const e=t.cloneNode(!0);return e.removeAttribute("data-mce-selected"),e})(s.element);e.dispatch("drop",{clientX:n.clientX,clientY:n.clientY}).isDefaultPrevented()||e.undoManager.transact(()=>{Uw(s.element),e.insertContent(e.dom.getOuterHTML(r)),e._selectionOverrides.hideFakeCaret()})}e.dispatch("dragend")}}),Ww(t)})(e,t),m=((t,e)=>()=>{t.on(n=>{n.dragging&&e.dispatch("dragend")}),Ww(t)})(e,t);t.on("mousedown",r),t.on("mousemove",a),t.on("mouseup",f),n.bind(s,"mousemove",a),n.bind(s,"mouseup",m),t.on("remove",()=>{n.unbind(s,"mousemove",a),n.unbind(s,"mouseup",m)}),t.on("keydown",g=>{g.keyCode===yt.ESC&&m()})},Rl=ge,ly=(t,e)=>gu(t.getBody(),e),pU=t=>{const e=t.selection,n=t.dom,s=n.isBlock,r=t.getBody(),a=L1(t,r,s,()=>ea(t)),f="sel-"+n.uniqueId(),m="data-mce-selected";let g;const x=X=>X!==r&&(Rl(X)||Ms(X))&&n.isChildOf(X,r),E=(X,J,et,St=!0)=>t.dispatch("ShowCaret",{target:J,direction:X,before:et}).isDefaultPrevented()?null:(St&&e.scrollIntoView(J,-1===X),a.show(et,J)),A=X=>Yn(X)||Ua(X)||Wa(X),R=X=>A(X.startContainer)||A(X.endContainer),H=(X,J)=>{if(!X)return null;if(X.collapsed){if(!R(X)){const lt=J?1:-1,Xt=ou(lt,r,X),Yt=Xt.getNode(!J);if(tu(Yt))return E(lt,Yt,!!J&&!Xt.isAtEnd(),!1);const ye=Xt.getNode(J);if(tu(ye))return E(lt,ye,!J&&!Xt.isAtEnd(),!1)}return null}let et=X.startContainer,St=X.startOffset;const ht=X.endOffset;if(3===et.nodeType&&0===St&&Rl(et.parentNode)&&(et=et.parentNode,St=n.nodeIndex(et),et=et.parentNode),1!==et.nodeType)return null;if(ht===St+1&&et===X.endContainer){const lt=et.childNodes[St];if(x(lt))return(X=>{const J=X.cloneNode(!0),et=t.dispatch("ObjectSelected",{target:X,targetClone:J});if(et.isDefaultPrevented())return null;const St=((X,J)=>{const et=D_fromDom(t.getBody()),St=t.getDoc(),ht=Mi(et,"#"+f).getOrThunk(()=>{const Yt=D_fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',St);return de(Yt,"id",f),He(et,Yt),Yt}),lt=n.createRng();Hr(ht),po(ht,[D_fromText(Ge,St),D_fromDom(J),D_fromText(Ge,St)]),lt.setStart(ht.dom.firstChild,1),lt.setEnd(ht.dom.lastChild,0),Ba(ht,{top:n.getPos(X,t.getBody()).y+"px"}),kx(ht);const Xt=e.getSel();return Xt.removeAllRanges(),Xt.addRange(lt),lt})(X,et.targetClone),ht=D_fromDom(X);return Z(yn(D_fromDom(t.getBody()),"*[data-mce-selected]"),lt=>{ee(ht,lt)||Rn(lt,m)}),n.getAttrib(X,m)||X.setAttribute(m,"1"),g=X,Y(),St})(lt)}return null},V=()=>{g&&g.removeAttribute(m),Mi(D_fromDom(t.getBody()),"#"+f).each(Pe),g=null},Y=()=>{a.hide()};return ur(t)||(t.on("click",J=>{const et=ly(t,J.target);et&&Rl(et)&&(J.preventDefault(),t.focus())}),t.on("blur NewBlock",V),t.on("ResizeWindow FullscreenStateChanged",a.reposition),t.on("tap",J=>{const et=J.target,St=ly(t,et);Rl(St)?(J.preventDefault(),vu(t,St).each(H)):x(et)&&vu(t,et).each(H)},!0),t.on("mousedown",J=>{const et=J.target;if(et!==r&&"HTML"!==et.nodeName&&!n.isChildOf(et,r)||!1===((t,e,n)=>{const s=D_fromDom(t.getBody()),r=t.inline?s:(t=>D_fromDom(Us(t).dom.documentElement))(s),a=((t,e,n,s)=>{const r=(t=>t.dom.getBoundingClientRect())(e);return{x:n-(t?r.left+e.dom.clientLeft+sL(e):0),y:s-(t?r.top+e.dom.clientTop+nL(e):0)}})(t.inline,r,e,n);return((t,e,n)=>{const s=tL(t),r=eL(t);return e>=0&&n>=0&&e<=s&&n<=r})(r,a.x,a.y)})(t,J.clientX,J.clientY))return;V(),Y();const St=ly(t,et);Rl(St)?(J.preventDefault(),vu(t,St).each(H)):WV(r,J.clientX,J.clientY).each(ht=>{var X;J.preventDefault(),(X=E(1,ht.node,ht.position===Du.Before,!1))&&e.setRng(X),vt(St)?St.focus():t.getBody().focus()})}),t.on("keypress",J=>{yt.modifierPressed(J)||Rl(e.getNode())&&J.preventDefault()}),t.on("GetSelectionRange",J=>{let et=J.range;if(g){if(!g.parentNode)return void(g=null);et=et.cloneRange(),et.selectNode(g),J.range=et}}),t.on("SetSelectionRange",J=>{J.range=(X=>{const J=t.schema.getVoidElements(),et=n.createRng(),St=X.startContainer,ht=X.startOffset,lt=X.endContainer,Xt=X.endOffset;return $t(J,St.nodeName.toLowerCase())?0===ht?et.setStartBefore(St):et.setStartAfter(St):et.setStart(St,ht),$t(J,lt.nodeName.toLowerCase())?0===Xt?et.setEndBefore(lt):et.setEndAfter(lt):et.setEnd(lt,Xt),et})(J.range);const et=H(J.range,J.forward);et&&(J.range=et)}),t.on("AfterSetSelectionRange",J=>{const et=J.range,St=et.startContainer.parentNode;!R(et)&&!(J=>"mcepastebin"===J.id)(St)&&Y(),n.hasClass(St,"mce-offscreen-selection")||V()}),(t=>{fU(t),JE(t)&&(t=>{const e=r=>{if(!r.isDefaultPrevented()){const a=r.dataTransfer;a&&(ke(a.types,"Files")||a.files.length>0)&&(r.preventDefault(),"drop"===r.type&&mh(t,"Dropped file type is not supported"))}},n=r=>{Ud(t,r.target)&&e(r)},s=()=>{const r=se.DOM,a=t.dom,f=document,m=t.inline?t.getBody():t.getDoc(),g=["drop","dragover"];Z(g,y=>{r.bind(f,y,n),a.bind(m,y,e)}),t.on("remove",()=>{Z(g,y=>{r.unbind(f,y,n),a.unbind(m,y,e)})})};t.on("init",()=>{ws.setEditorTimeout(t,s,0)})})(t)})(t),(t=>{const e=Ki(()=>{if(!t.removed&&t.getBody().contains(document.activeElement)){const n=t.selection.getRng();if(n.collapsed){const s=yb(t,n,!1);t.selection.setRng(s)}}},0);t.on("focus",()=>{e.throttle()}),t.on("blur",()=>{e.cancel()})})(t),(t=>{t.on("init",()=>{t.on("focusin",e=>{const n=e.target;if(Ms(n)){const s=gu(t.getBody(),n),r=ge(s)?s:n;t.selection.getNode()!==r&&vu(t,r).each(a=>t.selection.setRng(a))}})})})(t)),{showCaret:E,showBlockCaretContainer:X=>{X.hasAttribute("data-mce-caret")&&(ja(X),e.scrollIntoView(X))},hideFakeCaret:Y,destroy:()=>{a.destroy(),g=null}}},jw=(t,e,n)=>{if(rt(e)&&(n<0||n>e.data.length))return[];const s=[n];let r=e;for(;r!==t&&r.parentNode;){const a=r.parentNode;for(let f=0;f<a.childNodes.length;f++)if(a.childNodes[f]===r){s.push(f);break}r=a}return r===t?s.reverse():[]},cy=(t,e,n,s,r)=>({start:jw(t,e,n),end:jw(t,s,r)}),qw=(t,e)=>{const n=e.slice(),s=n.pop();return It(n,(a,f)=>a.bind(m=>S.from(m.childNodes[f])),S.some(t)).bind(a=>rt(a)&&(s<0||s>a.data.length)?S.none():S.some({node:a,offset:s}))},Kw=(t,e)=>qw(t,e.start).bind(({node:n,offset:s})=>qw(t,e.end).map(({node:r,offset:a})=>{const f=document.createRange();return f.setStart(n,s),f.setEnd(r,a),f})),Pl=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const s=e.parentNode;t.remove(e),Pl(t,s,n)}},$h=(t,e,n,s=!0)=>{const r=e.startContainer.parentNode,a=e.endContainer.parentNode;e.deleteContents(),s&&!n(e.startContainer)&&(rt(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),rt(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),Pl(t,r,n),r!==a&&Pl(t,a,n))},uy=(t,e)=>S.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Yw=(t,e,n)=>{((t,e,n)=>{if(rt(t)&&0>=t.length)return S.some(eo(t,0));{const s=Eo(Sh);return S.from(s.forwards(t,0,wh(t),n)).map(r=>eo(r.container,0))}})(e,0,e).each(r=>{const a=r.container;LS(a,n.start.length,e).each(f=>{const m=t.createRng();m.setStart(a,0),m.setEnd(f.container,f.offset),$h(t,m,g=>g===e)})})},Gw=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),zh=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},Xw=(t,e,n)=>{const s=Kw(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=s.startContainer,a=s.endContainer,f=0===s.endOffset?a:a.splitText(s.endOffset),m=0===s.startOffset?r:r.splitText(s.startOffset);return{prefix:e,end:f.parentNode.insertBefore(Gw(t,e+"-end"),f),start:m.parentNode.insertBefore(Gw(t,e+"-start"),m)}},Qw=(t,e,n)=>{Pl(t,t.get(e.prefix+"-end"),n),Pl(t,t.get(e.prefix+"-start"),n)},fy=t=>0===t.start.length,Zw=(t,e,n,s)=>{const r=e.start;return Fb(t,s.container,s.offset,(t=>(e,n)=>{const r=e.data.substring(0,n),a=r.lastIndexOf(t.charAt(t.length-1)),f=r.lastIndexOf(t);return-1!==f?f+t.length:-1!==a?a+1:-1})(r),n).bind(f=>{if(f.offset>=r.length){const m=t.createRng();return m.setStart(f.container,f.offset-r.length),m.setEnd(f.container,f.offset),S.some(m)}return Ib(f.container,f.offset-r.length,n).map(g=>{const y=t.createRng();return y.setStart(g.container,g.offset),y.setEnd(f.container,f.offset),y}).filter(g=>g.toString()===r).orThunk(()=>Zw(t,e,n,eo(f.container,0)))})},wU=(t,e,n)=>{const s=t.dom,r=s.getRoot(),a=n.pattern,f=n.position.container,m=n.position.offset;return Ib(f,m-n.pattern.end.length,e).bind(g=>{const y=cy(r,g.container,g.offset,f,m);if(fy(a))return S.some({matches:[{pattern:a,startRng:y,endRng:y}],position:g});{const x=Jw(t,n.remainingPatterns,g.container,g.offset,e),_=x.getOr({matches:[],position:g}),E=_.position;return((t,e,n,s,r,a=!1)=>{if(0===e.start.length&&!a){const f=t.createRng();return f.setStart(n,s),f.setEnd(n,s),S.some(f)}return Lb(n,s,r).bind(f=>Zw(t,e,r,f).bind(g=>{if(a){if(g.endContainer===f.container&&g.endOffset===f.offset)return S.none();if(0===f.offset&&g.endContainer.textContent.length===g.endOffset)return S.none()}return S.some(g)}))})(s,a,E.container,E.offset,e,x.isNone()).map(P=>{const A=((t,e)=>cy(t,e.startContainer,e.startOffset,e.endContainer,e.endOffset))(r,P);return{matches:_.matches.concat([{pattern:a,startRng:A,endRng:y}]),position:eo(P.startContainer,P.startOffset)}})}})},Jw=(t,e,n,s,r)=>{const a=t.dom;return Lb(n,s,a.getRoot()).bind(f=>{const m=a.createRng();m.setStart(r,0),m.setEnd(n,s);const g=m.toString();for(let y=0;y<e.length;y++){const x=e[y];if(!Dr(g,x.end))continue;const _=e.slice();_.splice(y,1);const E=wU(t,r,{pattern:x,remainingPatterns:_,position:f});if(E.isSome())return E}return S.none()})},tk=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?Z(e.format,s=>{t.formatter.apply(s)}):t.execCommand(e.cmd,!1,e.value)},ek=(t,e,n)=>{const s=t.selection.getRng();return!1===s.collapsed?[]:uy(t,s).bind(r=>{const a=Math.max(0,s.startOffset-(n?1:0));return Jw(t,e,s.startContainer,a,r)}).fold(()=>[],r=>r.matches)},nk=(t,e)=>{if(0===e.length)return;const n=t.dom,s=t.selection.getBookmark(),r=((t,e)=>{const n=qc("mce_textpattern"),s=me(e,(r,a)=>{const f=Xw(t,n+`_end${r.length}`,a.endRng);return r.concat([he(wt({},a),{endMarker:f})])},[]);return me(s,(r,a)=>{const f=s.length-r.length-1,m=fy(a.pattern)?a.endMarker:Xw(t,n+`_start${f}`,a.startRng);return r.concat([he(wt({},a),{startMarker:m})])},[])})(n,e);Z(r,a=>{const f=n.getParent(a.startMarker.start,n.isBlock),m=g=>g===f;fy(a.pattern)?((t,e,n,s)=>{const r=zh(t.dom,n);$h(t.dom,r,s),tk(t,e,r)})(t,a.pattern,a.endMarker,m):((t,e,n,s,r)=>{const a=t.dom,f=zh(a,s),m=zh(a,n);$h(a,m,r),$h(a,f,r);const y=zh(a,{prefix:n.prefix,start:n.end,end:s.start});tk(t,e,y)})(t,a.pattern,a.startMarker,a.endMarker,m),Qw(n,a.endMarker,m),Qw(n,a.startMarker,m)}),t.selection.moveToBookmark(s)},RU=(t,e)=>{if(!t.selection.isCollapsed()||!(t=>t.inlinePatterns.length>0||t.blockPatterns.length>0)(e))return!1;const n=ek(t,e.inlinePatterns,!1),s=((t,e)=>{const n=t.dom,s=t.selection.getRng();return uy(t,s).filter(r=>{const a=Gn(t),f=n.is(r,a);return null!==r&&f}).bind(r=>{const a=r.textContent;return((t,e)=>{const n=e.replace(Ge," ");return ue(t,s=>0===e.indexOf(s.start)||0===n.indexOf(s.start))})(e,a).map(m=>W.trim(a).length===m.start.length?[]:[{pattern:m,range:cy(n.getRoot(),r,0,r,0)}])}).getOr([])})(t,e.blockPatterns);return(s.length>0||n.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),nk(t,n),((t,e)=>{if(0===e.length)return;const n=t.selection.getBookmark();Z(e,s=>((t,e)=>{const s=e.pattern,r=Kw(t.dom.getRoot(),e.range).getOrDie("Unable to resolve path range");return uy(t,r).each(f=>{"block-format"===s.type?((f,m)=>{const g=m.get(f);return Fe(g)&&Ke(g).exists(y=>$t(y,"block"))})(s.format,t.formatter)&&t.undoManager.transact(()=>{Yw(t.dom,f,s),t.formatter.apply(s.format)}):"block-command"===s.type&&t.undoManager.transact(()=>{Yw(t.dom,f,s),t.execCommand(s.cmd,!1,s.value)})}),!0})(t,s)),t.selection.moveToBookmark(n)})(t,s);const r=t.selection.getRng(),a=Lb(r.startContainer,r.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),a.each(f=>{const m=f.container;"\ufeff"===m.data.charAt(f.offset-1)&&(m.deleteData(f.offset-1,1),Pl(t.dom,m.parentNode,g=>g===t.dom.getRoot()))})}),!0)},sk=(t,e)=>{if(e.length>0){const n=ek(t,e,!0);n.length>0&&t.undoManager.transact(()=>{nk(t,n)})}},ok=(t,e,n)=>{for(let s=0;s<t.length;s++)if(n(t[s],e))return!0;return!1},NU=t=>{const e=[",",".",";",":","!","?"],n=[32],r=()=>Wy(rC(t));t.on("keydown",a=>{13===a.keyCode&&!yt.modifierPressed(a)&&RU(t,(t=>({inlinePatterns:Wy(t),blockPatterns:aE(t)}))(rC(t)))&&a.preventDefault()},!0),t.on("keyup",a=>{((t,e)=>ok(t,e,(n,s)=>n===s.keyCode&&!1===yt.modifierPressed(s)))(n,a)&&sk(t,r())}),t.on("keypress",a=>{((t,e)=>ok(t,e,(n,s)=>n.charCodeAt(0)===s.charCode))(e,a)&&ws.setEditorTimeout(t,()=>{sk(t,r())})})},dy=se.DOM,LU=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,hy=t=>ms(t,e=>!1===_n(e)),rk=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return hy({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),remove_trailing_brs:e("remove_trailing_brs"),inline_styles:e("inline_styles"),root_name:LU(t),validate:!0,blob_cache:n,document:t.getDoc()})},ik=t=>{const e=t.options.get;return hy({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html")})},ak=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,lk=t=>{const e=ak(t),n=tC(t),s=t.contentCSS,r=()=>{e.unloadAll(s),t.inline||t.ui.styleSheetLoader.unloadAll(n)},a=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let g="";W.each(t.contentStyles,y=>{g+=y+"\r\n"}),t.dom.addStyle(g)}const f=Promise.all(((t,e,n)=>{const s=[ak(t).loadAll(e)];return t.inline?s:s.concat([t.ui.styleSheetLoader.loadAll(n)])})(t,s,n)).then(a).catch(a),m=OE(t);return m&&((t,e)=>{const n=D_fromDom(t.getBody()),s=hc(Ko(n)),r=D_fromTag("style");de(r,"type","text/css"),He(r,D_fromText(e)),He(s,r),t.on("remove",()=>{Pe(r)})})(t,m),f},my=t=>{!0!==t.removed&&((t=>{ur(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(t),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(t=>{t.dispatch("Init")})(t),t.focus(!0),(t=>{const e=t.dom.getRoot();!t.inline&&(!Id(t)||t.selection.getStart(!0)===e)&&On(e).each(n=>{const s=n.getNode(),r=Di(s)?On(s).getOr(n):n;t.selection.setRng(r.toRange())})})(t),t.nodeChanged({initial:!0});const e=o1(t);oe(e)&&e.call(t,t),(t=>{const e=i1(t);e&&ws.setEditorTimeout(t,()=>{let n;n=!0===e?t:t.editorManager.get(e),n.destroyed||n.focus()},100)})(t)})(t))},ck=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(dy.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const s=t.getBody();s.disabled=!0,t.readonly=sC(t),t.readonly||(t.inline&&"static"===dy.getStyle(s,"position",!0)&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,t.editorUpload=NL(t),t.schema=_o(ik(t)),t.dom=se(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:()=>t.inline,schema:t.schema,contentCssCors:RE(t),referrerPolicy:Ag(t),onSetAttrib:f=>{t.dispatch("SetAttrib",f)}}),t.parser=(t=>{const e=_l(rk(t),t.schema);return e.addAttributeFilter("src,href,style,tabindex",(n,s)=>{let a,f,r=n.length;const m=t.dom,g="data-mce-"+s;for(;r--;)if(a=n[r],f=a.attr(s),f&&!a.attr(g)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===s?(f=m.serializeStyle(m.parseStyle(f),a.name),f.length||(f=null),a.attr(g,f),a.attr(s,f)):"tabindex"===s?(a.attr(g,f),a.attr(s,null)):a.attr(g,t.convertURL(f,s,a.name))}}),e.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const r=n[s],a=r.attr("type")||"no/type";0!==a.indexOf("mce-")&&r.attr("type","mce-"+a)}}),t.options.get("preserve_cdata")&&e.addNodeFilter("#cdata",n=>{let s=n.length;for(;s--;){const r=n[s];r.type=8,r.name="#comment",r.value="[CDATA["+t.dom.encode(r.value)+"]]"}}),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const r=t.schema.getNonEmptyElements();for(;s--;){const a=n[s];a.isEmpty(r)&&0===a.getAll("br").length&&a.append(new Mn("br",1))}}),e})(t),t.serializer=Uv((t=>{const e=t.options.get;return wt(wt(wt({},rk(t)),ik(t)),hy({url_converter:e("url_converter"),url_converter_scope:e("url_converter_scope"),element_format:e("element_format"),entities:e("entities"),entity_encoding:e("entity_encoding"),indent:e("indent"),indent_after:e("indent_after"),indent_before:e("indent_before")}))})(t),t),t.selection=Vv(t.dom,t.getWin(),t.serializer,t),t.annotator=tx(t),t.formatter=e_(t),t.undoManager=s_(t),t._nodeChangeDispatcher=new RH(t),t._selectionOverrides=pU(t),(t=>{const e=ko(),n=Ve(!1),s=Qr(r=>{t.dispatch("longpress",he(wt({},r),{type:"longpress"})),n.set(!0)},400);t.on("touchstart",r=>{iS(r).each(a=>{s.cancel();const f={x:a.clientX,y:a.clientY,target:r.target};s.throttle(r),n.set(!1),e.set(f)})},!0),t.on("touchmove",r=>{s.cancel(),iS(r).each(a=>{e.on(f=>{((t,e)=>{const n=Math.abs(t.clientX-e.x),s=Math.abs(t.clientY-e.y);return n>5||s>5})(a,f)&&(e.clear(),n.set(!1),t.dispatch("longpresscancel"))})})},!0),t.on("touchend touchcancel",r=>{s.cancel(),"touchcancel"!==r.type&&e.get().filter(a=>a.target.isEqualNode(r.target)).each(()=>{n.get()?r.preventDefault():t.dispatch("tap",he(wt({},r),{type:"tap"}))})},!0)})(t),(t=>{(t=>{t.on("click",e=>{t.dom.getParent(e.target,"details")&&e.preventDefault()})})(t),(t=>{t.parser.addNodeFilter("details",e=>{Z(e,n=>{n.attr("data-mce-open",n.attr("open")),n.attr("open","open")})}),t.serializer.addNodeFilter("details",e=>{Z(e,n=>{const s=n.attr("data-mce-open");n.attr("open",At(s)?s:null),n.attr("data-mce-open",null)})})})(t)})(t),(t=>{const e="contenteditable",n=" "+W.trim(C1(t))+" ",s=" "+W.trim(iC(t))+" ",r=aS(n),a=aS(s),f=x1(t);f.length>0&&t.on("BeforeSetContent",m=>{((t,e,n)=>{let s=e.length,r=n.content;if("raw"!==n.format){for(;s--;)r=r.replace(e[s],r$(t,r,iC(t)));n.content=r}})(t,f,m)}),t.parser.addAttributeFilter("class",m=>{let g=m.length;for(;g--;){const y=m[g];r(y)?y.attr(e,"true"):a(y)&&y.attr(e,"false")}}),t.serializer.addAttributeFilter(e,m=>{let g=m.length;for(;g--;){const y=m[g];!r(y)&&!a(y)||(f.length>0&&y.attr("data-mce-content")?(y.name="#text",y.type=3,y.raw=!0,y.value=y.attr("data-mce-content")):y.attr(e,null))}})})(t),ur(t)||((t=>{t.on("click",e=>{e.detail>=3&&(t=>{const e=t.selection.getRng(),n=F.fromRangeStart(e),s=F.fromRangeEnd(e);if(F.isElementPosition(n)){const r=n.container();Hw(r)&&On(r).each(a=>e.setStart(a.container(),a.offset()))}if(F.isElementPosition(s)){const r=n.container();Hw(r)&&Oo(r).each(a=>e.setEnd(a.container(),a.offset()))}t.selection.setRng(Mp(e))})(t)})})(t),(t=>{NU(t)})(t));const r=TH(t);XF(t,r),(t=>{t.on("NodeChange",ut(s$,t))})(t),(t=>{const e=t.dom,n=Gn(t),s=IE(t),r=(a,f)=>{if((t=>{if(r_(t)){const e=t.keyCode;return!i_(t)&&(yt.metaKeyPressed(t)||t.altKey||e>=112&&e<=123||ke(UL,e))}return!1})(a))return;const m=t.getBody(),g=!(t=>r_(t)&&!(i_(t)||"keyup"===t.type&&229===t.keyCode))(a)&&((t,e,n)=>{if($e(D_fromDom(e),!1)){const s=e.firstElementChild;return!s||!t.getStyle(e.firstElementChild,"padding-left")&&!t.getStyle(e.firstElementChild,"padding-right")&&n===s.nodeName.toLowerCase()}return!1})(e,m,n);(""!==e.getAttrib(m,o_)!==g||f)&&(e.setAttrib(m,o_,g?s:null),e.setAttrib(m,"aria-placeholder",g?s:null),((t,e)=>{t.dispatch("PlaceholderToggle",{state:e})})(t,g),t.on(g?"keydown":"keyup",r),t.off(g?"keyup":"keydown",r))};s&&t.on("init",a=>{r(a,!0),t.on("change SetContent ExecCommand",r),t.on("paste",f=>ws.setEditorTimeout(t,()=>r(f)))})})(t),TV(t);const a=(t=>{const e=t;return(t=>ce(t.plugins,"rtc").bind(e=>S.from(e.setup)))(t).fold(()=>(e.rtcInstance=Lv(t),S.none()),n=>(e.rtcInstance=(()=>{const t=st(null),e=st("");return{init:{bindEvents:Ft},undoManager:{beforeChange:Ft,add:t,undo:t,redo:t,clear:Ft,reset:Ft,hasUndo:xe,hasRedo:xe,transact:t,ignore:Ft,extra:Ft},formatter:{match:xe,matchAll:st([]),matchNode:st(void 0),canApply:xe,closest:e,apply:Ft,remove:Ft,toggle:Ft,formatChanged:st({unbind:Ft})},editor:{getContent:e,setContent:st({content:"",html:""}),insertContent:st(""),addVisual:Ft},selection:{getContent:e},autocompleter:{addDecoration:Ft,removeDecoration:Ft},raw:{getModel:st(S.none())}}})(),S.some(()=>n().then(s=>(e.rtcInstance=(t=>{const e=y=>tn(y)?y:{},{init:n,undoManager:s,formatter:r,editor:a,selection:f,autocompleter:m,raw:g}=t;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(y,x,_)=>s.transact(_),ignore:(y,x)=>s.ignore(x),extra:(y,x,_,E)=>s.extra(_,E)},formatter:{match:(y,x,_,E)=>r.match(y,e(x),E),matchAll:r.matchAll,matchNode:r.matchNode,canApply:y=>r.canApply(y),closest:y=>r.closest(y),apply:(y,x,_)=>r.apply(y,e(x)),remove:(y,x,_,E)=>r.remove(y,e(x)),toggle:(y,x,_)=>r.toggle(y,e(x)),formatChanged:(y,x,_,E,k)=>r.formatChanged(x,_,E,k)},editor:{getContent:y=>a.getContent(y),setContent:(y,x)=>({content:a.setContent(y,x),html:""}),insertContent:(y,x)=>(a.insertContent(y),""),addVisual:a.addVisual},selection:{getContent:(y,x)=>f.getContent(x)},autocompleter:{addDecoration:m.addDecoration,removeDecoration:m.removeDecoration},raw:{getModel:()=>S.some(g.getRawModel())}}})(s),s.rtc.isRemote)))))})(t);(t=>{const e=t.getDoc(),n=t.getBody();(t=>{t.dispatch("PreInit")})(t),a1(t)||(e.body.spellcheck=!1,dy.setAttrib(n,"spellcheck","false")),t.quirks=(t=>{const e=W.each,n=yt.BACKSPACE,s=yt.DELETE,r=t.dom,a=t.selection,f=t.parser,m=le.browser,g=m.isFirefox(),y=m.isChromium()||m.isSafari(),x=le.deviceType.isiPhone()||le.deviceType.isiPad(),_=le.os.isMacOS()||le.os.isiOS(),E=(pt,mt)=>{try{t.getDoc().execCommand(pt,!1,mt)}catch(Et){}},k=pt=>pt.isDefaultPrevented(),A=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},R=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",pt=>{let mt;if(pt.target===t.getDoc().documentElement)if(mt=a.getRng(),t.getBody().focus(),"mousedown"===pt.type){if(Yn(mt.startContainer))return;a.placeCaretAt(pt.clientX,pt.clientY)}else a.setRng(mt)})},L=()=>{Range.prototype.getClientRects||t.on("mousedown",pt=>{if(!k(pt)&&"HTML"===pt.target.nodeName){const mt=t.getBody();mt.blur(),ws.setEditorTimeout(t,()=>{mt.focus()})}})},q=()=>{const pt=oC(t);t.on("click",mt=>{const Et=mt.target;/^(IMG|HR)$/.test(Et.nodeName)&&"false"!==r.getContentEditableParent(Et)&&(mt.preventDefault(),t.selection.select(Et),t.nodeChanged()),"A"===Et.nodeName&&r.hasClass(Et,pt)&&0===Et.childNodes.length&&(mt.preventDefault(),a.select(Et))})},V=()=>{t.on("keydown",pt=>{if(!k(pt)&&pt.keyCode===n&&a.isCollapsed()&&0===a.getRng().startOffset){const mt=a.getNode().previousSibling;if(mt&&mt.nodeName&&"table"===mt.nodeName.toLowerCase())return pt.preventDefault(),!1}})},Y=()=>{sC(t)||t.on("BeforeExecCommand mousedown",()=>{E("StyleWithCSS",!1),E("enableInlineTableEditing",!1),eC(t)||E("enableObjectResizing",!1)})},St=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},ht=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},lt=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",pt=>{let mt;"HTML"===pt.target.nodeName&&(mt=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(mt),t.selection.normalize(),t.nodeChanged())}))},Xt=()=>{_&&t.on("keydown",pt=>{yt.metaKeyPressed(pt)&&!pt.shiftKey&&(37===pt.keyCode||39===pt.keyCode)&&(pt.preventDefault(),t.selection.getSel().modify("move",37===pt.keyCode?"backward":"forward","lineboundary"))})},Yt=()=>{t.on("click",pt=>{let mt=pt.target;do{if("A"===mt.tagName)return void pt.preventDefault()}while(mt=mt.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ye=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",pt=>{pt.preventDefault()})})},tt=Ft;return ur(t)?(y&&(R(),q(),ye(),A(),x&&(ht(),lt(),Yt())),g&&(L(),Y(),St(),Xt())):(t.on("keydown",pt=>{let mt,Et;if(k(pt)||pt.keyCode!==yt.BACKSPACE)return;mt=a.getRng();const Lt=mt.startContainer,_e=mt.startOffset,Qe=r.getRoot();if(Et=Lt,mt.collapsed&&0===_e){for(;Et&&Et.parentNode&&Et.parentNode.firstChild===Et&&Et.parentNode!==Qe;)Et=Et.parentNode;"BLOCKQUOTE"===Et.tagName&&(t.formatter.toggle("blockquote",null,Et),mt=r.createRng(),mt.setStart(Lt,0),mt.setEnd(Lt,0),a.setRng(mt))}}),(()=>{const pt=Et=>{const Lt=r.create("body"),_e=Et.cloneContents();return Lt.appendChild(_e),a.serializer.serialize(Lt,{format:"html"})};t.on("keydown",Et=>{const Lt=Et.keyCode;let _e,Qe;if(!k(Et)&&(Lt===s||Lt===n)){if(_e=t.selection.isCollapsed(),Qe=t.getBody(),_e&&!r.isEmpty(Qe)||!_e&&!(Et=>{const Lt=pt(Et),_e=r.createRng();return _e.selectNode(t.getBody()),Lt===pt(_e)})(t.selection.getRng()))return;Et.preventDefault(),t.setContent(""),Qe.firstChild&&r.isBlock(Qe.firstChild)?t.selection.setCursorLocation(Qe.firstChild,0):t.selection.setCursorLocation(Qe,0),t.nodeChanged()}})})(),le.windowsPhone||t.on("keyup focusin mouseup",pt=>{yt.modifierPressed(pt)||a.normalize()},!0),y&&(R(),q(),t.on("init",()=>{E("DefaultParagraphSeparator",Gn(t))}),ye(),V(),f.addNodeFilter("br",pt=>{let mt=pt.length;for(;mt--;)"Apple-interchange-newline"===pt[mt].attr("class")&&pt[mt].remove()}),x?(ht(),lt(),Yt()):A()),g&&(t.on("keydown",pt=>{if(!k(pt)&&pt.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(a.isCollapsed()&&0===a.getRng().startOffset){const mt=a.getNode(),Et=mt.previousSibling;if("HR"===mt.nodeName)return r.remove(mt),void pt.preventDefault();Et&&Et.nodeName&&"hr"===Et.nodeName.toLowerCase()&&(r.remove(Et),pt.preventDefault())}}}),L(),(()=>{const pt=()=>{const Et=r.getAttribs(a.getStart().cloneNode(!1));return()=>{const Lt=a.getStart();Lt!==t.getBody()&&(r.setAttrib(Lt,"style",null),e(Et,_e=>{Lt.setAttributeNode(_e.cloneNode(!0))}))}},mt=()=>!a.isCollapsed()&&r.getParent(a.getStart(),r.isBlock)!==r.getParent(a.getEnd(),r.isBlock);t.on("keypress",Et=>{let Lt;if(!k(Et)&&(8===Et.keyCode||46===Et.keyCode)&&mt())return Lt=pt(),t.getDoc().execCommand("delete",!1,null),Lt(),Et.preventDefault(),!1}),r.bind(t.getDoc(),"cut",Et=>{let Lt;!k(Et)&&mt()&&(Lt=pt(),ws.setEditorTimeout(t,()=>{Lt()}))})})(),Y(),t.on("SetContent ExecCommand",mt=>{("setcontent"===mt.type||"mceInsertLink"===mt.command)&&e(r.select("a"),mt=>{let Et=mt.parentNode;const Lt=r.getRoot();if(Et.lastChild===mt){for(;Et&&!r.isBlock(Et);){if(Et.parentNode.lastChild!==Et||Et===Lt)return;Et=Et.parentNode}r.add(Et,"br",{"data-mce-bogus":1})}})}),St(),Xt(),V())),{refreshContentEditable:tt,isHidden:()=>{if(!g||t.removed)return!1;const pt=t.selection.getSel();return!pt||!pt.rangeCount||0===pt.rangeCount}}})(t),(t=>{t.dispatch("PostRender")})(t);const s=ME(t);void 0!==s&&(n.dir=s);const r=l1(t);r&&t.on("BeforeSetContent",a=>{W.each(r,f=>{a.content=a.content.replace(f,m=>"\x3c!--mce:protected "+escape(m)+"--\x3e")})}),t.on("SetContent",()=>{t.addVisual(t.getBody())}),t.on("compositionstart compositionend",a=>{t.composing="compositionstart"===a.type})})(t),a.fold(()=>{lk(t).then(()=>my(t))},f=>{t.setProgressState(!0),lk(t).then(()=>{f().then(m=>{t.setProgressState(!1),my(t),Iv(t)},m=>{t.notificationManager.open({type:"error",text:String(m)}),my(t),Iv(t)})})})},uk=(t,e)=>{if(t.inline||(t.getElement().style.visibility=t.orgVisibility),e||t.inline)ck(t);else{const n=t.iframeElement,s=((t,e,n)=>Em(t,"load",SL,n))(D_fromDom(n),0,()=>{s.unbind(),t.contentDocument=n.contentDocument,ck(t)});n.srcdoc=t.iframeHTML}},Hh=se.DOM,fk=se.DOM,dk=t=>({editorContainer:t,iframeContainer:t,api:{}}),rW=t=>{const e=t.getElement();return t.orgDisplay=e.style.display,At(ul(t))?(t=>t.theme.renderUI())(t):oe(ul(t))?(t=>{const e=t.getElement(),s=ul(t)(t,e);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||t.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||t.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:e.offsetHeight,s})(t):(t=>{const e=t.getElement();return t.inline?dk(null):(t=>{const e=fk.create("div");return fk.insertAfter(e,t),dk(e)})(e)})(t)},aW=t=>{t.dispatch("ScriptsLoaded"),(t=>{const e=W.trim(Qy(t)),n=t.ui.registry.getAll().icons,s=wt(wt({},hh.get("default").icons),hh.get(e).icons);ie(s,(r,a)=>{$t(n,a)||t.ui.registry.addIcon(a,r)})})(t),(t=>{const e=ul(t);if(At(e)){const n=aa.get(e);t.theme=n(t,aa.urls[e])||{},oe(t.theme.init)&&t.theme.init(t,aa.urls[e]||t.documentBaseUrl.replace(/\/$/,""))}else t.theme={}})(t),(t=>{const e=Tg(t),n=Sl.get(e);t.model=n(t,Sl.urls[e])})(t),(t=>{const e=[];Z(wd(t),n=>{((t,e,n)=>{const s=wl.get(n),r=wl.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=W.trim(n),s&&-1===W.inArray(e,n)){if(t.plugins[n])return;try{const a=s(t,r)||{};t.plugins[n]=a,oe(a.init)&&(a.init(t,r),e.push(n))}catch(a){((t,e,n)=>{const s=vs.translate(["Failed to initialize plugin: {0}",e]);nx(t,"PluginLoadError",{message:s}),gh(s,n),mh(t,s)})(t,n,a)}}})(t,e,(t=>t.replace(/^\-/,""))(n))})})(t);const e=rW(t);((t,e)=>{const n={show:S.from(e.show).getOr(Ft),hide:S.from(e.hide).getOr(Ft),isEnabled:S.from(e.isEnabled).getOr(Ne),setEnabled:s=>{t.mode.isReadOnly()||S.from(e.setEnabled).each(r=>r(s))}};t.ui=wt(wt({},t.ui),n)})(t,S.from(e.api).getOr({}));const n={editorContainer:e.editorContainer,iframeContainer:e.iframeContainer};return t.editorContainer=n.editorContainer?n.editorContainer:null,(t=>{t.contentCSS=t.contentCSS.concat((t=>Gv(t,NE(t)))(t),(t=>Gv(t,tC(t)))(t))})(t),t.inline?uk(t):((t,e)=>{((t,e)=>{const n=t.translate("Rich Text Area"),s=Fr(D_fromDom(t.getElement()),"tabindex").bind(Yu),r=((t,e,n,s)=>{const r=D_fromTag("iframe");return s.each(a=>de(r,"tabindex",a)),jn(r,n),jn(r,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:e}),wi(r,"tox-edit-area__iframe"),r})(t.id,n,mE(t),s).dom;r.onload=()=>{r.onload=null,t.dispatch("load")},t.contentAreaContainer=e.iframeContainer,t.iframeElement=r,t.iframeHTML=(t=>{let e=gE(t)+"<html><head>";Ky(t)!==t.documentBaseUrl&&(e+='<base href="'+t.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=pE(t),s=bE(t),r=t.translate(n1(t));return Yy(t)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+Yy(t)+'" />'),e+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${t.id}" aria-label="${r}"><br></body></html>`,e})(t),Hh.add(e.iframeContainer,r)})(t,e),e.editorContainer&&(Hh.get(e.editorContainer).style.display=t.orgDisplay,t.hidden=Hh.isHidden(e.editorContainer)),t.getElement().style.display="none",Hh.setAttrib(t.id,"aria-hidden","true"),uk(t)})(t,n)},ca=se.DOM,hk=t=>"-"===t.charAt(0),mk=(t,e,n)=>S.from(e).filter(s=>mn(s)&&!hh.has(s)).map(s=>({url:`${t.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:S.some(s)})),pW=(t,e)=>{const n=Gs.ScriptLoader,s=()=>{!t.removed&&(t=>{const e=ul(t);return!At(e)||Mt(aa.get(e))})(t)&&(t=>{const e=Tg(t);return Mt(Sl.get(e))})(t)&&aW(t)};((t,e)=>{const n=ul(t);if(At(n)&&!hk(n)&&!$t(aa.urls,n)){const s=$E(t),r=s?t.documentBaseURI.toAbsolute(s):`themes/${n}/theme${e}.js`;aa.load(n,r).catch(()=>{((t,e,n)=>{Cu(t,"ThemeLoadError",xu("theme",e,n))})(t,r,n)})}})(t,e),((t,e)=>{const n=Tg(t);if("plugin"!==n&&!$t(Sl.urls,n)){const s=zE(t),r=At(s)?t.documentBaseURI.toAbsolute(s):`models/${n}/model${e}.js`;Sl.load(n,r).catch(()=>{((t,e,n)=>{Cu(t,"ModelLoadError",xu("model",e,n))})(t,r,n)})}})(t,e),((t,e)=>{const n=Zy(e),s=PE(e);if(!1===vs.hasCode(n)&&"en"!==n){const r=mn(s)?s:`${e.editorManager.baseURL}/langs/${n}.js`;t.add(r).catch(()=>{((t,e,n)=>{Cu(t,"LanguageLoadError",xu("language",e,n))})(e,r,n)})}})(n,t),((t,e,n)=>{const s=mk(e,"default",n),r=(t=>S.from(wE(t)).filter(mn).map(e=>({url:e,name:S.none()})))(e).orThunk(()=>mk(e,Qy(e),""));Z((t=>{const e=[],n=s=>{e.push(s)};for(let s=0;s<t.length;s++)t[s].each(n);return e})([s,r]),a=>{t.add(a.url).catch(()=>{((t,e,n)=>{Cu(t,"IconsLoadError",xu("icons",e,n))})(e,a.url,a.name.getOrUndefined())})})})(n,t,e),((t,e)=>{const n=(s,r)=>{wl.load(s,r).catch(()=>{((t,e,n)=>{Cu(t,"PluginLoadError",xu("plugin",e,n))})(t,r,s)})};ie(ZE(t),(s,r)=>{n(r,s),t.options.set("plugins",wd(t).concat(r))}),Z(wd(t),s=>{(s=W.trim(s))&&!wl.urls[s]&&!hk(s)&&n(s,`plugins/${s}/plugin${e}.js`)})})(t,e),n.loadQueue().then(s,s)},gk=ss().deviceType,pk=gk.isPhone(),xW=gk.isTablet(),Nu=t=>{if(An(t))return[];{const e=Fe(t)?t:t.split(/[ ,]/),n=Kt(e,Un);return dt(n,mn)}},gy=(t,e)=>$t(t.sections(),e),wW=(t,e)=>{const n={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ce(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1};return wt(wt({},n),e?{menubar:!1}:{})},kW=(t,e)=>{var n;const s=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?W.extend({},t.external_plugins,s):s},PW=(t,e,n,s,r)=>{var a;const f=t?{mobile:wW(null!==(a=r.mobile)&&void 0!==a?a:{},e)}:{},m=((t,e)=>{const n=((t,e)=>{const n={},s={};return _a(t,e,hs(n),hs(s)),{t:n,f:s}})(e,(s,r)=>ke(t,r));return((t,e)=>({sections:st(t),options:st(e)}))(n.t,n.f)})(["mobile"],Eh(f,r)),g=W.extend(n,s,m.options(),((t,e)=>t&&gy(e,"mobile"))(t,m)?((t,e,n={})=>{const s=t.sections(),r=ce(s,e).getOr({});return W.extend({},n,r)})(m,"mobile"):{},{external_plugins:kW(s,m.options())});return((t,e,n,s)=>{const r=Nu(n.forced_plugins),a=Nu(s.plugins),f=((t,e)=>gy(t,e)?t.sections()[e]:{})(e,"mobile"),g=((t,e,n,s)=>t&&gy(e,"mobile")?s:n)(t,e,a,f.plugins?Nu(f.plugins):a),y=((t,e)=>[].concat(Nu(t)).concat(Nu(e)))(r,g);return W.extend(s,{forced_plugins:r,plugins:y})})(t,m,s,g)},BW=t=>{(t=>{const n=s=>()=>{Z("left,center,right,justify".split(","),r=>{s!==r&&t.formatter.remove("align"+r)}),"none"!==s&&((s,r)=>{t.formatter.toggle(s,void 0),t.nodeChanged()})("align"+s)};t.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(t=>{const e=n=>()=>{const s=t.selection,r=s.isCollapsed()?[t.dom.getParent(s.getNode(),t.dom.isBlock)]:s.getSelectedBlocks();return Me(r,a=>Mt(t.formatter.matchNode(a,n)))};t.editorCommands.addCommands({JustifyLeft:e("alignleft"),JustifyCenter:e("aligncenter"),JustifyRight:e("alignright"),JustifyFull:e("alignjustify")},"state")})(t)},$W=(t,e)=>{const n=t.selection,s=t.dom;return/^ | $/.test(e)?((t,e,n)=>{const s=D_fromDom(t.getRoot());return n=qd(s,F.fromRangeStart(e))?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),Kd(s,F.fromRangeEnd(e))?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(s,n.getRng(),e):e},Vh=(t,e)=>{const{content:n,details:s}=(t=>{if("string"!=typeof t){const e=W.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:e}}return{content:t,details:{}}})(e);ob(t,{content:$W(t,n),format:"html",set:!1,selection:!0,paste:s.paste}).each(r=>{const a=((t,e,n)=>db(t).editor.insertContent(e,n))(t,r.content,s);rb(t,a,r),t.addVisual()})},HW={"font-size":"size","font-family":"face"},bk=t=>(e,n)=>S.from(n).map(D_fromDom).filter(rs).bind(s=>((t,e,n)=>Fp(D_fromDom(n),a=>(a=>La(a,t).orThunk(()=>"font"===Ce(a)?ce(HW,t).bind(f=>Fr(a,f)):S.none()))(a),a=>ee(D_fromDom(e),a)))(t,e,s.dom).or(((t,e)=>S.from(se.DOM.getStyle(e,t,!0)))(t,s.dom))).getOr(""),jW=bk("font-size"),qW=zs(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),bk("font-family")),KW=t=>On(t.getBody()).map(e=>{const n=e.container();return rt(n)?n.parentNode:n}),py=(t,e)=>((t,e)=>(t=>S.from(t.selection.getRng()).bind(e=>{const n=t.getBody();return e.startContainer===n&&0===e.startOffset?S.none():S.from(t.selection.getStart(!0))}))(t).orThunk(ut(KW,t)).map(D_fromDom).filter(rs).bind(e))(t,ya(S.some,e)),yk=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const s=(t=>W.explode(t.options.get("font_size_style_values")))(t),r=(t=>W.explode(t.options.get("font_size_classes")))(t);return r?r[n-1]||e:s[n-1]||e}return e}return e},XW=t=>{const e=t.split(/\s*,\s*/);return Kt(e,n=>-1===n.indexOf(" ")||Vn(n,'"')||Vn(n,"'")?n:`'${n}'`).join(",")},g5=t=>{BW(t),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":e=>{const n=t.getDoc();let s;try{n.execCommand(e)}catch(r){s=!0}if("paste"===e&&!n.queryCommandEnabled(e)&&(s=!0),s||!n.queryCommandSupported(e)){let r=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(le.os.isMacOS()||le.os.isiOS())&&(r=r.replace(/Ctrl\+/g,"\u2318+")),t.notificationManager.open({text:r,type:"error"})}}})})(t),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(t),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(e,n,s)=>{let r=0;t.dom.getParent(t.selection.getNode(),a=>{if(1===a.nodeType&&r++===s)return t.selection.select(a),!1},t.getBody())},mceSelectNode:(e,n,s)=>{t.selection.select(s)},selectAll:()=>{const e=t.dom.getParent(t.selection.getStart(),qs);if(e){const n=t.dom.createRng();n.selectNodeContents(e),t.selection.setRng(n)}}})})(t),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const e=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(e)},insertImage:(e,n,s)=>{Vh(t,t.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(e,n,s)=>{Vh(t,t.dom.encode(s))},insertHTML:(e,n,s)=>{Vh(t,s)},mceInsertContent:(e,n,s)=>{Vh(t,s)},mceSetContent:(e,n,s)=>{t.setContent(s)},mceReplaceContent:(e,n,s)=>{t.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent("")}})})(t),(t=>{const e=(n,s,r)=>{const a=At(r)?{href:r}:r,f=t.dom.getParent(t.selection.getNode(),"a");tn(a)&&At(a.href)&&(a.href=a.href.replace(/ /g,"%20"),(!f||!a.href)&&t.formatter.remove("link"),a.href&&t.formatter.apply("link",a,f))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isCollapsed()){const n=t.dom.getParent(t.selection.getStart(),"a");n&&t.dom.remove(n,!0)}else t.formatter.remove("link")},mceInsertLink:e,createLink:e})})(t),(t=>{t.editorCommands.addCommands({Indent:()=>{(t=>{eS(t,"indent")})(t)},Outdent:()=>{nS(t)}}),t.editorCommands.addCommands({Outdent:()=>Z_(t)},"state")})(t),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{ty(t)},mceInsertNewLine:(e,n,s)=>{ty(t,s)},InsertLineBreak:(e,n,s)=>{mw(t,s)}})})(t),(t=>{(t=>{t.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{t.getDoc().execCommand(e);const n=t.dom.getParent(t.selection.getNode(),"ol,ul");if(n){const s=n.parentNode;if(/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const r=t.selection.getBookmark();t.dom.split(s,n),t.selection.moveToBookmark(r)}}}})})(t),(t=>{t.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":e=>{const n=t.dom.getParent(t.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===e&&"UL"===n.tagName||"insertorderedlist"===e&&"OL"===n.tagName)}},"state")})(t)})(t),(t=>{(t=>{const e=(n,s)=>{t.formatter.toggle(n,s),t.nodeChanged()};t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{e(n)},"ForeColor,HiliteColor":(n,s,r)=>{e(n,{value:r})},BackColor:(n,s,r)=>{e("hilitecolor",{value:r})},FontName:(n,s,r)=>{((t,e)=>{const n=yk(t,e);t.formatter.toggle("fontname",{value:XW(n)}),t.nodeChanged()})(t,r)},FontSize:(n,s,r)=>{((t,e)=>{t.formatter.toggle("fontsize",{value:yk(t,e)}),t.nodeChanged()})(t,r)},LineHeight:(n,s,r)=>{((t,e)=>{t.formatter.toggle("lineheight",{value:String(e)}),t.nodeChanged()})(t,r)},Lang:(n,s,r)=>{e(n,{value:r.code,customValue:r.customCode})},RemoveFormat:n=>{t.formatter.remove(n)},mceBlockQuote:()=>{e("blockquote")},FormatBlock:(n,s,r)=>{e(At(r)?r:"p")},mceToggleFormat:(n,s,r)=>{e(r)}})})(t),(t=>{const e=n=>t.formatter.match(n);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>e(n),mceBlockQuote:()=>e("blockquote")},"state"),t.editorCommands.addQueryValueHandler("FontName",()=>(t=>py(t,e=>qW(t.getBody(),e.dom)).getOr(""))(t)),t.editorCommands.addQueryValueHandler("FontSize",()=>(t=>py(t,e=>jW(t.getBody(),e.dom)).getOr(""))(t)),t.editorCommands.addQueryValueHandler("LineHeight",()=>(t=>py(t,e=>{const n=D_fromDom(t.getBody());return Fp(e,a=>La(a,"line-height"),ut(ee,n)).getOrThunk(()=>{const a=parseFloat(Os(e,"line-height")),f=parseFloat(Os(e,"font-size"));return String(a/f)})}).getOr(""))(t))})(t)})(t),(t=>{t.editorCommands.addCommands({mceRemoveNode:(e,n,s)=>{const r=null!=s?s:t.selection.getNode();if(r!==t.getBody()){const a=t.selection.getBookmark();t.dom.remove(r,!0),t.selection.moveToBookmark(a)}},mcePrint:()=>{t.getWin().print()},mceFocus:(e,n,s)=>{((t,e)=>{t.removed||(e?fp(t):(t=>{const e=t.selection,n=t.getBody();let s=e.getRng();t.quirks.refreshContentEditable(),void 0!==t.bookmark&&!1===ea(t)&&lp(t).each(a=>{t.selection.setRng(a),s=a});const r=((t,e)=>t.dom.getParent(e,n=>"true"===t.dom.getContentEditable(n)))(t,e.getNode());if(t.dom.isChildOf(r,n))return up(r),Dx(t,s),void fp(t);t.inline||(le.browser.isOpera()||up(n),t.getWin().focus()),(le.browser.isFirefox()||t.inline)&&(up(n),Dx(t,s)),fp(t)})(t))})(t,s)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(t)};class Ck{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n,s,r){const a=this.editor,f=e.toLowerCase(),m=null==r?void 0:r.skip_focus;if(a.removed||("mcefocus"!==f&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(f)||m?(t=>{lp(t).each(e=>t.selection.setRng(e))})(a):a.focus()),a.dispatch("BeforeExecCommand",{command:e,ui:n,value:s}).isDefaultPrevented()))return!1;const y=this.commands.exec[f];return!!oe(y)&&(y(f,n,s),a.dispatch("ExecCommand",{command:e,ui:n,value:s}),!0)}queryCommandState(e){if(this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),s=this.commands.state[n];return!!oe(s)&&s(n)}queryCommandValue(e){if(this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),s=this.commands.value[n];return oe(s)?s(n):""}addCommands(e,n="exec"){const s=this.commands;ie(e,(r,a)=>{Z(a.toLowerCase().split(","),f=>{s[n][f]=r})})}addCommand(e,n,s){const r=e.toLowerCase();this.commands.exec[r]=(a,f,m)=>n.call(null!=s?s:this.editor,f,m)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,s){this.commands.state[e.toLowerCase()]=()=>n.call(null!=s?s:this.editor)}addQueryValueHandler(e,n,s){this.commands.value[e.toLowerCase()]=()=>n.call(null!=s?s:this.editor)}}const ua="data-mce-contenteditable",by=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch(s){}},Uh=(t,e)=>{t.dom.contentEditable=e?"true":"false"},v5=(t,e)=>{const n=D_fromDom(t.getBody());((t,e,n)=>{ac(t,e)&&!1===n?ic(t,e):n&&wi(t,e)})(n,"mce-content-readonly",e),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(t=>{S.from(t.selection.getNode()).each(e=>{e.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Uh(n,!1),(t=>{Z(yn(t,'*[contenteditable="true"]'),e=>{de(e,ua,"true"),Uh(e,!1)})})(n)):(t.readonly=!1,Uh(n,!0),(t=>{Z(yn(t,`*[${ua}="true"]`),e=>{Rn(e,ua),Uh(e,!0)})})(n),by(t,"StyleWithCSS",!1),by(t,"enableInlineTableEditing",!1),by(t,"enableObjectResizing",!1),(t=>ea(t)||(t=>{const e=Ko(D_fromDom(t.getElement()));return ip(e).filter(n=>!(t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))})(n.dom)&&Ud(t,n.dom)).isSome()})(t))(t)&&t.focus(),(t=>{t.selection.setRng(t.selection.getRng())})(t),t.nodeChanged())},fa=t=>t.readonly,xk=t=>{t.parser.addAttributeFilter("contenteditable",e=>{fa(t)&&Z(e,n=>{n.attr(ua,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(ua,e=>{fa(t)&&Z(e,n=>{n.attr("contenteditable",n.attr(ua))})}),t.serializer.addTempAttr(ua)},A5=W.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class yy{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||xe}static isNative(e){return!!A5[e.toLowerCase()]}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const s=e.toLowerCase(),r=sl(s,null!=n?n:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const a=this.bindings[s];if(a)for(let f=0,m=a.length;f<m;f++){const g=a[f];if(!g.removed){if(g.once&&this.off(s,g.func),r.isImmediatePropagationStopped())return r;if(!1===g.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,s,r){if(!1===n&&(n=xe),n){const a={func:n,removed:!1};r&&W.extend(a,r);const f=e.toLowerCase().split(" ");let m=f.length;for(;m--;){const g=f[m];let y=this.bindings[g];y||(y=[],this.toggleEvent(g,!0)),y=s?[a,...y]:[...y,a],this.bindings[g]=y}}return this}off(e,n){if(e){const s=e.toLowerCase().split(" ");let r=s.length;for(;r--;){const a=s[r];let f=this.bindings[a];if(!a)return ie(this.bindings,(m,g)=>{this.toggleEvent(g,!1),delete this.bindings[g]}),this;if(f){if(n){const m=vr(f,g=>g.func===n);f=m.fail,this.bindings[a]=f,Z(m.pass,g=>{g.removed=!0})}else f.length=0;f.length||(this.toggleEvent(e,!1),delete this.bindings[a])}}}else ie(this.bindings,(s,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,s){return this.on(e,n,s,{once:!0})}has(e){return e=e.toLowerCase(),!(!this.bindings[e]||0===this.bindings[e].length)}}const Ou=t=>(t._eventDispatcher||(t._eventDispatcher=new yy({scope:t,toggleEvent:(e,n)=>{yy.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),Cy={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const s=this;if(s.removed&&"remove"!==t&&"detach"!==t)return sl(t.toLowerCase(),null!=e?e:{},s);const r=Ou(s).dispatch(t,e);if(!1!==n&&s.parent){let a=s.parent();for(;a&&!r.isPropagationStopped();)a.dispatch(t,r,!1),a=a.parent()}return r},on(t,e,n){return Ou(this).on(t,e,n)},off(t,e){return Ou(this).off(t,e)},once(t,e){return Ou(this).once(t,e)},hasEventListeners(t){return Ou(this).has(t)}},Wh=se.DOM;let da;const jh=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(e))return t.getDoc().documentElement;const n=nC(t);return n?(t.eventRoot||(t.eventRoot=Wh.select(n)[0]),t.eventRoot):t.getBody()},vk=(t,e,n)=>{(t=>!t.hidden&&!fa(t))(t)?t.dispatch(e,n):fa(t)&&((t,e)=>{if((t=>"click"===t.type)(e)&&!yt.metaKeyPressed(e)){const n=D_fromDom(e.target);((t,e)=>Qo(e,"a",s=>ee(s,D_fromDom(t.getBody()))).bind(s=>Fr(s,"href")))(t,n).each(s=>{if(e.preventDefault(),/^#/.test(s)){const r=t.dom.select(`${s},[name="${((t,e)=>Vn(t,"#")?((t,e)=>t.substring("#".length))(t):t)(s)}"]`);r.length&&t.selection.scrollIntoView(r[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}})(t,n)},_k=(t,e)=>{let n;if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const s=jh(t,e);if(nC(t)){if(da||(da={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||da&&(ie(da,(r,a)=>{t.dom.unbind(jh(t,a))}),da=null)})),da[e])return;n=r=>{const a=r.target,f=t.editorManager.get();let m=f.length;for(;m--;){const g=f[m].getBody();(g===a||Wh.isChildOf(a,g))&&vk(f[m],e,r)}},da[e]=n,Wh.bind(s,e,n)}else n=r=>{vk(t,e,r)},Wh.bind(s,e,n),t.delegates[e]=n},Sk=he(wt({},Cy),{bindPendingEventDelegates(){const t=this;W.each(t._pendingNativeEvents,e=>{_k(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"===t||"blur"===t||n.removed||(e?n.initialized?_k(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&(n.dom.unbind(jh(n,t),t,n.delegates[t]),delete n.delegates[t]))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(ie(t.delegates,(s,r)=>{t.dom.unbind(jh(t,r),r,s)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}}),R5=t=>At(t)?{value:t.split(/[ ,]/),valid:!0}:yr(t,At)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},wk=(t,e)=>t+(ho(e.message)?"":`. ${e.message}`),kk=t=>t.valid,xy=(t,e,n="")=>{const s=e(t);return fi(s)?s?{value:t,valid:!0}:{valid:!1,message:n}:s},M5=["design","readonly"],Ek=(t,e,n,s)=>{const r=n[e.get()],a=n[s];try{a.activate()}catch(f){return void console.error(`problem while activating editor mode ${s}:`,f)}r.deactivate(),r.editorReadOnly!==a.editorReadOnly&&v5(t,a.editorReadOnly),e.set(s),((t,e)=>{t.dispatch("SwitchMode",{mode:e})})(t,s)},vy=W.each,_y=W.explode,F5={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Ak=W.makeMap("alt,ctrl,shift,meta,access"),$5=t=>{let e;const n={},s=le.os.isMacOS()||le.os.isiOS();vy(_y(t.toLowerCase(),"+"),a=>{a in Ak?n[a]=!0:/^[0-9]{2,}$/.test(a)?n.keyCode=parseInt(a,10):(n.charCode=a.charCodeAt(0),n.keyCode=F5[a]||a.toUpperCase().charCodeAt(0))});const r=[n.keyCode];for(e in Ak)n[e]?r.push(e):n[e]=!1;return n.id=r.join(","),n.access&&(n.alt=!0,s?n.ctrl=!0:n.shift=!0),n.meta&&(s?n.meta=!0:(n.ctrl=!0,n.meta=!1)),n};class Tk{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(vy(n.shortcuts,r=>{if(n.matchShortcut(s,r))return n.pendingPatterns=r.subpatterns.slice(0),"keydown"===s.type&&n.executeShortcutAction(r),!0}),n.matchShortcut(s,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===s.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,s,r){const a=this,f=a.normalizeCommandFunc(s);return vy(_y(W.trim(e)),m=>{const g=a.createShortcut(m,n,f,r);a.shortcuts[g.id]=g}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,s=e;return"string"==typeof s?()=>{n.editor.execCommand(s,!1,null)}:W.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(e,n,s,r){const a=W.map(_y(e,">"),$5);return a[a.length-1]=W.extend(a[a.length-1],{func:s,scope:r||this.editor}),W.extend(a[0],{desc:this.editor.translate(n),subpatterns:a.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!(!n||n.ctrl!==e.ctrlKey||n.meta!==e.metaKey||n.alt!==e.altKey||n.shift!==e.shiftKey||!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)||(e.preventDefault(),0))}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const H5=()=>{const t=(()=>{const t={},e={},n={},s={},r={},a={},f={},m=(y,x)=>(_,E)=>y[_.toLowerCase()]=he(wt({},E),{type:x});return{addButton:m(t,"button"),addGroupToolbarButton:m(t,"grouptoolbarbutton"),addToggleButton:m(t,"togglebutton"),addMenuButton:m(t,"menubutton"),addSplitButton:m(t,"splitbutton"),addMenuItem:m(e,"menuitem"),addNestedMenuItem:m(e,"nestedmenuitem"),addToggleMenuItem:m(e,"togglemenuitem"),addAutocompleter:m(n,"autocompleter"),addContextMenu:m(r,"contextmenu"),addContextToolbar:m(a,"contexttoolbar"),addContextForm:m(a,"contextform"),addSidebar:m(f,"sidebar"),addIcon:(y,x)=>s[y.toLowerCase()]=x,getAll:()=>({buttons:t,menuItems:e,icons:s,popups:n,contextMenus:r,contextToolbars:a,sidebars:f})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,getAll:t.getAll}},ha=se.DOM,Rk=W.extend,V5=W.each;class qh{constructor(e,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Rk(this,Sk);const r=this;this.id=e,this.hidden=!1;const a=((t,e)=>PW(pk||xW,pk,e,t,e))(s.defaultOptions,n);this.options=((t,e)=>{const n={},s={},r=(_,E,k)=>{const P=xy(E,k);return kk(P)?(s[_]=P.value,!0):(console.warn(wk(`Invalid value passed for the ${_} option`,P)),!1)},f=_=>$t(n,_);return{register:(_,E)=>{const k=(t=>At(t.processor))(E)?(t=>{const e=(()=>{switch(t){case"array":return Fe;case"boolean":return fi;case"function":return oe;case"number":return Ts;case"object":return tn;case"string":return At;case"string[]":return R5;case"object[]":return n=>yr(n,tn);case"regexp":return n=>co(n,RegExp)}})();return n=>xy(n,e,`The value must be a ${t}.`)})(E.processor):E.processor,P=((t,e,n)=>{if(!_n(e)){const s=xy(e,n);if(kk(s))return s.value;console.error(wk(`Invalid default value passed for the "${t}" option`,s))}})(_,E.default,k);n[_]=he(wt({},E),{default:P,processor:k}),ce(s,_).orThunk(()=>ce(e,_)).each(R=>r(_,R,k))},isRegistered:f,get:_=>ce(s,_).orThunk(()=>ce(n,_).map(E=>E.default)).getOrUndefined(),set:(_,E)=>{if(f(_)){const k=n[_];return k.immutable?(console.error(`"${_}" is an immutable option and cannot be updated`),!1):r(_,E,k.processor)}return console.warn(`"${_}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:_=>{const E=f(_);return E&&delete s[_],E},isSet:_=>$t(s,_)}})(0,a),(t=>{const e=t.options.register;e("id",{processor:"string",default:t.id}),e("selector",{processor:"string"}),e("target",{processor:"object"}),e("suffix",{processor:"string"}),e("cache_suffix",{processor:"string"}),e("base_url",{processor:"string"}),e("referrer_policy",{processor:"string",default:""}),e("language_load",{processor:"boolean"}),e("inline",{processor:"boolean",default:!1}),e("iframe_attrs",{processor:"object",default:{}}),e("doctype",{processor:"string",default:"<!DOCTYPE html>"}),e("document_base_url",{processor:"string",default:t.documentBaseUrl}),e("body_id",{processor:qy(t,"tinymce"),default:"tinymce"}),e("body_class",{processor:qy(t),default:""}),e("content_security_policy",{processor:"string",default:""}),e("br_in_pre",{processor:"boolean",default:!0}),e("forced_root_block",{processor:n=>{const s=At(n)&&mn(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),e("forced_root_block_attrs",{processor:"object",default:{}}),e("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),e("no_newline_selector",{processor:"string",default:""}),e("keep_styles",{processor:"boolean",default:!0}),e("end_container_on_empty_block",{processor:"boolean",default:!1}),e("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),e("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),e("font_size_classes",{processor:"string",default:""}),e("automatic_uploads",{processor:"boolean",default:!0}),e("images_reuse_filename",{processor:"boolean",default:!1}),e("images_replace_blob_uris",{processor:"boolean",default:!0}),e("icons",{processor:"string",default:""}),e("icons_url",{processor:"string",default:""}),e("images_upload_url",{processor:"string",default:""}),e("images_upload_base_path",{processor:"string",default:""}),e("images_upload_base_path",{processor:"string",default:""}),e("images_upload_credentials",{processor:"boolean",default:!1}),e("images_upload_handler",{processor:"function"}),e("language",{processor:"string",default:"en"}),e("language_url",{processor:"string",default:""}),e("entity_encoding",{processor:"string",default:"named"}),e("indent",{processor:"boolean",default:!0}),e("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),e("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),e("indent_use_margin",{processor:"boolean",default:!1}),e("indentation",{processor:"string",default:"40px"}),e("content_css",{processor:n=>{const s=!1===n||At(n)||yr(n,At);return s?At(n)?{value:Kt(n.split(","),Un),valid:s}:Fe(n)?{value:n,valid:s}:!1===n?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Rg(t)?[]:["default"]}),e("content_style",{processor:"string"}),e("content_css_cors",{processor:"boolean",default:!1}),e("font_css",{processor:n=>{const s=At(n)||yr(n,At);return s?{value:Fe(n)?n:Kt(n.split(","),Un),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),e("inline_boundaries",{processor:"boolean",default:!0}),e("inline_boundaries_selector",{processor:"string",default:"a[href],code,.mce-annotation"}),e("object_resizing",{processor:n=>{const s=fi(n)||At(n);return s?!1===n||kg.isiPhone()||kg.isiPad()?{value:"",valid:s}:{value:!0===n?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!uE}),e("resize_img_proportional",{processor:"boolean",default:!0}),e("event_root",{processor:"object"}),e("service_message",{processor:"string"}),e("theme",{processor:n=>!1===n||At(n)||oe(n),default:"silver"}),e("theme_url",{processor:"string"}),e("formats",{processor:"object"}),e("format_empty_lines",{processor:"boolean",default:!1}),e("preview_styles",{processor:n=>{const s=!1===n||At(n);return s?{value:!1===n?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),e("custom_ui_selector",{processor:"string",default:""}),e("hidden_input",{processor:"boolean",default:!0}),e("submit_patch",{processor:"boolean",default:!0}),e("encoding",{processor:"string"}),e("add_form_submit_trigger",{processor:"boolean",default:!0}),e("add_unload_trigger",{processor:"boolean",default:!0}),e("custom_undo_redo_levels",{processor:"number",default:0}),e("disable_nodechange",{processor:"boolean",default:!1}),e("readonly",{processor:"boolean",default:!1}),e("plugins",{processor:"string[]",default:[]}),e("external_plugins",{processor:"object"}),e("forced_plugins",{processor:"string[]"}),e("model",{processor:"string",default:t.hasPlugin("rtc")?"plugin":"dom"}),e("model_url",{processor:"string"}),e("block_unsupported_drop",{processor:"boolean",default:!0}),e("visual",{processor:"boolean",default:!0}),e("visual_table_class",{processor:"string",default:"mce-item-table"}),e("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),e("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),e("setup",{processor:"function"}),e("init_instance_callback",{processor:"function"}),e("url_converter",{processor:"function",default:t.convertURL}),e("url_converter_scope",{processor:"object",default:t}),e("urlconverter_callback",{processor:"function"}),e("allow_conditional_comments",{processor:"boolean",default:!1}),e("allow_html_data_urls",{processor:"boolean",default:!1}),e("allow_svg_data_urls",{processor:"boolean"}),e("allow_html_in_named_anchor",{processor:"boolean",default:!1}),e("allow_script_urls",{processor:"boolean",default:!1}),e("allow_unsafe_link_target",{processor:"boolean",default:!1}),e("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),e("fix_list_elements",{processor:"boolean",default:!1}),e("preserve_cdata",{processor:"boolean",default:!1}),e("remove_trailing_brs",{processor:"boolean"}),e("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),e("element_format",{processor:"string",default:"html"}),e("entities",{processor:"string"}),e("schema",{processor:"string",default:"html5"}),e("convert_urls",{processor:"boolean",default:!0}),e("relative_urls",{processor:"boolean",default:!0}),e("remove_script_host",{processor:"boolean",default:!0}),e("custom_elements",{processor:"string"}),e("extended_valid_elements",{processor:"string"}),e("invalid_elements",{processor:"string"}),e("invalid_styles",{processor:Eg}),e("valid_children",{processor:"string"}),e("valid_classes",{processor:Eg}),e("valid_elements",{processor:"string"}),e("valid_styles",{processor:Eg}),e("verify_html",{processor:"boolean",default:!0}),e("auto_focus",{processor:n=>At(n)||!0===n}),e("browser_spellcheck",{processor:"boolean",default:!1}),e("protect",{processor:"array"}),e("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),e("deprecation_warnings",{processor:"boolean",default:!0}),e("a11y_advanced_options",{processor:"boolean",default:!1}),e("api_key",{processor:"string"}),e("paste_block_drop",{processor:"boolean",default:!1}),e("paste_data_images",{processor:"boolean",default:!0}),e("paste_preprocess",{processor:"function"}),e("paste_postprocess",{processor:"function"}),e("paste_webkit_styles",{processor:"string",default:"none"}),e("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),e("paste_merge_formats",{processor:"boolean",default:!0}),e("smart_paste",{processor:"boolean",default:!0}),e("paste_as_text",{processor:"boolean",default:!1}),e("paste_tab_spaces",{processor:"number",default:4}),e("text_patterns",{processor:n=>yr(n,tn)||!1===n?{value:cE(!1===n?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),e("noneditable_class",{processor:"string",default:"mceNonEditable"}),e("editable_class",{processor:"string",default:"mceEditable"}),e("noneditable_regexp",{processor:n=>yr(n,jy)?{value:n,valid:!0}:jy(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),e("table_tab_navigation",{processor:"boolean",default:!0}),t.on("ScriptsLoaded",()=>{e("directionality",{processor:"string",default:vs.isRtl()?"rtl":void 0}),e("placeholder",{processor:"string",default:fE.getAttrib(t.getElement(),"placeholder")})})})(r);const f=this.options.get;f("deprecation_warnings")&&((t,e)=>{((t,e)=>{const n=(t=>{const e=dt(UB,s=>$t(t,s)),n=t.forced_root_block;return(!1===n||""===n)&&e.push("forced_root_block (false only)"),Sr(e)})(t),s=(t=>{const e=W.makeMap(t.plugins," "),s=dt(WB,r=>$t(e,r));return Sr(s)})(e),r=s.length>0,a=n.length>0,f="mobile"===e.theme;if(r||a||f){const m="\n- ",g=f?`\n\nThemes:${m}mobile`:"",y=r?`\n\nPlugins:${m}${s.join(m)}`:"",x=a?`\n\nOptions:${m}${n.join(m)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+g+y+x)}})(t,e)})(n,a);const m=f("suffix");m&&(s.suffix=m),this.suffix=s.suffix;const g=f("base_url");g&&s._setBaseUrl(g),this.baseUri=s.baseURI;const y=Ag(r);y&&(Gs.ScriptLoader._setReferrerPolicy(y),se.DOM.styleSheetLoader._setReferrerPolicy(y)),un.languageLoad=f("language_load"),un.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new to(Ky(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Rg(r),this.shortcuts=new Tk(this),this.editorCommands=new Ck(this),g5(this);const x=f("cache_suffix");x&&(le.cacheSuffix=x.replace(/^[\?\&]+/,"")),this.ui={registry:H5(),styleSheetLoader:void 0,show:Ft,hide:Ft,setEnabled:Ft,isEnabled:Ne},this.mode=(t=>{const e=Ve("design"),n=Ve({design:{activate:Ft,deactivate:Ft,editorReadOnly:!1},readonly:{activate:Ft,deactivate:Ft,editorReadOnly:!0}});return(t=>{t.serializer?xk(t):t.on("PreInit",()=>{xk(t)})})(t),(t=>{t.on("ShowCaret",e=>{fa(t)&&e.preventDefault()}),t.on("ObjectSelected",e=>{fa(t)&&e.preventDefault()})})(t),{isReadOnly:()=>fa(t),set:s=>((t,e,n,s)=>{if(s!==n.get()){if(!$t(e,s))throw new Error(`Editor mode '${s}' is invalid`);t.initialized?Ek(t,n,e,s):t.on("init",()=>Ek(t,n,e,s))}})(t,n.get(),e,s),get:()=>e.get(),register:(s,r)=>{n.set(((t,e,n)=>{if(ke(M5,e))throw new Error(`Cannot override default mode ${e}`);return he(wt({},t),{[e]:he(wt({},n),{deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${e}:`,s)}}})})})(n.get(),s,r))}}})(r),s.dispatch("SetupEditor",{editor:this});const _=s1(r);oe(_)&&_.call(r,r)}render(){(t=>{const e=t.id;vs.setCode(Zy(t));const n=()=>{ca.unbind(window,"ready",n),t.render()};if(!wo.Event.domLoaded)return void ca.bind(window,"ready",n);if(!t.getElement())return;const s=D_fromDom(t.getElement()),r=lf(s);t.on("remove",()=>{us(s.dom.attributes,f=>Rn(s,f.name)),jn(s,r)}),t.ui.styleSheetLoader=((t,e)=>Vf.forElement(t,{contentCssCors:QE(e),referrerPolicy:Ag(e)}))(s,t),Rg(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const a=t.getElement().form||ca.getParent(e,"form");a&&(t.formElement=a,jE(t)&&!wc(t.getElement())&&(ca.insertAfter(ca.create("input",{type:"hidden",name:e}),e),t.hasHiddenInput=!0),t.formEventDelegate=f=>{t.dispatch(f.type,f)},ca.bind(a,"submit reset",t.formEventDelegate),t.on("reset",()=>{t.resetContent()}),qE(t)&&!a.submit.nodeType&&!a.submit.length&&!a._mceOldSubmit&&(a._mceOldSubmit=a.submit,a.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),a._mceOldSubmit(a)))),t.windowManager=Kv(t),t.notificationManager=qv(t),(t=>"xml"===t.options.get("encoding"))(t)&&t.on("GetContent",f=>{f.save&&(f.content=ca.encode(f.content))}),KE(t)&&t.on("submit",()=>{t.initialized&&t.save()}),YE(t)&&(t._beforeUnload=()=>{t.initialized&&!t.destroyed&&!t.isHidden()&&t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),pW(t,t.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return ea(this)}translate(e){return vs.translate(e)}getParam(e,n,s){const r=this.options;return r.isRegistered(e)||(Mt(s)?r.register(e,{processor:s,default:n}):r.register(e,{processor:Ne,default:n})),r.isSet(e)||_n(n)?r.get(e):n}hasPlugin(e,n){return!(!ke(wd(this),e)||n&&void 0===wl.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,s){this.editorCommands.addCommand(e,n,s)}addQueryStateHandler(e,n,s){this.editorCommands.addQueryStateHandler(e,n,s)}addQueryValueHandler(e,n,s){this.editorCommands.addQueryValueHandler(e,n,s)}addShortcut(e,n,s,r){this.shortcuts.add(e,n,s,r)}execCommand(e,n,s,r){return this.editorCommands.execCommand(e,n,s,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(ha.show(e.getContainer()),ha.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(ha.hide(e.getContainer()),ha.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e){const n=this;let r,s=n.getElement();if(n.removed)return"";if(s){(e=e||{}).load=!0;const a=wc(s)?s.value:s.innerHTML;return r=n.setContent(a,e),e.element=s,e.no_events||n.dispatch("LoadContent",e),e.element=s=null,r}}save(e){const n=this;let r,a,s=n.getElement();if(s&&n.initialized&&!n.removed)return(e=e||{}).save=!0,e.element=s,r=e.content=n.getContent(e),e.no_events||n.dispatch("SaveContent",e),"raw"===e.format&&n.dispatch("RawSaveContent",e),r=e.content,wc(s)?s.value=r:((e.is_removing||!n.inline)&&(s.innerHTML=r),(a=ha.getParent(n.id,"form"))&&V5(a.elements,f=>{if(f.name===n.id)return f.value=r,!1})),e.element=s=null,!1!==e.set_dirty&&n.setDirty(!1),r}setContent(e,n){return hb(this,e,n)}getContent(e){return((t,e={})=>{const s=((t,e)=>he(wt({},t),{format:e,get:!0,getInner:!0}))(e,e.format?e.format:"html");return _v(t,s).fold(fn,r=>{const a=((t,e)=>db(t).editor.getContent(e))(t,r);return Sv(t,a,r)})})(this,e)}insertContent(e,n){n&&(e=Rk({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?hb(this,this.startContent,{format:"raw"}):hb(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=ha.get(e.editorContainer||e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=ha.get(this.id)),this.targetElm}getWin(){const e=this;let n;return e.contentWindow||(n=e.iframeElement,n&&(e.contentWindow=n.contentWindow)),e.contentWindow}getDoc(){const e=this;let n;return e.contentDocument||(n=e.getWin(),n&&(e.contentDocument=n.document)),e.contentDocument}getBody(){const e=this.getDoc();return this.bodyElement||(e?e.body:null)}convertURL(e,n,s){const r=this,a=r.options.get,f=r1(r);return oe(f)?f.call(r,e,s,!0,n):!a("convert_urls")||s&&"LINK"===s.nodeName||0===e.indexOf("file:")||0===e.length?e:a("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,a("remove_script_host"))}addVisual(e){((t,e)=>{((t,e)=>{Ie(t).editor.addVisual(e)})(t,e)})(this,e)}remove(){(t=>{if(!t.removed){const{_selectionOverrides:e,editorUpload:n}=t,s=t.getBody(),r=t.getElement();s&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&r&&fh.remove(r.nextSibling),(t=>{t.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&s&&(t=>{fh.setStyle(t.id,"display",t.orgDisplay)})(t),(t=>{t.dispatch("detach")})(t),fh.remove(t.getContainer()),dh(e),dh(n),t.destroy()}})(this)}destroy(e){((t,e)=>{const{selection:n,dom:s}=t;if(!t.destroyed){if(!e&&!t.removed)return void t.remove();e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),dh(n),dh(s)),(t=>{const e=t.formElement;e&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,e._mceOldSubmit=null),fh.unbind(e,"submit reset",t.formEventDelegate))})(t),(t=>{t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null,t.selection&&(t.selection=t.selection.win=t.selection.dom=t.selection.dom.doc=null)})(t),t.destroyed=!0}})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Dl=se.DOM,Kh=W.each;let Yh,Pk=!1,Bn=[];const Gh=t=>{const e=t.type;Kh(ai.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},Dk=t=>{if(t!==Pk){const e=se.DOM;t?(e.bind(window,"resize",Gh),e.bind(window,"scroll",Gh)):(e.unbind(window,"resize",Gh),e.unbind(window,"scroll",Gh)),Pk=t}},Nk=t=>{const e=Bn;return Bn=dt(Bn,n=>t!==n),ai.activeEditor===t&&(ai.activeEditor=Bn.length>0?Bn[0]:null),ai.focusedEditor===t&&(ai.focusedEditor=null),e.length!==Bn.length},W5="CSS1Compat"!==document.compatMode,ai=he(wt({},Cy),{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"0.1",releaseDate:"2022-03-23",i18n:vs,activeEditor:null,focusedEditor:null,setup(){const t=this;let e,n,s="";n=to.getDocumentBaseUrl(document.location),/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,s=r.suffix;else{const a=document.getElementsByTagName("script");for(let f=0;f<a.length;f++){const m=a[f].src||"";if(""===m)continue;const g=m.substring(m.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(m)){-1!==g.indexOf(".min")&&(s=".min"),e=m.substring(0,m.lastIndexOf("/"));break}}if(!e&&document.currentScript){const f=document.currentScript.src;-1!==f.indexOf(".min")&&(s=".min"),e=f.substring(0,f.lastIndexOf("/"))}}t.baseURL=new to(n).toAbsolute(e),t.documentBaseURL=n,t.baseURI=new to(t.baseURL),t.suffix=s,(t=>{t.on("AddEditor",ut(hR,t)),t.on("RemoveEditor",ut(mR,t))})(t)},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e),t.suffix&&(this.suffix=t.suffix),this.defaultOptions=t;const s=t.plugin_base_urls;void 0!==s&&ie(s,(r,a)=>{un.PluginManager.urls[a]=r})},init(t){const e=this;let n;const s=W.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let g=x=>{n=x};const y=()=>{let x=0;const _=[];let E;Dl.unbind(window,"ready",y),(x=>{const _=t.onpageload;_&&_.apply(e,[])})(),E=((t,e)=>{const n=[],s=oe(e)?r=>Me(n,a=>e(a,r)):r=>ke(n,r);for(let r=0,a=t.length;r<a;r++){const f=t[r];s(f)||n.push(f)}return n})((x=>le.browser.isIE()||le.browser.isEdge()?(gh("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):W5?(gh("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):At(x.selector)?Dl.select(x.selector):Mt(x.target)?[x.target]:[])(t)),W.each(E,P=>{(t=>{t&&t.initialized&&!(t.getContainer()||t.getBody()).parentNode&&(Nk(t),t.unbindAllNativeEvents(),t.destroy(!0),t.removed=!0,t=null)})(e.get(P.id))}),E=W.grep(E,P=>!e.get(P.id)),0===E.length?g([]):Kh(E,P=>{((x,_)=>x.inline&&_.tagName.toLowerCase()in s)(t,P)?gh("Could not initialize inline editor on invalid inline target element",P):((P,A,R)=>{const N=new qh(P,A,e);_.push(N),N.on("init",()=>{++x===E.length&&g(_)}),N.targetElm=N.targetElm||R,N.render()})((x=>{let _=x.id;return _||(_=ce(x,"name").filter(E=>!Dl.get(E)).getOrThunk(Dl.uniqueId),x.setAttribute("id",_)),_})(P),t,P)})};return Dl.bind(window,"ready",y),new Promise(x=>{n?x(n):g=_=>{x(_)}})},get(t){return 0===arguments.length?Bn.slice(0):At(t)?ue(Bn,e=>e.id===t).getOr(null):Ts(t)&&Bn[t]?Bn[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&Bn.push(t),Dk(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Yh||(Yh=s=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return s.preventDefault(),s.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Yh))),t},createEditor(t,e){return this.add(new qh(t,e,this))},remove(t){const e=this;let n,s;if(t){if(!At(t))return s=t,br(e.get(s.id))?null:(Nk(s)&&e.dispatch("RemoveEditor",{editor:s}),0===Bn.length&&window.removeEventListener("beforeunload",Yh),s.remove(),Dk(Bn.length>0),s);Kh(Dl.select(t),r=>{s=e.get(r.id),s&&e.remove(s)})}else for(n=Bn.length-1;n>=0;n--)e.remove(Bn[n])},execCommand(t,e,n){var s;const r=this,a=tn(n)?null!==(s=n.id)&&void 0!==s?s:n.index:n;switch(t){case"mceAddEditor":return r.get(a)||new qh(a,n.options,r).render(),!0;case"mceRemoveEditor":{const f=r.get(a);return f&&f.remove(),!0}case"mceToggleEditor":{const f=r.get(a);return f?(f.isHidden()?f.show():f.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Kh(Bn,t=>{t.save()})},addI18n:(t,e)=>{vs.add(t,e)},translate:t=>vs.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new to(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new to(this.baseURL)}});ai.setup();const j5=(()=>{const t=ko();return{FakeClipboardItem:a=>({items:a,types:ds(a),getType:f=>ce(a,f).getOrUndefined()}),write:a=>{t.set(a)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),Ok=Math.min,Nl=Math.max,Xh=Math.round,Mk=(t,e,n)=>{let s=e.x,r=e.y;const a=t.w,f=t.h,m=e.w,g=e.h,y=(n||"").split("");return"b"===y[0]&&(r+=g),"r"===y[1]&&(s+=m),"c"===y[0]&&(r+=Xh(g/2)),"c"===y[1]&&(s+=Xh(m/2)),"b"===y[3]&&(r-=f),"r"===y[4]&&(s-=a),"c"===y[3]&&(r-=Xh(f/2)),"c"===y[4]&&(s-=Xh(a/2)),Ol(s,r,a,f)},Ol=(t,e,n,s)=>({x:t,y:e,w:n,h:s}),X5={inflate:(t,e,n)=>Ol(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:Mk,findBestRelativePosition:(t,e,n,s)=>{let r,a;for(a=0;a<s.length;a++)if(r=Mk(t,e,s[a]),r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[a];return null},intersect:(t,e)=>{const n=Nl(t.x,e.x),s=Nl(t.y,e.y),r=Ok(t.x+t.w,e.x+e.w),a=Ok(t.y+t.h,e.y+e.h);return r-n<0||a-s<0?null:Ol(n,s,r-n,a-s)},clamp:(t,e,n)=>{let s=t.x,r=t.y,a=t.x+t.w,f=t.y+t.h;const m=e.x+e.w,g=e.y+e.h,y=Nl(0,e.x-s),x=Nl(0,e.y-r),_=Nl(0,a-m),E=Nl(0,f-g);return s+=y,r+=x,n&&(a+=y,f+=x,s-=_,r-=E),a-=_,f-=E,Ol(s,r,a-s,f-r)},create:Ol,fromClientRect:t=>Ol(t.left,t.top,t.width,t.height)},Z5=(()=>{const t={},e={};return{load:(a,f)=>{const m=`Script at URL "${f}" failed to load`,g=`Script at URL "${f}" did not call \`tinymce.Resource.add('${a}', data)\` within 1 second`;if(void 0!==t[a])return t[a];{const y=new Promise((x,_)=>{const E=((t,e,n=1e3)=>{let s=!1,r=null;const a=y=>(...x)=>{s||(s=!0,null!==r&&(clearTimeout(r),r=null),y.apply(null,x))},f=a(t),m=a(e);return{start:(...y)=>{!s&&null===r&&(r=setTimeout(()=>m.apply(null,y),n))},resolve:f,reject:m}})(x,_);e[a]=E.resolve,Gs.ScriptLoader.loadScript(f).then(()=>E.start(g),()=>E.reject(m))});return t[a]=y,y}},add:(a,f)=>{void 0!==e[a]&&(e[a](f),delete e[a]),t[a]=Promise.resolve(f)},unload:a=>{delete t[a]}}})();let Mu;try{const t="__storage_test__";Mu=window.localStorage,Mu.setItem(t,t),Mu.removeItem(t)}catch(t){Mu=(()=>{let t={},e=[];const n={getItem:s=>t[s]||null,setItem:(s,r)=>{e.push(s),t[s]=String(r)},key:s=>e[s],removeItem:s=>{e=e.filter(r=>r===s),delete t[s]},clear:()=>{e=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>e.length,configurable:!1,enumerable:!1}),n})()}const e3={geom:{Rect:X5},util:{Delay:ws,Tools:W,VK:yt,URI:to,EventDispatcher:yy,Observable:Cy,I18n:vs,LocalStorage:Mu,ImageUploader:t=>{const e=Xv(),n=Zv(t,e);return{upload:(s,r=!0)=>n.upload(s,r?Qv(t):void 0)}}},dom:{EventUtils:wo,TreeWalker:We,TextSeeker:Eo,DOMUtils:se,ScriptLoader:Gs,RangeUtils:Cl,Serializer:Uv,StyleSheetLoader:zf,ControlSelection:ax,BookmarkManager:lu,Selection:Vv,Event:wo.Event},html:{Styles:$c,Entities:xo,Node:Mn,Schema:_o,DomParser:_l,Writer:Wx,Serializer:ni},Env:le,AddOnManager:un,Annotator:tx,Formatter:e_,UndoManager:s_,EditorCommands:Ck,WindowManager:Kv,NotificationManager:qv,EditorObservable:Sk,Shortcuts:Tk,Editor:qh,FocusManager:Px,EditorManager:ai,DOM:se.DOM,ScriptLoader:Gs.ScriptLoader,PluginManager:wl,ThemeManager:aa,ModelManager:Sl,IconManager:hh,Resource:Z5,FakeClipboard:j5,trim:W.trim,isArray:W.isArray,is:W.is,toArray:W.toArray,makeMap:W.makeMap,each:W.each,map:W.map,grep:W.grep,inArray:W.inArray,extend:W.extend,walk:W.walk,resolve:W.resolve,explode:W.explode,_addCacheSuffix:W._addCacheSuffix},Bk=W.extend(ai,e3);(t=>{window.tinymce=t,window.tinyMCE=t})(Bk),(t=>{if("object"==typeof module)try{module.exports=t}catch(e){}})(Bk)}(),function(De,Oe){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Oe():"function"==typeof define&&define.amd?define(Oe):(De="undefined"!=typeof globalThis?globalThis:De||self).Chart=Oe()}(this,function(){"use strict";const Oe="undefined"==typeof window?function(l){return l()}:window.requestAnimationFrame;function Je(l,o,i){const c=i||(h=>Array.prototype.slice.call(h));let u=!1,d=[];return function(...h){d=c(h),u||(u=!0,Oe.call(window,()=>{u=!1,l.apply(o,d)}))}}function ts(l,o){let i;return function(...c){return o?(clearTimeout(i),i=setTimeout(l,o,c)):l.apply(this,c),o}}const lo=l=>"start"===l?"left":"end"===l?"right":"center",ln=(l,o,i)=>"start"===l?o:"end"===l?i:(o+i)/2,Bu=(l,o,i,c)=>l===(c?"left":"right")?i:"center"===l?(o+i)/2:o;var As=new class Lu{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(o,i,c,u){const h=i.duration;i.listeners[u].forEach(p=>p({chart:o,initial:i.initial,numSteps:h,currentStep:Math.min(c-i.start,h)}))}_refresh(){this._request||(this._running=!0,this._request=Oe.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(o=Date.now()){let i=0;this._charts.forEach((c,u)=>{if(!c.running||!c.items.length)return;const d=c.items;let b,h=d.length-1,p=!1;for(;h>=0;--h)b=d[h],b._active?(b._total>c.duration&&(c.duration=b._total),b.tick(o),p=!0):(d[h]=d[d.length-1],d.pop());p&&(u.draw(),this._notify(u,c,o,"progress")),d.length||(c.running=!1,this._notify(u,c,o,"complete"),c.initial=!1),i+=d.length}),this._lastDate=o,0===i&&(this._running=!1)}_getAnims(o){const i=this._charts;let c=i.get(o);return c||(c={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},i.set(o,c)),c}listen(o,i,c){this._getAnims(o).listeners[i].push(c)}add(o,i){!i||!i.length||this._getAnims(o).items.push(...i)}has(o){return this._getAnims(o).items.length>0}start(o){const i=this._charts.get(o);!i||(i.running=!0,i.start=Date.now(),i.duration=i.items.reduce((c,u)=>Math.max(c,u._duration),0),this._refresh())}running(o){if(!this._running)return!1;const i=this._charts.get(o);return!(!i||!i.running||!i.items.length)}stop(o){const i=this._charts.get(o);if(!i||!i.items.length)return;const c=i.items;let u=c.length-1;for(;u>=0;--u)c[u].cancel();i.items=[],this._notify(o,i,Date.now(),"complete")}remove(o){return this._charts.delete(o)}};const $n={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ui="0123456789ABCDEF",nm=l=>ui[15&l],Iu=l=>ui[(240&l)>>4]+ui[15&l],ba=l=>(240&l)>>4==(15&l);function co(l){return l+.5|0}const At=(l,o,i)=>Math.max(Math.min(l,i),o);function tn(l){return At(co(2.55*l),0,255)}function pr(l){return At(co(255*l),0,255)}function Fe(l){return At(co(l/2.55)/100,0,1)}function br(l){return At(co(100*l),0,100)}const fi=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Mt=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function oe(l,o,i){const c=o*Math.min(i,1-i),u=(d,h=(d+l/30)%12)=>i-c*Math.max(Math.min(h-3,9-h,1),-1);return[u(0),u(8),u(4)]}function Ts(l,o,i){const c=(u,d=(u+l/60)%6)=>i-i*o*Math.max(Math.min(d,4-d,1),0);return[c(5),c(3),c(1)]}function yr(l,o,i){const c=oe(l,1,.5);let u;for(o+i>1&&(u=1/(o+i),o*=u,i*=u),u=0;u<3;u++)c[u]*=1-o-i,c[u]+=o;return c}function Ft(l){const i=l.r/255,c=l.g/255,u=l.b/255,d=Math.max(i,c,u),h=Math.min(i,c,u),p=(d+h)/2;let b,C,v;return d!==h&&(v=d-h,C=p>.5?v/(2-d-h):v/(d+h),b=d===i?(c-u)/v+(c<u?6:0):d===c?(u-i)/v+2:(i-c)/v+4,b=60*b+.5),[0|b,C||0,p]}function zs(l,o,i,c){return(Array.isArray(o)?l(o[0],o[1],o[2]):l(o,i,c)).map(pr)}function ya(l,o,i){return zs(oe,l,o,i)}function $u(l){return(l%360+360)%360}const Ca={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Cr={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ne;function xr(l,o,i){if(l){let c=Ft(l);c[o]=Math.max(0,Math.min(c[o]+c[o]*i,0===o?360:1)),c=ya(c),l.r=c[0],l.g=c[1],l.b=c[2]}}function zu(l,o){return l&&Object.assign(o||{},l)}function Hu(l){var o={r:0,g:0,b:0,a:255};return Array.isArray(l)?l.length>=3&&(o={r:l[0],g:l[1],b:l[2],a:255},l.length>3&&(o.a=pr(l[3]))):(o=zu(l,{r:0,g:0,b:0,a:1})).a=pr(o.a),o}function Vu(l){return"r"===l.charAt(0)?function _n(l){const o=fi.exec(l);let c,u,d,i=255;if(o){if(o[7]!==c){const h=+o[7];i=255&(o[8]?tn(h):255*h)}return c=+o[1],u=+o[3],d=+o[5],c=255&(o[2]?tn(c):c),u=255&(o[4]?tn(u):u),d=255&(o[6]?tn(d):d),{r:c,g:u,b:d,a:i}}}(l):function ut(l){const o=Mt.exec(l);let c,i=255;if(!o)return;o[5]!==c&&(i=o[6]?tn(+o[5]):pr(+o[5]));const u=$u(+o[2]),d=+o[3]/100,h=+o[4]/100;return c="hwb"===o[1]?function st(l,o,i){return zs(yr,l,o,i)}(u,d,h):"hsv"===o[1]?function fn(l,o,i){return zs(Ts,l,o,i)}(u,d,h):ya(u,d,h),{r:c[0],g:c[1],b:c[2],a:i}}(l)}class xa{constructor(o){if(o instanceof xa)return o;const i=typeof o;let c;"object"===i?c=Hu(o):"string"===i&&(c=function Bl(l){var i,o=l.length;return"#"===l[0]&&(4===o||5===o?i={r:255&17*$n[l[1]],g:255&17*$n[l[2]],b:255&17*$n[l[3]],a:5===o?17*$n[l[4]]:255}:(7===o||9===o)&&(i={r:$n[l[1]]<<4|$n[l[2]],g:$n[l[3]]<<4|$n[l[4]],b:$n[l[5]]<<4|$n[l[6]],a:9===o?$n[l[7]]<<4|$n[l[8]]:255})),i}(o)||function S(l){Ne||(Ne=function xe(){const l={},o=Object.keys(Cr),i=Object.keys(Ca);let c,u,d,h,p;for(c=0;c<o.length;c++){for(h=p=o[c],u=0;u<i.length;u++)d=i[u],p=p.replace(d,Ca[d]);d=parseInt(Cr[h],16),l[p]=[d>>16&255,d>>8&255,255&d]}return l}(),Ne.transparent=[0,0,0,0]);const o=Ne[l.toLowerCase()];return o&&{r:o[0],g:o[1],b:o[2],a:4===o.length?o[3]:255}}(o)||Vu(o)),this._rgb=c,this._valid=!!c}get valid(){return this._valid}get rgb(){var o=zu(this._rgb);return o&&(o.a=Fe(o.a)),o}set rgb(o){this._rgb=Hu(o)}rgbString(){return this._valid?function An(l){return l&&(l.a<255?`rgba(${l.r}, ${l.g}, ${l.b}, ${Fe(l.a)})`:`rgb(${l.r}, ${l.g}, ${l.b})`)}(this._rgb):this._rgb}hexString(){return this._valid?function Fu(l){var o=function Ml(l){return ba(l.r)&&ba(l.g)&&ba(l.b)&&ba(l.a)}(l)?nm:Iu;return l&&"#"+o(l.r)+o(l.g)+o(l.b)+(l.a<255?o(l.a):"")}(this._rgb):this._rgb}hslString(){return this._valid?function sm(l){if(!l)return;const o=Ft(l),i=o[0],c=br(o[1]),u=br(o[2]);return l.a<255?`hsla(${i}, ${c}%, ${u}%, ${Fe(l.a)})`:`hsl(${i}, ${c}%, ${u}%)`}(this._rgb):this._rgb}mix(o,i){const c=this;if(o){const u=c.rgb,d=o.rgb;let h;const p=i===h?.5:i,b=2*p-1,C=u.a-d.a,v=((b*C==-1?b:(b+C)/(1+b*C))+1)/2;h=1-v,u.r=255&v*u.r+h*d.r+.5,u.g=255&v*u.g+h*d.g+.5,u.b=255&v*u.b+h*d.b+.5,u.a=p*u.a+(1-p)*d.a,c.rgb=u}return c}clone(){return new xa(this.rgb)}alpha(o){return this._rgb.a=pr(o),this}clearer(o){return this._rgb.a*=1-o,this}greyscale(){const o=this._rgb,i=co(.3*o.r+.59*o.g+.11*o.b);return o.r=o.g=o.b=i,this}opaquer(o){return this._rgb.a*=1+o,this}negate(){const o=this._rgb;return o.r=255-o.r,o.g=255-o.g,o.b=255-o.b,this}lighten(o){return xr(this._rgb,2,o),this}darken(o){return xr(this._rgb,2,-o),this}saturate(o){return xr(this._rgb,1,o),this}desaturate(o){return xr(this._rgb,1,-o),this}rotate(o){return function Ll(l,o){var i=Ft(l);i[0]=$u(i[0]+o),i=ya(i),l.r=i[0],l.g=i[1],l.b=i[2]}(this._rgb,o),this}}function ke(l){return new xa(l)}const Me=l=>l instanceof CanvasGradient||l instanceof CanvasPattern;function Kt(l){return Me(l)?l:ke(l)}function Z(l){return Me(l)?l:ke(l).saturate(.5).darken(.1).hexString()}function us(){}const vr=function(){let l=0;return function(){return l++}}();function dt(l){return null==l}function me(l){if(Array.isArray&&Array.isArray(l))return!0;const o=Object.prototype.toString.call(l);return"[object"===o.substr(0,7)&&"Array]"===o.substr(-6)}function It(l){return null!==l&&"[object Object]"===Object.prototype.toString.call(l)}const Be=l=>("number"==typeof l||l instanceof Number)&&isFinite(+l);function ue(l,o){return Be(l)?l:o}function Vt(l,o){return void 0===l?o:l}const Il=(l,o)=>"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100:l/o,fs=(l,o)=>"string"==typeof l&&l.endsWith("%")?parseFloat(l)/100*o:+l;function fe(l,o,i){if(l&&"function"==typeof l.call)return l.apply(i,o)}function ae(l,o,i,c){let u,d,h;if(me(l))if(d=l.length,c)for(u=d-1;u>=0;u--)o.call(i,l[u],u);else for(u=0;u<d;u++)o.call(i,l[u],u);else if(It(l))for(h=Object.keys(l),d=h.length,u=0;u<d;u++)o.call(i,l[h[u]],h[u])}function _r(l,o){let i,c,u,d;if(!l||!o||l.length!==o.length)return!1;for(i=0,c=l.length;i<c;++i)if(u=l[i],d=o[i],u.datasetIndex!==d.datasetIndex||u.index!==d.index)return!1;return!0}function Uo(l){if(me(l))return l.map(Uo);if(It(l)){const o=Object.create(null),i=Object.keys(l),c=i.length;let u=0;for(;u<c;++u)o[i[u]]=Uo(l[i[u]]);return o}return l}function Sr(l){return-1===["__proto__","prototype","constructor"].indexOf(l)}function va(l,o,i,c){if(!Sr(l))return;const u=o[l],d=i[l];It(u)&&It(d)?Ke(u,d,c):o[l]=Uo(d)}function Ke(l,o,i){const c=me(o)?o:[o],u=c.length;if(!It(l))return l;const d=(i=i||{}).merger||va;for(let h=0;h<u;++h){if(!It(o=c[h]))continue;const p=Object.keys(o);for(let b=0,C=p.length;b<C;++b)d(p[b],l,o,i)}return l}function es(l,o){return Ke(l,o,{merger:dn})}function dn(l,o,i){if(!Sr(l))return;const c=o[l],u=i[l];It(c)&&It(u)?es(c,u):Object.prototype.hasOwnProperty.call(o,l)||(o[l]=Uo(u))}function Uu(l,o){const i=l.indexOf(".",o);return-1===i?l.length:i}function ie(l,o){if(""===o)return l;let i=0,c=Uu(o,i);for(;l&&c>i;)l=l[o.substr(i,c-i)],i=c+1,c=Uu(o,i);return l}function uo(l){return l.charAt(0).toUpperCase()+l.slice(1)}const zn=l=>void 0!==l,hs=l=>"function"==typeof l,_a=(l,o)=>{if(l.size!==o.size)return!1;for(const i of l)if(!o.has(i))return!1;return!0};function Wu(l){return"mouseup"===l.type||"click"===l.type||"contextmenu"===l.type}const ms=Object.create(null),di=Object.create(null);function kr(l,o){if(!o)return l;const i=o.split(".");for(let c=0,u=i.length;c<u;++c){const d=i[c];l=l[d]||(l[d]=Object.create(null))}return l}function ce(l,o,i){return"string"==typeof o?Ke(kr(l,o),i):Ke(kr(l,""),o)}var Qt=new class $t{constructor(o){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,c)=>Z(c.backgroundColor),this.hoverBorderColor=(i,c)=>Z(c.borderColor),this.hoverColor=(i,c)=>Z(c.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(o)}set(o,i){return ce(this,o,i)}get(o){return kr(this,o)}describe(o,i){return ce(di,o,i)}override(o,i){return ce(ms,o,i)}route(o,i,c,u){const d=kr(this,o),h=kr(this,c),p="_"+i;Object.defineProperties(d,{[p]:{value:d[i],writable:!0},[i]:{enumerable:!0,get(){const b=this[p],C=h[u];return It(b)?Object.assign({},C,b):Vt(b,C)},set(b){this[p]=b}}})}}({_scriptable:l=>!l.startsWith("on"),_indexable:l=>"events"!==l,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});const Ee=Math.PI,be=2*Ee,Sa=be+Ee,hi=Number.POSITIVE_INFINITY,Er=Ee/180,Ae=Ee/2,gs=Ee/4,wa=2*Ee/3,hn=Math.log10,ns=Math.sign;function Rs(l){const o=Math.round(l);l=Tr(l,o,l/1e3)?o:l;const i=Math.pow(10,Math.floor(hn(l))),c=l/i;return(c<=1?1:c<=2?2:c<=5?5:10)*i}function fo(l){const o=[],i=Math.sqrt(l);let c;for(c=1;c<i;c++)l%c==0&&(o.push(c),o.push(l/c));return i===(0|i)&&o.push(i),o.sort((u,d)=>u-d).pop(),o}function Ar(l){return!isNaN(parseFloat(l))&&isFinite(l)}function Tr(l,o,i){return Math.abs(l-o)<i}function ju(l,o){const i=Math.round(l);return i-o<=l&&i+o>=l}function Fl(l,o,i){let c,u,d;for(c=0,u=l.length;c<u;c++)d=l[c][i],isNaN(d)||(o.min=Math.min(o.min,d),o.max=Math.max(o.max,d))}function Hn(l){return l*(Ee/180)}function Rr(l){return l*(180/Ee)}function Wo(l){if(!Be(l))return;let o=1,i=0;for(;Math.round(l*o)/o!==l;)o*=10,i++;return i}function $l(l,o){const i=o.x-l.x,c=o.y-l.y,u=Math.sqrt(i*i+c*c);let d=Math.atan2(c,i);return d<-.5*Ee&&(d+=be),{angle:d,distance:u}}function mi(l,o){return Math.sqrt(Math.pow(o.x-l.x,2)+Math.pow(o.y-l.y,2))}function qu(l,o){return(l-o+Sa)%be-Ee}function Tn(l){return(l%be+be)%be}function Pr(l,o,i,c){const u=Tn(l),d=Tn(o),h=Tn(i),p=Tn(d-u),b=Tn(h-u),C=Tn(u-d),v=Tn(u-h);return u===d||u===h||c&&d===h||p>b&&C<v}function Ue(l,o,i){return Math.max(o,Math.min(i,l))}function Ku(l){return Ue(l,-32768,32767)}function Te(l,o,i,c=1e-6){return l>=Math.min(o,i)-c&&l<=Math.max(o,i)+c}function Vn(l){return!l||dt(l.size)||dt(l.family)?null:(l.style?l.style+" ":"")+(l.weight?l.weight+" ":"")+l.size+"px "+l.family}function Dr(l,o,i,c,u){let d=o[u];return d||(d=o[u]=l.measureText(u).width,i.push(u)),d>c&&(c=d),c}function ka(l,o,i,c){let u=(c=c||{}).data=c.data||{},d=c.garbageCollect=c.garbageCollect||[];c.font!==o&&(u=c.data={},d=c.garbageCollect=[],c.font=o),l.save(),l.font=o;let h=0;const p=i.length;let b,C,v,w,T;for(b=0;b<p;b++)if(w=i[b],null!=w&&!0!==me(w))h=Dr(l,u,d,h,w);else if(me(w))for(C=0,v=w.length;C<v;C++)T=w[C],null!=T&&!me(T)&&(h=Dr(l,u,d,h,T));l.restore();const O=d.length/2;if(O>i.length){for(b=0;b<O;b++)delete u[d[b]];d.splice(0,O)}return h}function Un(l,o,i){const c=l.currentDevicePixelRatio,u=0!==i?Math.max(i/2,.5):0;return Math.round((o-u)*c)/c+u}function zl(l,o){(o=o||l.getContext("2d")).save(),o.resetTransform(),o.clearRect(0,0,l.width,l.height),o.restore()}function Nr(l,o,i,c){let u,d,h,p,b;const C=o.pointStyle,v=o.rotation,w=o.radius;let T=(v||0)*Er;if(C&&"object"==typeof C&&(u=C.toString(),"[object HTMLImageElement]"===u||"[object HTMLCanvasElement]"===u))return l.save(),l.translate(i,c),l.rotate(T),l.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),void l.restore();if(!(isNaN(w)||w<=0)){switch(l.beginPath(),C){default:l.arc(i,c,w,0,be),l.closePath();break;case"triangle":l.moveTo(i+Math.sin(T)*w,c-Math.cos(T)*w),T+=wa,l.lineTo(i+Math.sin(T)*w,c-Math.cos(T)*w),T+=wa,l.lineTo(i+Math.sin(T)*w,c-Math.cos(T)*w),l.closePath();break;case"rectRounded":b=.516*w,p=w-b,d=Math.cos(T+gs)*p,h=Math.sin(T+gs)*p,l.arc(i-d,c-h,b,T-Ee,T-Ae),l.arc(i+h,c-d,b,T-Ae,T),l.arc(i+d,c+h,b,T,T+Ae),l.arc(i-h,c+d,b,T+Ae,T+Ee),l.closePath();break;case"rect":if(!v){p=Math.SQRT1_2*w,l.rect(i-p,c-p,2*p,2*p);break}T+=gs;case"rectRot":d=Math.cos(T)*w,h=Math.sin(T)*w,l.moveTo(i-d,c-h),l.lineTo(i+h,c-d),l.lineTo(i+d,c+h),l.lineTo(i-h,c+d),l.closePath();break;case"crossRot":T+=gs;case"cross":d=Math.cos(T)*w,h=Math.sin(T)*w,l.moveTo(i-d,c-h),l.lineTo(i+d,c+h),l.moveTo(i+h,c-d),l.lineTo(i-h,c+d);break;case"star":d=Math.cos(T)*w,h=Math.sin(T)*w,l.moveTo(i-d,c-h),l.lineTo(i+d,c+h),l.moveTo(i+h,c-d),l.lineTo(i-h,c+d),T+=gs,d=Math.cos(T)*w,h=Math.sin(T)*w,l.moveTo(i-d,c-h),l.lineTo(i+d,c+h),l.moveTo(i+h,c-d),l.lineTo(i-h,c+d);break;case"line":d=Math.cos(T)*w,h=Math.sin(T)*w,l.moveTo(i-d,c-h),l.lineTo(i+d,c+h);break;case"dash":l.moveTo(i,c),l.lineTo(i+Math.cos(T)*w,c+Math.sin(T)*w)}l.fill(),o.borderWidth>0&&l.stroke()}}function mn(l,o,i){return i=i||.5,!o||l&&l.x>o.left-i&&l.x<o.right+i&&l.y>o.top-i&&l.y<o.bottom+i}function ho(l,o){l.save(),l.beginPath(),l.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),l.clip()}function gi(l){l.restore()}function Yu(l,o,i,c,u){if(!o)return l.lineTo(i.x,i.y);if("middle"===u){const d=(o.x+i.x)/2;l.lineTo(d,o.y),l.lineTo(d,i.y)}else"after"===u!=!!c?l.lineTo(o.x,i.y):l.lineTo(i.x,o.y);l.lineTo(i.x,i.y)}function Ea(l,o,i,c){if(!o)return l.lineTo(i.x,i.y);l.bezierCurveTo(c?o.cp1x:o.cp2x,c?o.cp1y:o.cp2y,c?i.cp2x:i.cp1x,c?i.cp2y:i.cp1y,i.x,i.y)}function gn(l,o,i,c,u,d={}){const h=me(o)?o:[o],p=d.strokeWidth>0&&""!==d.strokeColor;let b,C;for(l.save(),l.font=u.string,function rm(l,o){o.translation&&l.translate(o.translation[0],o.translation[1]),dt(o.rotation)||l.rotate(o.rotation),o.color&&(l.fillStyle=o.color),o.textAlign&&(l.textAlign=o.textAlign),o.textBaseline&&(l.textBaseline=o.textBaseline)}(l,d),b=0;b<h.length;++b)C=h[b],p&&(d.strokeColor&&(l.strokeStyle=d.strokeColor),dt(d.strokeWidth)||(l.lineWidth=d.strokeWidth),l.strokeText(C,i,c,d.maxWidth)),l.fillText(C,i,c,d.maxWidth),im(l,i,c,C,d),c+=u.lineHeight;l.restore()}function im(l,o,i,c,u){if(u.strikethrough||u.underline){const d=l.measureText(c),h=o-d.actualBoundingBoxLeft,p=o+d.actualBoundingBoxRight,b=i-d.actualBoundingBoxAscent,C=i+d.actualBoundingBoxDescent,v=u.strikethrough?(b+C)/2:C;l.strokeStyle=l.fillStyle,l.beginPath(),l.lineWidth=u.decorationWidth||2,l.moveTo(h,v),l.lineTo(p,v),l.stroke()}}function Or(l,o){const{x:i,y:c,w:u,h:d,radius:h}=o;l.arc(i+h.topLeft,c+h.topLeft,h.topLeft,-Ae,Ee,!0),l.lineTo(i,c+d-h.bottomLeft),l.arc(i+h.bottomLeft,c+d-h.bottomLeft,h.bottomLeft,Ee,Ae,!0),l.lineTo(i+u-h.bottomRight,c+d),l.arc(i+u-h.bottomRight,c+d-h.bottomRight,h.bottomRight,Ae,0,!0),l.lineTo(i+u,c+h.topRight),l.arc(i+u-h.topRight,c+h.topRight,h.topRight,0,-Ae,!0),l.lineTo(i+h.topLeft,c)}function pi(l,o,i){i=i||(h=>l[h]<o);let d,c=l.length-1,u=0;for(;c-u>1;)d=u+c>>1,i(d)?u=d:c=d;return{lo:u,hi:c}}const ps=(l,o,i)=>pi(l,i,c=>l[c][o]<i),Hl=(l,o,i)=>pi(l,i,c=>l[c][o]>=i);function Vl(l,o,i){let c=0,u=l.length;for(;c<u&&l[c]<o;)c++;for(;u>c&&l[u-1]>i;)u--;return c>0||u<l.length?l.slice(c,u):l}const Ul=["push","pop","shift","splice","unshift"];function Wl(l,o){l._chartjs?l._chartjs.listeners.push(o):(Object.defineProperty(l,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),Ul.forEach(i=>{const c="_onData"+uo(i),u=l[i];Object.defineProperty(l,i,{configurable:!0,enumerable:!1,value(...d){const h=u.apply(this,d);return l._chartjs.listeners.forEach(p=>{"function"==typeof p[c]&&p[c](...d)}),h}})}))}function jl(l,o){const i=l._chartjs;if(!i)return;const c=i.listeners,u=c.indexOf(o);-1!==u&&c.splice(u,1),!(c.length>0)&&(Ul.forEach(d=>{delete l[d]}),delete l._chartjs)}function Aa(l){const o=new Set;let i,c;for(i=0,c=l.length;i<c;++i)o.add(l[i]);return o.size===c?l:Array.from(o)}function Ta(){return"undefined"!=typeof window&&"undefined"!=typeof document}function bi(l){let o=l.parentNode;return o&&"[object ShadowRoot]"===o.toString()&&(o=o.host),o}function yi(l,o,i){let c;return"string"==typeof l?(c=parseInt(l,10),-1!==l.indexOf("%")&&(c=c/100*o.parentNode[i])):c=l,c}const Ci=l=>window.getComputedStyle(l,null);function ql(l,o){return Ci(l).getPropertyValue(o)}const Gu=["top","right","bottom","left"];function mo(l,o,i){const c={};i=i?"-"+i:"";for(let u=0;u<4;u++){const d=Gu[u];c[d]=parseFloat(l[o+"-"+d+i])||0}return c.width=c.left+c.right,c.height=c.top+c.bottom,c}function Kl(l,o){const{canvas:i,currentDevicePixelRatio:c}=o,u=Ci(i),d="border-box"===u.boxSizing,h=mo(u,"padding"),p=mo(u,"border","width"),{x:b,y:C,box:v}=function Qu(l,o){const i=l.native||l,c=i.touches,u=c&&c.length?c[0]:i,{offsetX:d,offsetY:h}=u;let b,C,p=!1;if(((l,o,i)=>(l>0||o>0)&&(!i||!i.shadowRoot))(d,h,i.target))b=d,C=h;else{const v=o.getBoundingClientRect();b=u.clientX-v.left,C=u.clientY-v.top,p=!0}return{x:b,y:C,box:p}}(l,i),w=h.left+(v&&p.left),T=h.top+(v&&p.top);let{width:O,height:M}=o;return d&&(O-=h.width+p.width,M-=h.height+p.height),{x:Math.round((b-w)/O*i.width/c),y:Math.round((C-T)/M*i.height/c)}}const Ra=l=>Math.round(10*l)/10;function am(l,o,i,c){const u=Ci(l),d=mo(u,"margin"),h=yi(u.maxWidth,l,"clientWidth")||hi,p=yi(u.maxHeight,l,"clientHeight")||hi,b=function Zu(l,o,i){let c,u;if(void 0===o||void 0===i){const d=bi(l);if(d){const h=d.getBoundingClientRect(),p=Ci(d),b=mo(p,"border","width"),C=mo(p,"padding");o=h.width-C.width-b.width,i=h.height-C.height-b.height,c=yi(p.maxWidth,d,"clientWidth"),u=yi(p.maxHeight,d,"clientHeight")}else o=l.clientWidth,i=l.clientHeight}return{width:o,height:i,maxWidth:c||hi,maxHeight:u||hi}}(l,o,i);let{width:C,height:v}=b;if("content-box"===u.boxSizing){const w=mo(u,"border","width"),T=mo(u,"padding");C-=T.width+w.width,v-=T.height+w.height}return C=Math.max(0,C-d.width),v=Math.max(0,c?Math.floor(C/c):v-d.height),C=Ra(Math.min(C,h,b.maxWidth)),v=Ra(Math.min(v,p,b.maxHeight)),C&&!v&&(v=Ra(C/2)),{width:C,height:v}}function Yl(l,o,i){const c=o||1,u=Math.floor(l.height*c),d=Math.floor(l.width*c);l.height=u/c,l.width=d/c;const h=l.canvas;return h.style&&(i||!h.style.height&&!h.style.width)&&(h.style.height=`${l.height}px`,h.style.width=`${l.width}px`),(l.currentDevicePixelRatio!==c||h.height!==u||h.width!==d)&&(l.currentDevicePixelRatio=c,h.height=u,h.width=d,l.ctx.setTransform(c,0,0,c,0,0),!0)}const Ju=function(){let l=!1;try{const o={get passive(){return l=!0,!1}};window.addEventListener("test",null,o),window.removeEventListener("test",null,o)}catch(o){}return l}();function Gl(l,o){const i=ql(l,o),c=i&&i.match(/^(\d+)(\.\d+)?px$/);return c?+c[1]:void 0}function ss(l,o){return"native"in l?{x:l.x,y:l.y}:Kl(l,o)}function Xl(l,o,i,c){const{controller:u,data:d,_sorted:h}=l,p=u._cachedMeta.iScale;if(p&&o===p.axis&&"r"!==o&&h&&d.length){const b=p._reversePixels?Hl:ps;if(!c)return b(d,o,i);if(u._sharedOptions){const C=d[0],v="function"==typeof C.getRange&&C.getRange(o);if(v){const w=b(d,o,i-v),T=b(d,o,i+v);return{lo:w.lo,hi:T.hi}}}}return{lo:0,hi:d.length-1}}function os(l,o,i,c,u){const d=l.getSortedVisibleDatasetMetas(),h=i[o];for(let p=0,b=d.length;p<b;++p){const{index:C,data:v}=d[p],{lo:w,hi:T}=Xl(d[p],o,h,u);for(let O=w;O<=T;++O){const M=v[O];M.skip||c(M,C,O)}}}function Hs(l,o,i,c){const u=[];return mn(o,l.chartArea,l._minPadding)&&os(l,i,o,function(h,p,b){h.inRange(o.x,o.y,c)&&u.push({element:h,datasetIndex:p,index:b})},!0),u}function Ql(l,o,i,c,u){return mn(o,l.chartArea,l._minPadding)?"r"!==i||c?function le(l,o,i,c,u){let d=[];const h=function Ps(l){const o=-1!==l.indexOf("x"),i=-1!==l.indexOf("y");return function(c,u){const d=o?Math.abs(c.x-u.x):0,h=i?Math.abs(c.y-u.y):0;return Math.sqrt(Math.pow(d,2)+Math.pow(h,2))}}(i);let p=Number.POSITIVE_INFINITY;return os(l,i,o,function b(C,v,w){const T=C.inRange(o.x,o.y,u);if(c&&!T)return;const O=C.getCenterPoint(u);if(!mn(O,l.chartArea,l._minPadding)&&!T)return;const I=h(o,O);I<p?(d=[{element:C,datasetIndex:v,index:w}],p=I):I===p&&d.push({element:C,datasetIndex:v,index:w})}),d}(l,o,i,c,u):function cm(l,o,i,c){let u=[];return os(l,i,o,function d(h,p,b){const{startAngle:C,endAngle:v}=h.getProps(["startAngle","endAngle"],c),{angle:w}=$l(h,{x:o.x,y:o.y});Pr(w,C,v)&&u.push({element:h,datasetIndex:p,index:b})}),u}(l,o,i,u):[]}function Zl(l,o,i,c){const u=ss(o,l),d=[],h=i.axis,p="x"===h?"inXRange":"inYRange";let b=!1;return function lm(l,o){const i=l.getSortedVisibleDatasetMetas();let c,u,d;for(let h=0,p=i.length;h<p;++h){({index:c,data:u}=i[h]);for(let b=0,C=u.length;b<C;++b)d=u[b],d.skip||o(d,c,b)}}(l,(C,v,w)=>{C[p](u[h],c)&&d.push({element:C,datasetIndex:v,index:w}),C.inRange(u.x,u.y,c)&&(b=!0)}),i.intersect&&!b?[]:d}var Jl={modes:{index(l,o,i,c){const u=ss(o,l),d=i.axis||"x",h=i.intersect?Hs(l,u,d,c):Ql(l,u,d,!1,c),p=[];return h.length?(l.getSortedVisibleDatasetMetas().forEach(b=>{const C=h[0].index,v=b.data[C];v&&!v.skip&&p.push({element:v,datasetIndex:b.index,index:C})}),p):[]},dataset(l,o,i,c){const u=ss(o,l),d=i.axis||"xy";let h=i.intersect?Hs(l,u,d,c):Ql(l,u,d,!1,c);if(h.length>0){const p=h[0].datasetIndex,b=l.getDatasetMeta(p).data;h=[];for(let C=0;C<b.length;++C)h.push({element:b[C],datasetIndex:p,index:C})}return h},point:(l,o,i,c)=>Hs(l,ss(o,l),i.axis||"xy",c),nearest:(l,o,i,c)=>Ql(l,ss(o,l),i.axis||"xy",i.intersect,c),x:(l,o,i,c)=>Zl(l,o,{axis:"x",intersect:i.intersect},c),y:(l,o,i,c)=>Zl(l,o,{axis:"y",intersect:i.intersect},c)}};const um=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),fm=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function tf(l,o){const i=(""+l).match(um);if(!i||"normal"===i[1])return 1.2*o;switch(l=+i[2],i[3]){case"px":return l;case"%":l/=100}return o*l}const ef=l=>+l||0;function tc(l,o){const i={},c=It(o),u=c?Object.keys(o):o,d=It(l)?c?h=>Vt(l[h],l[o[h]]):h=>l[h]:()=>l;for(const h of u)i[h]=ef(d(h));return i}function nf(l){return tc(l,{top:"y",right:"x",bottom:"y",left:"x"})}function Mr(l){return tc(l,["topLeft","topRight","bottomLeft","bottomRight"])}function W(l){const o=nf(l);return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function Re(l,o){let i=Vt((l=l||{}).size,(o=o||Qt.font).size);"string"==typeof i&&(i=parseInt(i,10));let c=Vt(l.style,o.style);c&&!(""+c).match(fm)&&(console.warn('Invalid font style specified: "'+c+'"'),c="");const u={family:Vt(l.family,o.family),lineHeight:tf(Vt(l.lineHeight,o.lineHeight),i),size:i,style:c,weight:Vt(l.weight,o.weight),string:""};return u.string=Vn(u),u}function Br(l,o,i,c){let d,h,p,u=!0;for(d=0,h=l.length;d<h;++d)if(p=l[d],void 0!==p&&(void 0!==o&&"function"==typeof p&&(p=p(o),u=!1),void 0!==i&&me(p)&&(p=p[i%p.length],u=!1),void 0!==p))return c&&!u&&(c.cacheable=!1),p}function pn(l,o,i){const{min:c,max:u}=l,d=fs(o,(u-c)/2),h=(p,b)=>i&&0===p?0:p+b;return{min:h(c,-Math.abs(d)),max:h(u,d)}}function Vs(l,o){return Object.assign(Object.create(l),o)}const Pa=["left","top","right","bottom"];function Lr(l,o){return l.filter(i=>i.pos===o)}function ec(l,o){return l.filter(i=>-1===Pa.indexOf(i.pos)&&i.box.axis===o)}function Ir(l,o){return l.sort((i,c)=>{const u=o?c:i,d=o?i:c;return u.weight===d.weight?u.index-d.index:u.weight-d.weight})}function vi(l,o,i,c){return Math.max(l[i],o[i])+Math.max(l[c],o[c])}function rf(l,o){l.top=Math.max(l.top,o.top),l.left=Math.max(l.left,o.left),l.bottom=Math.max(l.bottom,o.bottom),l.right=Math.max(l.right,o.right)}function rs(l,o,i,c){const{pos:u,box:d}=i,h=l.maxPadding;if(!It(u)){i.size&&(l[u]-=i.size);const w=c[i.stack]||{size:0,count:1};w.size=Math.max(w.size,i.horizontal?d.height:d.width),i.size=w.size/w.count,l[u]+=i.size}d.getPadding&&rf(h,d.getPadding());const p=Math.max(0,o.outerWidth-vi(h,l,"left","right")),b=Math.max(0,o.outerHeight-vi(h,l,"top","bottom")),C=p!==l.w,v=b!==l.h;return l.w=p,l.h=b,i.horizontal?{same:C,other:v}:{same:v,other:C}}function dm(l,o){const i=o.maxPadding;return function c(u){const d={left:0,top:0,right:0,bottom:0};return u.forEach(h=>{d[h]=Math.max(o[h],i[h])}),d}(l?["left","right"]:["top","bottom"])}function _i(l,o,i,c){const u=[];let d,h,p,b,C,v;for(d=0,h=l.length,C=0;d<h;++d){p=l[d],b=p.box,b.update(p.width||o.w,p.height||o.h,dm(p.horizontal,o));const{same:w,other:T}=rs(o,i,p,c);C|=w&&u.length,v=v||T,b.fullSize||u.push(p)}return C&&_i(u,o,i,c)||v}function Da(l,o,i,c,u){l.top=i,l.left=o,l.right=o+c,l.bottom=i+u,l.width=c,l.height=u}function nc(l,o,i,c){const u=i.padding;let{x:d,y:h}=o;for(const p of l){const b=p.box,C=c[p.stack]||{count:1,placed:0,weight:1},v=p.stackWeight/C.weight||1;if(p.horizontal){const w=o.w*v,T=C.size||b.height;zn(C.start)&&(h=C.start),b.fullSize?Da(b,u.left,h,i.outerWidth-u.right-u.left,T):Da(b,o.left+C.placed,h,w,T),C.start=h,C.placed+=w,h=b.bottom}else{const w=o.h*v,T=C.size||b.width;zn(C.start)&&(d=C.start),b.fullSize?Da(b,d,u.top,T,i.outerHeight-u.bottom-u.top):Da(b,d,o.top+C.placed,T,w),C.start=d,C.placed+=w,d=b.right}}o.x=d,o.y=h}Qt.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var de={addBox(l,o){l.boxes||(l.boxes=[]),o.fullSize=o.fullSize||!1,o.position=o.position||"top",o.weight=o.weight||0,o._layers=o._layers||function(){return[{z:0,draw(i){o.draw(i)}}]},l.boxes.push(o)},removeBox(l,o){const i=l.boxes?l.boxes.indexOf(o):-1;-1!==i&&l.boxes.splice(i,1)},configure(l,o,i){o.fullSize=i.fullSize,o.position=i.position,o.weight=i.weight},update(l,o,i,c){if(!l)return;const u=W(l.options.layout.padding),d=Math.max(o-u.width,0),h=Math.max(i-u.height,0),p=function of(l){const o=function xi(l){const o=[];let i,c,u,d,h,p;for(i=0,c=(l||[]).length;i<c;++i)u=l[i],({position:d,options:{stack:h,stackWeight:p=1}}=u),o.push({index:i,box:u,pos:d,horizontal:u.isHorizontal(),weight:u.weight,stack:h&&d+h,stackWeight:p});return o}(l),i=Ir(o.filter(C=>C.box.fullSize),!0),c=Ir(Lr(o,"left"),!0),u=Ir(Lr(o,"right")),d=Ir(Lr(o,"top"),!0),h=Ir(Lr(o,"bottom")),p=ec(o,"x"),b=ec(o,"y");return{fullSize:i,leftAndTop:c.concat(d),rightAndBottom:u.concat(b).concat(h).concat(p),chartArea:Lr(o,"chartArea"),vertical:c.concat(u).concat(b),horizontal:d.concat(h).concat(p)}}(l.boxes),b=p.vertical,C=p.horizontal;ae(l.boxes,I=>{"function"==typeof I.beforeLayout&&I.beforeLayout()});const v=b.reduce((I,U)=>U.box.options&&!1===U.box.options.display?I:I+1,0)||1,w=Object.freeze({outerWidth:o,outerHeight:i,padding:u,availableWidth:d,availableHeight:h,vBoxMaxWidth:d/2/v,hBoxMaxHeight:h/2}),T=Object.assign({},u);rf(T,W(c));const O=Object.assign({maxPadding:T,w:d,h,x:u.left,y:u.top},u),M=function Ce(l,o){const i=function sf(l){const o={};for(const i of l){const{stack:c,pos:u,stackWeight:d}=i;if(!c||!Pa.includes(u))continue;const h=o[c]||(o[c]={count:0,placed:0,weight:0,size:0});h.count++,h.weight+=d}return o}(l),{vBoxMaxWidth:c,hBoxMaxHeight:u}=o;let d,h,p;for(d=0,h=l.length;d<h;++d){p=l[d];const{fullSize:b}=p.box,C=i[p.stack],v=C&&p.stackWeight/C.weight;p.horizontal?(p.width=v?v*c:b&&o.availableWidth,p.height=u):(p.width=c,p.height=v?v*u:b&&o.availableHeight)}return i}(b.concat(C),w);_i(p.fullSize,O,w,M),_i(b,O,w,M),_i(C,O,w,M)&&_i(b,O,w,M),function Wn(l){const o=l.maxPadding;function i(c){const u=Math.max(o[c]-l[c],0);return l[c]+=u,u}l.y+=i("top"),l.x+=i("left"),i("right"),i("bottom")}(O),nc(p.leftAndTop,O,w,M),O.x+=O.w,O.y+=O.h,nc(p.rightAndBottom,O,w,M),l.chartArea={left:O.left,top:O.top,right:O.left+O.w,bottom:O.top+O.h,height:O.h,width:O.w},ae(p.chartArea,I=>{const U=I.box;Object.assign(U,l.chartArea),U.update(O.w,O.h,{left:0,top:0,right:0,bottom:0})})}};function jn(l,o=[""],i=l,c,u=(()=>l[0])){zn(c)||(c=rc("_fallback",l));const d={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:l,_rootScopes:i,_fallback:c,_getTarget:u,override:h=>jn([h,...l],o,i,c)};return new Proxy(d,{deleteProperty:(h,p)=>(delete h[p],delete h._keys,delete l[0][p],!0),get:(h,p)=>af(h,p,()=>function wi(l,o,i,c){let u;for(const d of o)if(u=rc(Na(d,l),i),zn(u))return Rn(l,u)?Oa(i,c,l,u):u}(p,o,l,h)),getOwnPropertyDescriptor:(h,p)=>Reflect.getOwnPropertyDescriptor(h._scopes[0],p),getPrototypeOf:()=>Reflect.getPrototypeOf(l[0]),has:(h,p)=>ic(h).includes(p),ownKeys:h=>ic(h),set(h,p,b){const C=h._storage||(h._storage=u());return h[p]=C[p]=b,delete h._keys,!0}})}function Ye(l,o,i,c){const u={_cacheable:!1,_proxy:l,_context:o,_subProxy:i,_stack:new Set,_descriptors:Fr(l,c),setContext:d=>Ye(l,d,i,c),override:d=>Ye(l.override(d),o,i,c)};return new Proxy(u,{deleteProperty:(d,h)=>(delete d[h],delete l[h],!0),get:(d,h,p)=>af(d,h,()=>function lf(l,o,i){const{_proxy:c,_context:u,_subProxy:d,_descriptors:h}=l;let p=c[o];return hs(p)&&h.isScriptable(o)&&(p=function sc(l,o,i,c){const{_proxy:u,_context:d,_subProxy:h,_stack:p}=i;if(p.has(l))throw new Error("Recursion detected: "+Array.from(p).join("->")+"->"+l);return p.add(l),o=o(d,h||c),p.delete(l),Rn(l,o)&&(o=Oa(u._scopes,u,l,o)),o}(o,p,l,i)),me(p)&&p.length&&(p=function hm(l,o,i,c){const{_proxy:u,_context:d,_subProxy:h,_descriptors:p}=i;if(zn(d.index)&&c(l))o=o[d.index%o.length];else if(It(o[0])){const b=o,C=u._scopes.filter(v=>v!==b);o=[];for(const v of b){const w=Oa(C,u,l,v);o.push(Ye(w,d,h&&h[l],p))}}return o}(o,p,l,h.isIndexable)),Rn(o,p)&&(p=Ye(p,u,d&&d[o],h)),p}(d,h,p)),getOwnPropertyDescriptor:(d,h)=>d._descriptors.allKeys?Reflect.has(l,h)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(l,h),getPrototypeOf:()=>Reflect.getPrototypeOf(l),has:(d,h)=>Reflect.has(l,h),ownKeys:()=>Reflect.ownKeys(l),set:(d,h,p)=>(l[h]=p,delete d[h],!0)})}function Fr(l,o={scriptable:!0,indexable:!0}){const{_scriptable:i=o.scriptable,_indexable:c=o.indexable,_allKeys:u=o.allKeys}=l;return{allKeys:u,scriptable:i,indexable:c,isScriptable:hs(i)?i:()=>i,isIndexable:hs(c)?c:()=>c}}const Na=(l,o)=>l?l+uo(o):o,Rn=(l,o)=>It(o)&&"adapters"!==l&&(null===Object.getPrototypeOf(o)||o.constructor===Object);function af(l,o,i){if(Object.prototype.hasOwnProperty.call(l,o))return l[o];const c=i();return l[o]=c,c}function cf(l,o,i){return hs(l)?l(o,i):l}const Si=(l,o)=>!0===l?o:"string"==typeof l?ie(o,l):void 0;function uf(l,o,i,c,u){for(const d of o){const h=Si(i,d);if(h){l.add(h);const p=cf(h._fallback,i,u);if(zn(p)&&p!==i&&p!==c)return p}else if(!1===h&&zn(c)&&i!==c)return null}return!1}function Oa(l,o,i,c){const u=o._rootScopes,d=cf(o._fallback,i,c),h=[...l,...u],p=new Set;p.add(c);let b=oc(p,h,i,d||i,c);return!(null===b||zn(d)&&d!==i&&(b=oc(p,h,d,b,c),null===b))&&jn(Array.from(p),[""],u,d,()=>function mm(l,o,i){const c=l._getTarget();o in c||(c[o]={});const u=c[o];return me(u)&&It(i)?i:u}(o,i,c))}function oc(l,o,i,c,u){for(;i;)i=uf(l,o,i,c,u);return i}function rc(l,o){for(const i of o){if(!i)continue;const c=i[l];if(zn(c))return c}}function ic(l){let o=l._keys;return o||(o=l._keys=function gm(l){const o=new Set;for(const i of l)for(const c of Object.keys(i).filter(u=>!u.startsWith("_")))o.add(c);return Array.from(o)}(l._scopes)),o}const ac=Number.EPSILON||1e-14,Ds=(l,o)=>o<l.length&&!l[o].skip&&l[o],ff=l=>"x"===l?"y":"x";function df(l,o,i,c){const u=l.skip?o:l,d=o,h=i.skip?o:i,p=mi(d,u),b=mi(h,d);let C=p/(p+b),v=b/(p+b);C=isNaN(C)?0:C,v=isNaN(v)?0:v;const w=c*C,T=c*v;return{previous:{x:d.x-w*(h.x-u.x),y:d.y-w*(h.y-u.y)},next:{x:d.x+T*(h.x-u.x),y:d.y+T*(h.y-u.y)}}}function bm(l,o="x"){const i=ff(o),c=l.length,u=Array(c).fill(0),d=Array(c);let h,p,b,C=Ds(l,0);for(h=0;h<c;++h)if(p=b,b=C,C=Ds(l,h+1),b){if(C){const v=C[o]-b[o];u[h]=0!==v?(C[i]-b[i])/v:0}d[h]=p?C?ns(u[h-1])!==ns(u[h])?0:(u[h-1]+u[h])/2:u[h-1]:u[h]}(function pm(l,o,i){const c=l.length;let u,d,h,p,b,C=Ds(l,0);for(let v=0;v<c-1;++v)if(b=C,C=Ds(l,v+1),b&&C){if(Tr(o[v],0,ac)){i[v]=i[v+1]=0;continue}u=i[v]/o[v],d=i[v+1]/o[v],p=Math.pow(u,2)+Math.pow(d,2),!(p<=9)&&(h=3/Math.sqrt(p),i[v]=u*h*o[v],i[v+1]=d*h*o[v])}})(l,u,d),function ki(l,o,i="x"){const c=ff(i),u=l.length;let d,h,p,b=Ds(l,0);for(let C=0;C<u;++C){if(h=p,p=b,b=Ds(l,C+1),!p)continue;const v=p[i],w=p[c];h&&(d=(v-h[i])/3,p[`cp1${i}`]=v-d,p[`cp1${c}`]=w-d*o[C]),b&&(d=(b[i]-v)/3,p[`cp2${i}`]=v+d,p[`cp2${c}`]=w+d*o[C])}}(l,d,o)}function D(l,o,i){return Math.max(Math.min(l,i),o)}function Ns(l,o,i,c,u){let d,h,p,b;if(o.spanGaps&&(l=l.filter(C=>!C.skip)),"monotone"===o.cubicInterpolationMode)bm(l,u);else{let C=c?l[l.length-1]:l[0];for(d=0,h=l.length;d<h;++d)p=l[d],b=df(C,p,l[Math.min(d+1,h-(c?0:1))%h],o.tension),p.cp1x=b.previous.x,p.cp1y=b.previous.y,p.cp2x=b.next.x,p.cp2y=b.next.y,C=p}o.capBezierPoints&&function hf(l,o){let i,c,u,d,h,p=mn(l[0],o);for(i=0,c=l.length;i<c;++i)h=d,d=p,p=i<c-1&&mn(l[i+1],o),d&&(u=l[i],h&&(u.cp1x=D(u.cp1x,o.left,o.right),u.cp1y=D(u.cp1y,o.top,o.bottom)),p&&(u.cp2x=D(u.cp2x,o.left,o.right),u.cp2y=D(u.cp2y,o.top,o.bottom)))}(l,i)}const Ei=l=>0===l||1===l,mf=(l,o,i)=>-Math.pow(2,10*(l-=1))*Math.sin((l-o)*be/i),gf=(l,o,i)=>Math.pow(2,-10*l)*Math.sin((l-o)*be/i)+1,ee={linear:l=>l,easeInQuad:l=>l*l,easeOutQuad:l=>-l*(l-2),easeInOutQuad:l=>(l/=.5)<1?.5*l*l:-.5*(--l*(l-2)-1),easeInCubic:l=>l*l*l,easeOutCubic:l=>(l-=1)*l*l+1,easeInOutCubic:l=>(l/=.5)<1?.5*l*l*l:.5*((l-=2)*l*l+2),easeInQuart:l=>l*l*l*l,easeOutQuart:l=>-((l-=1)*l*l*l-1),easeInOutQuart:l=>(l/=.5)<1?.5*l*l*l*l:-.5*((l-=2)*l*l*l-2),easeInQuint:l=>l*l*l*l*l,easeOutQuint:l=>(l-=1)*l*l*l*l+1,easeInOutQuint:l=>(l/=.5)<1?.5*l*l*l*l*l:.5*((l-=2)*l*l*l*l+2),easeInSine:l=>1-Math.cos(l*Ae),easeOutSine:l=>Math.sin(l*Ae),easeInOutSine:l=>-.5*(Math.cos(Ee*l)-1),easeInExpo:l=>0===l?0:Math.pow(2,10*(l-1)),easeOutExpo:l=>1===l?1:1-Math.pow(2,-10*l),easeInOutExpo:l=>Ei(l)?l:l<.5?.5*Math.pow(2,10*(2*l-1)):.5*(2-Math.pow(2,-10*(2*l-1))),easeInCirc:l=>l>=1?l:-(Math.sqrt(1-l*l)-1),easeOutCirc:l=>Math.sqrt(1-(l-=1)*l),easeInOutCirc:l=>(l/=.5)<1?-.5*(Math.sqrt(1-l*l)-1):.5*(Math.sqrt(1-(l-=2)*l)+1),easeInElastic:l=>Ei(l)?l:mf(l,.075,.3),easeOutElastic:l=>Ei(l)?l:gf(l,.075,.3),easeInOutElastic:l=>Ei(l)?l:l<.5?.5*mf(2*l,.1125,.45):.5+.5*gf(2*l-1,.1125,.45),easeInBack:l=>l*l*(2.70158*l-1.70158),easeOutBack:l=>(l-=1)*l*(2.70158*l+1.70158)+1,easeInOutBack(l){let o=1.70158;return(l/=.5)<1?l*l*((1+(o*=1.525))*l-o)*.5:.5*((l-=2)*l*((1+(o*=1.525))*l+o)+2)},easeInBounce:l=>1-ee.easeOutBounce(1-l),easeOutBounce:l=>l<1/2.75?7.5625*l*l:l<2/2.75?7.5625*(l-=1.5/2.75)*l+.75:l<2.5/2.75?7.5625*(l-=2.25/2.75)*l+.9375:7.5625*(l-=2.625/2.75)*l+.984375,easeInOutBounce:l=>l<.5?.5*ee.easeInBounce(2*l):.5*ee.easeOutBounce(2*l-1)+.5};function bn(l,o,i,c){return{x:l.x+i*(o.x-l.x),y:l.y+i*(o.y-l.y)}}function lc(l,o,i,c){return{x:l.x+i*(o.x-l.x),y:"middle"===c?i<.5?l.y:o.y:"after"===c?i<1?l.y:o.y:i>0?o.y:l.y}}function Us(l,o,i,c){const u={x:l.cp2x,y:l.cp2y},d={x:o.cp1x,y:o.cp1y},h=bn(l,u,i),p=bn(u,d,i),b=bn(d,o,i),C=bn(h,p,i),v=bn(p,b,i);return bn(C,v,i)}const pf=new Map;function cn(l,o,i){return function bf(l,o){o=o||{};const i=l+JSON.stringify(o);let c=pf.get(i);return c||(c=new Intl.NumberFormat(l,o),pf.set(i,c)),c}(o,i).format(l)}function jo(l,o,i){return l?function(l,o){return{x:i=>l+l+o-i,setWidth(i){o=i},textAlign:i=>"center"===i?i:"right"===i?"left":"right",xPlus:(i,c)=>i-c,leftForLtr:(i,c)=>i-c}}(o,i):{x:l=>l,setWidth(l){},textAlign:l=>l,xPlus:(l,o)=>l+o,leftForLtr:(l,o)=>l}}function Ws(l,o){let i,c;("ltr"===o||"rtl"===o)&&(i=l.canvas.style,c=[i.getPropertyValue("direction"),i.getPropertyPriority("direction")],i.setProperty("direction",o,"important"),l.prevTextDirection=c)}function qo(l,o){void 0!==o&&(delete l.prevTextDirection,l.canvas.style.setProperty("direction",o[0],o[1]))}function cc(l){return"angle"===l?{between:Pr,compare:qu,normalize:Tn}:{between:Te,compare:(o,i)=>o-i,normalize:o=>o}}function uc({start:l,end:o,count:i,loop:c,style:u}){return{start:l%i,end:o%i,loop:c&&(o-l+1)%i==0,style:u}}function $r(l,o,i){if(!i)return[l];const{property:c,start:u,end:d}=i,h=o.length,{compare:p,between:b,normalize:C}=cc(c),{start:v,end:w,loop:T,style:O}=function en(l,o,i){const{property:c,start:u,end:d}=i,{between:h,normalize:p}=cc(c),b=o.length;let T,O,{start:C,end:v,loop:w}=l;if(w){for(C+=b,v+=b,T=0,O=b;T<O&&h(p(o[C%b][c]),u,d);++T)C--,v--;C%=b,v%=b}return v<C&&(v+=b),{start:C,end:v,loop:w,style:l.style}}(l,o,i),M=[];let j,nt,ct,I=!1,U=null;for(let Ot=v,Dt=v;Ot<=w;++Ot)nt=o[Ot%h],!nt.skip&&(j=C(nt[c]),j!==ct&&(I=b(j,u,d),null===U&&(I||b(u,ct,j)&&0!==p(u,ct))&&(U=0===p(j,u)?Ot:Dt),null!==U&&(!I||0===p(d,j)||b(d,ct,j))&&(M.push(uc({start:U,end:Ot,loop:T,count:h,style:O})),U=null),Dt=Ot,ct=j));return null!==U&&M.push(uc({start:U,end:w,loop:T,count:h,style:O})),M}function Ma(l,o){const i=[],c=l.segments;for(let u=0;u<c.length;u++){const d=$r(c[u],l.points,o);d.length&&i.push(...d)}return i}function Cf(l,o){const i=l.points,c=l.options.spanGaps,u=i.length;if(!u)return[];const d=!!l._loop,{start:h,end:p}=function fc(l,o,i,c){let u=0,d=o-1;if(i&&!c)for(;u<o&&!l[u].skip;)u++;for(;u<o&&l[u].skip;)u++;for(u%=o,i&&(d+=u);d>u&&l[d%o].skip;)d--;return d%=o,{start:u,end:d}}(i,u,d,c);return dc(l,!0===c?[{start:h,end:p,loop:d}]:function yf(l,o,i,c){const u=l.length,d=[];let b,h=o,p=l[o];for(b=o+1;b<=i;++b){const C=l[b%u];C.skip||C.stop?p.skip||(d.push({start:o%u,end:(b-1)%u,loop:c=!1}),o=h=C.stop?b:null):(h=b,p.skip&&(o=b)),p=C}return null!==h&&d.push({start:o%u,end:h%u,loop:c}),d}(i,h,p<h?p+u:p,!!l._fullLoop&&0===h&&p===u-1),i,o)}function dc(l,o,i,c){return c&&c.setContext&&i?function xf(l,o,i,c){const u=l._chart.getContext(),d=vf(l.options),{_datasetIndex:h,options:{spanGaps:p}}=l,b=i.length,C=[];let v=d,w=o[0].start,T=w;function O(M,I,U,j){const nt=p?-1:1;if(M!==I){for(M+=b;i[M%b].skip;)M-=nt;for(;i[I%b].skip;)I+=nt;M%b!=I%b&&(C.push({start:M%b,end:I%b,loop:U,style:j}),v=j,w=I%b)}}for(const M of o){w=p?w:M.start;let U,I=i[w%b];for(T=w+1;T<=M.end;T++){const j=i[T%b];U=vf(c.setContext(Vs(u,{type:"segment",p0:I,p1:j,p0DataIndex:(T-1)%b,p1DataIndex:T%b,datasetIndex:h}))),Ko(U,v)&&O(w,T-1,M.loop,v),I=j,v=U}w<T-1&&O(w,T-1,M.loop,v)}return C}(l,o,i,c):o}function vf(l){return{backgroundColor:l.backgroundColor,borderCapStyle:l.borderCapStyle,borderDash:l.borderDash,borderDashOffset:l.borderDashOffset,borderJoinStyle:l.borderJoinStyle,borderWidth:l.borderWidth,borderColor:l.borderColor}}function Ko(l,o){return o&&JSON.stringify(l)!==JSON.stringify(o)}var hc=Object.freeze({__proto__:null,easingEffects:ee,color:Kt,getHoverColor:Z,noop:us,uid:vr,isNullOrUndef:dt,isArray:me,isObject:It,isFinite:Be,finiteOrDefault:ue,valueOrDefault:Vt,toPercentage:Il,toDimension:fs,callback:fe,each:ae,_elementsEqual:_r,clone:Uo,_merger:va,merge:Ke,mergeIf:es,_mergerIf:dn,_deprecated:function wr(l,o,i,c){void 0!==o&&console.warn(l+': "'+i+'" is deprecated. Please use "'+c+'" instead')},resolveObjectKey:ie,_capitalize:uo,defined:zn,isFunction:hs,setsEqual:_a,_isClickEvent:Wu,toFontString:Vn,_measureText:Dr,_longestText:ka,_alignPixel:Un,clearCanvas:zl,drawPoint:Nr,_isPointInArea:mn,clipArea:ho,unclipArea:gi,_steppedLineTo:Yu,_bezierCurveTo:Ea,renderText:gn,addRoundedRectPath:Or,_lookup:pi,_lookupByKey:ps,_rlookupByKey:Hl,_filterBetween:Vl,listenArrayEvents:Wl,unlistenArrayEvents:jl,_arrayUnique:Aa,_createResolver:jn,_attachContext:Ye,_descriptors:Fr,splineCurve:df,splineCurveMonotone:bm,_updateBezierControlPoints:Ns,_isDomSupported:Ta,_getParentNode:bi,getStyle:ql,getRelativePosition:Kl,getMaximumSize:am,retinaScale:Yl,supportsEventListenerOptions:Ju,readUsedSize:Gl,fontString:function De(l,o,i){return o+" "+l+"px "+i},requestAnimFrame:Oe,throttled:Je,debounce:ts,_toLeftRightCenter:lo,_alignStartEnd:ln,_textX:Bu,_pointInLine:bn,_steppedInterpolation:lc,_bezierInterpolation:Us,formatNumber:cn,toLineHeight:tf,_readValueToProps:tc,toTRBL:nf,toTRBLCorners:Mr,toPadding:W,toFont:Re,resolve:Br,_addGrace:pn,createContext:Vs,PI:Ee,TAU:be,PITAU:Sa,INFINITY:hi,RAD_PER_DEG:Er,HALF_PI:Ae,QUARTER_PI:gs,TWO_THIRDS_PI:wa,log10:hn,sign:ns,niceNum:Rs,_factorize:fo,isNumber:Ar,almostEquals:Tr,almostWhole:ju,_setMinAndMaxByKey:Fl,toRadians:Hn,toDegrees:Rr,_decimalPlaces:Wo,getAngleFromPoint:$l,distanceBetweenPoints:mi,_angleDiff:qu,_normalizeAngle:Tn,_angleBetween:Pr,_limitValue:Ue,_int16Range:Ku,_isBetween:Te,getRtlAdapter:jo,overrideTextDirection:Ws,restoreTextDirection:qo,_boundSegment:$r,_boundSegments:Ma,_computeSegments:Cf});class mc{acquireContext(o,i){}releaseContext(o){return!1}addEventListener(o,i,c){}removeEventListener(o,i,c){}getDevicePixelRatio(){return 1}getMaximumSize(o,i,c,u){return i=Math.max(0,i||o.width),c=c||o.height,{width:i,height:Math.max(0,u?Math.floor(i/u):c)}}isAttached(o){return!0}updateConfig(o){}}class _f extends mc{acquireContext(o){return o&&o.getContext&&o.getContext("2d")||null}updateConfig(o){o.options.animation=!1}}const Ai="$chartjs",xm={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Yo=l=>null===l||""===l,wf=!!Ju&&{passive:!0};function Ba(l,o,i){l.canvas.removeEventListener(o,i,wf)}function Ti(l,o){for(const i of l)if(i===o||i.contains(o))return!0}function La(l,o,i){const c=l.canvas,u=new MutationObserver(d=>{let h=!1;for(const p of d)h=h||Ti(p.addedNodes,c),h=h&&!Ti(p.removedNodes,c);h&&i()});return u.observe(document,{childList:!0,subtree:!0}),u}function Ef(l,o,i){const c=l.canvas,u=new MutationObserver(d=>{let h=!1;for(const p of d)h=h||Ti(p.removedNodes,c),h=h&&!Ti(p.addedNodes,c);h&&i()});return u.observe(document,{childList:!0,subtree:!0}),u}const zr=new Map;let Af=0;function qn(){const l=window.devicePixelRatio;l!==Af&&(Af=l,zr.forEach((o,i)=>{i.currentDevicePixelRatio!==l&&o()}))}function He(l,o,i){const c=l.canvas,u=c&&bi(c);if(!u)return;const d=Je((p,b)=>{const C=u.clientWidth;i(p,b),C<u.clientWidth&&i()},window),h=new ResizeObserver(p=>{const b=p[0],C=b.contentRect.width,v=b.contentRect.height;0===C&&0===v||d(C,v)});return h.observe(u),function go(l,o){zr.size||window.addEventListener("resize",qn),zr.set(l,o)}(l,d),h}function gc(l,o,i){i&&i.disconnect(),"resize"===o&&function Tf(l){zr.delete(l),zr.size||window.removeEventListener("resize",qn)}(l)}function vm(l,o,i){const c=l.canvas,u=Je(d=>{null!==l.ctx&&i(function Os(l,o){const i=xm[l.type]||l.type,{x:c,y:u}=Kl(l,o);return{type:i,chart:o,native:l,x:void 0!==c?c:null,y:void 0!==u?u:null}}(d,l))},l,d=>{const h=d[0];return[h,h.offsetX,h.offsetY]});return function kf(l,o,i){l.addEventListener(o,i,wf)}(c,o,u),u}class po extends mc{acquireContext(o,i){const c=o&&o.getContext&&o.getContext("2d");return c&&c.canvas===o?(function Sf(l,o){const i=l.style,c=l.getAttribute("height"),u=l.getAttribute("width");if(l[Ai]={initial:{height:c,width:u,style:{display:i.display,height:i.height,width:i.width}}},i.display=i.display||"block",i.boxSizing=i.boxSizing||"border-box",Yo(u)){const d=Gl(l,"width");void 0!==d&&(l.width=d)}if(Yo(c))if(""===l.style.height)l.height=l.width/(o||2);else{const d=Gl(l,"height");void 0!==d&&(l.height=d)}}(o,i),c):null}releaseContext(o){const i=o.canvas;if(!i[Ai])return!1;const c=i[Ai].initial;["height","width"].forEach(d=>{const h=c[d];dt(h)?i.removeAttribute(d):i.setAttribute(d,h)});const u=c.style||{};return Object.keys(u).forEach(d=>{i.style[d]=u[d]}),i.width=i.width,delete i[Ai],!0}addEventListener(o,i,c){this.removeEventListener(o,i),(o.$proxies||(o.$proxies={}))[i]=({attach:La,detach:Ef,resize:He}[i]||vm)(o,i,c)}removeEventListener(o,i){const c=o.$proxies||(o.$proxies={}),u=c[i];u&&(({attach:gc,detach:gc,resize:gc}[i]||Ba)(o,i,u),c[i]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(o,i,c,u){return am(o,i,c,u)}isAttached(o){const i=bi(o);return!(!i||!i.isConnected)}}function Hr(l){return!Ta()||"undefined"!=typeof OffscreenCanvas&&l instanceof OffscreenCanvas?_f:po}var Pe=Object.freeze({__proto__:null,_detectPlatform:Hr,BasePlatform:mc,BasicPlatform:_f,DomPlatform:po});const js="transparent",_m={boolean:(l,o,i)=>i>.5?o:l,color(l,o,i){const c=Kt(l||js),u=c.valid&&Kt(o||js);return u&&u.valid?u.mix(c,i).hexString():o},number:(l,o,i)=>l+(o-l)*i};class Rf{constructor(o,i,c,u){const d=i[c];u=Br([o.to,u,d,o.from]);const h=Br([o.from,d,u]);this._active=!0,this._fn=o.fn||_m[o.type||typeof h],this._easing=ee[o.easing]||ee.linear,this._start=Math.floor(Date.now()+(o.delay||0)),this._duration=this._total=Math.floor(o.duration),this._loop=!!o.loop,this._target=i,this._prop=c,this._from=h,this._to=u,this._promises=void 0}active(){return this._active}update(o,i,c){if(this._active){this._notify(!1);const u=this._target[this._prop],d=c-this._start,h=this._duration-d;this._start=c,this._duration=Math.floor(Math.max(h,o.duration)),this._total+=d,this._loop=!!o.loop,this._to=Br([o.to,i,u,o.from]),this._from=Br([o.from,u,i])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(o){const i=o-this._start,c=this._duration,u=this._prop,d=this._from,h=this._loop,p=this._to;let b;if(this._active=d!==p&&(h||i<c),!this._active)return this._target[u]=p,void this._notify(!0);i<0?this._target[u]=d:(b=i/c%2,b=h&&b>1?2-b:b,b=this._easing(Math.min(1,Math.max(0,b))),this._target[u]=this._fn(d,p,b))}wait(){const o=this._promises||(this._promises=[]);return new Promise((i,c)=>{o.push({res:i,rej:c})})}_notify(o){const i=o?"res":"rej",c=this._promises||[];for(let u=0;u<c.length;u++)c[u][i]()}}Qt.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const Sm=Object.keys(Qt.animation);Qt.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:l=>"onProgress"!==l&&"onComplete"!==l&&"fn"!==l}),Qt.set("animations",{colors:{type:"color",properties:["color","borderColor","backgroundColor"]},numbers:{type:"number",properties:["x","y","borderWidth","radius","tension"]}}),Qt.describe("animations",{_fallback:"animation"}),Qt.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:l=>0|l}}}});class bc{constructor(o,i){this._chart=o,this._properties=new Map,this.configure(i)}configure(o){if(!It(o))return;const i=this._properties;Object.getOwnPropertyNames(o).forEach(c=>{const u=o[c];if(!It(u))return;const d={};for(const h of Sm)d[h]=u[h];(me(u.properties)&&u.properties||[c]).forEach(h=>{(h===c||!i.has(h))&&i.set(h,d)})})}_animateOptions(o,i){const c=i.options,u=function km(l,o){if(!o)return;let i=l.options;if(i)return i.$shared&&(l.options=i=Object.assign({},i,{$shared:!1,$animations:{}})),i;l.options=o}(o,c);if(!u)return[];const d=this._createAnimations(u,c);return c.$shared&&function wm(l,o){const i=[],c=Object.keys(o);for(let u=0;u<c.length;u++){const d=l[c[u]];d&&d.active()&&i.push(d.wait())}return Promise.all(i)}(o.options.$animations,c).then(()=>{o.options=c},()=>{}),d}_createAnimations(o,i){const c=this._properties,u=[],d=o.$animations||(o.$animations={}),h=Object.keys(i),p=Date.now();let b;for(b=h.length-1;b>=0;--b){const C=h[b];if("$"===C.charAt(0))continue;if("options"===C){u.push(...this._animateOptions(o,i));continue}const v=i[C];let w=d[C];const T=c.get(C);if(w){if(T&&w.active()){w.update(T,v,p);continue}w.cancel()}T&&T.duration?(d[C]=w=new Rf(T,o,C,v),u.push(w)):o[C]=v}return u}update(o,i){if(0===this._properties.size)return void Object.assign(o,i);const c=this._createAnimations(o,i);return c.length?(As.add(this._chart,c),!0):void 0}}function Df(l,o){const i=l&&l.options||{},c=i.reverse,u=void 0===i.min?o:0,d=void 0===i.max?o:0;return{start:c?d:u,end:c?u:d}}function yc(l,o){const i=[],c=l._getSortedDatasetMetas(o);let u,d;for(u=0,d=c.length;u<d;++u)i.push(c[u].index);return i}function Go(l,o,i,c={}){const u=l.keys,d="single"===c.mode;let h,p,b,C;if(null!==o){for(h=0,p=u.length;h<p;++h){if(b=+u[h],b===i){if(c.all)continue;break}C=l.values[b],Be(C)&&(d||0===o||ns(o)===ns(C))&&(o+=C)}return o}}function Ri(l,o){const i=l&&l.options.stacked;return i||void 0===i&&void 0!==o.stack}function xc(l,o,i){const c=l[o]||(l[o]={});return c[i]||(c[i]={})}function vc(l,o,i,c){for(const u of o.getMatchingVisibleMetas(c).reverse()){const d=l[u.index];if(i&&d>0||!i&&d<0)return u.index}return null}function _c(l,o){const{chart:i,_cachedMeta:c}=l,u=i._stacks||(i._stacks={}),{iScale:d,vScale:h,index:p}=c,b=d.axis,C=h.axis,v=function Rm(l,o,i){return`${l.id}.${o.id}.${i.stack||i.type}`}(d,h,c),w=o.length;let T;for(let O=0;O<w;++O){const M=o[O],{[b]:I,[C]:U}=M;T=(M._stacks||(M._stacks={}))[C]=xc(u,v,I),T[p]=U,T._top=vc(T,h,!0,c.type),T._bottom=vc(T,h,!1,c.type)}}function Sc(l,o){const i=l.scales;return Object.keys(i).filter(c=>i[c].axis===o).shift()}function bs(l,o){const i=l.controller.index,c=l.vScale&&l.vScale.axis;if(c){o=o||l._parsed;for(const u of o){const d=u._stacks;if(!d||void 0===d[c]||void 0===d[c][i])return;delete d[c][i]}}}const Vr=l=>"reset"===l||"none"===l,vt=(l,o)=>o?l:Object.assign({},l);class Pn{constructor(o,i){this.chart=o,this._ctx=o.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const o=this._cachedMeta;this.configure(),this.linkScales(),o._stacked=Ri(o.vScale,o),this.addElements()}updateIndex(o){this.index!==o&&bs(this._cachedMeta),this.index=o}linkScales(){const o=this.chart,i=this._cachedMeta,c=this.getDataset(),u=(w,T,O,M)=>"x"===w?T:"r"===w?M:O,d=i.xAxisID=Vt(c.xAxisID,Sc(o,"x")),h=i.yAxisID=Vt(c.yAxisID,Sc(o,"y")),p=i.rAxisID=Vt(c.rAxisID,Sc(o,"r")),b=i.indexAxis,C=i.iAxisID=u(b,d,h,p),v=i.vAxisID=u(b,h,d,p);i.xScale=this.getScaleForId(d),i.yScale=this.getScaleForId(h),i.rScale=this.getScaleForId(p),i.iScale=this.getScaleForId(C),i.vScale=this.getScaleForId(v)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(o){return this.chart.scales[o]}_getOtherScale(o){const i=this._cachedMeta;return o===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){const o=this._cachedMeta;this._data&&jl(this._data,this),o._stacked&&bs(o)}_dataCheck(){const o=this.getDataset(),i=o.data||(o.data=[]),c=this._data;if(It(i))this._data=function Tm(l){const o=Object.keys(l),i=new Array(o.length);let c,u,d;for(c=0,u=o.length;c<u;++c)d=o[c],i[c]={x:d,y:l[d]};return i}(i);else if(c!==i){if(c){jl(c,this);const u=this._cachedMeta;bs(u),u._parsed=[]}i&&Object.isExtensible(i)&&Wl(i,this),this._syncList=[],this._data=i}}addElements(){const o=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(o.dataset=new this.datasetElementType)}buildOrUpdateElements(o){const i=this._cachedMeta,c=this.getDataset();let u=!1;this._dataCheck();const d=i._stacked;i._stacked=Ri(i.vScale,i),i.stack!==c.stack&&(u=!0,bs(i),i.stack=c.stack),this._resyncElements(o),(u||d!==i._stacked)&&_c(this,i._parsed)}configure(){const o=this.chart.config,i=o.datasetScopeKeys(this._type),c=o.getOptionScopes(this.getDataset(),i,!0);this.options=o.createResolver(c,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(o,i){const{_cachedMeta:c,_data:u}=this,{iScale:d,_stacked:h}=c,p=d.axis;let v,w,T,b=0===o&&i===u.length||c._sorted,C=o>0&&c._parsed[o-1];if(!1===this._parsing)c._parsed=u,c._sorted=!0,T=u;else{T=me(u[o])?this.parseArrayData(c,u,o,i):It(u[o])?this.parseObjectData(c,u,o,i):this.parsePrimitiveData(c,u,o,i);const O=()=>null===w[p]||C&&w[p]<C[p];for(v=0;v<i;++v)c._parsed[v+o]=w=T[v],b&&(O()&&(b=!1),C=w);c._sorted=b}h&&_c(this,T)}parsePrimitiveData(o,i,c,u){const{iScale:d,vScale:h}=o,p=d.axis,b=h.axis,C=d.getLabels(),v=d===h,w=new Array(u);let T,O,M;for(T=0,O=u;T<O;++T)M=T+c,w[T]={[p]:v||d.parse(C[M],M),[b]:h.parse(i[M],M)};return w}parseArrayData(o,i,c,u){const{xScale:d,yScale:h}=o,p=new Array(u);let b,C,v,w;for(b=0,C=u;b<C;++b)v=b+c,w=i[v],p[b]={x:d.parse(w[0],v),y:h.parse(w[1],v)};return p}parseObjectData(o,i,c,u){const{xScale:d,yScale:h}=o,{xAxisKey:p="x",yAxisKey:b="y"}=this._parsing,C=new Array(u);let v,w,T,O;for(v=0,w=u;v<w;++v)T=v+c,O=i[T],C[v]={x:d.parse(ie(O,p),T),y:h.parse(ie(O,b),T)};return C}getParsed(o){return this._cachedMeta._parsed[o]}getDataElement(o){return this._cachedMeta.data[o]}applyStack(o,i,c){const d=this._cachedMeta,h=i[o.axis];return Go({keys:yc(this.chart,!0),values:i._stacks[o.axis]},h,d.index,{mode:c})}updateRangeFromParsed(o,i,c,u){const d=c[i.axis];let h=null===d?NaN:d;const p=u&&c._stacks[i.axis];u&&p&&(u.values=p,h=Go(u,d,this._cachedMeta.index)),o.min=Math.min(o.min,h),o.max=Math.max(o.max,h)}getMinMax(o,i){const c=this._cachedMeta,u=c._parsed,d=c._sorted&&o===c.iScale,h=u.length,p=this._getOtherScale(o),b=((l,o,i)=>l&&!o.hidden&&o._stacked&&{keys:yc(this.chart,!0),values:null})(i,c),C={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:v,max:w}=function Cc(l){const{min:o,max:i,minDefined:c,maxDefined:u}=l.getUserBounds();return{min:c?o:Number.NEGATIVE_INFINITY,max:u?i:Number.POSITIVE_INFINITY}}(p);let T,O;function M(){O=u[T];const I=O[p.axis];return!Be(O[o.axis])||v>I||w<I}for(T=0;T<h&&(M()||(this.updateRangeFromParsed(C,o,O,b),!d));++T);if(d)for(T=h-1;T>=0;--T)if(!M()){this.updateRangeFromParsed(C,o,O,b);break}return C}getAllParsedValues(o){const i=this._cachedMeta._parsed,c=[];let u,d,h;for(u=0,d=i.length;u<d;++u)h=i[u][o.axis],Be(h)&&c.push(h);return c}getMaxOverflow(){return!1}getLabelAndValue(o){const i=this._cachedMeta,c=i.iScale,u=i.vScale,d=this.getParsed(o);return{label:c?""+c.getLabelForValue(d[c.axis]):"",value:u?""+u.getLabelForValue(d[u.axis]):""}}_update(o){const i=this._cachedMeta;this.update(o||"default"),i._clip=function Am(l){let o,i,c,u;return It(l)?(o=l.top,i=l.right,c=l.bottom,u=l.left):o=i=c=u=l,{top:o,right:i,bottom:c,left:u,disabled:!1===l}}(Vt(this.options.clip,function Em(l,o,i){if(!1===i)return!1;const c=Df(l,i),u=Df(o,i);return{top:u.end,right:c.end,bottom:u.start,left:c.start}}(i.xScale,i.yScale,this.getMaxOverflow())))}update(o){}draw(){const o=this._ctx,c=this._cachedMeta,u=c.data||[],d=this.chart.chartArea,h=[],p=this._drawStart||0,b=this._drawCount||u.length-p,C=this.options.drawActiveElementsOnTop;let v;for(c.dataset&&c.dataset.draw(o,d,p,b),v=p;v<p+b;++v){const w=u[v];w.hidden||(w.active&&C?h.push(w):w.draw(o,d))}for(v=0;v<h.length;++v)h[v].draw(o,d)}getStyle(o,i){const c=i?"active":"default";return void 0===o&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(c):this.resolveDataElementOptions(o||0,c)}getContext(o,i,c){const u=this.getDataset();let d;if(o>=0&&o<this._cachedMeta.data.length){const h=this._cachedMeta.data[o];d=h.$context||(h.$context=function Of(l,o,i){return Vs(l,{active:!1,dataIndex:o,parsed:void 0,raw:void 0,element:i,index:o,mode:"default",type:"data"})}(this.getContext(),o,h)),d.parsed=this.getParsed(o),d.raw=u.data[o],d.index=d.dataIndex=o}else d=this.$context||(this.$context=function Nf(l,o){return Vs(l,{active:!1,dataset:void 0,datasetIndex:o,index:o,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),d.dataset=u,d.index=d.datasetIndex=this.index;return d.active=!!i,d.mode=c,d}resolveDatasetElementOptions(o){return this._resolveElementOptions(this.datasetElementType.id,o)}resolveDataElementOptions(o,i){return this._resolveElementOptions(this.dataElementType.id,i,o)}_resolveElementOptions(o,i="default",c){const u="active"===i,d=this._cachedDataOpts,h=o+"-"+i,p=d[h],b=this.enableOptionSharing&&zn(c);if(p)return vt(p,b);const C=this.chart.config,v=C.datasetElementScopeKeys(this._type,o),w=u?[`${o}Hover`,"hover",o,""]:[o,""],T=C.getOptionScopes(this.getDataset(),v),O=Object.keys(Qt.elements[o]),I=C.resolveNamedOptions(T,O,()=>this.getContext(c,u),w);return I.$shared&&(I.$shared=b,d[h]=Object.freeze(vt(I,b))),I}_resolveAnimations(o,i,c){const u=this.chart,d=this._cachedDataOpts,h=`animation-${i}`,p=d[h];if(p)return p;let b;if(!1!==u.options.animation){const v=this.chart.config,w=v.datasetAnimationScopeKeys(this._type,i),T=v.getOptionScopes(this.getDataset(),w);b=v.createResolver(T,this.getContext(o,c,i))}const C=new bc(u,b&&b.animations);return b&&b._cacheable&&(d[h]=Object.freeze(C)),C}getSharedOptions(o){if(o.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},o))}includeOptions(o,i){return!i||Vr(o)||this.chart._animationsDisabled}updateElement(o,i,c,u){Vr(u)?Object.assign(o,c):this._resolveAnimations(i,u).update(o,c)}updateSharedOptions(o,i,c){o&&!Vr(i)&&this._resolveAnimations(void 0,i).update(o,c)}_setStyle(o,i,c,u){o.active=u;const d=this.getStyle(i,u);this._resolveAnimations(i,c,u).update(o,{options:!u&&this.getSharedOptions(d)||d})}removeHoverStyle(o,i,c){this._setStyle(o,c,"active",!1)}setHoverStyle(o,i,c){this._setStyle(o,c,"active",!0)}_removeDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!1)}_setDatasetHoverStyle(){const o=this._cachedMeta.dataset;o&&this._setStyle(o,void 0,"active",!0)}_resyncElements(o){const i=this._data,c=this._cachedMeta.data;for(const[p,b,C]of this._syncList)this[p](b,C);this._syncList=[];const u=c.length,d=i.length,h=Math.min(d,u);h&&this.parse(0,h),d>u?this._insertElements(u,d-u,o):d<u&&this._removeElements(d,u-d)}_insertElements(o,i,c=!0){const u=this._cachedMeta,d=u.data,h=o+i;let p;const b=C=>{for(C.length+=i,p=C.length-1;p>=h;p--)C[p]=C[p-i]};for(b(d),p=o;p<h;++p)d[p]=new this.dataElementType;this._parsing&&b(u._parsed),this.parse(o,i),c&&this.updateElements(d,o,i,"reset")}updateElements(o,i,c,u){}_removeElements(o,i){const c=this._cachedMeta;if(this._parsing){const u=c._parsed.splice(o,i);c._stacked&&bs(c,u)}c.data.splice(o,i)}_sync(o){if(this._parsing)this._syncList.push(o);else{const[i,c,u]=o;this[i](c,u)}this.chart._dataChanges.push([this.index,...o])}_onDataPush(){const o=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-o,o])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(o,i){i&&this._sync(["_removeElements",o,i]);const c=arguments.length-2;c&&this._sync(["_insertElements",o,c])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Pn.defaults={},Pn.prototype.datasetElementType=null,Pn.prototype.dataElementType=null;class Kn{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(o){const{x:i,y:c}=this.getProps(["x","y"],o);return{x:i,y:c}}hasValue(){return Ar(this.x)&&Ar(this.y)}getProps(o,i){const c=this.$animations;if(!i||!c)return this;const u={};return o.forEach(d=>{u[d]=c[d]&&c[d].active()?c[d]._to:this[d]}),u}}Kn.defaults={},Kn.defaultRoutes=void 0;const Mf={values:l=>me(l)?l:""+l,numeric(l,o,i){if(0===l)return"0";const c=this.chart.options.locale;let u,d=l;if(i.length>1){const C=Math.max(Math.abs(i[0].value),Math.abs(i[i.length-1].value));(C<1e-4||C>1e15)&&(u="scientific"),d=function Xo(l,o){let i=o.length>3?o[2].value-o[1].value:o[1].value-o[0].value;return Math.abs(i)>=1&&l!==Math.floor(l)&&(i=l-Math.floor(l)),i}(l,i)}const h=hn(Math.abs(d)),p=Math.max(Math.min(-1*Math.floor(h),20),0),b={notation:u,minimumFractionDigits:p,maximumFractionDigits:p};return Object.assign(b,this.options.ticks.format),cn(l,c,b)},logarithmic(l,o,i){if(0===l)return"0";const c=l/Math.pow(10,Math.floor(hn(l)));return 1===c||2===c||5===c?Mf.numeric.call(this,l,o,i):""}};var Pi={formatters:Mf};function Ia(l,o,i,c,u){const d=Vt(c,0),h=Math.min(Vt(u,l.length),l.length);let b,C,v,p=0;for(i=Math.ceil(i),u&&(b=u-c,i=b/Math.floor(b/i)),v=d;v<0;)p++,v=Math.round(d+p*i);for(C=Math.max(d,0);C<h;C++)C===v&&(o.push(l[C]),p++,v=Math.round(d+p*i))}Qt.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(l,o)=>o.lineWidth,tickColor:(l,o)=>o.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pi.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),Qt.route("scale.ticks","color","","color"),Qt.route("scale.grid","color","","borderColor"),Qt.route("scale.grid","borderColor","","borderColor"),Qt.route("scale.title","color","","color"),Qt.describe("scale",{_fallback:!1,_scriptable:l=>!l.startsWith("before")&&!l.startsWith("after")&&"callback"!==l&&"parser"!==l,_indexable:l=>"borderDash"!==l&&"tickBorderDash"!==l}),Qt.describe("scales",{_fallback:"scale"}),Qt.describe("scale.ticks",{_scriptable:l=>"backdropPadding"!==l&&"callback"!==l,_indexable:l=>"backdropPadding"!==l});const Fa=(l,o,i)=>"top"===o||"left"===o?l[o]+i:l[o]-i;function Le(l,o){const i=[],c=l.length/o,u=l.length;let d=0;for(;d<u;d+=c)i.push(l[Math.floor(d)]);return i}function If(l,o,i){const c=l.ticks.length,u=Math.min(o,c-1),d=l._startPixel,h=l._endPixel,p=1e-6;let C,b=l.getPixelForTick(u);if(!(i&&(C=1===c?Math.max(b-d,h-b):0===o?(l.getPixelForTick(1)-b)/2:(b-l.getPixelForTick(u-1))/2,b+=u<o?C:-C,b<d-p||b>h+p)))return b}function ge(l){return l.drawTicks?l.tickLength:0}function Ni(l,o){if(!l.display)return 0;const i=Re(l.font,o),c=W(l.padding);return(me(l.text)?l.text.length:1)*i.lineHeight+c.height}function Ff(l,o,i){let c=lo(l);return(i&&"right"!==o||!i&&"right"===o)&&(c=(l=>"left"===l?"right":"right"===l?"left":l)(c)),c}class Ks extends Kn{constructor(o){super(),this.id=o.id,this.type=o.type,this.options=void 0,this.ctx=o.ctx,this.chart=o.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(o){this.options=o.setContext(this.getContext()),this.axis=o.axis,this._userMin=this.parse(o.min),this._userMax=this.parse(o.max),this._suggestedMin=this.parse(o.suggestedMin),this._suggestedMax=this.parse(o.suggestedMax)}parse(o,i){return o}getUserBounds(){let{_userMin:o,_userMax:i,_suggestedMin:c,_suggestedMax:u}=this;return o=ue(o,Number.POSITIVE_INFINITY),i=ue(i,Number.NEGATIVE_INFINITY),c=ue(c,Number.POSITIVE_INFINITY),u=ue(u,Number.NEGATIVE_INFINITY),{min:ue(o,c),max:ue(i,u),minDefined:Be(o),maxDefined:Be(i)}}getMinMax(o){let h,{min:i,max:c,minDefined:u,maxDefined:d}=this.getUserBounds();if(u&&d)return{min:i,max:c};const p=this.getMatchingVisibleMetas();for(let b=0,C=p.length;b<C;++b)h=p[b].controller.getMinMax(this,o),u||(i=Math.min(i,h.min)),d||(c=Math.max(c,h.max));return i=d&&i>c?c:i,c=u&&i>c?i:c,{min:ue(i,ue(c,i)),max:ue(c,ue(i,c))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const o=this.chart.data;return this.options.labels||(this.isHorizontal()?o.xLabels:o.yLabels)||o.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){fe(this.options.beforeUpdate,[this])}update(o,i,c){const{beginAtZero:u,grace:d,ticks:h}=this.options,p=h.sampleSize;this.beforeUpdate(),this.maxWidth=o,this.maxHeight=i,this._margins=c=Object.assign({left:0,right:0,top:0,bottom:0},c),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+c.left+c.right:this.height+c.top+c.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=pn(this,d,u),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const b=p<this.ticks.length;this._convertTicksToLabels(b?Le(this.ticks,p):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),h.display&&(h.autoSkip||"auto"===h.source)&&(this.ticks=function Di(l,o){const i=l.options.ticks,c=i.maxTicksLimit||function Bf(l){const o=l.options.offset,i=l._tickSize();return Math.floor(Math.min(l._length/i+(o?0:1),l._maxLength/i))}(l),u=i.major.enabled?function rt(l){const o=[];let i,c;for(i=0,c=l.length;i<c;i++)l[i].major&&o.push(i);return o}(o):[],d=u.length,h=u[0],p=u[d-1],b=[];if(d>c)return function Pm(l,o,i,c){let h,u=0,d=i[0];for(c=Math.ceil(c),h=0;h<l.length;h++)h===d&&(o.push(l[h]),u++,d=i[u*c])}(o,b,u,d/c),b;const C=function wc(l,o,i){const c=function Lf(l){const o=l.length;let i,c;if(o<2)return!1;for(c=l[0],i=1;i<o;++i)if(l[i]-l[i-1]!==c)return!1;return c}(l),u=o.length/i;if(!c)return Math.max(u,1);const d=fo(c);for(let h=0,p=d.length-1;h<p;h++){const b=d[h];if(b>u)return b}return Math.max(u,1)}(u,o,c);if(d>0){let v,w;const T=d>1?Math.round((p-h)/(d-1)):null;for(Ia(o,b,C,dt(T)?0:h-T,h),v=0,w=d-1;v<w;v++)Ia(o,b,C,u[v],u[v+1]);return Ia(o,b,C,p,dt(T)?o.length:p+T),b}return Ia(o,b,C),b}(this,this.ticks),this._labelSizes=null),b&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let i,c,o=this.options.reverse;this.isHorizontal()?(i=this.left,c=this.right):(i=this.top,c=this.bottom,o=!o),this._startPixel=i,this._endPixel=c,this._reversePixels=o,this._length=c-i,this._alignToPixels=this.options.alignToPixels}afterUpdate(){fe(this.options.afterUpdate,[this])}beforeSetDimensions(){fe(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){fe(this.options.afterSetDimensions,[this])}_callHooks(o){this.chart.notifyPlugins(o,this.getContext()),fe(this.options[o],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){fe(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(o){const i=this.options.ticks;let c,u,d;for(c=0,u=o.length;c<u;c++)d=o[c],d.label=fe(i.callback,[d.value,c,o],this)}afterTickToLabelConversion(){fe(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){fe(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const o=this.options,i=o.ticks,c=this.ticks.length,u=i.minRotation||0,d=i.maxRotation;let p,b,C,h=u;if(!this._isVisible()||!i.display||u>=d||c<=1||!this.isHorizontal())return void(this.labelRotation=u);const v=this._getLabelSizes(),w=v.widest.width,T=v.highest.height,O=Ue(this.chart.width-w,0,this.maxWidth);p=o.offset?this.maxWidth/c:O/(c-1),w+6>p&&(p=O/(c-(o.offset?.5:1)),b=this.maxHeight-ge(o.grid)-i.padding-Ni(o.title,this.chart.options.font),C=Math.sqrt(w*w+T*T),h=Rr(Math.min(Math.asin(Ue((v.highest.height+6)/p,-1,1)),Math.asin(Ue(b/C,-1,1))-Math.asin(Ue(T/C,-1,1)))),h=Math.max(u,Math.min(d,h))),this.labelRotation=h}afterCalculateLabelRotation(){fe(this.options.afterCalculateLabelRotation,[this])}beforeFit(){fe(this.options.beforeFit,[this])}fit(){const o={width:0,height:0},{chart:i,options:{ticks:c,title:u,grid:d}}=this,h=this._isVisible(),p=this.isHorizontal();if(h){const b=Ni(u,i.options.font);if(p?(o.width=this.maxWidth,o.height=ge(d)+b):(o.height=this.maxHeight,o.width=ge(d)+b),c.display&&this.ticks.length){const{first:C,last:v,widest:w,highest:T}=this._getLabelSizes(),O=2*c.padding,M=Hn(this.labelRotation),I=Math.cos(M),U=Math.sin(M);p?o.height=Math.min(this.maxHeight,o.height+(c.mirror?0:U*w.width+I*T.height)+O):o.width=Math.min(this.maxWidth,o.width+(c.mirror?0:I*w.width+U*T.height)+O),this._calculatePadding(C,v,U,I)}}this._handleMargins(),p?(this.width=this._length=i.width-this._margins.left-this._margins.right,this.height=o.height):(this.width=o.width,this.height=this._length=i.height-this._margins.top-this._margins.bottom)}_calculatePadding(o,i,c,u){const{ticks:{align:d,padding:h},position:p}=this.options,b=0!==this.labelRotation,C="top"!==p&&"x"===this.axis;if(this.isHorizontal()){const v=this.getPixelForTick(0)-this.left,w=this.right-this.getPixelForTick(this.ticks.length-1);let T=0,O=0;b?C?(T=u*o.width,O=c*i.height):(T=c*o.height,O=u*i.width):"start"===d?O=i.width:"end"===d?T=o.width:(T=o.width/2,O=i.width/2),this.paddingLeft=Math.max((T-v+h)*this.width/(this.width-v),0),this.paddingRight=Math.max((O-w+h)*this.width/(this.width-w),0)}else{let v=i.height/2,w=o.height/2;"start"===d?(v=0,w=o.height):"end"===d&&(v=i.height,w=0),this.paddingTop=v+h,this.paddingBottom=w+h}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){fe(this.options.afterFit,[this])}isHorizontal(){const{axis:o,position:i}=this.options;return"top"===i||"bottom"===i||"x"===o}isFullSize(){return this.options.fullSize}_convertTicksToLabels(o){let i,c;for(this.beforeTickToLabelConversion(),this.generateTickLabels(o),i=0,c=o.length;i<c;i++)dt(o[i].label)&&(o.splice(i,1),c--,i--);this.afterTickToLabelConversion()}_getLabelSizes(){let o=this._labelSizes;if(!o){const i=this.options.ticks.sampleSize;let c=this.ticks;i<c.length&&(c=Le(c,i)),this._labelSizes=o=this._computeLabelSizes(c,c.length)}return o}_computeLabelSizes(o,i){const{ctx:c,_longestTextCache:u}=this,d=[],h=[];let C,v,w,T,O,M,I,U,j,nt,ct,p=0,b=0;for(C=0;C<i;++C){if(T=o[C].label,O=this._resolveTickFontOptions(C),c.font=M=O.string,I=u[M]=u[M]||{data:{},gc:[]},U=O.lineHeight,j=nt=0,dt(T)||me(T)){if(me(T))for(v=0,w=T.length;v<w;++v)ct=T[v],!dt(ct)&&!me(ct)&&(j=Dr(c,I.data,I.gc,j,ct),nt+=U)}else j=Dr(c,I.data,I.gc,j,T),nt=U;d.push(j),h.push(nt),p=Math.max(j,p),b=Math.max(nt,b)}!function qs(l,o){ae(l,i=>{const c=i.gc,u=c.length/2;let d;if(u>o){for(d=0;d<u;++d)delete i.data[c[d]];c.splice(0,u)}})}(u,i);const at=d.indexOf(p),it=h.indexOf(b),kt=_t=>({width:d[_t]||0,height:h[_t]||0});return{first:kt(0),last:kt(i-1),widest:kt(at),highest:kt(it),widths:d,heights:h}}getLabelForValue(o){return o}getPixelForValue(o,i){return NaN}getValueForPixel(o){}getPixelForTick(o){const i=this.ticks;return o<0||o>i.length-1?null:this.getPixelForValue(i[o].value)}getPixelForDecimal(o){this._reversePixels&&(o=1-o);const i=this._startPixel+o*this._length;return Ku(this._alignToPixels?Un(this.chart,i,0):i)}getDecimalForPixel(o){const i=(o-this._startPixel)/this._length;return this._reversePixels?1-i:i}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:o,max:i}=this;return o<0&&i<0?i:o>0&&i>0?o:0}getContext(o){const i=this.ticks||[];if(o>=0&&o<i.length){const c=i[o];return c.$context||(c.$context=function Dm(l,o,i){return Vs(l,{tick:i,index:o,type:"tick"})}(this.getContext(),o,c))}return this.$context||(this.$context=function Ms(l,o){return Vs(l,{scale:o,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const o=this.options.ticks,i=Hn(this.labelRotation),c=Math.abs(Math.cos(i)),u=Math.abs(Math.sin(i)),d=this._getLabelSizes(),h=o.autoSkipPadding||0,p=d?d.widest.width+h:0,b=d?d.highest.height+h:0;return this.isHorizontal()?b*c>p*u?p/c:b/u:b*u<p*c?b/c:p/u}_isVisible(){const o=this.options.display;return"auto"!==o?!!o:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(o){const i=this.axis,c=this.chart,u=this.options,{grid:d,position:h}=u,p=d.offset,b=this.isHorizontal(),v=this.ticks.length+(p?1:0),w=ge(d),T=[],O=d.setContext(this.getContext()),M=O.drawBorder?O.borderWidth:0,I=M/2,U=function(te){return Un(c,te,M)};let j,nt,ct,at,it,kt,_t,Ot,Dt,pe,ne,Jt;if("top"===h)j=U(this.bottom),kt=this.bottom-w,Ot=j-I,pe=U(o.top)+I,Jt=o.bottom;else if("bottom"===h)j=U(this.top),pe=o.top,Jt=U(o.bottom)-I,kt=j+I,Ot=this.top+w;else if("left"===h)j=U(this.right),it=this.right-w,_t=j-I,Dt=U(o.left)+I,ne=o.right;else if("right"===h)j=U(this.left),Dt=o.left,ne=U(o.right)-I,it=j+I,_t=this.left+w;else if("x"===i){if("center"===h)j=U((o.top+o.bottom)/2+.5);else if(It(h)){const te=Object.keys(h)[0];j=U(this.chart.scales[te].getPixelForValue(h[te]))}pe=o.top,Jt=o.bottom,kt=j+I,Ot=kt+w}else if("y"===i){if("center"===h)j=U((o.left+o.right)/2);else if(It(h)){const te=Object.keys(h)[0];j=U(this.chart.scales[te].getPixelForValue(h[te]))}it=j-I,_t=it-w,Dt=o.left,ne=o.right}const je=Vt(u.ticks.maxTicksLimit,v),F=Math.max(1,Math.ceil(v/je));for(nt=0;nt<v;nt+=F){const te=d.setContext(this.getContext(nt)),ve=te.lineWidth,Gi=te.color,Qs=d.borderDash||[],wn=te.borderDashOffset,Xi=te.tickWidth,rr=te.tickColor,ti=te.tickBorderDash||[],ir=te.tickBorderDashOffset;ct=If(this,nt,p),void 0!==ct&&(at=Un(c,ct,ve),b?it=_t=Dt=ne=at:kt=Ot=pe=Jt=at,T.push({tx1:it,ty1:kt,tx2:_t,ty2:Ot,x1:Dt,y1:pe,x2:ne,y2:Jt,width:ve,color:Gi,borderDash:Qs,borderDashOffset:wn,tickWidth:Xi,tickColor:rr,tickBorderDash:ti,tickBorderDashOffset:ir}))}return this._ticksLength=v,this._borderValue=j,T}_computeLabelItems(o){const i=this.axis,c=this.options,{position:u,ticks:d}=c,h=this.isHorizontal(),p=this.ticks,{align:b,crossAlign:C,padding:v,mirror:w}=d,T=ge(c.grid),O=T+v,M=w?-v:O,I=-Hn(this.labelRotation),U=[];let j,nt,ct,at,it,kt,_t,Ot,Dt,pe,ne,Jt,je="middle";if("top"===u)kt=this.bottom-M,_t=this._getXAxisLabelAlignment();else if("bottom"===u)kt=this.top+M,_t=this._getXAxisLabelAlignment();else if("left"===u){const te=this._getYAxisLabelAlignment(T);_t=te.textAlign,it=te.x}else if("right"===u){const te=this._getYAxisLabelAlignment(T);_t=te.textAlign,it=te.x}else if("x"===i){if("center"===u)kt=(o.top+o.bottom)/2+O;else if(It(u)){const te=Object.keys(u)[0];kt=this.chart.scales[te].getPixelForValue(u[te])+O}_t=this._getXAxisLabelAlignment()}else if("y"===i){if("center"===u)it=(o.left+o.right)/2-O;else if(It(u)){const te=Object.keys(u)[0];it=this.chart.scales[te].getPixelForValue(u[te])}_t=this._getYAxisLabelAlignment(T).textAlign}"y"===i&&("start"===b?je="top":"end"===b&&(je="bottom"));const F=this._getLabelSizes();for(j=0,nt=p.length;j<nt;++j){ct=p[j],at=ct.label;const te=d.setContext(this.getContext(j));Ot=this.getPixelForTick(j)+d.labelOffset,Dt=this._resolveTickFontOptions(j),pe=Dt.lineHeight,ne=me(at)?at.length:1;const ve=ne/2,Gi=te.color,Qs=te.textStrokeColor,wn=te.textStrokeWidth;let Xi;if(h?(it=Ot,Jt="top"===u?"near"===C||0!==I?-ne*pe+pe/2:"center"===C?-F.highest.height/2-ve*pe+pe:pe/2-F.highest.height:"near"===C||0!==I?pe/2:"center"===C?F.highest.height/2-ve*pe:F.highest.height-ne*pe,w&&(Jt*=-1)):(kt=Ot,Jt=(1-ne)*pe/2),te.showLabelBackdrop){const rr=W(te.backdropPadding),ti=F.heights[j],ir=F.widths[j];let Qc=kt+Jt-rr.top,cl=it-rr.left;switch(je){case"middle":Qc-=ti/2;break;case"bottom":Qc-=ti}switch(_t){case"center":cl-=ir/2;break;case"right":cl-=ir}Xi={left:cl,top:Qc,width:ir+rr.width,height:ti+rr.height,color:te.backdropColor}}U.push({rotation:I,label:at,font:Dt,color:Gi,strokeColor:Qs,strokeWidth:wn,textOffset:Jt,textAlign:_t,textBaseline:je,translation:[it,kt],backdrop:Xi})}return U}_getXAxisLabelAlignment(){const{position:o,ticks:i}=this.options;if(-Hn(this.labelRotation))return"top"===o?"left":"right";let u="center";return"start"===i.align?u="left":"end"===i.align&&(u="right"),u}_getYAxisLabelAlignment(o){const{position:i,ticks:{crossAlign:c,mirror:u,padding:d}}=this.options,p=o+d,b=this._getLabelSizes().widest.width;let C,v;return"left"===i?u?(v=this.right+d,"near"===c?C="left":"center"===c?(C="center",v+=b/2):(C="right",v+=b)):(v=this.right-p,"near"===c?C="right":"center"===c?(C="center",v-=b/2):(C="left",v=this.left)):"right"===i?u?(v=this.left+d,"near"===c?C="right":"center"===c?(C="center",v-=b/2):(C="left",v-=b)):(v=this.left+p,"near"===c?C="left":"center"===c?(C="center",v+=b/2):(C="right",v=this.right)):C="right",{textAlign:C,x:v}}_computeLabelArea(){if(this.options.ticks.mirror)return;const o=this.chart,i=this.options.position;return"left"===i||"right"===i?{top:0,left:this.left,bottom:o.height,right:this.right}:"top"===i||"bottom"===i?{top:this.top,left:0,bottom:this.bottom,right:o.width}:void 0}drawBackground(){const{ctx:o,options:{backgroundColor:i},left:c,top:u,width:d,height:h}=this;i&&(o.save(),o.fillStyle=i,o.fillRect(c,u,d,h),o.restore())}getLineWidthForValue(o){const i=this.options.grid;if(!this._isVisible()||!i.display)return 0;const u=this.ticks.findIndex(d=>d.value===o);return u>=0?i.setContext(this.getContext(u)).lineWidth:0}drawGrid(o){const i=this.options.grid,c=this.ctx,u=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(o));let d,h;const p=(b,C,v)=>{!v.width||!v.color||(c.save(),c.lineWidth=v.width,c.strokeStyle=v.color,c.setLineDash(v.borderDash||[]),c.lineDashOffset=v.borderDashOffset,c.beginPath(),c.moveTo(b.x,b.y),c.lineTo(C.x,C.y),c.stroke(),c.restore())};if(i.display)for(d=0,h=u.length;d<h;++d){const b=u[d];i.drawOnChartArea&&p({x:b.x1,y:b.y1},{x:b.x2,y:b.y2},b),i.drawTicks&&p({x:b.tx1,y:b.ty1},{x:b.tx2,y:b.ty2},{color:b.tickColor,width:b.tickWidth,borderDash:b.tickBorderDash,borderDashOffset:b.tickBorderDashOffset})}}drawBorder(){const{chart:o,ctx:i,options:{grid:c}}=this,u=c.setContext(this.getContext()),d=c.drawBorder?u.borderWidth:0;if(!d)return;const h=c.setContext(this.getContext(0)).lineWidth,p=this._borderValue;let b,C,v,w;this.isHorizontal()?(b=Un(o,this.left,d)-d/2,C=Un(o,this.right,h)+h/2,v=w=p):(v=Un(o,this.top,d)-d/2,w=Un(o,this.bottom,h)+h/2,b=C=p),i.save(),i.lineWidth=u.borderWidth,i.strokeStyle=u.borderColor,i.beginPath(),i.moveTo(b,v),i.lineTo(C,w),i.stroke(),i.restore()}drawLabels(o){if(!this.options.ticks.display)return;const c=this.ctx,u=this._computeLabelArea();u&&ho(c,u);const d=this._labelItems||(this._labelItems=this._computeLabelItems(o));let h,p;for(h=0,p=d.length;h<p;++h){const b=d[h],C=b.font,v=b.label;b.backdrop&&(c.fillStyle=b.backdrop.color,c.fillRect(b.backdrop.left,b.backdrop.top,b.backdrop.width,b.backdrop.height)),gn(c,v,0,b.textOffset,C,b)}u&&gi(c)}drawTitle(){const{ctx:o,options:{position:i,title:c,reverse:u}}=this;if(!c.display)return;const d=Re(c.font),h=W(c.padding),p=c.align;let b=d.lineHeight/2;"bottom"===i||"center"===i||It(i)?(b+=h.bottom,me(c.text)&&(b+=d.lineHeight*(c.text.length-1))):b+=h.top;const{titleX:C,titleY:v,maxWidth:w,rotation:T}=function Nm(l,o,i,c){const{top:u,left:d,bottom:h,right:p,chart:b}=l,{chartArea:C,scales:v}=b;let T,O,M,w=0;const I=h-u,U=p-d;if(l.isHorizontal()){if(O=ln(c,d,p),It(i)){const j=Object.keys(i)[0];M=v[j].getPixelForValue(i[j])+I-o}else M="center"===i?(C.bottom+C.top)/2+I-o:Fa(l,i,o);T=p-d}else{if(It(i)){const j=Object.keys(i)[0];O=v[j].getPixelForValue(i[j])-U+o}else O="center"===i?(C.left+C.right)/2-U+o:Fa(l,i,o);M=ln(c,h,u),w="left"===i?-Ae:Ae}return{titleX:O,titleY:M,maxWidth:T,rotation:w}}(this,b,i,p);gn(o,c.text,0,0,d,{color:c.color,maxWidth:w,rotation:T,textAlign:Ff(p,i,u),textBaseline:"middle",translation:[C,v]})}draw(o){!this._isVisible()||(this.drawBackground(),this.drawGrid(o),this.drawBorder(),this.drawTitle(),this.drawLabels(o))}_layers(){const o=this.options,i=o.ticks&&o.ticks.z||0,c=Vt(o.grid&&o.grid.z,-1);return this._isVisible()&&this.draw===Ks.prototype.draw?[{z:c,draw:u=>{this.drawBackground(),this.drawGrid(u),this.drawTitle()}},{z:c+1,draw:()=>{this.drawBorder()}},{z:i,draw:u=>{this.drawLabels(u)}}]:[{z:i,draw:u=>{this.draw(u)}}]}getMatchingVisibleMetas(o){const i=this.chart.getSortedVisibleDatasetMetas(),c=this.axis+"AxisID",u=[];let d,h;for(d=0,h=i.length;d<h;++d){const p=i[d];p[c]===this.id&&(!o||p.type===o)&&u.push(p)}return u}_resolveTickFontOptions(o){return Re(this.options.ticks.setContext(this.getContext(o)).font)}_maxDigits(){const o=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/o}}class $a{constructor(o,i,c){this.type=o,this.scope=i,this.override=c,this.items=Object.create(null)}isForType(o){return Object.prototype.isPrototypeOf.call(this.type.prototype,o.prototype)}register(o){const i=Object.getPrototypeOf(o);let c;(function za(l){return"id"in l&&"defaults"in l})(i)&&(c=this.register(i));const u=this.items,d=o.id,h=this.scope+"."+d;if(!d)throw new Error("class does not have id: "+o);return d in u||(u[d]=o,function $f(l,o,i){const c=Ke(Object.create(null),[i?Qt.get(i):{},Qt.get(o),l.defaults]);Qt.set(o,c),l.defaultRoutes&&function Ur(l,o){Object.keys(o).forEach(i=>{const c=i.split("."),u=c.pop(),d=[l].concat(c).join("."),h=o[i].split("."),p=h.pop(),b=h.join(".");Qt.route(d,u,b,p)})}(o,l.defaultRoutes),l.descriptors&&Qt.describe(o,l.descriptors)}(o,h,c),this.override&&Qt.override(o.id,o.overrides)),h}get(o){return this.items[o]}unregister(o){const i=this.items,c=o.id,u=this.scope;c in i&&delete i[c],u&&c in Qt[u]&&(delete Qt[u][c],this.override&&delete ms[c])}}var Bs=new class Om{constructor(){this.controllers=new $a(Pn,"datasets",!0),this.elements=new $a(Kn,"elements"),this.plugins=new $a(Object,"plugins"),this.scales=new $a(Ks,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...o){this._each("register",o)}remove(...o){this._each("unregister",o)}addControllers(...o){this._each("register",o,this.controllers)}addElements(...o){this._each("register",o,this.elements)}addPlugins(...o){this._each("register",o,this.plugins)}addScales(...o){this._each("register",o,this.scales)}getController(o){return this._get(o,this.controllers,"controller")}getElement(o){return this._get(o,this.elements,"element")}getPlugin(o){return this._get(o,this.plugins,"plugin")}getScale(o){return this._get(o,this.scales,"scale")}removeControllers(...o){this._each("unregister",o,this.controllers)}removeElements(...o){this._each("unregister",o,this.elements)}removePlugins(...o){this._each("unregister",o,this.plugins)}removeScales(...o){this._each("unregister",o,this.scales)}_each(o,i,c){[...i].forEach(u=>{const d=c||this._getRegistryForType(u);c||d.isForType(u)||d===this.plugins&&u.id?this._exec(o,d,u):ae(u,h=>{const p=c||this._getRegistryForType(h);this._exec(o,p,h)})})}_exec(o,i,c){const u=uo(o);fe(c["before"+u],[],c),i[o](c),fe(c["after"+u],[],c)}_getRegistryForType(o){for(let i=0;i<this._typedRegistries.length;i++){const c=this._typedRegistries[i];if(c.isForType(o))return c}return this.plugins}_get(o,i,c){const u=i.get(o);if(void 0===u)throw new Error('"'+o+'" is not a registered '+c+".");return u}};class Mm{constructor(){this._init=[]}notify(o,i,c,u){"beforeInit"===i&&(this._init=this._createDescriptors(o,!0),this._notify(this._init,o,"install"));const d=u?this._descriptors(o).filter(u):this._descriptors(o),h=this._notify(d,o,i,c);return"afterDestroy"===i&&(this._notify(d,o,"stop"),this._notify(this._init,o,"uninstall")),h}_notify(o,i,c,u){u=u||{};for(const d of o){const h=d.plugin;if(!1===fe(h[c],[i,u,d.options],h)&&u.cancelable)return!1}return!0}invalidate(){dt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(o){if(this._cache)return this._cache;const i=this._cache=this._createDescriptors(o);return this._notifyStateChanges(o),i}_createDescriptors(o,i){const c=o&&o.config,u=Vt(c.options&&c.options.plugins,{}),d=function Oi(l){const o=[],i=Object.keys(Bs.plugins.items);for(let u=0;u<i.length;u++)o.push(Bs.getPlugin(i[u]));const c=l.plugins||[];for(let u=0;u<c.length;u++){const d=c[u];-1===o.indexOf(d)&&o.push(d)}return o}(c);return!1!==u||i?function Qo(l,o,i,c){const u=[],d=l.getContext();for(let h=0;h<o.length;h++){const p=o[h],C=Mi(i[p.id],c);null!==C&&u.push({plugin:p,options:zf(l.config,p,C,d)})}return u}(o,d,u,i):[]}_notifyStateChanges(o){const i=this._oldCache||[],c=this._cache,u=(d,h)=>d.filter(p=>!h.some(b=>p.plugin.id===b.plugin.id));this._notify(u(i,c),o,"stop"),this._notify(u(c,i),o,"start")}}function Mi(l,o){return o||!1!==l?!0===l?{}:l:null}function zf(l,o,i,c){const u=l.pluginScopeKeys(o),d=l.getOptionScopes(i,u);return l.createResolver(d,c,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Hf(l,o){return((o.datasets||{})[l]||{}).indexAxis||o.indexAxis||(Qt.datasets[l]||{}).indexAxis||"x"}function Ec(l,o){return"x"===l||"y"===l?l:o.axis||function Bm(l){return"top"===l||"bottom"===l?"x":"left"===l||"right"===l?"y":void 0}(o.position)||l.charAt(0).toLowerCase()}function Uf(l){const o=l.options||(l.options={});o.plugins=Vt(o.plugins,{}),o.scales=function Lm(l,o){const i=ms[l.type]||{scales:{}},c=o.scales||{},u=Hf(l.type,o),d=Object.create(null),h=Object.create(null);return Object.keys(c).forEach(p=>{const b=c[p];if(!It(b))return console.error(`Invalid scale configuration for scale: ${p}`);if(b._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${p}`);const C=Ec(p,b),v=function We(l,o){return l===o?"_index_":"_value_"}(C,u),w=i.scales||{};d[C]=d[C]||p,h[p]=es(Object.create(null),[{axis:C},b,w[C],w[v]])}),l.data.datasets.forEach(p=>{const b=p.type||l.type,C=p.indexAxis||Hf(b,o),w=(ms[b]||{}).scales||{};Object.keys(w).forEach(T=>{const O=function Vf(l,o){let i=l;return"_index_"===l?i=o:"_value_"===l&&(i="x"===o?"y":"x"),i}(T,C),M=p[O+"AxisID"]||d[O]||O;h[M]=h[M]||Object.create(null),es(h[M],[{axis:O},c[M],w[T]])})}),Object.keys(h).forEach(p=>{const b=h[p];es(b,[Qt.scales[b.type],Qt.scale])}),h}(l,o)}function Wf(l){return(l=l||{}).datasets=l.datasets||[],l.labels=l.labels||[],l}const jf=new Map,qf=new Set;function ys(l,o){let i=jf.get(l);return i||(i=o(),jf.set(l,i),qf.add(i)),i}const Bi=(l,o,i)=>{const c=ie(o,i);void 0!==c&&l.add(c)};class Ls{constructor(o){this._config=function Im(l){return(l=l||{}).data=Wf(l.data),Uf(l),l}(o),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(o){this._config.type=o}get data(){return this._config.data}set data(o){this._config.data=Wf(o)}get options(){return this._config.options}set options(o){this._config.options=o}get plugins(){return this._config.plugins}update(){const o=this._config;this.clearCache(),Uf(o)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(o){return ys(o,()=>[[`datasets.${o}`,""]])}datasetAnimationScopeKeys(o,i){return ys(`${o}.transition.${i}`,()=>[[`datasets.${o}.transitions.${i}`,`transitions.${i}`],[`datasets.${o}`,""]])}datasetElementScopeKeys(o,i){return ys(`${o}-${i}`,()=>[[`datasets.${o}.elements.${i}`,`datasets.${o}`,`elements.${i}`,""]])}pluginScopeKeys(o){const i=o.id;return ys(`${this.type}-plugin-${i}`,()=>[[`plugins.${i}`,...o.additionalOptionScopes||[]]])}_cachedScopes(o,i){const c=this._scopeCache;let u=c.get(o);return(!u||i)&&(u=new Map,c.set(o,u)),u}getOptionScopes(o,i,c){const{options:u,type:d}=this,h=this._cachedScopes(o,c),p=h.get(i);if(p)return p;const b=new Set;i.forEach(v=>{o&&(b.add(o),v.forEach(w=>Bi(b,o,w))),v.forEach(w=>Bi(b,u,w)),v.forEach(w=>Bi(b,ms[d]||{},w)),v.forEach(w=>Bi(b,Qt,w)),v.forEach(w=>Bi(b,di,w))});const C=Array.from(b);return 0===C.length&&C.push(Object.create(null)),qf.has(i)&&h.set(i,C),C}chartOptionScopes(){const{options:o,type:i}=this;return[o,ms[i]||{},Qt.datasets[i]||{},{type:i},Qt,di]}resolveNamedOptions(o,i,c,u=[""]){const d={$shared:!0},{resolver:h,subPrefixes:p}=Kf(this._resolverCache,o,u);let b=h;(function Wr(l,o){const{isScriptable:i,isIndexable:c}=Fr(l);for(const u of o){const d=i(u),h=c(u),p=(h||d)&&l[u];if(d&&(hs(p)||Ac(p))||h&&me(p))return!0}return!1})(h,i)&&(d.$shared=!1,b=Ye(h,c=hs(c)?c():c,this.createResolver(o,c,p)));for(const C of i)d[C]=b[C];return d}createResolver(o,i,c=[""],u){const{resolver:d}=Kf(this._resolverCache,o,c);return It(i)?Ye(d,i,void 0,u):d}}function Kf(l,o,i){let c=l.get(o);c||(c=new Map,l.set(o,c));const u=i.join();let d=c.get(u);return d||(d={resolver:jn(o,i),subPrefixes:i.filter(p=>!p.toLowerCase().includes("hover"))},c.set(u,d)),d}const Ac=l=>It(l)&&Object.getOwnPropertyNames(l).reduce((o,i)=>o||hs(l[i]),!1),Tc=["top","bottom","left","right","chartArea"];function jr(l,o){return"top"===l||"bottom"===l||-1===Tc.indexOf(l)&&"x"===o}function Gf(l,o){return function(i,c){return i[l]===c[l]?i[o]-c[o]:i[l]-c[l]}}function Li(l){const o=l.chart,i=o.options.animation;o.notifyPlugins("afterRender"),fe(i&&i.onComplete,[l],o)}function Ha(l){const o=l.chart,i=o.options.animation;fe(i&&i.onProgress,[l],o)}function Xf(l){return Ta()&&"string"==typeof l?l=document.getElementById(l):l&&l.length&&(l=l[0]),l&&l.canvas&&(l=l.canvas),l}const bo={},Ge=l=>{const o=Xf(l);return Object.values(bo).filter(i=>i.canvas===o).pop()};function Qf(l,o,i){const c=Object.keys(l);for(const u of c){const d=+u;if(d>=o){const h=l[u];delete l[u],(i>0||d>o)&&(l[d+i]=h)}}}class Zt{constructor(o,i){const c=this.config=new Ls(i),u=Xf(o),d=Ge(u);if(d)throw new Error("Canvas is already in use. Chart with ID '"+d.id+"' must be destroyed before the canvas can be reused.");const h=c.createResolver(c.chartOptionScopes(),this.getContext());this.platform=new(c.platform||Hr(u)),this.platform.updateConfig(c);const p=this.platform.acquireContext(u,h.aspectRatio),b=p&&p.canvas,C=b&&b.height,v=b&&b.width;this.id=vr(),this.ctx=p,this.canvas=b,this.width=v,this.height=C,this._options=h,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Mm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ts(w=>this.update(w),h.resizeDelay||0),this._dataChanges=[],bo[this.id]=this,p&&b?(As.listen(this,"complete",Li),As.listen(this,"progress",Ha),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:o,maintainAspectRatio:i},width:c,height:u,_aspectRatio:d}=this;return dt(o)?i&&d?d:u?c/u:null:o}get data(){return this.config.data}set data(o){this.config.data=o}get options(){return this._options}set options(o){this.config.options=o}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Yl(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return zl(this.canvas,this.ctx),this}stop(){return As.stop(this),this}resize(o,i){As.running(this)?this._resizeBeforeDraw={width:o,height:i}:this._resize(o,i)}_resize(o,i){const c=this.options,h=this.platform.getMaximumSize(this.canvas,o,i,c.maintainAspectRatio&&this.aspectRatio),p=c.devicePixelRatio||this.platform.getDevicePixelRatio(),b=this.width?"resize":"attach";this.width=h.width,this.height=h.height,this._aspectRatio=this.aspectRatio,Yl(this,p,!0)&&(this.notifyPlugins("resize",{size:h}),fe(c.onResize,[this,h],this),this.attached&&this._doResize(b)&&this.render())}ensureScalesHaveIDs(){ae(this.options.scales||{},(c,u)=>{c.id=u})}buildOrUpdateScales(){const o=this.options,i=o.scales,c=this.scales,u=Object.keys(c).reduce((h,p)=>(h[p]=!1,h),{});let d=[];i&&(d=d.concat(Object.keys(i).map(h=>{const p=i[h],b=Ec(h,p),C="r"===b,v="x"===b;return{options:p,dposition:C?"chartArea":v?"bottom":"left",dtype:C?"radialLinear":v?"category":"linear"}}))),ae(d,h=>{const p=h.options,b=p.id,C=Ec(b,p),v=Vt(p.type,h.dtype);(void 0===p.position||jr(p.position,C)!==jr(h.dposition))&&(p.position=h.dposition),u[b]=!0;let w=null;b in c&&c[b].type===v?w=c[b]:(w=new(Bs.getScale(v))({id:b,type:v,ctx:this.ctx,chart:this}),c[w.id]=w),w.init(p,o)}),ae(u,(h,p)=>{h||delete c[p]}),ae(c,h=>{de.configure(this,h,h.options),de.addBox(this,h)})}_updateMetasets(){const o=this._metasets,i=this.data.datasets.length,c=o.length;if(o.sort((u,d)=>u.index-d.index),c>i){for(let u=i;u<c;++u)this._destroyDatasetMeta(u);o.splice(i,c-i)}this._sortedMetasets=o.slice(0).sort(Gf("order","index"))}_removeUnreferencedMetasets(){const{_metasets:o,data:{datasets:i}}=this;o.length>i.length&&delete this._stacks,o.forEach((c,u)=>{0===i.filter(d=>d===c._dataset).length&&this._destroyDatasetMeta(u)})}buildOrUpdateControllers(){const o=[],i=this.data.datasets;let c,u;for(this._removeUnreferencedMetasets(),c=0,u=i.length;c<u;c++){const d=i[c];let h=this.getDatasetMeta(c);const p=d.type||this.config.type;if(h.type&&h.type!==p&&(this._destroyDatasetMeta(c),h=this.getDatasetMeta(c)),h.type=p,h.indexAxis=d.indexAxis||Hf(p,this.options),h.order=d.order||0,h.index=c,h.label=""+d.label,h.visible=this.isDatasetVisible(c),h.controller)h.controller.updateIndex(c),h.controller.linkScales();else{const b=Bs.getController(p),{datasetElementType:C,dataElementType:v}=Qt.datasets[p];Object.assign(b.prototype,{dataElementType:Bs.getElement(v),datasetElementType:C&&Bs.getElement(C)}),h.controller=new b(this,c),o.push(h.controller)}}return this._updateMetasets(),o}_resetElements(){ae(this.data.datasets,(o,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(o){const i=this.config;i.update();const c=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),u=this._animationsDisabled=!c.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:o,cancelable:!0}))return;const d=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let h=0;for(let C=0,v=this.data.datasets.length;C<v;C++){const{controller:w}=this.getDatasetMeta(C),T=!u&&-1===d.indexOf(w);w.buildOrUpdateElements(T),h=Math.max(+w.getMaxOverflow(),h)}h=this._minPadding=c.layout.autoPadding?h:0,this._updateLayout(h),u||ae(d,C=>{C.reset()}),this._updateDatasets(o),this.notifyPlugins("afterUpdate",{mode:o}),this._layers.sort(Gf("z","_idx"));const{_active:p,_lastEvent:b}=this;b?this._eventHandler(b,!0):p.length&&this._updateHoverStyles(p,p,!0),this.render()}_updateScales(){ae(this.scales,o=>{de.removeBox(this,o)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const o=this.options,i=new Set(Object.keys(this._listeners)),c=new Set(o.events);(!_a(i,c)||!!this._responsiveListeners!==o.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:o}=this,i=this._getUniformDataChanges()||[];for(const{method:c,start:u,count:d}of i)Qf(o,u,"_removeElements"===c?-d:d)}_getUniformDataChanges(){const o=this._dataChanges;if(!o||!o.length)return;this._dataChanges=[];const i=this.data.datasets.length,c=d=>new Set(o.filter(h=>h[0]===d).map((h,p)=>p+","+h.splice(1).join(","))),u=c(0);for(let d=1;d<i;d++)if(!_a(u,c(d)))return;return Array.from(u).map(d=>d.split(",")).map(d=>({method:d[1],start:+d[2],count:+d[3]}))}_updateLayout(o){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;de.update(this,this.width,this.height,o);const i=this.chartArea,c=i.width<=0||i.height<=0;this._layers=[],ae(this.boxes,u=>{c&&"chartArea"===u.position||(u.configure&&u.configure(),this._layers.push(...u._layers()))},this),this._layers.forEach((u,d)=>{u._idx=d}),this.notifyPlugins("afterLayout")}_updateDatasets(o){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:o,cancelable:!0})){for(let i=0,c=this.data.datasets.length;i<c;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,c=this.data.datasets.length;i<c;++i)this._updateDataset(i,hs(o)?o({datasetIndex:i}):o);this.notifyPlugins("afterDatasetsUpdate",{mode:o})}}_updateDataset(o,i){const c=this.getDatasetMeta(o),u={meta:c,index:o,mode:i,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",u)&&(c.controller._update(i),u.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",u))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(As.has(this)?this.attached&&!As.running(this)&&As.start(this):(this.draw(),Li({chart:this})))}draw(){let o;if(this._resizeBeforeDraw){const{width:c,height:u}=this._resizeBeforeDraw;this._resize(c,u),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const i=this._layers;for(o=0;o<i.length&&i[o].z<=0;++o)i[o].draw(this.chartArea);for(this._drawDatasets();o<i.length;++o)i[o].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(o){const i=this._sortedMetasets,c=[];let u,d;for(u=0,d=i.length;u<d;++u){const h=i[u];(!o||h.visible)&&c.push(h)}return c}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const o=this.getSortedVisibleDatasetMetas();for(let i=o.length-1;i>=0;--i)this._drawDataset(o[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(o){const i=this.ctx,c=o._clip,u=!c.disabled,d=this.chartArea,h={meta:o,index:o.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",h)&&(u&&ho(i,{left:!1===c.left?0:d.left-c.left,right:!1===c.right?this.width:d.right+c.right,top:!1===c.top?0:d.top-c.top,bottom:!1===c.bottom?this.height:d.bottom+c.bottom}),o.controller.draw(),u&&gi(i),h.cancelable=!1,this.notifyPlugins("afterDatasetDraw",h))}getElementsAtEventForMode(o,i,c,u){const d=Jl.modes[i];return"function"==typeof d?d(this,o,c,u):[]}getDatasetMeta(o){const i=this.data.datasets[o],c=this._metasets;let u=c.filter(d=>d&&d._dataset===i).pop();return u||(u={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:o,_dataset:i,_parsed:[],_sorted:!1},c.push(u)),u}getContext(){return this.$context||(this.$context=Vs(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(o){const i=this.data.datasets[o];if(!i)return!1;const c=this.getDatasetMeta(o);return"boolean"==typeof c.hidden?!c.hidden:!i.hidden}setDatasetVisibility(o,i){this.getDatasetMeta(o).hidden=!i}toggleDataVisibility(o){this._hiddenIndices[o]=!this._hiddenIndices[o]}getDataVisibility(o){return!this._hiddenIndices[o]}_updateVisibility(o,i,c){const u=c?"show":"hide",d=this.getDatasetMeta(o),h=d.controller._resolveAnimations(void 0,u);zn(i)?(d.data[i].hidden=!c,this.update()):(this.setDatasetVisibility(o,c),h.update(d,{visible:c}),this.update(p=>p.datasetIndex===o?u:void 0))}hide(o,i){this._updateVisibility(o,i,!1)}show(o,i){this._updateVisibility(o,i,!0)}_destroyDatasetMeta(o){const i=this._metasets[o];i&&i.controller&&i.controller._destroy(),delete this._metasets[o]}_stop(){let o,i;for(this.stop(),As.remove(this),o=0,i=this.data.datasets.length;o<i;++o)this._destroyDatasetMeta(o)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:o,ctx:i}=this;this._stop(),this.config.clearCache(),o&&(this.unbindEvents(),zl(o,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete bo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...o){return this.canvas.toDataURL(...o)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const o=this._listeners,i=this.platform,c=(d,h)=>{i.addEventListener(this,d,h),o[d]=h},u=(d,h,p)=>{d.offsetX=h,d.offsetY=p,this._eventHandler(d)};ae(this.options.events,d=>c(d,u))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const o=this._responsiveListeners,i=this.platform,c=(b,C)=>{i.addEventListener(this,b,C),o[b]=C},u=(b,C)=>{o[b]&&(i.removeEventListener(this,b,C),delete o[b])},d=(b,C)=>{this.canvas&&this.resize(b,C)};let h;const p=()=>{u("attach",p),this.attached=!0,this.resize(),c("resize",d),c("detach",h)};h=()=>{this.attached=!1,u("resize",d),this._stop(),this._resize(0,0),c("attach",p)},i.isAttached(this.canvas)?p():h()}unbindEvents(){ae(this._listeners,(o,i)=>{this.platform.removeEventListener(this,i,o)}),this._listeners={},ae(this._responsiveListeners,(o,i)=>{this.platform.removeEventListener(this,i,o)}),this._responsiveListeners=void 0}updateHoverStyle(o,i,c){const u=c?"set":"remove";let d,h,p,b;for("dataset"===i&&(d=this.getDatasetMeta(o[0].datasetIndex),d.controller["_"+u+"DatasetHoverStyle"]()),p=0,b=o.length;p<b;++p){h=o[p];const C=h&&this.getDatasetMeta(h.datasetIndex).controller;C&&C[u+"HoverStyle"](h.element,h.datasetIndex,h.index)}}getActiveElements(){return this._active||[]}setActiveElements(o){const i=this._active||[],c=o.map(({datasetIndex:d,index:h})=>{const p=this.getDatasetMeta(d);if(!p)throw new Error("No dataset found at index "+d);return{datasetIndex:d,element:p.data[h],index:h}});!_r(c,i)&&(this._active=c,this._lastEvent=null,this._updateHoverStyles(c,i))}notifyPlugins(o,i,c){return this._plugins.notify(this,o,i,c)}_updateHoverStyles(o,i,c){const u=this.options.hover,d=(b,C)=>b.filter(v=>!C.some(w=>v.datasetIndex===w.datasetIndex&&v.index===w.index)),h=d(i,o),p=c?o:d(o,i);h.length&&this.updateHoverStyle(h,u.mode,!1),p.length&&u.mode&&this.updateHoverStyle(p,u.mode,!0)}_eventHandler(o,i){const c={event:o,replay:i,cancelable:!0,inChartArea:mn(o,this.chartArea,this._minPadding)},u=h=>(h.options.events||this.options.events).includes(o.native.type);if(!1===this.notifyPlugins("beforeEvent",c,u))return;const d=this._handleEvent(o,i,c.inChartArea);return c.cancelable=!1,this.notifyPlugins("afterEvent",c,u),(d||c.changed)&&this.render(),this}_handleEvent(o,i,c){const{_active:u=[],options:d}=this,p=this._getActiveElements(o,u,c,i),b=Wu(o),C=function Fm(l,o,i,c){return i&&"mouseout"!==l.type?c?o:l:null}(o,this._lastEvent,c,b);c&&(this._lastEvent=null,fe(d.onHover,[o,p,this],this),b&&fe(d.onClick,[o,p,this],this));const v=!_r(p,u);return(v||i)&&(this._active=p,this._updateHoverStyles(p,u,i)),this._lastEvent=C,v}_getActiveElements(o,i,c,u){if("mouseout"===o.type)return[];if(!c)return i;const d=this.options.hover;return this.getElementsAtEventForMode(o,d.mode,d,u)}}const Ii=()=>ae(Zt.instances,l=>l._plugins.invalidate()),Sn=!0;function Zo(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}Object.defineProperties(Zt,{defaults:{enumerable:Sn,value:Qt},instances:{enumerable:Sn,value:bo},overrides:{enumerable:Sn,value:ms},registry:{enumerable:Sn,value:Bs},version:{enumerable:Sn,value:"3.7.1"},getChart:{enumerable:Sn,value:Ge},register:{enumerable:Sn,value:(...l)=>{Bs.add(...l),Ii()}},unregister:{enumerable:Sn,value:(...l)=>{Bs.remove(...l),Ii()}}});class yo{constructor(o){this.options=o||{}}formats(){return Zo()}parse(o,i){return Zo()}format(o,i){return Zo()}add(o,i,c){return Zo()}diff(o,i,c){return Zo()}startOf(o,i,c){return Zo()}endOf(o,i){return Zo()}}yo.override=function(l){Object.assign(yo.prototype,l)};var Jo={_date:yo};function Yn(l){const o=l.iScale,i=function qr(l,o){if(!l._cache.$bar){const i=l.getMatchingVisibleMetas(o);let c=[];for(let u=0,d=i.length;u<d;u++)c=c.concat(i[u].controller.getAllParsedValues(l));l._cache.$bar=Aa(c.sort((u,d)=>u-d))}return l._cache.$bar}(o,l.type);let u,d,h,p,c=o._length;const b=()=>{32767===h||-32768===h||(zn(p)&&(c=Math.min(c,Math.abs(h-p)||c)),p=h)};for(u=0,d=i.length;u<d;++u)h=o.getPixelForValue(i[u]),b();for(p=void 0,u=0,d=o.ticks.length;u<d;++u)h=o.getPixelForTick(u),b();return c}function Va(l,o,i,c){return me(l)?function Rc(l,o,i,c){const u=i.parse(l[0],c),d=i.parse(l[1],c),h=Math.min(u,d),p=Math.max(u,d);let b=h,C=p;Math.abs(h)>Math.abs(p)&&(b=p,C=h),o[i.axis]=C,o._custom={barStart:b,barEnd:C,start:u,end:d,min:h,max:p}}(l,o,i,c):o[i.axis]=i.parse(l,c),o}function Jf(l,o,i,c){const u=l.iScale,d=l.vScale,h=u.getLabels(),p=u===d,b=[];let C,v,w,T;for(C=i,v=i+c;C<v;++C)T=o[C],w={},w[u.axis]=p||u.parse(h[C],C),b.push(Va(T,w,d,C));return b}function Pc(l){return l&&void 0!==l.barStart&&void 0!==l.barEnd}function zm(l,o,i,c){let u=o.borderSkipped;const d={};if(!u)return void(l.borderSkipped=d);const{start:h,end:p,reverse:b,top:C,bottom:v}=function Wa(l){let o,i,c,u,d;return l.horizontal?(o=l.base>l.x,i="left",c="right"):(o=l.base<l.y,i="bottom",c="top"),o?(u="end",d="start"):(u="start",d="end"),{start:i,end:c,reverse:o,top:u,bottom:d}}(l);"middle"===u&&i&&(l.enableBorderRadius=!0,(i._top||0)===c?u=C:(i._bottom||0)===c?u=v:(d[ja(v,h,p,b)]=!0,u=C)),d[ja(u,h,p,b)]=!0,l.borderSkipped=d}function ja(l,o,i,c){return c?(l=function td(l,o,i){return l===o?i:l===i?o:l}(l,o,i),l=Dc(l,i,o)):l=Dc(l,o,i),l}function Dc(l,o,i){return"start"===l?o:"end"===l?i:l}function Hm(l,{inflateAmount:o},i){l.inflateAmount="auto"===o?1===i?.33:0:o}class qa extends Pn{parsePrimitiveData(o,i,c,u){return Jf(o,i,c,u)}parseArrayData(o,i,c,u){return Jf(o,i,c,u)}parseObjectData(o,i,c,u){const{iScale:d,vScale:h}=o,{xAxisKey:p="x",yAxisKey:b="y"}=this._parsing,C="x"===d.axis?p:b,v="x"===h.axis?p:b,w=[];let T,O,M,I;for(T=c,O=c+u;T<O;++T)I=i[T],M={},M[d.axis]=d.parse(ie(I,C),T),w.push(Va(ie(I,v),M,h,T));return w}updateRangeFromParsed(o,i,c,u){super.updateRangeFromParsed(o,i,c,u);const d=c._custom;d&&i===this._cachedMeta.vScale&&(o.min=Math.min(o.min,d.min),o.max=Math.max(o.max,d.max))}getMaxOverflow(){return 0}getLabelAndValue(o){const i=this._cachedMeta,{iScale:c,vScale:u}=i,d=this.getParsed(o),h=d._custom,p=Pc(h)?"["+h.start+", "+h.end+"]":""+u.getLabelForValue(d[u.axis]);return{label:""+c.getLabelForValue(d[c.axis]),value:p}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(o){const i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,o)}updateElements(o,i,c,u){const d="reset"===u,{index:h,_cachedMeta:{vScale:p}}=this,b=p.getBasePixel(),C=p.isHorizontal(),v=this._getRuler(),w=this.resolveDataElementOptions(i,u),T=this.getSharedOptions(w),O=this.includeOptions(u,T);this.updateSharedOptions(T,u,w);for(let M=i;M<i+c;M++){const I=this.getParsed(M),U=d||dt(I[p.axis])?{base:b,head:b}:this._calculateBarValuePixels(M),j=this._calculateBarIndexPixels(M,v),nt=(I._stacks||{})[p.axis],ct={horizontal:C,base:U.base,enableBorderRadius:!nt||Pc(I._custom)||h===nt._top||h===nt._bottom,x:C?U.head:j.center,y:C?j.center:U.head,height:C?j.size:Math.abs(U.size),width:C?Math.abs(U.size):j.size};O&&(ct.options=T||this.resolveDataElementOptions(M,o[M].active?"active":u));const at=ct.options||o[M].options;zm(ct,at,nt,h),Hm(ct,at,v.ratio),this.updateElement(o[M],M,ct,u)}}_getStacks(o,i){const u=this._cachedMeta.iScale,d=u.getMatchingVisibleMetas(this._type),h=u.options.stacked,p=d.length,b=[];let C,v;for(C=0;C<p;++C)if(v=d[C],v.controller.options.grouped){if(void 0!==i){const w=v.controller.getParsed(i)[v.controller._cachedMeta.vScale.axis];if(dt(w)||isNaN(w))continue}if((!1===h||-1===b.indexOf(v.stack)||void 0===h&&void 0===v.stack)&&b.push(v.stack),v.index===o)break}return b.length||b.push(void 0),b}_getStackCount(o){return this._getStacks(void 0,o).length}_getStackIndex(o,i,c){const u=this._getStacks(o,c),d=void 0!==i?u.indexOf(i):-1;return-1===d?u.length-1:d}_getRuler(){const o=this.options,i=this._cachedMeta,c=i.iScale,u=[];let d,h;for(d=0,h=i.data.length;d<h;++d)u.push(c.getPixelForValue(this.getParsed(d)[c.axis],d));const p=o.barThickness;return{min:p||Yn(i),pixels:u,start:c._startPixel,end:c._endPixel,stackCount:this._getStackCount(),scale:c,grouped:o.grouped,ratio:p?1:o.categoryPercentage*o.barPercentage}}_calculateBarValuePixels(o){const{_cachedMeta:{vScale:i,_stacked:c},options:{base:u,minBarLength:d}}=this,h=u||0,p=this.getParsed(o),b=p._custom,C=Pc(b);let O,M,v=p[i.axis],w=0,T=c?this.applyStack(i,p,c):v;T!==v&&(w=T-v,T=v),C&&(v=b.barStart,T=b.barEnd-b.barStart,0!==v&&ns(v)!==ns(b.barEnd)&&(w=0),w+=v);const I=dt(u)||C?w:u;let U=i.getPixelForValue(I);if(O=this.chart.getDataVisibility(o)?i.getPixelForValue(w+T):U,M=O-U,Math.abs(M)<d&&(M=function Ua(l,o,i){return 0!==l?ns(l):(o.isHorizontal()?1:-1)*(o.min>=i?1:-1)}(M,i,h)*d,v===h&&(U-=M/2),O=U+M),U===i.getPixelForValue(h)){const j=ns(M)*i.getLineWidthForValue(h)/2;U+=j,M-=j}return{size:M,base:U,head:O,center:O+M/2}}_calculateBarIndexPixels(o,i){const c=i.scale,u=this.options,d=u.skipNull,h=Vt(u.maxBarThickness,1/0);let p,b;if(i.grouped){const C=d?this._getStackCount(o):i.stackCount,v="flex"===u.barThickness?function $m(l,o,i,c){const u=o.pixels,d=u[l];let h=l>0?u[l-1]:null,p=l<u.length-1?u[l+1]:null;const b=i.categoryPercentage;null===h&&(h=d-(null===p?o.end-o.start:p-d)),null===p&&(p=d+d-h);const C=d-(d-Math.min(h,p))/2*b;return{chunk:Math.abs(p-h)/2*b/c,ratio:i.barPercentage,start:C}}(o,i,u,C):function Zf(l,o,i,c){const u=i.barThickness;let d,h;return dt(u)?(d=o.min*i.categoryPercentage,h=i.barPercentage):(d=u*c,h=1),{chunk:d/c,ratio:h,start:o.pixels[l]-d/2}}(o,i,u,C),w=this._getStackIndex(this.index,this._cachedMeta.stack,d?o:void 0);p=v.start+v.chunk*w+v.chunk/2,b=Math.min(h,v.chunk*v.ratio)}else p=c.getPixelForValue(this.getParsed(o)[c.axis],o),b=Math.min(h,i.min*i.ratio);return{base:p-b/2,head:p+b/2,center:p,size:b}}draw(){const o=this._cachedMeta,i=o.vScale,c=o.data,u=c.length;let d=0;for(;d<u;++d)null!==this.getParsed(d)[i.axis]&&c[d].draw(this._ctx)}}qa.id="bar",qa.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}},qa.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class Ka extends Pn{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(o,i,c,u){const d=super.parsePrimitiveData(o,i,c,u);for(let h=0;h<d.length;h++)d[h]._custom=this.resolveDataElementOptions(h+c).radius;return d}parseArrayData(o,i,c,u){const d=super.parseArrayData(o,i,c,u);for(let h=0;h<d.length;h++)d[h]._custom=Vt(i[c+h][2],this.resolveDataElementOptions(h+c).radius);return d}parseObjectData(o,i,c,u){const d=super.parseObjectData(o,i,c,u);for(let h=0;h<d.length;h++){const p=i[c+h];d[h]._custom=Vt(p&&p.r&&+p.r,this.resolveDataElementOptions(h+c).radius)}return d}getMaxOverflow(){const o=this._cachedMeta.data;let i=0;for(let c=o.length-1;c>=0;--c)i=Math.max(i,o[c].size(this.resolveDataElementOptions(c))/2);return i>0&&i}getLabelAndValue(o){const i=this._cachedMeta,{xScale:c,yScale:u}=i,d=this.getParsed(o),h=c.getLabelForValue(d.x),p=u.getLabelForValue(d.y),b=d._custom;return{label:i.label,value:"("+h+", "+p+(b?", "+b:"")+")"}}update(o){const i=this._cachedMeta.data;this.updateElements(i,0,i.length,o)}updateElements(o,i,c,u){const d="reset"===u,{iScale:h,vScale:p}=this._cachedMeta,b=this.resolveDataElementOptions(i,u),C=this.getSharedOptions(b),v=this.includeOptions(u,C),w=h.axis,T=p.axis;for(let O=i;O<i+c;O++){const M=o[O],I=!d&&this.getParsed(O),U={},j=U[w]=d?h.getPixelForDecimal(.5):h.getPixelForValue(I[w]),nt=U[T]=d?p.getBasePixel():p.getPixelForValue(I[T]);U.skip=isNaN(j)||isNaN(nt),v&&(U.options=this.resolveDataElementOptions(O,M.active?"active":u),d&&(U.options.radius=0)),this.updateElement(M,O,U,u)}this.updateSharedOptions(C,u,b)}resolveDataElementOptions(o,i){const c=this.getParsed(o);let u=super.resolveDataElementOptions(o,i);u.$shared&&(u=Object.assign({},u,{$shared:!1}));const d=u.radius;return"active"!==i&&(u.radius=0),u.radius+=Vt(c&&c._custom,d),u}}Ka.id="bubble",Ka.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}},Ka.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title:()=>""}}}};class tr extends Pn{constructor(o,i){super(o,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(o,i){const c=this.getDataset().data,u=this._cachedMeta;if(!1===this._parsing)u._parsed=c;else{let h,p,d=b=>+c[b];if(It(c[o])){const{key:b="value"}=this._parsing;d=C=>+ie(c[C],b)}for(h=o,p=o+i;h<p;++h)u._parsed[h]=d(h)}}_getRotation(){return Hn(this.options.rotation-90)}_getCircumference(){return Hn(this.options.circumference)}_getRotationExtents(){let o=be,i=-be;for(let c=0;c<this.chart.data.datasets.length;++c)if(this.chart.isDatasetVisible(c)){const u=this.chart.getDatasetMeta(c).controller,d=u._getRotation(),h=u._getCircumference();o=Math.min(o,d),i=Math.max(i,d+h)}return{rotation:o,circumference:i-o}}update(o){const i=this.chart,{chartArea:c}=i,u=this._cachedMeta,d=u.data,h=this.getMaxBorderWidth()+this.getMaxOffset(d)+this.options.spacing,p=Math.max((Math.min(c.width,c.height)-h)/2,0),b=Math.min(Il(this.options.cutout,p),1),C=this._getRingWeight(this.index),{circumference:v,rotation:w}=this._getRotationExtents(),{ratioX:T,ratioY:O,offsetX:M,offsetY:I}=function Vm(l,o,i){let c=1,u=1,d=0,h=0;if(o<be){const p=l,b=p+o,C=Math.cos(p),v=Math.sin(p),w=Math.cos(b),T=Math.sin(b),O=(ct,at,it)=>Pr(ct,p,b,!0)?1:Math.max(at,at*i,it,it*i),M=(ct,at,it)=>Pr(ct,p,b,!0)?-1:Math.min(at,at*i,it,it*i),I=O(0,C,w),U=O(Ae,v,T),j=M(Ee,C,w),nt=M(Ee+Ae,v,T);c=(I-j)/2,u=(U-nt)/2,d=-(I+j)/2,h=-(U+nt)/2}return{ratioX:c,ratioY:u,offsetX:d,offsetY:h}}(w,v,b),nt=Math.max(Math.min((c.width-h)/T,(c.height-h)/O)/2,0),ct=fs(this.options.radius,nt),it=(ct-Math.max(ct*b,0))/this._getVisibleDatasetWeightTotal();this.offsetX=M*ct,this.offsetY=I*ct,u.total=this.calculateTotal(),this.outerRadius=ct-it*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-it*C,0),this.updateElements(d,0,d.length,o)}_circumference(o,i){const c=this.options,u=this._cachedMeta,d=this._getCircumference();return i&&c.animation.animateRotate||!this.chart.getDataVisibility(o)||null===u._parsed[o]||u.data[o].hidden?0:this.calculateCircumference(u._parsed[o]*d/be)}updateElements(o,i,c,u){const d="reset"===u,h=this.chart,p=h.chartArea,v=(p.left+p.right)/2,w=(p.top+p.bottom)/2,T=d&&h.options.animation.animateScale,O=T?0:this.innerRadius,M=T?0:this.outerRadius,I=this.resolveDataElementOptions(i,u),U=this.getSharedOptions(I),j=this.includeOptions(u,U);let ct,nt=this._getRotation();for(ct=0;ct<i;++ct)nt+=this._circumference(ct,d);for(ct=i;ct<i+c;++ct){const at=this._circumference(ct,d),it=o[ct],kt={x:v+this.offsetX,y:w+this.offsetY,startAngle:nt,endAngle:nt+at,circumference:at,outerRadius:M,innerRadius:O};j&&(kt.options=U||this.resolveDataElementOptions(ct,it.active?"active":u)),nt+=at,this.updateElement(it,ct,kt,u)}this.updateSharedOptions(U,u,I)}calculateTotal(){const o=this._cachedMeta,i=o.data;let u,c=0;for(u=0;u<i.length;u++){const d=o._parsed[u];null!==d&&!isNaN(d)&&this.chart.getDataVisibility(u)&&!i[u].hidden&&(c+=Math.abs(d))}return c}calculateCircumference(o){const i=this._cachedMeta.total;return i>0&&!isNaN(o)?be*(Math.abs(o)/i):0}getLabelAndValue(o){const c=this.chart,u=c.data.labels||[],d=cn(this._cachedMeta._parsed[o],c.options.locale);return{label:u[o]||"",value:d}}getMaxBorderWidth(o){let i=0;const c=this.chart;let u,d,h,p,b;if(!o)for(u=0,d=c.data.datasets.length;u<d;++u)if(c.isDatasetVisible(u)){h=c.getDatasetMeta(u),o=h.data,p=h.controller;break}if(!o)return 0;for(u=0,d=o.length;u<d;++u)b=p.resolveDataElementOptions(u),"inner"!==b.borderAlign&&(i=Math.max(i,b.borderWidth||0,b.hoverBorderWidth||0));return i}getMaxOffset(o){let i=0;for(let c=0,u=o.length;c<u;++c){const d=this.resolveDataElementOptions(c);i=Math.max(i,d.offset||0,d.hoverOffset||0)}return i}_getRingWeightOffset(o){let i=0;for(let c=0;c<o;++c)this.chart.isDatasetVisible(c)&&(i+=this._getRingWeight(c));return i}_getRingWeight(o){return Math.max(Vt(this.chart.data.datasets[o].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}tr.id="doughnut",tr.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"},tr.descriptors={_scriptable:l=>"spacing"!==l,_indexable:l=>"spacing"!==l},tr.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:i}}=l.legend.options;return o.labels.map((c,u)=>{const h=l.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,pointStyle:i,hidden:!l.getDataVisibility(u),index:u}})}return[]}},onClick(l,o,i){i.chart.toggleDataVisibility(o.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label(l){let o=l.label;const i=": "+l.formattedValue;return me(o)?(o=o.slice(),o[0]+=i):o+=i,o}}}}};class Fi extends Pn{initialize(){this.enableOptionSharing=!0,super.initialize()}update(o){const i=this._cachedMeta,{dataset:c,data:u=[],_dataset:d}=i,h=this.chart._animationsDisabled;let{start:p,count:b}=function Um(l,o,i){const c=o.length;let u=0,d=c;if(l._sorted){const{iScale:h,_parsed:p}=l,b=h.axis,{min:C,max:v,minDefined:w,maxDefined:T}=h.getUserBounds();w&&(u=Ue(Math.min(ps(p,h.axis,C).lo,i?c:ps(o,b,h.getPixelForValue(C)).lo),0,c-1)),d=T?Ue(Math.max(ps(p,h.axis,v).hi+1,i?0:ps(o,b,h.getPixelForValue(v)).hi+1),u,c)-u:c-u}return{start:u,count:d}}(i,u,h);this._drawStart=p,this._drawCount=b,function Cs(l){const{xScale:o,yScale:i,_scaleRanges:c}=l,u={xmin:o.min,xmax:o.max,ymin:i.min,ymax:i.max};if(!c)return l._scaleRanges=u,!0;const d=c.xmin!==o.min||c.xmax!==o.max||c.ymin!==i.min||c.ymax!==i.max;return Object.assign(c,u),d}(i)&&(p=0,b=u.length),c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!d._decimated,c.points=u;const C=this.resolveDatasetElementOptions(o);this.options.showLine||(C.borderWidth=0),C.segment=this.options.segment,this.updateElement(c,void 0,{animated:!h,options:C},o),this.updateElements(u,p,b,o)}updateElements(o,i,c,u){const d="reset"===u,{iScale:h,vScale:p,_stacked:b,_dataset:C}=this._cachedMeta,v=this.resolveDataElementOptions(i,u),w=this.getSharedOptions(v),T=this.includeOptions(u,w),O=h.axis,M=p.axis,{spanGaps:I,segment:U}=this.options,j=Ar(I)?I:Number.POSITIVE_INFINITY,nt=this.chart._animationsDisabled||d||"none"===u;let ct=i>0&&this.getParsed(i-1);for(let at=i;at<i+c;++at){const it=o[at],kt=this.getParsed(at),_t=nt?it:{},Ot=dt(kt[M]),Dt=_t[O]=h.getPixelForValue(kt[O],at),pe=_t[M]=d||Ot?p.getBasePixel():p.getPixelForValue(b?this.applyStack(p,kt,b):kt[M],at);_t.skip=isNaN(Dt)||isNaN(pe)||Ot,_t.stop=at>0&&kt[O]-ct[O]>j,U&&(_t.parsed=kt,_t.raw=C.data[at]),T&&(_t.options=w||this.resolveDataElementOptions(at,it.active?"active":u)),nt||this.updateElement(it,at,_t,u),ct=kt}this.updateSharedOptions(w,u,v)}getMaxOverflow(){const o=this._cachedMeta,i=o.dataset,c=i.options&&i.options.borderWidth||0,u=o.data||[];if(!u.length)return c;const d=u[0].size(this.resolveDataElementOptions(0)),h=u[u.length-1].size(this.resolveDataElementOptions(u.length-1));return Math.max(c,d,h)/2}draw(){const o=this._cachedMeta;o.dataset.updateControlPoints(this.chart.chartArea,o.iScale.axis),super.draw()}}Fi.id="line",Fi.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1},Fi.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};class Ya extends Pn{constructor(o,i){super(o,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(o){const c=this.chart,u=c.data.labels||[],d=cn(this._cachedMeta._parsed[o].r,c.options.locale);return{label:u[o]||"",value:d}}update(o){const i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,o)}_updateRadius(){const o=this.chart,i=o.chartArea,c=o.options,u=Math.min(i.right-i.left,i.bottom-i.top),d=Math.max(u/2,0),p=(d-Math.max(c.cutoutPercentage?d/100*c.cutoutPercentage:1,0))/o.getVisibleDatasetCount();this.outerRadius=d-p*this.index,this.innerRadius=this.outerRadius-p}updateElements(o,i,c,u){const d="reset"===u,h=this.chart,p=this.getDataset(),C=h.options.animation,v=this._cachedMeta.rScale,w=v.xCenter,T=v.yCenter,O=v.getIndexAngle(0)-.5*Ee;let I,M=O;const U=360/this.countVisibleElements();for(I=0;I<i;++I)M+=this._computeAngle(I,u,U);for(I=i;I<i+c;I++){const j=o[I];let nt=M,ct=M+this._computeAngle(I,u,U),at=h.getDataVisibility(I)?v.getDistanceFromCenterForValue(p.data[I]):0;M=ct,d&&(C.animateScale&&(at=0),C.animateRotate&&(nt=ct=O));const it={x:w,y:T,innerRadius:0,outerRadius:at,startAngle:nt,endAngle:ct,options:this.resolveDataElementOptions(I,j.active?"active":u)};this.updateElement(j,I,it,u)}}countVisibleElements(){const o=this.getDataset();let c=0;return this._cachedMeta.data.forEach((u,d)=>{!isNaN(o.data[d])&&this.chart.getDataVisibility(d)&&c++}),c}_computeAngle(o,i,c){return this.chart.getDataVisibility(o)?Hn(this.resolveDataElementOptions(o,i).angle||c):0}}Ya.id="polarArea",Ya.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0},Ya.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(l){const o=l.data;if(o.labels.length&&o.datasets.length){const{labels:{pointStyle:i}}=l.legend.options;return o.labels.map((c,u)=>{const h=l.getDatasetMeta(0).controller.getStyle(u);return{text:c,fillStyle:h.backgroundColor,strokeStyle:h.borderColor,lineWidth:h.borderWidth,pointStyle:i,hidden:!l.getDataVisibility(u),index:u}})}return[]}},onClick(l,o,i){i.chart.toggleDataVisibility(o.index),i.chart.update()}},tooltip:{callbacks:{title:()=>"",label:l=>l.chart.data.labels[l.dataIndex]+": "+l.formattedValue}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class $i extends tr{}$i.id="pie",$i.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class Ga extends Pn{getLabelAndValue(o){const i=this._cachedMeta.vScale,c=this.getParsed(o);return{label:i.getLabels()[o],value:""+i.getLabelForValue(c[i.axis])}}update(o){const i=this._cachedMeta,c=i.dataset,u=i.data||[],d=i.iScale.getLabels();if(c.points=u,"resize"!==o){const h=this.resolveDatasetElementOptions(o);this.options.showLine||(h.borderWidth=0),this.updateElement(c,void 0,{_loop:!0,_fullLoop:d.length===u.length,options:h},o)}this.updateElements(u,0,u.length,o)}updateElements(o,i,c,u){const d=this.getDataset(),h=this._cachedMeta.rScale,p="reset"===u;for(let b=i;b<i+c;b++){const C=o[b],v=this.resolveDataElementOptions(b,C.active?"active":u),w=h.getPointPositionForValue(b,d.data[b]),T=p?h.xCenter:w.x,O=p?h.yCenter:w.y,M={x:T,y:O,angle:w.angle,skip:isNaN(T)||isNaN(O),options:v};this.updateElement(C,b,M,u)}}}Ga.id="radar",Ga.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}},Ga.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class Xa extends Fi{}Xa.id="scatter",Xa.defaults={showLine:!1,fill:!1},Xa.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title:()=>"",label:l=>"("+l.label+", "+l.formattedValue+")"}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var ed=Object.freeze({__proto__:null,BarController:qa,BubbleController:Ka,DoughnutController:tr,LineController:Fi,PolarAreaController:Ya,PieController:$i,RadarController:Ga,ScatterController:Xa});function Nc(l,o,i){const{startAngle:c,pixelMargin:u,x:d,y:h,outerRadius:p,innerRadius:b}=o;let C=u/p;l.beginPath(),l.arc(d,h,p,c-C,i+C),b>u?(C=u/b,l.arc(d,h,b,i+C,c-C,!0)):l.arc(d,h,u,i+Ae,c-Ae),l.closePath(),l.clip()}function Kr(l,o,i,c){return{x:i+l*Math.cos(o),y:c+l*Math.sin(o)}}function Qa(l,o,i,c,u){const{x:d,y:h,startAngle:p,pixelMargin:b,innerRadius:C}=o,v=Math.max(o.outerRadius+c+i-b,0),w=C>0?C+c+i+b:0;let T=0;const O=u-p;if(c){const Qs=((C>0?C-c:0)+(v>0?v-c:0))/2;T=(O-(0!==Qs?O*Qs/(Qs+c):O))/2}const I=(O-Math.max(.001,O*v-i/Ee)/v)/2,U=p+I+T,j=u-I-T,{outerStart:nt,outerEnd:ct,innerStart:at,innerEnd:it}=function er(l,o,i,c){const u=function Wm(l){return tc(l,["outerStart","outerEnd","innerStart","innerEnd"])}(l.options.borderRadius),d=(i-o)/2,h=Math.min(d,c*o/2),p=b=>{const C=(i-Math.min(d,b))*c/2;return Ue(b,0,Math.min(d,C))};return{outerStart:p(u.outerStart),outerEnd:p(u.outerEnd),innerStart:Ue(u.innerStart,0,h),innerEnd:Ue(u.innerEnd,0,h)}}(o,w,v,j-U),kt=v-nt,_t=v-ct,Ot=U+nt/kt,Dt=j-ct/_t,pe=w+at,ne=w+it,Jt=U+at/pe,je=j-it/ne;if(l.beginPath(),l.arc(d,h,v,Ot,Dt),ct>0){const ve=Kr(_t,Dt,d,h);l.arc(ve.x,ve.y,ct,Dt,j+Ae)}const F=Kr(ne,j,d,h);if(l.lineTo(F.x,F.y),it>0){const ve=Kr(ne,je,d,h);l.arc(ve.x,ve.y,it,j+Ae,je+Math.PI)}if(l.arc(d,h,w,j-it/w,U+at/w,!0),at>0){const ve=Kr(pe,Jt,d,h);l.arc(ve.x,ve.y,at,Jt+Math.PI,U-Ae)}const te=Kr(kt,U,d,h);if(l.lineTo(te.x,te.y),nt>0){const ve=Kr(kt,Ot,d,h);l.arc(ve.x,ve.y,nt,U-Ae,Ot)}l.closePath()}class Za extends Kn{constructor(o){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,o&&Object.assign(this,o)}inRange(o,i,c){const u=this.getProps(["x","y"],c),{angle:d,distance:h}=$l(u,{x:o,y:i}),{startAngle:p,endAngle:b,innerRadius:C,outerRadius:v,circumference:w}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],c),T=this.options.spacing/2,M=Vt(w,b-p)>=be||Pr(d,p,b),I=Te(h,C+T,v+T);return M&&I}getCenterPoint(o){const{x:i,y:c,startAngle:u,endAngle:d,innerRadius:h,outerRadius:p}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],o),{offset:b,spacing:C}=this.options,v=(u+d)/2,w=(h+p+C+b)/2;return{x:i+Math.cos(v)*w,y:c+Math.sin(v)*w}}tooltipPosition(o){return this.getCenterPoint(o)}draw(o){const{options:i,circumference:c}=this,u=(i.offset||0)/2,d=(i.spacing||0)/2;if(this.pixelMargin="inner"===i.borderAlign?.33:0,this.fullCircles=c>be?Math.floor(c/be):0,0===c||this.innerRadius<0||this.outerRadius<0)return;o.save();let h=0;if(u){h=u/2;const b=(this.startAngle+this.endAngle)/2;o.translate(Math.cos(b)*h,Math.sin(b)*h),this.circumference>=Ee&&(h=u)}o.fillStyle=i.backgroundColor,o.strokeStyle=i.borderColor;const p=function jm(l,o,i,c){const{fullCircles:u,startAngle:d,circumference:h}=o;let p=o.endAngle;if(u){Qa(l,o,i,c,d+be);for(let b=0;b<u;++b)l.fill();isNaN(h)||(p=d+h%be,h%be==0&&(p+=be))}return Qa(l,o,i,c,p),l.fill(),p}(o,this,h,d);(function qm(l,o,i,c,u){const{options:d}=o,{borderWidth:h,borderJoinStyle:p}=d,b="inner"===d.borderAlign;!h||(b?(l.lineWidth=2*h,l.lineJoin=p||"round"):(l.lineWidth=h,l.lineJoin=p||"bevel"),o.fullCircles&&function nd(l,o,i){const{x:c,y:u,startAngle:d,pixelMargin:h,fullCircles:p}=o,b=Math.max(o.outerRadius-h,0),C=o.innerRadius+h;let v;for(i&&Nc(l,o,d+be),l.beginPath(),l.arc(c,u,C,d+be,d,!0),v=0;v<p;++v)l.stroke();for(l.beginPath(),l.arc(c,u,b,d,d+be),v=0;v<p;++v)l.stroke()}(l,o,b),b&&Nc(l,o,u),Qa(l,o,i,c,u),l.stroke())})(o,this,h,d,p),o.restore()}}function sd(l,o,i=o){l.lineCap=Vt(i.borderCapStyle,o.borderCapStyle),l.setLineDash(Vt(i.borderDash,o.borderDash)),l.lineDashOffset=Vt(i.borderDashOffset,o.borderDashOffset),l.lineJoin=Vt(i.borderJoinStyle,o.borderJoinStyle),l.lineWidth=Vt(i.borderWidth,o.borderWidth),l.strokeStyle=Vt(i.borderColor,o.borderColor)}function Ja(l,o,i){l.lineTo(i.x,i.y)}function od(l,o,i={}){const c=l.length,{start:u=0,end:d=c-1}=i,{start:h,end:p}=o,b=Math.max(u,h),C=Math.min(d,p);return{count:c,start:b,loop:o.loop,ilen:C<b&&!(u<h&&d<h||u>p&&d>p)?c+C-b:C-b}}function Ym(l,o,i,c){const{points:u,options:d}=o,{count:h,start:p,loop:b,ilen:C}=od(u,i,c),v=function Km(l){return l.stepped?Yu:l.tension||"monotone"===l.cubicInterpolationMode?Ea:Ja}(d);let O,M,I,{move:w=!0,reverse:T}=c||{};for(O=0;O<=C;++O)M=u[(p+(T?C-O:O))%h],!M.skip&&(w?(l.moveTo(M.x,M.y),w=!1):v(l,I,M,T,d.stepped),I=M);return b&&(M=u[(p+(T?C:0))%h],v(l,I,M,T,d.stepped)),!!b}function Gm(l,o,i,c){const u=o.points,{count:d,start:h,ilen:p}=od(u,i,c),{move:b=!0,reverse:C}=c||{};let T,O,M,I,U,j,v=0,w=0;const nt=at=>(h+(C?p-at:at))%d,ct=()=>{I!==U&&(l.lineTo(v,U),l.lineTo(v,I),l.lineTo(v,j))};for(b&&(O=u[nt(0)],l.moveTo(O.x,O.y)),T=0;T<=p;++T){if(O=u[nt(T)],O.skip)continue;const at=O.x,it=O.y,kt=0|at;kt===M?(it<I?I=it:it>U&&(U=it),v=(w*v+at)/++w):(ct(),l.lineTo(at,it),M=kt,w=0,I=U=it),j=it}ct()}function $e(l){const o=l.options;return l._decimated||l._loop||o.tension||"monotone"===o.cubicInterpolationMode||o.stepped||o.borderDash&&o.borderDash.length?Ym:Gm}Za.id="arc",Za.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0},Za.defaultRoutes={backgroundColor:"backgroundColor"};const id="function"==typeof Path2D;class Co extends Kn{constructor(o){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,o&&Object.assign(this,o)}updateControlPoints(o,i){const c=this.options;!c.tension&&"monotone"!==c.cubicInterpolationMode||c.stepped||this._pointsUpdated||(Ns(this._points,c,o,c.spanGaps?this._loop:this._fullLoop,i),this._pointsUpdated=!0)}set points(o){this._points=o,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Cf(this,this.options.segment))}first(){const o=this.segments;return o.length&&this.points[o[0].start]}last(){const o=this.segments,c=o.length;return c&&this.points[o[c-1].end]}interpolate(o,i){const c=this.options,u=o[i],d=this.points,h=Ma(this,{property:i,start:u,end:u});if(!h.length)return;const p=[],b=function Xm(l){return l.stepped?lc:l.tension||"monotone"===l.cubicInterpolationMode?Us:bn}(c);let C,v;for(C=0,v=h.length;C<v;++C){const{start:w,end:T}=h[C],O=d[w],M=d[T];if(O===M){p.push(O);continue}const U=b(O,M,Math.abs((u-O[i])/(M[i]-O[i])),c.stepped);U[i]=o[i],p.push(U)}return 1===p.length?p[0]:p}pathSegment(o,i,c){return $e(this)(o,this,i,c)}path(o,i,c){const u=this.segments,d=$e(this);let h=this._loop;i=i||0,c=c||this.points.length-i;for(const p of u)h&=d(o,this,p,{start:i,end:i+c-1});return!!h}draw(o,i,c,u){(this.points||[]).length&&(this.options||{}).borderWidth&&(o.save(),function Zm(l,o,i,c){id&&!o.options.segment?function rd(l,o,i,c){let u=o._path;u||(u=o._path=new Path2D,o.path(u,i,c)&&u.closePath()),sd(l,o.options),l.stroke(u)}(l,o,i,c):function Qm(l,o,i,c){const{segments:u,options:d}=o,h=$e(o);for(const p of u)sd(l,d,p.style),l.beginPath(),h(l,o,p,{start:i,end:i+c-1})&&l.closePath(),l.stroke()}(l,o,i,c)}(o,this,c,u),o.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function ad(l,o,i,c){const u=l.options,{[i]:d}=l.getProps([i],c);return Math.abs(o-d)<u.radius+u.hitRadius}Co.id="line",Co.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0},Co.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"},Co.descriptors={_scriptable:!0,_indexable:l=>"borderDash"!==l&&"fill"!==l};class Yr extends Kn{constructor(o){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,o&&Object.assign(this,o)}inRange(o,i,c){const u=this.options,{x:d,y:h}=this.getProps(["x","y"],c);return Math.pow(o-d,2)+Math.pow(i-h,2)<Math.pow(u.hitRadius+u.radius,2)}inXRange(o,i){return ad(this,o,"x",i)}inYRange(o,i){return ad(this,o,"y",i)}getCenterPoint(o){const{x:i,y:c}=this.getProps(["x","y"],o);return{x:i,y:c}}size(o){let i=(o=o||this.options||{}).radius||0;return i=Math.max(i,i&&o.hoverRadius||0),2*(i+(i&&o.borderWidth||0))}draw(o,i){const c=this.options;this.skip||c.radius<.1||!mn(this,i,this.size(c)/2)||(o.strokeStyle=c.borderColor,o.lineWidth=c.borderWidth,o.fillStyle=c.backgroundColor,Nr(o,c,this.x,this.y))}getRange(){const o=this.options||{};return o.radius+o.hitRadius}}function ld(l,o){const{x:i,y:c,base:u,width:d,height:h}=l.getProps(["x","y","base","width","height"],o);let p,b,C,v,w;return l.horizontal?(w=h/2,p=Math.min(i,u),b=Math.max(i,u),C=c-w,v=c+w):(w=d/2,p=i-w,b=i+w,C=Math.min(c,u),v=Math.max(c,u)),{left:p,top:C,right:b,bottom:v}}function xs(l,o,i,c){return l?0:Ue(o,i,c)}function Oc(l,o,i,c){const u=null===o,d=null===i,p=l&&!(u&&d)&&ld(l,c);return p&&(u||Te(o,p.left,p.right))&&(d||Te(i,p.top,p.bottom))}function eg(l,o){l.rect(o.x,o.y,o.w,o.h)}function Mc(l,o,i={}){const c=l.x!==i.x?-o:0,u=l.y!==i.y?-o:0;return{x:l.x+c,y:l.y+u,w:l.w+((l.x+l.w!==i.x+i.w?o:0)-c),h:l.h+((l.y+l.h!==i.y+i.h?o:0)-u),radius:l.radius}}Yr.id="point",Yr.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0},Yr.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};class zi extends Kn{constructor(o){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,o&&Object.assign(this,o)}draw(o){const{inflateAmount:i,options:{borderColor:c,backgroundColor:u}}=this,{inner:d,outer:h}=function tg(l){const o=ld(l),i=o.right-o.left,c=o.bottom-o.top,u=function tl(l,o,i){const u=l.borderSkipped,d=nf(l.options.borderWidth);return{t:xs(u.top,d.top,0,i),r:xs(u.right,d.right,0,o),b:xs(u.bottom,d.bottom,0,i),l:xs(u.left,d.left,0,o)}}(l,i/2,c/2),d=function Jm(l,o,i){const{enableBorderRadius:c}=l.getProps(["enableBorderRadius"]),u=l.options.borderRadius,d=Mr(u),h=Math.min(o,i),p=l.borderSkipped,b=c||It(u);return{topLeft:xs(!b||p.top||p.left,d.topLeft,0,h),topRight:xs(!b||p.top||p.right,d.topRight,0,h),bottomLeft:xs(!b||p.bottom||p.left,d.bottomLeft,0,h),bottomRight:xs(!b||p.bottom||p.right,d.bottomRight,0,h)}}(l,i/2,c/2);return{outer:{x:o.left,y:o.top,w:i,h:c,radius:d},inner:{x:o.left+u.l,y:o.top+u.t,w:i-u.l-u.r,h:c-u.t-u.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(u.t,u.l)),topRight:Math.max(0,d.topRight-Math.max(u.t,u.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(u.b,u.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(u.b,u.r))}}}}(this),p=function nr(l){return l.topLeft||l.topRight||l.bottomLeft||l.bottomRight}(h.radius)?Or:eg;o.save(),(h.w!==d.w||h.h!==d.h)&&(o.beginPath(),p(o,Mc(h,i,d)),o.clip(),p(o,Mc(d,-i,h)),o.fillStyle=c,o.fill("evenodd")),o.beginPath(),p(o,Mc(d,i)),o.fillStyle=u,o.fill(),o.restore()}inRange(o,i,c){return Oc(this,o,i,c)}inXRange(o,i){return Oc(this,o,null,i)}inYRange(o,i){return Oc(this,null,o,i)}getCenterPoint(o){const{x:i,y:c,base:u,horizontal:d}=this.getProps(["x","y","base","horizontal"],o);return{x:d?(i+u)/2:i,y:d?c:(c+u)/2}}getRange(o){return"x"===o?this.width/2:this.height/2}}zi.id="bar",zi.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0},zi.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var Hi=Object.freeze({__proto__:null,ArcElement:Za,LineElement:Co,PointElement:Yr,BarElement:zi});function Bc(l){if(l._decimated){const o=l._data;delete l._decimated,delete l._data,Object.defineProperty(l,"data",{value:o})}}function el(l){l.data.datasets.forEach(o=>{Bc(o)})}var Ay={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(l,o,i)=>{if(!i.enabled)return void el(l);const c=l.width;l.data.datasets.forEach((u,d)=>{const{_data:h,indexAxis:p}=u,b=l.getDatasetMeta(d),C=h||u.data;if("y"===Br([p,l.options.indexAxis])||"line"!==b.type)return;const v=l.scales[b.xAxisID];if("linear"!==v.type&&"time"!==v.type||l.options.parsing)return;let M,{start:w,count:T}=function Ey(l,o){const i=o.length;let u,c=0;const{iScale:d}=l,{min:h,max:p,minDefined:b,maxDefined:C}=d.getUserBounds();return b&&(c=Ue(ps(o,d.axis,h).lo,0,i-1)),u=C?Ue(ps(o,d.axis,p).hi+1,c,i)-c:i-c,{start:c,count:u}}(b,C);if(T<=(i.threshold||4*c))Bc(u);else{switch(dt(h)&&(u._data=C,delete u.data,Object.defineProperty(u,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(I){this._data=I}})),i.algorithm){case"lttb":M=function cd(l,o,i,c,u){const d=u.samples||c;if(d>=i)return l.slice(o,o+i);const h=[],p=(i-2)/(d-2);let b=0;const C=o+i-1;let w,T,O,M,I,v=o;for(h[b++]=l[v],w=0;w<d-2;w++){let nt,U=0,j=0;const ct=Math.floor((w+1)*p)+1+o,at=Math.min(Math.floor((w+2)*p)+1,i)+o,it=at-ct;for(nt=ct;nt<at;nt++)U+=l[nt].x,j+=l[nt].y;U/=it,j/=it;const kt=Math.floor(w*p)+1+o,_t=Math.min(Math.floor((w+1)*p)+1,i)+o,{x:Ot,y:Dt}=l[v];for(O=M=-1,nt=kt;nt<_t;nt++)M=.5*Math.abs((Ot-U)*(l[nt].y-Dt)-(Ot-l[nt].x)*(j-Dt)),M>O&&(O=M,T=l[nt],I=nt);h[b++]=T,v=I}return h[b++]=l[C],h}(C,w,T,c,i);break;case"min-max":M=function ng(l,o,i,c){let h,p,b,C,v,w,T,O,M,I,u=0,d=0;const U=[],nt=l[o].x,at=l[o+i-1].x-nt;for(h=o;h<o+i;++h){p=l[h],b=(p.x-nt)/at*c,C=p.y;const it=0|b;if(it===v)C<M?(M=C,w=h):C>I&&(I=C,T=h),u=(d*u+p.x)/++d;else{const kt=h-1;if(!dt(w)&&!dt(T)){const _t=Math.min(w,T),Ot=Math.max(w,T);_t!==O&&_t!==kt&&U.push(he(wt({},l[_t]),{x:u})),Ot!==O&&Ot!==kt&&U.push(he(wt({},l[Ot]),{x:u}))}h>0&&kt!==O&&U.push(l[kt]),U.push(p),v=it,d=0,M=I=C,w=T=O=h}}return U}(C,w,T,c);break;default:throw new Error(`Unsupported decimation algorithm '${i.algorithm}'`)}u._decimated=M}})},destroy(l){el(l)}};function sg(l,o,i){const c=function vo(l){const o=l.options,i=o.fill;let c=Vt(i&&i.target,i);return void 0===c&&(c=!!o.backgroundColor),!1!==c&&null!==c&&(!0===c?"origin":c)}(l);if(It(c))return!isNaN(c.value)&&c;let u=parseFloat(c);return Be(u)&&Math.floor(u)===u?(("-"===c[0]||"+"===c[0])&&(u=o+u),!(u===o||u<0||u>=i)&&u):["origin","start","end","stack","shape"].indexOf(c)>=0&&c}class nn{constructor(o){this.x=o.x,this.y=o.y,this.radius=o.radius}pathSegment(o,i,c){const{x:u,y:d,radius:h}=this;return o.arc(u,d,h,(i=i||{start:0,end:be}).end,i.start,!0),!c.bounds}interpolate(o){const{x:i,y:c,radius:u}=this,d=o.angle;return{x:i+Math.cos(d)*u,y:c+Math.sin(d)*u,angle:d}}}function Ic(l,o,i){for(;o>l;o--){const c=i[o];if(!isNaN(c.x)&&!isNaN(c.y))break}return o}function _o(l,o,i){const c=[];for(let u=0;u<i.length;u++){const d=i[u],{first:h,last:p,point:b}=$c(d,o,"x");if(!(!b||h&&p))if(h)c.unshift(b);else if(l.push(b),!p)break}l.push(...c)}function $c(l,o,i){const c=l.interpolate(o,i);if(!c)return{};const u=c[i],d=l.segments,h=l.points;let p=!1,b=!1;for(let C=0;C<d.length;C++){const v=d[C],w=h[v.start][i],T=h[v.end][i];if(Te(u,w,T)){p=u===w,b=u===T;break}}return{first:p,last:b,point:c}}function rg(l){const{chart:o,fill:i,line:c}=l;if(Be(i))return function xo(l,o){const i=l.getDatasetMeta(o);return i&&l.isDatasetVisible(o)?i.dataset:null}(o,i);if("stack"===i)return function og(l){const{scale:o,index:i,line:c}=l,u=[],d=c.segments,h=c.points,p=function Fc(l,o){const i=[],c=l.getMatchingVisibleMetas("line");for(let u=0;u<c.length;u++){const d=c[u];if(d.index===o)break;d.hidden||i.unshift(d.dataset)}return i}(o,i);p.push(fd({x:null,y:o.bottom},c));for(let b=0;b<d.length;b++){const C=d[b];for(let v=C.start;v<=C.end;v++)_o(u,h[v],p)}return new Co({points:u,options:{}})}(l);if("shape"===i)return!0;const u=function ud(l){return(l.scale||{}).getPointPositionForValue?function Lc(l){const{scale:o,fill:i}=l,c=o.options,u=o.getLabels().length,d=[],h=c.reverse?o.max:o.min;let b,C,v;if(v="start"===i?h:"end"===i?c.reverse?o.min:o.max:It(i)?i.value:o.getBaseValue(),c.grid.circular)return C=o.getPointPositionForValue(0,h),new nn({x:C.x,y:C.y,radius:o.getDistanceFromCenterForValue(v)});for(b=0;b<u;++b)d.push(o.getPointPositionForValue(b,v));return d}(l):function Gr(l){const{scale:o={},fill:i}=l;let u,c=null;return"start"===i?c=o.bottom:"end"===i?c=o.top:It(i)?c=o.getPixelForValue(i.value):o.getBasePixel&&(c=o.getBasePixel()),Be(c)?(u=o.isHorizontal(),{x:u?c:null,y:u?null:c}):null}(l)}(l);return u instanceof nn?u:fd(u,c)}function fd(l,o){let i=[],c=!1;return me(l)?(c=!0,i=l):i=function Xe(l,o){const{x:i=null,y:c=null}=l||{},u=o.points,d=[];return o.segments.forEach(({start:h,end:p})=>{p=Ic(h,p,u);const b=u[h],C=u[p];null!==c?(d.push({x:b.x,y:c}),d.push({x:C.x,y:c})):null!==i&&(d.push({x:i,y:b.y}),d.push({x:i,y:C.y}))}),d}(l,o),i.length?new Co({points:i,options:{tension:0},_loop:c,_fullLoop:c}):null}function ig(l,o,i){let u=l[o].fill;const d=[o];let h;if(!i)return u;for(;!1!==u&&-1===d.indexOf(u);){if(!Be(u))return u;if(h=l[u],!h)return!1;if(h.visible)return u;d.push(u),u=h.fill}return!1}function dd(l,o,i){const{segments:c,points:u}=o;let d=!0,h=!1;l.beginPath();for(const p of c){const{start:b,end:C}=p,v=u[b],w=u[Ic(b,C,u)];d?(l.moveTo(v.x,v.y),d=!1):(l.lineTo(v.x,i),l.lineTo(v.x,v.y)),h=!!o.pathSegment(l,p,{move:h}),h?l.closePath():l.lineTo(w.x,i)}l.lineTo(o.first().x,i),l.closePath(),l.clip()}function nl(l,o,i,c){if(c)return;let u=o[l],d=i[l];return"angle"===l&&(u=Tn(u),d=Tn(d)),{property:l,start:u,end:d}}function sl(l,o,i,c){return l&&o?c(l[i],o[i]):l?l[i]:o?o[i]:0}function lg(l,o,i){const{top:c,bottom:u}=o.chart.chartArea,{property:d,start:h,end:p}=i||{};"x"===d&&(l.beginPath(),l.rect(h,c,p-h,u-c),l.clip())}function ol(l,o,i,c){const u=o.interpolate(i,c);u&&l.lineTo(u.x,u.y)}function Vi(l,o){const{line:i,target:c,property:u,color:d,scale:h}=o,p=function ag(l,o,i){const c=l.segments,u=l.points,d=o.points,h=[];for(const p of c){let{start:b,end:C}=p;C=Ic(b,C,u);const v=nl(i,u[b],u[C],p.loop);if(!o.segments){h.push({source:p,target:v,start:u[b],end:u[C]});continue}const w=Ma(o,v);for(const T of w){const O=nl(i,d[T.start],d[T.end],T.loop),M=$r(p,u,O);for(const I of M)h.push({source:I,target:T,start:{[i]:sl(v,O,"start",Math.max)},end:{[i]:sl(v,O,"end",Math.min)}})}}return h}(i,c,u);for(const{source:b,target:C,start:v,end:w}of p){const{style:{backgroundColor:T=d}={}}=b,O=!0!==c;l.save(),l.fillStyle=T,lg(l,h,O&&nl(u,v,w)),l.beginPath();const M=!!i.pathSegment(l,b);let I;if(O){M?l.closePath():ol(l,c,w,u);const U=!!c.pathSegment(l,C,{move:M,reverse:!0});I=M&&U,I||ol(l,c,v,u)}l.closePath(),l.fill(I?"evenodd":"nonzero"),l.restore()}}function So(l,o,i){const c=rg(o),{line:u,scale:d,axis:h}=o,p=u.options,b=p.fill,C=p.backgroundColor,{above:v=C,below:w=C}=b||{};c&&u.points.length&&(ho(l,i),function cg(l,o){const{line:i,target:c,above:u,below:d,area:h,scale:p}=o,b=i._loop?"angle":o.axis;l.save(),"x"===b&&d!==u&&(dd(l,c,h.top),Vi(l,{line:i,target:c,color:u,scale:p,property:b}),l.restore(),l.save(),dd(l,c,h.bottom)),Vi(l,{line:i,target:c,color:d,scale:p,property:b}),l.restore()}(l,{line:u,target:c,above:v,below:w,area:i,scale:d,axis:h}),gi(l))}var ug={id:"filler",afterDatasetsUpdate(l,o,i){const c=(l.data.datasets||[]).length,u=[];let d,h,p,b;for(h=0;h<c;++h)d=l.getDatasetMeta(h),p=d.dataset,b=null,p&&p.options&&p instanceof Co&&(b={visible:l.isDatasetVisible(h),index:h,fill:sg(p,h,c),chart:l,axis:d.controller.options.indexAxis,scale:d.vScale,line:p}),d.$filler=b,u.push(b);for(h=0;h<c;++h)b=u[h],b&&!1!==b.fill&&(b.fill=ig(u,h,i.propagate))},beforeDraw(l,o,i){const c="beforeDraw"===i.drawTime,u=l.getSortedVisibleDatasetMetas(),d=l.chartArea;for(let h=u.length-1;h>=0;--h){const p=u[h].$filler;!p||(p.line.updateControlPoints(d,p.axis),c&&So(l.ctx,p,d))}},beforeDatasetsDraw(l,o,i){if("beforeDatasetsDraw"!==i.drawTime)return;const c=l.getSortedVisibleDatasetMetas();for(let u=c.length-1;u>=0;--u){const d=c[u].$filler;d&&So(l.ctx,d,l.chartArea)}},beforeDatasetDraw(l,o,i){const c=o.meta.$filler;!c||!1===c.fill||"beforeDatasetDraw"!==i.drawTime||So(l.ctx,c,l.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const wo=(l,o)=>{let{boxHeight:i=o,boxWidth:c=o}=l;return l.usePointStyle&&(i=Math.min(i,o),c=Math.min(c,o)),{boxWidth:c,boxHeight:i,itemHeight:Math.max(o,i)}};class hd extends Kn{constructor(o){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,i,c){this.maxWidth=o,this.maxHeight=i,this._margins=c,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const o=this.options.labels||{};let i=fe(o.generateLabels,[this.chart],this)||[];o.filter&&(i=i.filter(c=>o.filter(c,this.chart.data))),o.sort&&(i=i.sort((c,u)=>o.sort(c,u,this.chart.data))),this.options.reverse&&i.reverse(),this.legendItems=i}fit(){const{options:o,ctx:i}=this;if(!o.display)return void(this.width=this.height=0);const c=o.labels,u=Re(c.font),d=u.size,h=this._computeTitleHeight(),{boxWidth:p,itemHeight:b}=wo(c,d);let C,v;i.font=u.string,this.isHorizontal()?(C=this.maxWidth,v=this._fitRows(h,d,p,b)+10):(v=this.maxHeight,C=this._fitCols(h,d,p,b)+10),this.width=Math.min(C,o.maxWidth||this.maxWidth),this.height=Math.min(v,o.maxHeight||this.maxHeight)}_fitRows(o,i,c,u){const{ctx:d,maxWidth:h,options:{labels:{padding:p}}}=this,b=this.legendHitBoxes=[],C=this.lineWidths=[0],v=u+p;let w=o;d.textAlign="left",d.textBaseline="middle";let T=-1,O=-v;return this.legendItems.forEach((M,I)=>{const U=c+i/2+d.measureText(M.text).width;(0===I||C[C.length-1]+U+2*p>h)&&(w+=v,C[C.length-(I>0?0:1)]=0,O+=v,T++),b[I]={left:0,top:O,row:T,width:U,height:u},C[C.length-1]+=U+p}),w}_fitCols(o,i,c,u){const{ctx:d,maxHeight:h,options:{labels:{padding:p}}}=this,b=this.legendHitBoxes=[],C=this.columnSizes=[],v=h-o;let w=p,T=0,O=0,M=0,I=0;return this.legendItems.forEach((U,j)=>{const nt=c+i/2+d.measureText(U.text).width;j>0&&O+u+2*p>v&&(w+=T+p,C.push({width:T,height:O}),M+=T+p,I++,T=O=0),b[j]={left:M,top:O,col:I,width:nt,height:u},T=Math.max(T,nt),O+=u+p}),w+=T,C.push({width:T,height:O}),w}adjustHitBoxes(){if(!this.options.display)return;const o=this._computeTitleHeight(),{legendHitBoxes:i,options:{align:c,labels:{padding:u},rtl:d}}=this,h=jo(d,this.left,this.width);if(this.isHorizontal()){let p=0,b=ln(c,this.left+u,this.right-this.lineWidths[p]);for(const C of i)p!==C.row&&(p=C.row,b=ln(c,this.left+u,this.right-this.lineWidths[p])),C.top+=this.top+o+u,C.left=h.leftForLtr(h.x(b),C.width),b+=C.width+u}else{let p=0,b=ln(c,this.top+o+u,this.bottom-this.columnSizes[p].height);for(const C of i)C.col!==p&&(p=C.col,b=ln(c,this.top+o+u,this.bottom-this.columnSizes[p].height)),C.top=b,C.left+=this.left+u,C.left=h.leftForLtr(h.x(C.left),C.width),b+=C.height+u}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const o=this.ctx;ho(o,this),this._draw(),gi(o)}}_draw(){const{options:o,columnSizes:i,lineWidths:c,ctx:u}=this,{align:d,labels:h}=o,p=Qt.color,b=jo(o.rtl,this.left,this.width),C=Re(h.font),{color:v,padding:w}=h,T=C.size,O=T/2;let M;this.drawTitle(),u.textAlign=b.textAlign("left"),u.textBaseline="middle",u.lineWidth=.5,u.font=C.string;const{boxWidth:I,boxHeight:U,itemHeight:j}=wo(h,T),at=this.isHorizontal(),it=this._computeTitleHeight();M=at?{x:ln(d,this.left+w,this.right-c[0]),y:this.top+w+it,line:0}:{x:this.left+w,y:ln(d,this.top+it+w,this.bottom-i[0].height),line:0},Ws(this.ctx,o.textDirection);const kt=j+w;this.legendItems.forEach((_t,Ot)=>{u.strokeStyle=_t.fontColor||v,u.fillStyle=_t.fontColor||v;const Dt=u.measureText(_t.text).width,pe=b.textAlign(_t.textAlign||(_t.textAlign=h.textAlign)),ne=I+O+Dt;let Jt=M.x,je=M.y;b.setWidth(this.width),at?Ot>0&&Jt+ne+w>this.right&&(je=M.y+=kt,M.line++,Jt=M.x=ln(d,this.left+w,this.right-c[M.line])):Ot>0&&je+kt>this.bottom&&(Jt=M.x=Jt+i[M.line].width+w,M.line++,je=M.y=ln(d,this.top+it+w,this.bottom-i[M.line].height)),function(_t,Ot,Dt){if(isNaN(I)||I<=0||isNaN(U)||U<0)return;u.save();const pe=Vt(Dt.lineWidth,1);if(u.fillStyle=Vt(Dt.fillStyle,p),u.lineCap=Vt(Dt.lineCap,"butt"),u.lineDashOffset=Vt(Dt.lineDashOffset,0),u.lineJoin=Vt(Dt.lineJoin,"miter"),u.lineWidth=pe,u.strokeStyle=Vt(Dt.strokeStyle,p),u.setLineDash(Vt(Dt.lineDash,[])),h.usePointStyle){const ne={radius:I*Math.SQRT2/2,pointStyle:Dt.pointStyle,rotation:Dt.rotation,borderWidth:pe},Jt=b.xPlus(_t,I/2);Nr(u,ne,Jt,Ot+O)}else{const ne=Ot+Math.max((T-U)/2,0),Jt=b.leftForLtr(_t,I),je=Mr(Dt.borderRadius);u.beginPath(),Object.values(je).some(F=>0!==F)?Or(u,{x:Jt,y:ne,w:I,h:U,radius:je}):u.rect(Jt,ne,I,U),u.fill(),0!==pe&&u.stroke()}u.restore()}(b.x(Jt),je,_t),Jt=Bu(pe,Jt+I+O,at?Jt+ne:this.right,o.rtl),function(_t,Ot,Dt){gn(u,Dt.text,_t,Ot+j/2,C,{strikethrough:Dt.hidden,textAlign:b.textAlign(Dt.textAlign)})}(b.x(Jt),je,_t),at?M.x+=ne+w:M.y+=kt}),qo(this.ctx,o.textDirection)}drawTitle(){const o=this.options,i=o.title,c=Re(i.font),u=W(i.padding);if(!i.display)return;const d=jo(o.rtl,this.left,this.width),h=this.ctx,p=i.position,C=u.top+c.size/2;let v,w=this.left,T=this.width;if(this.isHorizontal())T=Math.max(...this.lineWidths),v=this.top+C,w=ln(o.align,w,this.right-T);else{const M=this.columnSizes.reduce((I,U)=>Math.max(I,U.height),0);v=C+ln(o.align,this.top,this.bottom-M-o.labels.padding-this._computeTitleHeight())}const O=ln(p,w,w+T);h.textAlign=d.textAlign(lo(p)),h.textBaseline="middle",h.strokeStyle=i.color,h.fillStyle=i.color,h.font=c.string,gn(h,i.text,O,v,c)}_computeTitleHeight(){const o=this.options.title,i=Re(o.font),c=W(o.padding);return o.display?i.lineHeight+c.height:0}_getLegendItemAt(o,i){let c,u,d;if(Te(o,this.left,this.right)&&Te(i,this.top,this.bottom))for(d=this.legendHitBoxes,c=0;c<d.length;++c)if(u=d[c],Te(o,u.left,u.left+u.width)&&Te(i,u.top,u.top+u.height))return this.legendItems[c];return null}handleEvent(o){const i=this.options;if(!function Hc(l,o){return!!("mousemove"===l&&(o.onHover||o.onLeave)||o.onClick&&("click"===l||"mouseup"===l))}(o.type,i))return;const c=this._getLegendItemAt(o.x,o.y);if("mousemove"===o.type){const u=this._hoveredItem,d=((l,o)=>null!==l&&null!==o&&l.datasetIndex===o.datasetIndex&&l.index===o.index)(u,c);u&&!d&&fe(i.onLeave,[o,u,this],this),this._hoveredItem=c,c&&!d&&fe(i.onHover,[o,c,this],this)}else c&&fe(i.onClick,[o,c,this],this)}}var Ui={id:"legend",_element:hd,start(l,o,i){const c=l.legend=new hd({ctx:l.ctx,options:i,chart:l});de.configure(l,c,i),de.addBox(l,c)},stop(l){de.removeBox(l,l.legend),delete l.legend},beforeUpdate(l,o,i){const c=l.legend;de.configure(l,c,i),c.options=i},afterUpdate(l){const o=l.legend;o.buildLabels(),o.adjustHitBoxes()},afterEvent(l,o){o.replay||l.legend.handleEvent(o.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(l,o,i){const c=o.datasetIndex,u=i.chart;u.isDatasetVisible(c)?(u.hide(c),o.hidden=!0):(u.show(c),o.hidden=!1)},onHover:null,onLeave:null,labels:{color:l=>l.chart.options.color,boxWidth:40,padding:10,generateLabels(l){const o=l.data.datasets,{labels:{usePointStyle:i,pointStyle:c,textAlign:u,color:d}}=l.legend.options;return l._getSortedDatasetMetas().map(h=>{const p=h.controller.getStyle(i?0:void 0),b=W(p.borderWidth);return{text:o[h.index].label,fillStyle:p.backgroundColor,fontColor:d,hidden:!h.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:p.borderColor,pointStyle:c||p.pointStyle,rotation:p.rotation,textAlign:u||p.textAlign,borderRadius:0,datasetIndex:h.index}},this)}},title:{color:l=>l.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:l=>!l.startsWith("on"),labels:{_scriptable:l=>!["generateLabels","filter","sort"].includes(l)}}};class Vc extends Kn{constructor(o){super(),this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,i){const c=this.options;if(this.left=0,this.top=0,!c.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=o,this.height=this.bottom=i;const u=me(c.text)?c.text.length:1;this._padding=W(c.padding);const d=u*Re(c.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=d:this.width=d}isHorizontal(){const o=this.options.position;return"top"===o||"bottom"===o}_drawArgs(o){const{top:i,left:c,bottom:u,right:d,options:h}=this,p=h.align;let C,v,w,b=0;return this.isHorizontal()?(v=ln(p,c,d),w=i+o,C=d-c):("left"===h.position?(v=c+o,w=ln(p,u,i),b=-.5*Ee):(v=d-o,w=ln(p,i,u),b=.5*Ee),C=u-i),{titleX:v,titleY:w,maxWidth:C,rotation:b}}draw(){const o=this.ctx,i=this.options;if(!i.display)return;const c=Re(i.font),d=c.lineHeight/2+this._padding.top,{titleX:h,titleY:p,maxWidth:b,rotation:C}=this._drawArgs(d);gn(o,i.text,0,0,c,{color:i.color,maxWidth:b,rotation:C,textAlign:lo(i.align),textBaseline:"middle",translation:[h,p]})}}var Xr={id:"title",_element:Vc,start(l,o,i){!function fg(l,o){const i=new Vc({ctx:l.ctx,options:o,chart:l});de.configure(l,i,o),de.addBox(l,i),l.titleBlock=i}(l,i)},stop(l){de.removeBox(l,l.titleBlock),delete l.titleBlock},beforeUpdate(l,o,i){const c=l.titleBlock;de.configure(l,c,i),c.options=i},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const rl=new WeakMap;var md={id:"subtitle",start(l,o,i){const c=new Vc({ctx:l.ctx,options:i,chart:l});de.configure(l,c,i),de.addBox(l,c),rl.set(l,c)},stop(l){de.removeBox(l,rl.get(l)),rl.delete(l)},beforeUpdate(l,o,i){const c=rl.get(l);de.configure(l,c,i),c.options=i},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const se={average(l){if(!l.length)return!1;let o,i,c=0,u=0,d=0;for(o=0,i=l.length;o<i;++o){const h=l[o].element;if(h&&h.hasValue()){const p=h.tooltipPosition();c+=p.x,u+=p.y,++d}}return{x:c/d,y:u/d}},nearest(l,o){if(!l.length)return!1;let d,h,p,i=o.x,c=o.y,u=Number.POSITIVE_INFINITY;for(d=0,h=l.length;d<h;++d){const b=l[d].element;if(b&&b.hasValue()){const v=mi(o,b.getCenterPoint());v<u&&(u=v,p=b)}}if(p){const b=p.tooltipPosition();i=b.x,c=b.y}return{x:i,y:c}}};function Is(l,o){return o&&(me(o)?Array.prototype.push.apply(l,o):l.push(o)),l}function Ys(l){return("string"==typeof l||l instanceof String)&&l.indexOf("\n")>-1?l.split("\n"):l}function dg(l,o){const{element:i,datasetIndex:c,index:u}=o,d=l.getDatasetMeta(c).controller,{label:h,value:p}=d.getLabelAndValue(u);return{chart:l,label:h,parsed:d.getParsed(u),raw:l.data.datasets[c].data[u],formattedValue:p,dataset:d.getDataset(),dataIndex:u,datasetIndex:c,element:i}}function Wi(l,o){const i=l.chart.ctx,{body:c,footer:u,title:d}=l,{boxWidth:h,boxHeight:p}=o,b=Re(o.bodyFont),C=Re(o.titleFont),v=Re(o.footerFont),w=d.length,T=u.length,O=c.length,M=W(o.padding);let I=M.height,U=0,j=c.reduce((at,it)=>at+it.before.length+it.lines.length+it.after.length,0);j+=l.beforeBody.length+l.afterBody.length,w&&(I+=w*C.lineHeight+(w-1)*o.titleSpacing+o.titleMarginBottom),j&&(I+=O*(o.displayColors?Math.max(p,b.lineHeight):b.lineHeight)+(j-O)*b.lineHeight+(j-1)*o.bodySpacing),T&&(I+=o.footerMarginTop+T*v.lineHeight+(T-1)*o.footerSpacing);let nt=0;const ct=function(at){U=Math.max(U,i.measureText(at).width+nt)};return i.save(),i.font=C.string,ae(l.title,ct),i.font=b.string,ae(l.beforeBody.concat(l.afterBody),ct),nt=o.displayColors?h+2+o.boxPadding:0,ae(c,at=>{ae(at.before,ct),ae(at.lines,ct),ae(at.after,ct)}),nt=0,i.font=v.string,ae(l.footer,ct),i.restore(),U+=M.width,{width:U,height:I}}function Ve(l,o,i,c){const{x:u,width:d}=i,{width:h,chartArea:{left:p,right:b}}=l;let C="center";return"center"===c?C=u<=(p+b)/2?"left":"right":u<=d/2?C="left":u>=h-d/2&&(C="right"),function Gs(l,o,i,c){const{x:u,width:d}=c,h=i.caretSize+i.caretPadding;if("left"===l&&u+d+h>o.width||"right"===l&&u-d-h<0)return!0}(C,l,o,i)&&(C="center"),C}function pd(l,o,i){const c=i.yAlign||o.yAlign||function gd(l,o){const{y:i,height:c}=o;return i<c/2?"top":i>l.height-c/2?"bottom":"center"}(l,i);return{xAlign:i.xAlign||o.xAlign||Ve(l,o,i,c),yAlign:c}}function il(l,o,i,c){const{caretSize:u,caretPadding:d,cornerRadius:h}=l,{xAlign:p,yAlign:b}=i,C=u+d,{topLeft:v,topRight:w,bottomLeft:T,bottomRight:O}=Mr(h);let M=function hg(l,o){let{x:i,width:c}=l;return"right"===o?i-=c:"center"===o&&(i-=c/2),i}(o,p);const I=function ji(l,o,i){let{y:c,height:u}=l;return"top"===o?c+=i:c-="bottom"===o?u+i:u/2,c}(o,b,C);return"center"===b?"left"===p?M+=C:"right"===p&&(M-=C):"left"===p?M-=Math.max(v,T)+u:"right"===p&&(M+=Math.max(w,O)+u),{x:Ue(M,0,c.width-o.width),y:Ue(I,0,c.height-o.height)}}function qi(l,o,i){const c=W(i.padding);return"center"===o?l.x+l.width/2:"right"===o?l.x+l.width-c.right:l.x+c.left}function mg(l){return Is([],Ys(l))}function gg(l,o){const i=o&&o.dataset&&o.dataset.tooltip&&o.dataset.tooltip.callbacks;return i?l.override(i):l}class bd extends Kn{constructor(o){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=o.chart||o._chart,this._chart=this.chart,this.options=o.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(o){this.options=o,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const o=this._cachedAnimations;if(o)return o;const i=this.chart,c=this.options.setContext(this.getContext()),u=c.enabled&&i.options.animation&&c.animations,d=new bc(this.chart,u);return u._cacheable&&(this._cachedAnimations=Object.freeze(d)),d}getContext(){return this.$context||(this.$context=function Ty(l,o,i){return Vs(l,{tooltip:o,tooltipItems:i,type:"tooltip"})}(this.chart.getContext(),this,this._tooltipItems))}getTitle(o,i){const{callbacks:c}=i,u=c.beforeTitle.apply(this,[o]),d=c.title.apply(this,[o]),h=c.afterTitle.apply(this,[o]);let p=[];return p=Is(p,Ys(u)),p=Is(p,Ys(d)),p=Is(p,Ys(h)),p}getBeforeBody(o,i){return mg(i.callbacks.beforeBody.apply(this,[o]))}getBody(o,i){const{callbacks:c}=i,u=[];return ae(o,d=>{const h={before:[],lines:[],after:[]},p=gg(c,d);Is(h.before,Ys(p.beforeLabel.call(this,d))),Is(h.lines,p.label.call(this,d)),Is(h.after,Ys(p.afterLabel.call(this,d))),u.push(h)}),u}getAfterBody(o,i){return mg(i.callbacks.afterBody.apply(this,[o]))}getFooter(o,i){const{callbacks:c}=i,u=c.beforeFooter.apply(this,[o]),d=c.footer.apply(this,[o]),h=c.afterFooter.apply(this,[o]);let p=[];return p=Is(p,Ys(u)),p=Is(p,Ys(d)),p=Is(p,Ys(h)),p}_createItems(o){const i=this._active,c=this.chart.data,u=[],d=[],h=[];let b,C,p=[];for(b=0,C=i.length;b<C;++b)p.push(dg(this.chart,i[b]));return o.filter&&(p=p.filter((v,w,T)=>o.filter(v,w,T,c))),o.itemSort&&(p=p.sort((v,w)=>o.itemSort(v,w,c))),ae(p,v=>{const w=gg(o.callbacks,v);u.push(w.labelColor.call(this,v)),d.push(w.labelPointStyle.call(this,v)),h.push(w.labelTextColor.call(this,v))}),this.labelColors=u,this.labelPointStyles=d,this.labelTextColors=h,this.dataPoints=p,p}update(o,i){const c=this.options.setContext(this.getContext()),u=this._active;let d,h=[];if(u.length){const p=se[c.position].call(this,u,this._eventPosition);h=this._createItems(c),this.title=this.getTitle(h,c),this.beforeBody=this.getBeforeBody(h,c),this.body=this.getBody(h,c),this.afterBody=this.getAfterBody(h,c),this.footer=this.getFooter(h,c);const b=this._size=Wi(this,c),C=Object.assign({},p,b),v=pd(this.chart,c,C),w=il(c,C,v,this.chart);this.xAlign=v.xAlign,this.yAlign=v.yAlign,d={opacity:1,x:w.x,y:w.y,width:b.width,height:b.height,caretX:p.x,caretY:p.y}}else 0!==this.opacity&&(d={opacity:0});this._tooltipItems=h,this.$context=void 0,d&&this._resolveAnimations().update(this,d),o&&c.external&&c.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(o,i,c,u){const d=this.getCaretPosition(o,c,u);i.lineTo(d.x1,d.y1),i.lineTo(d.x2,d.y2),i.lineTo(d.x3,d.y3)}getCaretPosition(o,i,c){const{xAlign:u,yAlign:d}=this,{caretSize:h,cornerRadius:p}=c,{topLeft:b,topRight:C,bottomLeft:v,bottomRight:w}=Mr(p),{x:T,y:O}=o,{width:M,height:I}=i;let U,j,nt,ct,at,it;return"center"===d?(at=O+I/2,"left"===u?(U=T,j=U-h,ct=at+h,it=at-h):(U=T+M,j=U+h,ct=at-h,it=at+h),nt=U):(j="left"===u?T+Math.max(b,v)+h:"right"===u?T+M-Math.max(C,w)-h:this.caretX,"top"===d?(ct=O,at=ct-h,U=j-h,nt=j+h):(ct=O+I,at=ct+h,U=j+h,nt=j-h),it=ct),{x1:U,x2:j,x3:nt,y1:ct,y2:at,y3:it}}drawTitle(o,i,c){const u=this.title,d=u.length;let h,p,b;if(d){const C=jo(c.rtl,this.x,this.width);for(o.x=qi(this,c.titleAlign,c),i.textAlign=C.textAlign(c.titleAlign),i.textBaseline="middle",h=Re(c.titleFont),p=c.titleSpacing,i.fillStyle=c.titleColor,i.font=h.string,b=0;b<d;++b)i.fillText(u[b],C.x(o.x),o.y+h.lineHeight/2),o.y+=h.lineHeight+p,b+1===d&&(o.y+=c.titleMarginBottom-p)}}_drawColorBox(o,i,c,u,d){const h=this.labelColors[c],p=this.labelPointStyles[c],{boxHeight:b,boxWidth:C,boxPadding:v}=d,w=Re(d.bodyFont),T=qi(this,"left",d),O=u.x(T),I=i.y+(b<w.lineHeight?(w.lineHeight-b)/2:0);if(d.usePointStyle){const U={radius:Math.min(C,b)/2,pointStyle:p.pointStyle,rotation:p.rotation,borderWidth:1},j=u.leftForLtr(O,C)+C/2,nt=I+b/2;o.strokeStyle=d.multiKeyBackground,o.fillStyle=d.multiKeyBackground,Nr(o,U,j,nt),o.strokeStyle=h.borderColor,o.fillStyle=h.backgroundColor,Nr(o,U,j,nt)}else{o.lineWidth=h.borderWidth||1,o.strokeStyle=h.borderColor,o.setLineDash(h.borderDash||[]),o.lineDashOffset=h.borderDashOffset||0;const U=u.leftForLtr(O,C-v),j=u.leftForLtr(u.xPlus(O,1),C-v-2),nt=Mr(h.borderRadius);Object.values(nt).some(ct=>0!==ct)?(o.beginPath(),o.fillStyle=d.multiKeyBackground,Or(o,{x:U,y:I,w:C,h:b,radius:nt}),o.fill(),o.stroke(),o.fillStyle=h.backgroundColor,o.beginPath(),Or(o,{x:j,y:I+1,w:C-2,h:b-2,radius:nt}),o.fill()):(o.fillStyle=d.multiKeyBackground,o.fillRect(U,I,C,b),o.strokeRect(U,I,C,b),o.fillStyle=h.backgroundColor,o.fillRect(j,I+1,C-2,b-2))}o.fillStyle=this.labelTextColors[c]}drawBody(o,i,c){const{body:u}=this,{bodySpacing:d,bodyAlign:h,displayColors:p,boxHeight:b,boxWidth:C,boxPadding:v}=c,w=Re(c.bodyFont);let T=w.lineHeight,O=0;const M=jo(c.rtl,this.x,this.width),I=function(Ot){i.fillText(Ot,M.x(o.x+O),o.y+T/2),o.y+=T+d},U=M.textAlign(h);let j,nt,ct,at,it,kt,_t;for(i.textAlign=h,i.textBaseline="middle",i.font=w.string,o.x=qi(this,U,c),i.fillStyle=c.bodyColor,ae(this.beforeBody,I),O=p&&"right"!==U?"center"===h?C/2+v:C+2+v:0,at=0,kt=u.length;at<kt;++at){for(j=u[at],nt=this.labelTextColors[at],i.fillStyle=nt,ae(j.before,I),ct=j.lines,p&&ct.length&&(this._drawColorBox(i,o,at,M,c),T=Math.max(w.lineHeight,b)),it=0,_t=ct.length;it<_t;++it)I(ct[it]),T=w.lineHeight;ae(j.after,I)}O=0,T=w.lineHeight,ae(this.afterBody,I),o.y-=d}drawFooter(o,i,c){const u=this.footer,d=u.length;let h,p;if(d){const b=jo(c.rtl,this.x,this.width);for(o.x=qi(this,c.footerAlign,c),o.y+=c.footerMarginTop,i.textAlign=b.textAlign(c.footerAlign),i.textBaseline="middle",h=Re(c.footerFont),i.fillStyle=c.footerColor,i.font=h.string,p=0;p<d;++p)i.fillText(u[p],b.x(o.x),o.y+h.lineHeight/2),o.y+=h.lineHeight+c.footerSpacing}}drawBackground(o,i,c,u){const{xAlign:d,yAlign:h}=this,{x:p,y:b}=o,{width:C,height:v}=c,{topLeft:w,topRight:T,bottomLeft:O,bottomRight:M}=Mr(u.cornerRadius);i.fillStyle=u.backgroundColor,i.strokeStyle=u.borderColor,i.lineWidth=u.borderWidth,i.beginPath(),i.moveTo(p+w,b),"top"===h&&this.drawCaret(o,i,c,u),i.lineTo(p+C-T,b),i.quadraticCurveTo(p+C,b,p+C,b+T),"center"===h&&"right"===d&&this.drawCaret(o,i,c,u),i.lineTo(p+C,b+v-M),i.quadraticCurveTo(p+C,b+v,p+C-M,b+v),"bottom"===h&&this.drawCaret(o,i,c,u),i.lineTo(p+O,b+v),i.quadraticCurveTo(p,b+v,p,b+v-O),"center"===h&&"left"===d&&this.drawCaret(o,i,c,u),i.lineTo(p,b+w),i.quadraticCurveTo(p,b,p+w,b),i.closePath(),i.fill(),u.borderWidth>0&&i.stroke()}_updateAnimationTarget(o){const i=this.chart,c=this.$animations,u=c&&c.x,d=c&&c.y;if(u||d){const h=se[o.position].call(this,this._active,this._eventPosition);if(!h)return;const p=this._size=Wi(this,o),b=Object.assign({},h,this._size),C=pd(i,o,b),v=il(o,b,C,i);(u._to!==v.x||d._to!==v.y)&&(this.xAlign=C.xAlign,this.yAlign=C.yAlign,this.width=p.width,this.height=p.height,this.caretX=h.x,this.caretY=h.y,this._resolveAnimations().update(this,v))}}draw(o){const i=this.options.setContext(this.getContext());let c=this.opacity;if(!c)return;this._updateAnimationTarget(i);const u={width:this.width,height:this.height},d={x:this.x,y:this.y};c=Math.abs(c)<.001?0:c;const h=W(i.padding);i.enabled&&(this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length)&&(o.save(),o.globalAlpha=c,this.drawBackground(d,o,u,i),Ws(o,i.textDirection),d.y+=h.top,this.drawTitle(d,o,i),this.drawBody(d,o,i),this.drawFooter(d,o,i),qo(o,i.textDirection),o.restore())}getActiveElements(){return this._active||[]}setActiveElements(o,i){const c=this._active,u=o.map(({datasetIndex:p,index:b})=>{const C=this.chart.getDatasetMeta(p);if(!C)throw new Error("Cannot find a dataset at index "+p);return{datasetIndex:p,element:C.data[b],index:b}}),d=!_r(c,u),h=this._positionChanged(u,i);(d||h)&&(this._active=u,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(o,i,c=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const u=this.options,d=this._active||[],h=this._getActiveElements(o,d,i,c),p=this._positionChanged(h,o),b=i||!_r(h,d)||p;return b&&(this._active=h,(u.enabled||u.external)&&(this._eventPosition={x:o.x,y:o.y},this.update(!0,i))),b}_getActiveElements(o,i,c,u){const d=this.options;if("mouseout"===o.type)return[];if(!u)return i;const h=this.chart.getElementsAtEventForMode(o,d.mode,d,c);return d.reverse&&h.reverse(),h}_positionChanged(o,i){const{caretX:c,caretY:u,options:d}=this,h=se[d.position].call(this,o,i);return!1!==h&&(c!==h.x||u!==h.y)}}bd.positioners=se;var pg=Object.freeze({__proto__:null,Decimation:Ay,Filler:ug,Legend:Ui,SubTitle:md,Title:Xr,Tooltip:{id:"tooltip",_element:bd,positioners:se,afterInit(l,o,i){i&&(l.tooltip=new bd({chart:l,options:i}))},beforeUpdate(l,o,i){l.tooltip&&l.tooltip.initialize(i)},reset(l,o,i){l.tooltip&&l.tooltip.initialize(i)},afterDraw(l){const o=l.tooltip,i={tooltip:o};!1!==l.notifyPlugins("beforeTooltipDraw",i)&&(o&&o.draw(l.ctx),l.notifyPlugins("afterTooltipDraw",i))},afterEvent(l,o){l.tooltip&&l.tooltip.handleEvent(o.event,o.replay,o.inChartArea)&&(o.changed=!0)},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(l,o)=>o.bodyFont.size,boxWidth:(l,o)=>o.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:us,title(l){if(l.length>0){const o=l[0],i=o.chart.data.labels,c=i?i.length:0;if(this&&this.options&&"dataset"===this.options.mode)return o.dataset.label||"";if(o.label)return o.label;if(c>0&&o.dataIndex<c)return i[o.dataIndex]}return""},afterTitle:us,beforeBody:us,beforeLabel:us,label(l){if(this&&this.options&&"dataset"===this.options.mode)return l.label+": "+l.formattedValue||l.formattedValue;let o=l.dataset.label||"";o&&(o+=": ");const i=l.formattedValue;return dt(i)||(o+=i),o},labelColor(l){const i=l.chart.getDatasetMeta(l.datasetIndex).controller.getStyle(l.dataIndex);return{borderColor:i.borderColor,backgroundColor:i.backgroundColor,borderWidth:i.borderWidth,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(l){const i=l.chart.getDatasetMeta(l.datasetIndex).controller.getStyle(l.dataIndex);return{pointStyle:i.pointStyle,rotation:i.rotation}},afterLabel:us,afterBody:us,beforeFooter:us,footer:us,afterFooter:us}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:l=>"filter"!==l&&"itemSort"!==l&&"external"!==l,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]}});class al extends Ks{constructor(o){super(o),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(o){const i=this._addedLabels;if(i.length){const c=this.getLabels();for(const{index:u,label:d}of i)c[u]===d&&c.splice(u,1);this._addedLabels=[]}super.init(o)}parse(o,i){if(dt(o))return null;const c=this.getLabels();return((l,o)=>null===l?null:Ue(Math.round(l),0,o))(i=isFinite(i)&&c[i]===o?i:function vs(l,o,i,c){const u=l.indexOf(o);return-1===u?((l,o,i,c)=>("string"==typeof o?(i=l.push(o)-1,c.unshift({index:i,label:o})):isNaN(o)&&(i=null),i))(l,o,i,c):u!==l.lastIndexOf(o)?i:u}(c,o,Vt(i,o),this._addedLabels),c.length-1)}determineDataLimits(){const{minDefined:o,maxDefined:i}=this.getUserBounds();let{min:c,max:u}=this.getMinMax(!0);"ticks"===this.options.bounds&&(o||(c=0),i||(u=this.getLabels().length-1)),this.min=c,this.max=u}buildTicks(){const o=this.min,i=this.max,c=this.options.offset,u=[];let d=this.getLabels();d=0===o&&i===d.length-1?d:d.slice(o,i+1),this._valueRange=Math.max(d.length-(c?0:1),1),this._startValue=this.min-(c?.5:0);for(let h=o;h<=i;h++)u.push({value:h});return u}getLabelForValue(o){const i=this.getLabels();return o>=0&&o<i.length?i[o]:o}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(o){return"number"!=typeof o&&(o=this.parse(o)),null===o?NaN:this.getPixelForDecimal((o-this._startValue)/this._valueRange)}getPixelForTick(o){const i=this.ticks;return o<0||o>i.length-1?null:this.getPixelForValue(i[o].value)}getValueForPixel(o){return Math.round(this._startValue+this.getDecimalForPixel(o)*this._valueRange)}getBasePixel(){return this.bottom}}function Ki(l,o,{horizontal:i,minRotation:c}){const u=Hn(c),d=(i?Math.sin(u):Math.cos(u))||.001;return Math.min(o/d,.75*o*(""+l).length)}al.id="category",al.defaults={ticks:{callback:al.prototype.getLabelForValue}};class Qr extends Ks{constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(o,i){return dt(o)||("number"==typeof o||o instanceof Number)&&!isFinite(+o)?null:+o}handleTickRangeOptions(){const{beginAtZero:o}=this.options,{minDefined:i,maxDefined:c}=this.getUserBounds();let{min:u,max:d}=this;const h=b=>u=i?u:b,p=b=>d=c?d:b;if(o){const b=ns(u),C=ns(d);b<0&&C<0?p(0):b>0&&C>0&&h(0)}if(u===d){let b=1;(d>=Number.MAX_SAFE_INTEGER||u<=Number.MIN_SAFE_INTEGER)&&(b=Math.abs(.05*d)),p(d+b),o||h(u-b)}this.min=u,this.max=d}getTickLimit(){const o=this.options.ticks;let u,{maxTicksLimit:i,stepSize:c}=o;return c?(u=Math.ceil(this.max/c)-Math.floor(this.min/c)+1,u>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${c} would result generating up to ${u} ticks. Limiting to 1000.`),u=1e3)):(u=this.computeTickLimit(),i=i||11),i&&(u=Math.min(i,u)),u}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const o=this.options,i=o.ticks;let c=this.getTickLimit();c=Math.max(2,c);const h=function ko(l,o){const i=[],{bounds:u,step:d,min:h,max:p,precision:b,count:C,maxTicks:v,maxDigits:w,includeBounds:T}=l,O=d||1,M=v-1,{min:I,max:U}=o,j=!dt(h),nt=!dt(p),ct=!dt(C),at=(U-I)/(w+1);let kt,_t,Ot,Dt,it=Rs((U-I)/M/O)*O;if(it<1e-14&&!j&&!nt)return[{value:I},{value:U}];Dt=Math.ceil(U/it)-Math.floor(I/it),Dt>M&&(it=Rs(Dt*it/M/O)*O),dt(b)||(kt=Math.pow(10,b),it=Math.ceil(it*kt)/kt),"ticks"===u?(_t=Math.floor(I/it)*it,Ot=Math.ceil(U/it)*it):(_t=I,Ot=U),j&&nt&&d&&ju((p-h)/d,it/1e3)?(Dt=Math.round(Math.min((p-h)/it,v)),it=(p-h)/Dt,_t=h,Ot=p):ct?(_t=j?h:_t,Ot=nt?p:Ot,Dt=C-1,it=(Ot-_t)/Dt):(Dt=(Ot-_t)/it,Dt=Tr(Dt,Math.round(Dt),it/1e3)?Math.round(Dt):Math.ceil(Dt));const pe=Math.max(Wo(it),Wo(_t));kt=Math.pow(10,dt(b)?pe:b),_t=Math.round(_t*kt)/kt,Ot=Math.round(Ot*kt)/kt;let ne=0;for(j&&(T&&_t!==h?(i.push({value:h}),_t<h&&ne++,Tr(Math.round((_t+ne*it)*kt)/kt,h,Ki(h,at,l))&&ne++):_t<h&&ne++);ne<Dt;++ne)i.push({value:Math.round((_t+ne*it)*kt)/kt});return nt&&T&&Ot!==p?i.length&&Tr(i[i.length-1].value,p,Ki(p,at,l))?i[i.length-1].value=p:i.push({value:p}):(!nt||Ot===p)&&i.push({value:Ot}),i}({maxTicks:c,bounds:o.bounds,min:o.min,max:o.max,precision:i.precision,step:i.stepSize,count:i.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:i.minRotation||0,includeBounds:!1!==i.includeBounds},this._range||this);return"ticks"===o.bounds&&Fl(h,this,"value"),o.reverse?(h.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),h}configure(){const o=this.ticks;let i=this.min,c=this.max;if(super.configure(),this.options.offset&&o.length){const u=(c-i)/Math.max(o.length-1,1)/2;i-=u,c+=u}this._startValue=i,this._endValue=c,this._valueRange=c-i}getLabelForValue(o){return cn(o,this.chart.options.locale,this.options.ticks.format)}}class ll extends Qr{determineDataLimits(){const{min:o,max:i}=this.getMinMax(!0);this.min=Be(o)?o:0,this.max=Be(i)?i:1,this.handleTickRangeOptions()}computeTickLimit(){const o=this.isHorizontal(),i=o?this.width:this.height,c=Hn(this.options.ticks.minRotation),u=(o?Math.sin(c):Math.cos(c))||.001,d=this._resolveTickFontOptions(0);return Math.ceil(i/Math.min(40,d.lineHeight/u))}getPixelForValue(o){return null===o?NaN:this.getPixelForDecimal((o-this._startValue)/this._valueRange)}getValueForPixel(o){return this._startValue+this.getDecimalForPixel(o)*this._valueRange}}function yn(l){return l/Math.pow(10,Math.floor(hn(l)))==1}ll.id="linear",ll.defaults={ticks:{callback:Pi.formatters.numeric}};class sr extends Ks{constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(o,i){const c=Qr.prototype.parse.apply(this,[o,i]);if(0!==c)return Be(c)&&c>0?c:null;this._zero=!0}determineDataLimits(){const{min:o,max:i}=this.getMinMax(!0);this.min=Be(o)?Math.max(0,o):null,this.max=Be(i)?Math.max(0,i):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:o,maxDefined:i}=this.getUserBounds();let c=this.min,u=this.max;const d=b=>c=o?c:b,h=b=>u=i?u:b,p=(b,C)=>Math.pow(10,Math.floor(hn(b))+C);c===u&&(c<=0?(d(1),h(10)):(d(p(c,-1)),h(p(u,1)))),c<=0&&d(p(u,-1)),u<=0&&h(p(c,1)),this._zero&&this.min!==this._suggestedMin&&c===p(this.min,0)&&d(p(c,-1)),this.min=c,this.max=u}buildTicks(){const o=this.options,c=function Uc(l,o){const i=Math.floor(hn(o.max)),c=Math.ceil(o.max/Math.pow(10,i)),u=[];let d=ue(l.min,Math.pow(10,Math.floor(hn(o.min)))),h=Math.floor(hn(d)),p=Math.floor(d/Math.pow(10,h)),b=h<0?Math.pow(10,Math.abs(h)):1;do{u.push({value:d,major:yn(d)}),++p,10===p&&(p=1,++h,b=h>=0?1:b),d=Math.round(p*Math.pow(10,h)*b)/b}while(h<i||h===i&&p<c);const C=ue(l.max,d);return u.push({value:C,major:yn(d)}),u}({min:this._userMin,max:this._userMax},this);return"ticks"===o.bounds&&Fl(c,this,"value"),o.reverse?(c.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),c}getLabelForValue(o){return void 0===o?"0":cn(o,this.chart.options.locale,this.options.ticks.format)}configure(){const o=this.min;super.configure(),this._startValue=hn(o),this._valueRange=hn(this.max)-hn(o)}getPixelForValue(o){return(void 0===o||0===o)&&(o=this.min),null===o||isNaN(o)?NaN:this.getPixelForDecimal(o===this.min?0:(hn(o)-this._startValue)/this._valueRange)}getValueForPixel(o){const i=this.getDecimalForPixel(o);return Math.pow(10,this._startValue+i*this._valueRange)}}function Zr(l){const o=l.ticks;if(o.display&&l.display){const i=W(o.backdropPadding);return Vt(o.font&&o.font.size,Qt.font.size)+i.height}return 0}function Wc(l,o,i){return i=me(i)?i:[i],{w:ka(l,o.string,i),h:i.length*o.lineHeight}}function jc(l,o,i,c,u){return l===c||l===u?{start:o-i/2,end:o+i/2}:l<c||l>u?{start:o-i,end:o}:{start:o,end:o+i}}function yd(l,o,i,c,u){const d=Math.abs(Math.sin(i)),h=Math.abs(Math.cos(i));let p=0,b=0;c.start<o.l?(p=(o.l-c.start)/d,l.l=Math.min(l.l,o.l-p)):c.end>o.r&&(p=(c.end-o.r)/d,l.r=Math.max(l.r,o.r+p)),u.start<o.t?(b=(o.t-u.start)/h,l.t=Math.min(l.t,o.t-b)):u.end>o.b&&(b=(u.end-o.b)/h,l.b=Math.max(l.b,o.b+b))}function yg(l){return 0===l||180===l?"center":l<180?"left":"right"}function Cg(l,o,i){return"right"===i?l-=o:"center"===i&&(l-=o/2),l}function xg(l,o,i){return 90===i||270===i?l-=o/2:(i>270||i<90)&&(l-=o),l}function qc(l,o,i,c){const{ctx:u}=l;if(i)u.arc(l.xCenter,l.yCenter,o,0,be);else{let d=l.getPointPosition(0,o);u.moveTo(d.x,d.y);for(let h=1;h<c;h++)d=l.getPointPosition(h,o),u.lineTo(d.x,d.y)}}sr.id="logarithmic",sr.defaults={ticks:{callback:Pi.formatters.logarithmic,major:{enabled:!0}}};class Fs extends Qr{constructor(o){super(o),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const o=this._padding=W(Zr(this.options)/2),i=this.width=this.maxWidth-o.width,c=this.height=this.maxHeight-o.height;this.xCenter=Math.floor(this.left+i/2+o.left),this.yCenter=Math.floor(this.top+c/2+o.top),this.drawingArea=Math.floor(Math.min(i,c)/2)}determineDataLimits(){const{min:o,max:i}=this.getMinMax(!1);this.min=Be(o)&&!isNaN(o)?o:0,this.max=Be(i)&&!isNaN(i)?i:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Zr(this.options))}generateTickLabels(o){Qr.prototype.generateTickLabels.call(this,o),this._pointLabels=this.getLabels().map((i,c)=>{const u=fe(this.options.pointLabels.callback,[i,c],this);return u||0===u?u:""}).filter((i,c)=>this.chart.getDataVisibility(c))}fit(){const o=this.options;o.display&&o.pointLabels.display?function bg(l){const o={l:l.left+l._padding.left,r:l.right-l._padding.right,t:l.top+l._padding.top,b:l.bottom-l._padding.bottom},i=Object.assign({},o),c=[],u=[],d=l._pointLabels.length,h=l.options.pointLabels,p=h.centerPointLabels?Ee/d:0;for(let b=0;b<d;b++){const C=h.setContext(l.getPointLabelContext(b));u[b]=C.padding;const v=l.getPointPosition(b,l.drawingArea+u[b],p),w=Re(C.font),T=Wc(l.ctx,w,l._pointLabels[b]);c[b]=T;const O=Tn(l.getIndexAngle(b)+p),M=Math.round(Rr(O));yd(i,o,O,jc(M,v.x,T.w,0,180),jc(M,v.y,T.h,90,270))}l.setCenterPoint(o.l-i.l,i.r-o.r,o.t-i.t,i.b-o.b),l._pointLabelItems=function Cd(l,o,i){const c=[],u=l._pointLabels.length,d=l.options,h=Zr(d)/2,p=l.drawingArea,b=d.pointLabels.centerPointLabels?Ee/u:0;for(let C=0;C<u;C++){const v=l.getPointPosition(C,p+h+i[C],b),w=Math.round(Rr(Tn(v.angle+Ae))),T=o[C],O=xg(v.y,T.h,w),M=yg(w),I=Cg(v.x,T.w,M);c.push({x:v.x,y:O,textAlign:M,left:I,top:O,right:I+T.w,bottom:O+T.h})}return c}(l,c,u)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(o,i,c,u){this.xCenter+=Math.floor((o-i)/2),this.yCenter+=Math.floor((c-u)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(o,i,c,u))}getIndexAngle(o){return Tn(o*(be/(this._pointLabels.length||1))+Hn(this.options.startAngle||0))}getDistanceFromCenterForValue(o){if(dt(o))return NaN;const i=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-o)*i:(o-this.min)*i}getValueForDistanceFromCenter(o){if(dt(o))return NaN;const i=o/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-i:this.min+i}getPointLabelContext(o){const i=this._pointLabels||[];if(o>=0&&o<i.length){const c=i[o];return function vd(l,o,i){return Vs(l,{label:i,index:o,type:"pointLabel"})}(this.getContext(),o,c)}}getPointPosition(o,i,c=0){const u=this.getIndexAngle(o)-Ae+c;return{x:Math.cos(u)*i+this.xCenter,y:Math.sin(u)*i+this.yCenter,angle:u}}getPointPositionForValue(o,i){return this.getPointPosition(o,this.getDistanceFromCenterForValue(i))}getBasePosition(o){return this.getPointPositionForValue(o||0,this.getBaseValue())}getPointLabelPosition(o){const{left:i,top:c,right:u,bottom:d}=this._pointLabelItems[o];return{left:i,top:c,right:u,bottom:d}}drawBackground(){const{backgroundColor:o,grid:{circular:i}}=this.options;if(o){const c=this.ctx;c.save(),c.beginPath(),qc(this,this.getDistanceFromCenterForValue(this._endValue),i,this._pointLabels.length),c.closePath(),c.fillStyle=o,c.fill(),c.restore()}}drawGrid(){const o=this.ctx,i=this.options,{angleLines:c,grid:u}=i,d=this._pointLabels.length;let h,p,b;if(i.pointLabels.display&&function xd(l,o){const{ctx:i,options:{pointLabels:c}}=l;for(let u=o-1;u>=0;u--){const d=c.setContext(l.getPointLabelContext(u)),h=Re(d.font),{x:p,y:b,textAlign:C,left:v,top:w,right:T,bottom:O}=l._pointLabelItems[u],{backdropColor:M}=d;if(!dt(M)){const I=W(d.backdropPadding);i.fillStyle=M,i.fillRect(v-I.left,w-I.top,T-v+I.width,O-w+I.height)}gn(i,l._pointLabels[u],p,b+h.lineHeight/2,h,{color:d.color,textAlign:C,textBaseline:"middle"})}}(this,d),u.display&&this.ticks.forEach((C,v)=>{0!==v&&(p=this.getDistanceFromCenterForValue(C.value),function vg(l,o,i,c){const u=l.ctx,d=o.circular,{color:h,lineWidth:p}=o;!d&&!c||!h||!p||i<0||(u.save(),u.strokeStyle=h,u.lineWidth=p,u.setLineDash(o.borderDash),u.lineDashOffset=o.borderDashOffset,u.beginPath(),qc(l,i,d,c),u.closePath(),u.stroke(),u.restore())}(this,u.setContext(this.getContext(v-1)),p,d))}),c.display){for(o.save(),h=d-1;h>=0;h--){const C=c.setContext(this.getPointLabelContext(h)),{color:v,lineWidth:w}=C;!w||!v||(o.lineWidth=w,o.strokeStyle=v,o.setLineDash(C.borderDash),o.lineDashOffset=C.borderDashOffset,p=this.getDistanceFromCenterForValue(i.ticks.reverse?this.min:this.max),b=this.getPointPosition(h,p),o.beginPath(),o.moveTo(this.xCenter,this.yCenter),o.lineTo(b.x,b.y),o.stroke())}o.restore()}}drawBorder(){}drawLabels(){const o=this.ctx,i=this.options,c=i.ticks;if(!c.display)return;const u=this.getIndexAngle(0);let d,h;o.save(),o.translate(this.xCenter,this.yCenter),o.rotate(u),o.textAlign="center",o.textBaseline="middle",this.ticks.forEach((p,b)=>{if(0===b&&!i.reverse)return;const C=c.setContext(this.getContext(b)),v=Re(C.font);if(d=this.getDistanceFromCenterForValue(this.ticks[b].value),C.showLabelBackdrop){o.font=v.string,h=o.measureText(p.label).width,o.fillStyle=C.backdropColor;const w=W(C.backdropPadding);o.fillRect(-h/2-w.left,-d-v.size/2-w.top,h+w.width,v.size+w.height)}gn(o,p.label,0,-d,v,{color:C.color})}),o.restore()}drawTitle(){}}Fs.id="radialLinear",Fs.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Pi.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:l=>l,padding:5,centerPointLabels:!1}},Fs.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"},Fs.descriptors={angleLines:{_fallback:"grid"}};const Yi={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dn=Object.keys(Yi);function _g(l,o){return l-o}function Kc(l,o){if(dt(o))return null;const i=l._adapter,{parser:c,round:u,isoWeekday:d}=l._parseOpts;let h=o;return"function"==typeof c&&(h=c(h)),Be(h)||(h="string"==typeof c?i.parse(h,c):i.parse(h)),null===h?null:(u&&(h="week"!==u||!Ar(d)&&!0!==d?i.startOf(h,u):i.startOf(h,"isoWeek",d)),+h)}function Eo(l,o,i,c){const u=Dn.length;for(let d=Dn.indexOf(l);d<u-1;++d){const h=Yi[Dn[d]],p=h.steps?h.steps:Number.MAX_SAFE_INTEGER;if(h.common&&Math.ceil((i-o)/(p*h.size))<=c)return Dn[d]}return Dn[u-1]}function Yc(l,o,i){if(i){if(i.length){const{lo:c,hi:u}=pi(i,o);l[i[c]>=o?i[c]:i[u]]=!0}}else l[o]=!0}function Gc(l,o,i){const c=[],u={},d=o.length;let h,p;for(h=0;h<d;++h)p=o[h],u[p]=h,c.push({value:p,major:!1});return 0!==d&&i?function Sg(l,o,i,c){const u=l._adapter,d=+u.startOf(o[0].value,c),h=o[o.length-1].value;let p,b;for(p=d;p<=h;p=+u.add(p,1,c))b=i[p],b>=0&&(o[b].major=!0);return o}(l,c,u,i):c}class Xs extends Ks{constructor(o){super(o),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(o,i){const c=o.time||(o.time={}),u=this._adapter=new Jo._date(o.adapters.date);es(c.displayFormats,u.formats()),this._parseOpts={parser:c.parser,round:c.round,isoWeekday:c.isoWeekday},super.init(o),this._normalized=i.normalized}parse(o,i){return void 0===o?null:Kc(this,o)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const o=this.options,i=this._adapter,c=o.time.unit||"day";let{min:u,max:d,minDefined:h,maxDefined:p}=this.getUserBounds();function b(C){!h&&!isNaN(C.min)&&(u=Math.min(u,C.min)),!p&&!isNaN(C.max)&&(d=Math.max(d,C.max))}(!h||!p)&&(b(this._getLabelBounds()),("ticks"!==o.bounds||"labels"!==o.ticks.source)&&b(this.getMinMax(!1))),u=Be(u)&&!isNaN(u)?u:+i.startOf(Date.now(),c),d=Be(d)&&!isNaN(d)?d:+i.endOf(Date.now(),c)+1,this.min=Math.min(u,d-1),this.max=Math.max(u+1,d)}_getLabelBounds(){const o=this.getLabelTimestamps();let i=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY;return o.length&&(i=o[0],c=o[o.length-1]),{min:i,max:c}}buildTicks(){const o=this.options,i=o.time,c=o.ticks,u="labels"===c.source?this.getLabelTimestamps():this._generate();"ticks"===o.bounds&&u.length&&(this.min=this._userMin||u[0],this.max=this._userMax||u[u.length-1]);const d=this.min,p=Vl(u,d,this.max);return this._unit=i.unit||(c.autoSkip?Eo(i.minUnit,this.min,this.max,this._getLabelCapacity(d)):function Jr(l,o,i,c,u){for(let d=Dn.length-1;d>=Dn.indexOf(i);d--){const h=Dn[d];if(Yi[h].common&&l._adapter.diff(u,c,h)>=o-1)return h}return Dn[i?Dn.indexOf(i):0]}(this,p.length,i.minUnit,this.min,this.max)),this._majorUnit=c.major.enabled&&"year"!==this._unit?function or(l){for(let o=Dn.indexOf(l)+1,i=Dn.length;o<i;++o)if(Yi[Dn[o]].common)return Dn[o]}(this._unit):void 0,this.initOffsets(u),o.reverse&&p.reverse(),Gc(this,p,this._majorUnit)}initOffsets(o){let u,d,i=0,c=0;this.options.offset&&o.length&&(u=this.getDecimalForValue(o[0]),i=1===o.length?1-u:(this.getDecimalForValue(o[1])-u)/2,d=this.getDecimalForValue(o[o.length-1]),c=1===o.length?d:(d-this.getDecimalForValue(o[o.length-2]))/2);const h=o.length<3?.5:.25;i=Ue(i,0,h),c=Ue(c,0,h),this._offsets={start:i,end:c,factor:1/(i+1+c)}}_generate(){const o=this._adapter,i=this.min,c=this.max,u=this.options,d=u.time,h=d.unit||Eo(d.minUnit,i,c,this._getLabelCapacity(i)),p=Vt(d.stepSize,1),b="week"===h&&d.isoWeekday,C=Ar(b)||!0===b,v={};let T,O,w=i;if(C&&(w=+o.startOf(w,"isoWeek",b)),w=+o.startOf(w,C?"day":h),o.diff(c,i,h)>1e5*p)throw new Error(i+" and "+c+" are too far apart with stepSize of "+p+" "+h);const M="data"===u.ticks.source&&this.getDataTimestamps();for(T=w,O=0;T<c;T=+o.add(T,p,h),O++)Yc(v,T,M);return(T===c||"ticks"===u.bounds||1===O)&&Yc(v,T,M),Object.keys(v).sort((I,U)=>I-U).map(I=>+I)}getLabelForValue(o){const c=this.options.time;return this._adapter.format(o,c.tooltipFormat?c.tooltipFormat:c.displayFormats.datetime)}_tickFormatFunction(o,i,c,u){const d=this.options,h=d.time.displayFormats,p=this._unit,b=this._majorUnit,v=b&&h[b],w=c[i],O=this._adapter.format(o,u||(b&&v&&w&&w.major?v:p&&h[p])),M=d.ticks.callback;return M?fe(M,[O,i,c],this):O}generateTickLabels(o){let i,c,u;for(i=0,c=o.length;i<c;++i)u=o[i],u.label=this._tickFormatFunction(u.value,i,o)}getDecimalForValue(o){return null===o?NaN:(o-this.min)/(this.max-this.min)}getPixelForValue(o){const i=this._offsets,c=this.getDecimalForValue(o);return this.getPixelForDecimal((i.start+c)*i.factor)}getValueForPixel(o){const i=this._offsets,c=this.getDecimalForPixel(o)/i.factor-i.end;return this.min+c*(this.max-this.min)}_getLabelSize(o){const i=this.options.ticks,c=this.ctx.measureText(o).width,u=Hn(this.isHorizontal()?i.maxRotation:i.minRotation),d=Math.cos(u),h=Math.sin(u),p=this._resolveTickFontOptions(0).size;return{w:c*d+p*h,h:c*h+p*d}}_getLabelCapacity(o){const i=this.options.time,c=i.displayFormats,u=c[i.unit]||c.millisecond,d=this._tickFormatFunction(o,0,Gc(this,[o],this._majorUnit),u),h=this._getLabelSize(d),p=Math.floor(this.isHorizontal()?this.width/h.w:this.height/h.h)-1;return p>0?p:1}getDataTimestamps(){let i,c,o=this._cache.data||[];if(o.length)return o;const u=this.getMatchingVisibleMetas();if(this._normalized&&u.length)return this._cache.data=u[0].controller.getAllParsedValues(this);for(i=0,c=u.length;i<c;++i)o=o.concat(u[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(o)}getLabelTimestamps(){const o=this._cache.labels||[];let i,c;if(o.length)return o;const u=this.getLabels();for(i=0,c=u.length;i<c;++i)o.push(Kc(this,u[i]));return this._cache.labels=this._normalized?o:this.normalize(o)}normalize(o){return Aa(o.sort(_g))}}function Ao(l,o,i){let d,h,p,b,c=0,u=l.length-1;i?(o>=l[c].pos&&o<=l[u].pos&&({lo:c,hi:u}=ps(l,"pos",o)),({pos:d,time:p}=l[c]),({pos:h,time:b}=l[u])):(o>=l[c].time&&o<=l[u].time&&({lo:c,hi:u}=ps(l,"time",o)),({time:d,pos:p}=l[c]),({time:h,pos:b}=l[u]));const C=h-d;return C?p+(b-p)*(o-d)/C:p}Xs.id="time",Xs.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};class Xc extends Xs{constructor(o){super(o),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const o=this._getTimestampsForTable(),i=this._table=this.buildLookupTable(o);this._minPos=Ao(i,this.min),this._tableRange=Ao(i,this.max)-this._minPos,super.initOffsets(o)}buildLookupTable(o){const{min:i,max:c}=this,u=[],d=[];let h,p,b,C,v;for(h=0,p=o.length;h<p;++h)C=o[h],C>=i&&C<=c&&u.push(C);if(u.length<2)return[{time:i,pos:0},{time:c,pos:1}];for(h=0,p=u.length;h<p;++h)v=u[h+1],b=u[h-1],C=u[h],Math.round((v+b)/2)!==C&&d.push({time:C,pos:h/(p-1)});return d}_getTimestampsForTable(){let o=this._cache.all||[];if(o.length)return o;const i=this.getDataTimestamps(),c=this.getLabelTimestamps();return o=i.length&&c.length?this.normalize(i.concat(c)):i.length?i:c,o=this._cache.all=o,o}getDecimalForValue(o){return(Ao(this._table,o)-this._minPos)/this._tableRange}getValueForPixel(o){const i=this._offsets,c=this.getDecimalForPixel(o)/i.factor-i.end;return Ao(this._table,c*this._tableRange+this._minPos,!0)}}Xc.id="timeseries",Xc.defaults=Xs.defaults;var _d=Object.freeze({__proto__:null,CategoryScale:al,LinearScale:ll,LogarithmicScale:sr,RadialLinearScale:Fs,TimeScale:Xs,TimeSeriesScale:Xc});return Zt.register(ed,_d,Hi,pg),Zt.helpers=wt({},hc),Zt._adapters=Jo,Zt.Animation=Rf,Zt.Animations=bc,Zt.animator=As,Zt.controllers=Bs.controllers.items,Zt.DatasetController=Pn,Zt.Element=Kn,Zt.elements=Hi,Zt.Interaction=Jl,Zt.layouts=de,Zt.platforms=Pe,Zt.Scale=Ks,Zt.Ticks=Pi,Object.assign(Zt,ed,_d,Hi,pg,Pe),Zt.Chart=Zt,"undefined"!=typeof window&&(window.Chart=Zt),Zt});